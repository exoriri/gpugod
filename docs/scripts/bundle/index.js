"use strict";function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function _createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function e(_e2){throw _e2;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o);},n:function n(){var step=it.next();normalCompletion=step.done;return step;},e:function e(_e3){didErr=true;err=_e3;},f:function f(){try{if(!normalCompletion&&it["return"]!=null)it["return"]();}finally{if(didErr)throw err;}}};}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i];}return arr2;}function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj;}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;},_typeof(obj);}(function(){var __create=Object.create;var __defProp=Object.defineProperty;var __getOwnPropDesc=Object.getOwnPropertyDescriptor;var __getOwnPropNames=Object.getOwnPropertyNames;var __getProtoOf=Object.getPrototypeOf;var __hasOwnProp=Object.prototype.hasOwnProperty;var __commonJS=function __commonJS(cb,mod){return function __require(){return mod||(0,cb[__getOwnPropNames(cb)[0]])((mod={exports:{}}).exports,mod),mod.exports;};};var __export=function __export(target,all){for(var name in all){__defProp(target,name,{get:all[name],enumerable:true});}};var __copyProps=function __copyProps(to,from3,except,desc){if(from3&&_typeof(from3)==="object"||typeof from3==="function"){var _iterator=_createForOfIteratorHelper(__getOwnPropNames(from3)),_step;try{var _loop3=function _loop3(){var key=_step.value;if(!__hasOwnProp.call(to,key)&&key!==except)__defProp(to,key,{get:function get(){return from3[key];},enumerable:!(desc=__getOwnPropDesc(from3,key))||desc.enumerable});};for(_iterator.s();!(_step=_iterator.n()).done;){_loop3();}}catch(err){_iterator.e(err);}finally{_iterator.f();}}return to;};var __toESM=function __toESM(mod,isNodeMode,target){return target=mod!=null?__create(__getProtoOf(mod)):{},__copyProps(isNodeMode||!mod||!mod.__esModule?__defProp(target,"default",{value:mod,enumerable:true}):target,mod);};// node_modules/tslib/tslib.js
var require_tslib=__commonJS({"node_modules/tslib/tslib.js":function node_modulesTslibTslibJs(exports,module){var __extends2;var __assign2;var __rest2;var __decorate2;var __param2;var __metadata2;var __awaiter2;var __generator2;var __exportStar2;var __values2;var __read2;var __spread2;var __spreadArrays2;var _await;var __asyncGenerator2;var __asyncDelegator2;var __asyncValues2;var __makeTemplateObject2;var __importStar2;var __importDefault2;var __classPrivateFieldGet2;var __classPrivateFieldSet2;var __createBinding2;(function(factory3){var root2=(typeof global==="undefined"?"undefined":_typeof(global))==="object"?global:(typeof self==="undefined"?"undefined":_typeof(self))==="object"?self:_typeof(this)==="object"?this:{};if(typeof define==="function"&&define.amd){define("tslib",["exports"],function(exports2){factory3(createExporter(root2,createExporter(exports2)));});}else if(_typeof(module)==="object"&&_typeof(module.exports)==="object"){factory3(createExporter(root2,createExporter(module.exports)));}else{factory3(createExporter(root2));}function createExporter(exports2,previous){if(exports2!==root2){if(typeof Object.create==="function"){Object.defineProperty(exports2,"__esModule",{value:true});}else{exports2.__esModule=true;}}return function(id,v){return exports2[id]=previous?previous(id,v):v;};}})(function(exporter){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b){d2.__proto__=b;}||function(d2,b){for(var p in b){if(b.hasOwnProperty(p))d2[p]=b[p];}};__extends2=function __extends2(d2,b){extendStatics(d2,b);function __(){this.constructor=d2;}d2.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __());};__assign2=Object.assign||function(t2){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s){if(Object.prototype.hasOwnProperty.call(s,p))t2[p]=s[p];}}return t2;};__rest2=function __rest2(s,e){var t2={};for(var p in s){if(Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0)t2[p]=s[p];}if(s!=null&&typeof Object.getOwnPropertySymbols==="function")for(var i=0,p=Object.getOwnPropertySymbols(s);i<p.length;i++){if(e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i]))t2[p[i]]=s[p[i]];}return t2;};__decorate2=function __decorate2(decorators,target,key,desc){var c=arguments.length,r2=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d2;if((typeof Reflect==="undefined"?"undefined":_typeof(Reflect))==="object"&&typeof Reflect.decorate==="function")r2=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--){if(d2=decorators[i])r2=(c<3?d2(r2):c>3?d2(target,key,r2):d2(target,key))||r2;}return c>3&&r2&&Object.defineProperty(target,key,r2),r2;};__param2=function __param2(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex);};};__metadata2=function __metadata2(metadataKey,metadataValue){if((typeof Reflect==="undefined"?"undefined":_typeof(Reflect))==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(metadataKey,metadataValue);};__awaiter2=function __awaiter2(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value);});}return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value));}catch(e){reject(e);}}function rejected(value){try{step(generator["throw"](value));}catch(e){reject(e);}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected);}step((generator=generator.apply(thisArg,_arguments||[])).next());});};__generator2=function __generator2(thisArg,body){var _={label:0,sent:function sent(){if(t2[0]&1)throw t2[1];return t2[1];},trys:[],ops:[]},f,y,t2,g;return g={next:verb(0),"throw":verb(1),"return":verb(2)},typeof Symbol==="function"&&(g[Symbol.iterator]=function(){return this;}),g;function verb(n){return function(v){return step([n,v]);};}function step(op){if(f)throw new TypeError("Generator is already executing.");while(_){try{if(f=1,y&&(t2=op[0]&2?y["return"]:op[0]?y["throw"]||((t2=y["return"])&&t2.call(y),0):y.next)&&!(t2=t2.call(y,op[1])).done)return t2;if(y=0,t2)op=[op[0]&2,t2.value];switch(op[0]){case 0:case 1:t2=op;break;case 4:_.label++;return{value:op[1],done:false};case 5:_.label++;y=op[1];op=[0];continue;case 7:op=_.ops.pop();_.trys.pop();continue;default:if(!(t2=_.trys,t2=t2.length>0&&t2[t2.length-1])&&(op[0]===6||op[0]===2)){_=0;continue;}if(op[0]===3&&(!t2||op[1]>t2[0]&&op[1]<t2[3])){_.label=op[1];break;}if(op[0]===6&&_.label<t2[1]){_.label=t2[1];t2=op;break;}if(t2&&_.label<t2[2]){_.label=t2[2];_.ops.push(op);break;}if(t2[2])_.ops.pop();_.trys.pop();continue;}op=body.call(thisArg,_);}catch(e){op=[6,e];y=0;}finally{f=t2=0;}}if(op[0]&5)throw op[1];return{value:op[0]?op[1]:void 0,done:true};}};__createBinding2=function __createBinding2(o,m,k,k2){if(k2===void 0)k2=k;o[k2]=m[k];};__exportStar2=function __exportStar2(m,exports2){for(var p in m){if(p!=="default"&&!exports2.hasOwnProperty(p))exports2[p]=m[p];}};__values2=function __values2(o){var s=typeof Symbol==="function"&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&typeof o.length==="number")return{next:function next(){if(o&&i>=o.length)o=void 0;return{value:o&&o[i++],done:!o};}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.");};__read2=function __read2(o,n){var m=typeof Symbol==="function"&&o[Symbol.iterator];if(!m)return o;var i=m.call(o),r2,ar=[],e;try{while((n===void 0||n-->0)&&!(r2=i.next()).done){ar.push(r2.value);}}catch(error){e={error:error};}finally{try{if(r2&&!r2.done&&(m=i["return"]))m.call(i);}finally{if(e)throw e.error;}}return ar;};__spread2=function __spread2(){for(var ar=[],i=0;i<arguments.length;i++){ar=ar.concat(__read2(arguments[i]));}return ar;};__spreadArrays2=function __spreadArrays2(){for(var s=0,i=0,il=arguments.length;i<il;i++){s+=arguments[i].length;}for(var r2=Array(s),k=0,i=0;i<il;i++){for(var a=arguments[i],j=0,jl=a.length;j<jl;j++,k++){r2[k]=a[j];}}return r2;};_await=function __await2(v){return this instanceof _await?(this.v=v,this):new _await(v);};__asyncGenerator2=function __asyncGenerator2(thisArg,_arguments,generator){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var g=generator.apply(thisArg,_arguments||[]),i,q=[];return i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this;},i;function verb(n){if(g[n])i[n]=function(v){return new Promise(function(a,b){q.push([n,v,a,b])>1||resume(n,v);});};}function resume(n,v){try{step(g[n](v));}catch(e){settle(q[0][3],e);}}function step(r2){r2.value instanceof _await?Promise.resolve(r2.value.v).then(fulfill,reject):settle(q[0][2],r2);}function fulfill(value){resume("next",value);}function reject(value){resume("throw",value);}function settle(f,v){if(f(v),q.shift(),q.length)resume(q[0][0],q[0][1]);}};__asyncDelegator2=function __asyncDelegator2(o){var i,p;return i={},verb("next"),verb("throw",function(e){throw e;}),verb("return"),i[Symbol.iterator]=function(){return this;},i;function verb(n,f){i[n]=o[n]?function(v){return(p=!p)?{value:_await(o[n](v)),done:n==="return"}:f?f(v):v;}:f;}};__asyncValues2=function __asyncValues2(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var m=o[Symbol.asyncIterator],i;return m?m.call(o):(o=typeof __values2==="function"?__values2(o):o[Symbol.iterator](),i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this;},i);function verb(n){i[n]=o[n]&&function(v){return new Promise(function(resolve,reject){v=o[n](v),settle(resolve,reject,v.done,v.value);});};}function settle(resolve,reject,d2,v){Promise.resolve(v).then(function(v2){resolve({value:v2,done:d2});},reject);}};__makeTemplateObject2=function __makeTemplateObject2(cooked,raw){if(Object.defineProperty){Object.defineProperty(cooked,"raw",{value:raw});}else{cooked.raw=raw;}return cooked;};__importStar2=function __importStar2(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null){for(var k in mod){if(Object.hasOwnProperty.call(mod,k))result[k]=mod[k];}}result["default"]=mod;return result;};__importDefault2=function __importDefault2(mod){return mod&&mod.__esModule?mod:{"default":mod};};__classPrivateFieldGet2=function __classPrivateFieldGet2(receiver,privateMap){if(!privateMap.has(receiver)){throw new TypeError("attempted to get private field on non-instance");}return privateMap.get(receiver);};__classPrivateFieldSet2=function __classPrivateFieldSet2(receiver,privateMap,value){if(!privateMap.has(receiver)){throw new TypeError("attempted to set private field on non-instance");}privateMap.set(receiver,value);return value;};exporter("__extends",__extends2);exporter("__assign",__assign2);exporter("__rest",__rest2);exporter("__decorate",__decorate2);exporter("__param",__param2);exporter("__metadata",__metadata2);exporter("__awaiter",__awaiter2);exporter("__generator",__generator2);exporter("__exportStar",__exportStar2);exporter("__createBinding",__createBinding2);exporter("__values",__values2);exporter("__read",__read2);exporter("__spread",__spread2);exporter("__spreadArrays",__spreadArrays2);exporter("__await",_await);exporter("__asyncGenerator",__asyncGenerator2);exporter("__asyncDelegator",__asyncDelegator2);exporter("__asyncValues",__asyncValues2);exporter("__makeTemplateObject",__makeTemplateObject2);exporter("__importStar",__importStar2);exporter("__importDefault",__importDefault2);exporter("__classPrivateFieldGet",__classPrivateFieldGet2);exporter("__classPrivateFieldSet",__classPrivateFieldSet2);});}});// node_modules/core-js/internals/global.js
var require_global=__commonJS({"node_modules/core-js/internals/global.js":function node_modulesCoreJsInternalsGlobalJs(exports,module){var check=function check(it){return it&&it.Math==Math&&it;};module.exports=check((typeof globalThis==="undefined"?"undefined":_typeof(globalThis))=="object"&&globalThis)||check((typeof window==="undefined"?"undefined":_typeof(window))=="object"&&window)||check((typeof self==="undefined"?"undefined":_typeof(self))=="object"&&self)||check((typeof global==="undefined"?"undefined":_typeof(global))=="object"&&global)||function(){return this;}()||Function("return this")();}});// node_modules/core-js/internals/fails.js
var require_fails=__commonJS({"node_modules/core-js/internals/fails.js":function node_modulesCoreJsInternalsFailsJs(exports,module){module.exports=function(exec){try{return!!exec();}catch(error){return true;}};}});// node_modules/core-js/internals/function-bind-native.js
var require_function_bind_native=__commonJS({"node_modules/core-js/internals/function-bind-native.js":function node_modulesCoreJsInternalsFunctionBindNativeJs(exports,module){var fails=require_fails();module.exports=!fails(function(){var test=function(){}.bind();return typeof test!="function"||test.hasOwnProperty("prototype");});}});// node_modules/core-js/internals/function-uncurry-this.js
var require_function_uncurry_this=__commonJS({"node_modules/core-js/internals/function-uncurry-this.js":function node_modulesCoreJsInternalsFunctionUncurryThisJs(exports,module){var NATIVE_BIND=require_function_bind_native();var FunctionPrototype=Function.prototype;var bind3=FunctionPrototype.bind;var call=FunctionPrototype.call;var uncurryThis=NATIVE_BIND&&bind3.bind(call,call);module.exports=NATIVE_BIND?function(fn){return fn&&uncurryThis(fn);}:function(fn){return fn&&function(){return call.apply(fn,arguments);};};}});// node_modules/core-js/internals/classof-raw.js
var require_classof_raw=__commonJS({"node_modules/core-js/internals/classof-raw.js":function node_modulesCoreJsInternalsClassofRawJs(exports,module){var uncurryThis=require_function_uncurry_this();var toString2=uncurryThis({}.toString);var stringSlice=uncurryThis("".slice);module.exports=function(it){return stringSlice(toString2(it),8,-1);};}});// node_modules/core-js/internals/indexed-object.js
var require_indexed_object=__commonJS({"node_modules/core-js/internals/indexed-object.js":function node_modulesCoreJsInternalsIndexedObjectJs(exports,module){var global2=require_global();var uncurryThis=require_function_uncurry_this();var fails=require_fails();var classof=require_classof_raw();var Object2=global2.Object;var split=uncurryThis("".split);module.exports=fails(function(){return!Object2("z").propertyIsEnumerable(0);})?function(it){return classof(it)=="String"?split(it,""):Object2(it);}:Object2;}});// node_modules/core-js/internals/require-object-coercible.js
var require_require_object_coercible=__commonJS({"node_modules/core-js/internals/require-object-coercible.js":function node_modulesCoreJsInternalsRequireObjectCoercibleJs(exports,module){var global2=require_global();var TypeError2=global2.TypeError;module.exports=function(it){if(it==void 0)throw TypeError2("Can't call method on "+it);return it;};}});// node_modules/core-js/internals/to-indexed-object.js
var require_to_indexed_object=__commonJS({"node_modules/core-js/internals/to-indexed-object.js":function node_modulesCoreJsInternalsToIndexedObjectJs(exports,module){var IndexedObject=require_indexed_object();var requireObjectCoercible=require_require_object_coercible();module.exports=function(it){return IndexedObject(requireObjectCoercible(it));};}});// node_modules/core-js/internals/is-pure.js
var require_is_pure=__commonJS({"node_modules/core-js/internals/is-pure.js":function node_modulesCoreJsInternalsIsPureJs(exports,module){module.exports=false;}});// node_modules/core-js/internals/set-global.js
var require_set_global=__commonJS({"node_modules/core-js/internals/set-global.js":function node_modulesCoreJsInternalsSetGlobalJs(exports,module){var global2=require_global();var defineProperty=Object.defineProperty;module.exports=function(key,value){try{defineProperty(global2,key,{value:value,configurable:true,writable:true});}catch(error){global2[key]=value;}return value;};}});// node_modules/core-js/internals/shared-store.js
var require_shared_store=__commonJS({"node_modules/core-js/internals/shared-store.js":function node_modulesCoreJsInternalsSharedStoreJs(exports,module){var global2=require_global();var setGlobal=require_set_global();var SHARED="__core-js_shared__";var store=global2[SHARED]||setGlobal(SHARED,{});module.exports=store;}});// node_modules/core-js/internals/shared.js
var require_shared=__commonJS({"node_modules/core-js/internals/shared.js":function node_modulesCoreJsInternalsSharedJs(exports,module){var IS_PURE=require_is_pure();var store=require_shared_store();(module.exports=function(key,value){return store[key]||(store[key]=value!==void 0?value:{});})("versions",[]).push({version:"3.22.5",mode:IS_PURE?"pure":"global",copyright:"\xA9 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.22.5/LICENSE",source:"https://github.com/zloirock/core-js"});}});// node_modules/core-js/internals/to-object.js
var require_to_object=__commonJS({"node_modules/core-js/internals/to-object.js":function node_modulesCoreJsInternalsToObjectJs(exports,module){var global2=require_global();var requireObjectCoercible=require_require_object_coercible();var Object2=global2.Object;module.exports=function(argument){return Object2(requireObjectCoercible(argument));};}});// node_modules/core-js/internals/has-own-property.js
var require_has_own_property=__commonJS({"node_modules/core-js/internals/has-own-property.js":function node_modulesCoreJsInternalsHasOwnPropertyJs(exports,module){var uncurryThis=require_function_uncurry_this();var toObject=require_to_object();var hasOwnProperty2=uncurryThis({}.hasOwnProperty);module.exports=Object.hasOwn||function hasOwn(it,key){return hasOwnProperty2(toObject(it),key);};}});// node_modules/core-js/internals/uid.js
var require_uid=__commonJS({"node_modules/core-js/internals/uid.js":function node_modulesCoreJsInternalsUidJs(exports,module){var uncurryThis=require_function_uncurry_this();var id=0;var postfix=Math.random();var toString2=uncurryThis(1 .toString);module.exports=function(key){return"Symbol("+(key===void 0?"":key)+")_"+toString2(++id+postfix,36);};}});// node_modules/core-js/internals/is-callable.js
var require_is_callable=__commonJS({"node_modules/core-js/internals/is-callable.js":function node_modulesCoreJsInternalsIsCallableJs(exports,module){module.exports=function(argument){return typeof argument=="function";};}});// node_modules/core-js/internals/get-built-in.js
var require_get_built_in=__commonJS({"node_modules/core-js/internals/get-built-in.js":function node_modulesCoreJsInternalsGetBuiltInJs(exports,module){var global2=require_global();var isCallable=require_is_callable();var aFunction=function aFunction(argument){return isCallable(argument)?argument:void 0;};module.exports=function(namespace,method){return arguments.length<2?aFunction(global2[namespace]):global2[namespace]&&global2[namespace][method];};}});// node_modules/core-js/internals/engine-user-agent.js
var require_engine_user_agent=__commonJS({"node_modules/core-js/internals/engine-user-agent.js":function node_modulesCoreJsInternalsEngineUserAgentJs(exports,module){var getBuiltIn=require_get_built_in();module.exports=getBuiltIn("navigator","userAgent")||"";}});// node_modules/core-js/internals/engine-v8-version.js
var require_engine_v8_version=__commonJS({"node_modules/core-js/internals/engine-v8-version.js":function node_modulesCoreJsInternalsEngineV8VersionJs(exports,module){var global2=require_global();var userAgent=require_engine_user_agent();var process=global2.process;var Deno=global2.Deno;var versions=process&&process.versions||Deno&&Deno.version;var v8=versions&&versions.v8;var match;var version2;if(v8){match=v8.split(".");version2=match[0]>0&&match[0]<4?1:+(match[0]+match[1]);}if(!version2&&userAgent){match=userAgent.match(/Edge\/(\d+)/);if(!match||match[1]>=74){match=userAgent.match(/Chrome\/(\d+)/);if(match)version2=+match[1];}}module.exports=version2;}});// node_modules/core-js/internals/native-symbol.js
var require_native_symbol=__commonJS({"node_modules/core-js/internals/native-symbol.js":function node_modulesCoreJsInternalsNativeSymbolJs(exports,module){var V8_VERSION=require_engine_v8_version();var fails=require_fails();module.exports=!!Object.getOwnPropertySymbols&&!fails(function(){var symbol=Symbol();return!String(symbol)||!(Object(symbol)instanceof Symbol)||!Symbol.sham&&V8_VERSION&&V8_VERSION<41;});}});// node_modules/core-js/internals/use-symbol-as-uid.js
var require_use_symbol_as_uid=__commonJS({"node_modules/core-js/internals/use-symbol-as-uid.js":function node_modulesCoreJsInternalsUseSymbolAsUidJs(exports,module){var NATIVE_SYMBOL=require_native_symbol();module.exports=NATIVE_SYMBOL&&!Symbol.sham&&_typeof(Symbol.iterator)=="symbol";}});// node_modules/core-js/internals/well-known-symbol.js
var require_well_known_symbol=__commonJS({"node_modules/core-js/internals/well-known-symbol.js":function node_modulesCoreJsInternalsWellKnownSymbolJs(exports,module){var global2=require_global();var shared=require_shared();var hasOwn=require_has_own_property();var uid=require_uid();var NATIVE_SYMBOL=require_native_symbol();var USE_SYMBOL_AS_UID=require_use_symbol_as_uid();var WellKnownSymbolsStore=shared("wks");var Symbol3=global2.Symbol;var symbolFor=Symbol3&&Symbol3["for"];var createWellKnownSymbol=USE_SYMBOL_AS_UID?Symbol3:Symbol3&&Symbol3.withoutSetter||uid;module.exports=function(name){if(!hasOwn(WellKnownSymbolsStore,name)||!(NATIVE_SYMBOL||typeof WellKnownSymbolsStore[name]=="string")){var description="Symbol."+name;if(NATIVE_SYMBOL&&hasOwn(Symbol3,name)){WellKnownSymbolsStore[name]=Symbol3[name];}else if(USE_SYMBOL_AS_UID&&symbolFor){WellKnownSymbolsStore[name]=symbolFor(description);}else{WellKnownSymbolsStore[name]=createWellKnownSymbol(description);}}return WellKnownSymbolsStore[name];};}});// node_modules/core-js/internals/is-object.js
var require_is_object=__commonJS({"node_modules/core-js/internals/is-object.js":function node_modulesCoreJsInternalsIsObjectJs(exports,module){var isCallable=require_is_callable();module.exports=function(it){return _typeof(it)=="object"?it!==null:isCallable(it);};}});// node_modules/core-js/internals/an-object.js
var require_an_object=__commonJS({"node_modules/core-js/internals/an-object.js":function node_modulesCoreJsInternalsAnObjectJs(exports,module){var global2=require_global();var isObject5=require_is_object();var String2=global2.String;var TypeError2=global2.TypeError;module.exports=function(argument){if(isObject5(argument))return argument;throw TypeError2(String2(argument)+" is not an object");};}});// node_modules/core-js/internals/descriptors.js
var require_descriptors=__commonJS({"node_modules/core-js/internals/descriptors.js":function node_modulesCoreJsInternalsDescriptorsJs(exports,module){var fails=require_fails();module.exports=!fails(function(){return Object.defineProperty({},1,{get:function get(){return 7;}})[1]!=7;});}});// node_modules/core-js/internals/v8-prototype-define-bug.js
var require_v8_prototype_define_bug=__commonJS({"node_modules/core-js/internals/v8-prototype-define-bug.js":function node_modulesCoreJsInternalsV8PrototypeDefineBugJs(exports,module){var DESCRIPTORS2=require_descriptors();var fails=require_fails();module.exports=DESCRIPTORS2&&fails(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:false}).prototype!=42;});}});// node_modules/core-js/internals/document-create-element.js
var require_document_create_element=__commonJS({"node_modules/core-js/internals/document-create-element.js":function node_modulesCoreJsInternalsDocumentCreateElementJs(exports,module){var global2=require_global();var isObject5=require_is_object();var document3=global2.document;var EXISTS=isObject5(document3)&&isObject5(document3.createElement);module.exports=function(it){return EXISTS?document3.createElement(it):{};};}});// node_modules/core-js/internals/ie8-dom-define.js
var require_ie8_dom_define=__commonJS({"node_modules/core-js/internals/ie8-dom-define.js":function node_modulesCoreJsInternalsIe8DomDefineJs(exports,module){var DESCRIPTORS2=require_descriptors();var fails=require_fails();var createElement=require_document_create_element();module.exports=!DESCRIPTORS2&&!fails(function(){return Object.defineProperty(createElement("div"),"a",{get:function get(){return 7;}}).a!=7;});}});// node_modules/core-js/internals/function-call.js
var require_function_call=__commonJS({"node_modules/core-js/internals/function-call.js":function node_modulesCoreJsInternalsFunctionCallJs(exports,module){var NATIVE_BIND=require_function_bind_native();var call=Function.prototype.call;module.exports=NATIVE_BIND?call.bind(call):function(){return call.apply(call,arguments);};}});// node_modules/core-js/internals/object-is-prototype-of.js
var require_object_is_prototype_of=__commonJS({"node_modules/core-js/internals/object-is-prototype-of.js":function node_modulesCoreJsInternalsObjectIsPrototypeOfJs(exports,module){var uncurryThis=require_function_uncurry_this();module.exports=uncurryThis({}.isPrototypeOf);}});// node_modules/core-js/internals/is-symbol.js
var require_is_symbol=__commonJS({"node_modules/core-js/internals/is-symbol.js":function node_modulesCoreJsInternalsIsSymbolJs(exports,module){var global2=require_global();var getBuiltIn=require_get_built_in();var isCallable=require_is_callable();var isPrototypeOf=require_object_is_prototype_of();var USE_SYMBOL_AS_UID=require_use_symbol_as_uid();var Object2=global2.Object;module.exports=USE_SYMBOL_AS_UID?function(it){return _typeof(it)=="symbol";}:function(it){var $Symbol=getBuiltIn("Symbol");return isCallable($Symbol)&&isPrototypeOf($Symbol.prototype,Object2(it));};}});// node_modules/core-js/internals/try-to-string.js
var require_try_to_string=__commonJS({"node_modules/core-js/internals/try-to-string.js":function node_modulesCoreJsInternalsTryToStringJs(exports,module){var global2=require_global();var String2=global2.String;module.exports=function(argument){try{return String2(argument);}catch(error){return"Object";}};}});// node_modules/core-js/internals/a-callable.js
var require_a_callable=__commonJS({"node_modules/core-js/internals/a-callable.js":function node_modulesCoreJsInternalsACallableJs(exports,module){var global2=require_global();var isCallable=require_is_callable();var tryToString=require_try_to_string();var TypeError2=global2.TypeError;module.exports=function(argument){if(isCallable(argument))return argument;throw TypeError2(tryToString(argument)+" is not a function");};}});// node_modules/core-js/internals/get-method.js
var require_get_method=__commonJS({"node_modules/core-js/internals/get-method.js":function node_modulesCoreJsInternalsGetMethodJs(exports,module){var aCallable=require_a_callable();module.exports=function(V,P){var func=V[P];return func==null?void 0:aCallable(func);};}});// node_modules/core-js/internals/ordinary-to-primitive.js
var require_ordinary_to_primitive=__commonJS({"node_modules/core-js/internals/ordinary-to-primitive.js":function node_modulesCoreJsInternalsOrdinaryToPrimitiveJs(exports,module){var global2=require_global();var call=require_function_call();var isCallable=require_is_callable();var isObject5=require_is_object();var TypeError2=global2.TypeError;module.exports=function(input,pref){var fn,val;if(pref==="string"&&isCallable(fn=input.toString)&&!isObject5(val=call(fn,input)))return val;if(isCallable(fn=input.valueOf)&&!isObject5(val=call(fn,input)))return val;if(pref!=="string"&&isCallable(fn=input.toString)&&!isObject5(val=call(fn,input)))return val;throw TypeError2("Can't convert object to primitive value");};}});// node_modules/core-js/internals/to-primitive.js
var require_to_primitive=__commonJS({"node_modules/core-js/internals/to-primitive.js":function node_modulesCoreJsInternalsToPrimitiveJs(exports,module){var global2=require_global();var call=require_function_call();var isObject5=require_is_object();var isSymbol2=require_is_symbol();var getMethod=require_get_method();var ordinaryToPrimitive=require_ordinary_to_primitive();var wellKnownSymbol=require_well_known_symbol();var TypeError2=global2.TypeError;var TO_PRIMITIVE=wellKnownSymbol("toPrimitive");module.exports=function(input,pref){if(!isObject5(input)||isSymbol2(input))return input;var exoticToPrim=getMethod(input,TO_PRIMITIVE);var result;if(exoticToPrim){if(pref===void 0)pref="default";result=call(exoticToPrim,input,pref);if(!isObject5(result)||isSymbol2(result))return result;throw TypeError2("Can't convert object to primitive value");}if(pref===void 0)pref="number";return ordinaryToPrimitive(input,pref);};}});// node_modules/core-js/internals/to-property-key.js
var require_to_property_key=__commonJS({"node_modules/core-js/internals/to-property-key.js":function node_modulesCoreJsInternalsToPropertyKeyJs(exports,module){var toPrimitive=require_to_primitive();var isSymbol2=require_is_symbol();module.exports=function(argument){var key=toPrimitive(argument,"string");return isSymbol2(key)?key:key+"";};}});// node_modules/core-js/internals/object-define-property.js
var require_object_define_property=__commonJS({"node_modules/core-js/internals/object-define-property.js":function node_modulesCoreJsInternalsObjectDefinePropertyJs(exports){var global2=require_global();var DESCRIPTORS2=require_descriptors();var IE8_DOM_DEFINE=require_ie8_dom_define();var V8_PROTOTYPE_DEFINE_BUG=require_v8_prototype_define_bug();var anObject=require_an_object();var toPropertyKey=require_to_property_key();var TypeError2=global2.TypeError;var $defineProperty=Object.defineProperty;var $getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor;var ENUMERABLE="enumerable";var CONFIGURABLE="configurable";var WRITABLE="writable";exports.f=DESCRIPTORS2?V8_PROTOTYPE_DEFINE_BUG?function defineProperty(O,P,Attributes){anObject(O);P=toPropertyKey(P);anObject(Attributes);if(typeof O==="function"&&P==="prototype"&&"value"in Attributes&&WRITABLE in Attributes&&!Attributes[WRITABLE]){var current=$getOwnPropertyDescriptor(O,P);if(current&&current[WRITABLE]){O[P]=Attributes.value;Attributes={configurable:CONFIGURABLE in Attributes?Attributes[CONFIGURABLE]:current[CONFIGURABLE],enumerable:ENUMERABLE in Attributes?Attributes[ENUMERABLE]:current[ENUMERABLE],writable:false};}}return $defineProperty(O,P,Attributes);}:$defineProperty:function defineProperty(O,P,Attributes){anObject(O);P=toPropertyKey(P);anObject(Attributes);if(IE8_DOM_DEFINE)try{return $defineProperty(O,P,Attributes);}catch(error){}if("get"in Attributes||"set"in Attributes)throw TypeError2("Accessors not supported");if("value"in Attributes)O[P]=Attributes.value;return O;};}});// node_modules/core-js/internals/to-integer-or-infinity.js
var require_to_integer_or_infinity=__commonJS({"node_modules/core-js/internals/to-integer-or-infinity.js":function node_modulesCoreJsInternalsToIntegerOrInfinityJs(exports,module){var ceil=Math.ceil;var floor=Math.floor;module.exports=function(argument){var number=+argument;return number!==number||number===0?0:(number>0?floor:ceil)(number);};}});// node_modules/core-js/internals/to-absolute-index.js
var require_to_absolute_index=__commonJS({"node_modules/core-js/internals/to-absolute-index.js":function node_modulesCoreJsInternalsToAbsoluteIndexJs(exports,module){var toIntegerOrInfinity=require_to_integer_or_infinity();var max=Math.max;var min=Math.min;module.exports=function(index,length){var integer=toIntegerOrInfinity(index);return integer<0?max(integer+length,0):min(integer,length);};}});// node_modules/core-js/internals/to-length.js
var require_to_length=__commonJS({"node_modules/core-js/internals/to-length.js":function node_modulesCoreJsInternalsToLengthJs(exports,module){var toIntegerOrInfinity=require_to_integer_or_infinity();var min=Math.min;module.exports=function(argument){return argument>0?min(toIntegerOrInfinity(argument),9007199254740991):0;};}});// node_modules/core-js/internals/length-of-array-like.js
var require_length_of_array_like=__commonJS({"node_modules/core-js/internals/length-of-array-like.js":function node_modulesCoreJsInternalsLengthOfArrayLikeJs(exports,module){var toLength=require_to_length();module.exports=function(obj){return toLength(obj.length);};}});// node_modules/core-js/internals/array-includes.js
var require_array_includes=__commonJS({"node_modules/core-js/internals/array-includes.js":function node_modulesCoreJsInternalsArrayIncludesJs(exports,module){var toIndexedObject=require_to_indexed_object();var toAbsoluteIndex=require_to_absolute_index();var lengthOfArrayLike=require_length_of_array_like();var createMethod=function createMethod(IS_INCLUDES){return function($this,el,fromIndex){var O=toIndexedObject($this);var length=lengthOfArrayLike(O);var index=toAbsoluteIndex(fromIndex,length);var value;if(IS_INCLUDES&&el!=el)while(length>index){value=O[index++];if(value!=value)return true;}else for(;length>index;index++){if((IS_INCLUDES||index in O)&&O[index]===el)return IS_INCLUDES||index||0;}return!IS_INCLUDES&&-1;};};module.exports={includes:createMethod(true),indexOf:createMethod(false)};}});// node_modules/core-js/internals/hidden-keys.js
var require_hidden_keys=__commonJS({"node_modules/core-js/internals/hidden-keys.js":function node_modulesCoreJsInternalsHiddenKeysJs(exports,module){module.exports={};}});// node_modules/core-js/internals/object-keys-internal.js
var require_object_keys_internal=__commonJS({"node_modules/core-js/internals/object-keys-internal.js":function node_modulesCoreJsInternalsObjectKeysInternalJs(exports,module){var uncurryThis=require_function_uncurry_this();var hasOwn=require_has_own_property();var toIndexedObject=require_to_indexed_object();var indexOf=require_array_includes().indexOf;var hiddenKeys=require_hidden_keys();var push=uncurryThis([].push);module.exports=function(object,names){var O=toIndexedObject(object);var i=0;var result=[];var key;for(key in O){!hasOwn(hiddenKeys,key)&&hasOwn(O,key)&&push(result,key);}while(names.length>i){if(hasOwn(O,key=names[i++])){~indexOf(result,key)||push(result,key);}}return result;};}});// node_modules/core-js/internals/enum-bug-keys.js
var require_enum_bug_keys=__commonJS({"node_modules/core-js/internals/enum-bug-keys.js":function node_modulesCoreJsInternalsEnumBugKeysJs(exports,module){module.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"];}});// node_modules/core-js/internals/object-keys.js
var require_object_keys=__commonJS({"node_modules/core-js/internals/object-keys.js":function node_modulesCoreJsInternalsObjectKeysJs(exports,module){var internalObjectKeys=require_object_keys_internal();var enumBugKeys=require_enum_bug_keys();module.exports=Object.keys||function keys3(O){return internalObjectKeys(O,enumBugKeys);};}});// node_modules/core-js/internals/object-define-properties.js
var require_object_define_properties=__commonJS({"node_modules/core-js/internals/object-define-properties.js":function node_modulesCoreJsInternalsObjectDefinePropertiesJs(exports){var DESCRIPTORS2=require_descriptors();var V8_PROTOTYPE_DEFINE_BUG=require_v8_prototype_define_bug();var definePropertyModule=require_object_define_property();var anObject=require_an_object();var toIndexedObject=require_to_indexed_object();var objectKeys=require_object_keys();exports.f=DESCRIPTORS2&&!V8_PROTOTYPE_DEFINE_BUG?Object.defineProperties:function defineProperties(O,Properties){anObject(O);var props=toIndexedObject(Properties);var keys3=objectKeys(Properties);var length=keys3.length;var index=0;var key;while(length>index){definePropertyModule.f(O,key=keys3[index++],props[key]);}return O;};}});// node_modules/core-js/internals/html.js
var require_html=__commonJS({"node_modules/core-js/internals/html.js":function node_modulesCoreJsInternalsHtmlJs(exports,module){var getBuiltIn=require_get_built_in();module.exports=getBuiltIn("document","documentElement");}});// node_modules/core-js/internals/shared-key.js
var require_shared_key=__commonJS({"node_modules/core-js/internals/shared-key.js":function node_modulesCoreJsInternalsSharedKeyJs(exports,module){var shared=require_shared();var uid=require_uid();var keys3=shared("keys");module.exports=function(key){return keys3[key]||(keys3[key]=uid(key));};}});// node_modules/core-js/internals/object-create.js
var require_object_create=__commonJS({"node_modules/core-js/internals/object-create.js":function node_modulesCoreJsInternalsObjectCreateJs(exports,module){var anObject=require_an_object();var definePropertiesModule=require_object_define_properties();var enumBugKeys=require_enum_bug_keys();var hiddenKeys=require_hidden_keys();var html=require_html();var documentCreateElement=require_document_create_element();var sharedKey=require_shared_key();var GT=">";var LT="<";var PROTOTYPE="prototype";var SCRIPT="script";var IE_PROTO=sharedKey("IE_PROTO");var EmptyConstructor=function EmptyConstructor(){};var scriptTag=function scriptTag(content){return LT+SCRIPT+GT+content+LT+"/"+SCRIPT+GT;};var NullProtoObjectViaActiveX=function NullProtoObjectViaActiveX(activeXDocument2){activeXDocument2.write(scriptTag(""));activeXDocument2.close();var temp=activeXDocument2.parentWindow.Object;activeXDocument2=null;return temp;};var NullProtoObjectViaIFrame=function NullProtoObjectViaIFrame(){var iframe=documentCreateElement("iframe");var JS="java"+SCRIPT+":";var iframeDocument;iframe.style.display="none";html.appendChild(iframe);iframe.src=String(JS);iframeDocument=iframe.contentWindow.document;iframeDocument.open();iframeDocument.write(scriptTag("document.F=Object"));iframeDocument.close();return iframeDocument.F;};var activeXDocument;var _NullProtoObject=function NullProtoObject(){try{activeXDocument=new ActiveXObject("htmlfile");}catch(error){}_NullProtoObject=typeof document!="undefined"?document.domain&&activeXDocument?NullProtoObjectViaActiveX(activeXDocument):NullProtoObjectViaIFrame():NullProtoObjectViaActiveX(activeXDocument);var length=enumBugKeys.length;while(length--){delete _NullProtoObject[PROTOTYPE][enumBugKeys[length]];}return _NullProtoObject();};hiddenKeys[IE_PROTO]=true;module.exports=Object.create||function create(O,Properties){var result;if(O!==null){EmptyConstructor[PROTOTYPE]=anObject(O);result=new EmptyConstructor();EmptyConstructor[PROTOTYPE]=null;result[IE_PROTO]=O;}else result=_NullProtoObject();return Properties===void 0?result:definePropertiesModule.f(result,Properties);};}});// node_modules/core-js/internals/add-to-unscopables.js
var require_add_to_unscopables=__commonJS({"node_modules/core-js/internals/add-to-unscopables.js":function node_modulesCoreJsInternalsAddToUnscopablesJs(exports,module){var wellKnownSymbol=require_well_known_symbol();var create=require_object_create();var definePropertyModule=require_object_define_property();var UNSCOPABLES=wellKnownSymbol("unscopables");var ArrayPrototype=Array.prototype;if(ArrayPrototype[UNSCOPABLES]==void 0){definePropertyModule.f(ArrayPrototype,UNSCOPABLES,{configurable:true,value:create(null)});}module.exports=function(key){ArrayPrototype[UNSCOPABLES][key]=true;};}});// node_modules/core-js/internals/iterators.js
var require_iterators=__commonJS({"node_modules/core-js/internals/iterators.js":function node_modulesCoreJsInternalsIteratorsJs(exports,module){module.exports={};}});// node_modules/core-js/internals/inspect-source.js
var require_inspect_source=__commonJS({"node_modules/core-js/internals/inspect-source.js":function node_modulesCoreJsInternalsInspectSourceJs(exports,module){var uncurryThis=require_function_uncurry_this();var isCallable=require_is_callable();var store=require_shared_store();var functionToString=uncurryThis(Function.toString);if(!isCallable(store.inspectSource)){store.inspectSource=function(it){return functionToString(it);};}module.exports=store.inspectSource;}});// node_modules/core-js/internals/native-weak-map.js
var require_native_weak_map=__commonJS({"node_modules/core-js/internals/native-weak-map.js":function node_modulesCoreJsInternalsNativeWeakMapJs(exports,module){var global2=require_global();var isCallable=require_is_callable();var inspectSource=require_inspect_source();var WeakMap2=global2.WeakMap;module.exports=isCallable(WeakMap2)&&/native code/.test(inspectSource(WeakMap2));}});// node_modules/core-js/internals/create-property-descriptor.js
var require_create_property_descriptor=__commonJS({"node_modules/core-js/internals/create-property-descriptor.js":function node_modulesCoreJsInternalsCreatePropertyDescriptorJs(exports,module){module.exports=function(bitmap,value){return{enumerable:!(bitmap&1),configurable:!(bitmap&2),writable:!(bitmap&4),value:value};};}});// node_modules/core-js/internals/create-non-enumerable-property.js
var require_create_non_enumerable_property=__commonJS({"node_modules/core-js/internals/create-non-enumerable-property.js":function node_modulesCoreJsInternalsCreateNonEnumerablePropertyJs(exports,module){var DESCRIPTORS2=require_descriptors();var definePropertyModule=require_object_define_property();var createPropertyDescriptor=require_create_property_descriptor();module.exports=DESCRIPTORS2?function(object,key,value){return definePropertyModule.f(object,key,createPropertyDescriptor(1,value));}:function(object,key,value){object[key]=value;return object;};}});// node_modules/core-js/internals/internal-state.js
var require_internal_state=__commonJS({"node_modules/core-js/internals/internal-state.js":function node_modulesCoreJsInternalsInternalStateJs(exports,module){var NATIVE_WEAK_MAP=require_native_weak_map();var global2=require_global();var uncurryThis=require_function_uncurry_this();var isObject5=require_is_object();var createNonEnumerableProperty=require_create_non_enumerable_property();var hasOwn=require_has_own_property();var shared=require_shared_store();var sharedKey=require_shared_key();var hiddenKeys=require_hidden_keys();var OBJECT_ALREADY_INITIALIZED="Object already initialized";var TypeError2=global2.TypeError;var WeakMap2=global2.WeakMap;var set4;var get7;var has;var enforce=function enforce(it){return has(it)?get7(it):set4(it,{});};var getterFor=function getterFor(TYPE){return function(it){var state;if(!isObject5(it)||(state=get7(it)).type!==TYPE){throw TypeError2("Incompatible receiver, "+TYPE+" required");}return state;};};if(NATIVE_WEAK_MAP||shared.state){store=shared.state||(shared.state=new WeakMap2());wmget=uncurryThis(store.get);wmhas=uncurryThis(store.has);wmset=uncurryThis(store.set);set4=function set4(it,metadata){if(wmhas(store,it))throw new TypeError2(OBJECT_ALREADY_INITIALIZED);metadata.facade=it;wmset(store,it,metadata);return metadata;};get7=function get7(it){return wmget(store,it)||{};};has=function has(it){return wmhas(store,it);};}else{STATE=sharedKey("state");hiddenKeys[STATE]=true;set4=function set4(it,metadata){if(hasOwn(it,STATE))throw new TypeError2(OBJECT_ALREADY_INITIALIZED);metadata.facade=it;createNonEnumerableProperty(it,STATE,metadata);return metadata;};get7=function get7(it){return hasOwn(it,STATE)?it[STATE]:{};};has=function has(it){return hasOwn(it,STATE);};}var store;var wmget;var wmhas;var wmset;var STATE;module.exports={set:set4,get:get7,has:has,enforce:enforce,getterFor:getterFor};}});// node_modules/core-js/internals/object-property-is-enumerable.js
var require_object_property_is_enumerable=__commonJS({"node_modules/core-js/internals/object-property-is-enumerable.js":function node_modulesCoreJsInternalsObjectPropertyIsEnumerableJs(exports){"use strict";var $propertyIsEnumerable={}.propertyIsEnumerable;var getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor;var NASHORN_BUG=getOwnPropertyDescriptor&&!$propertyIsEnumerable.call({1:2},1);exports.f=NASHORN_BUG?function propertyIsEnumerable(V){var descriptor=getOwnPropertyDescriptor(this,V);return!!descriptor&&descriptor.enumerable;}:$propertyIsEnumerable;}});// node_modules/core-js/internals/object-get-own-property-descriptor.js
var require_object_get_own_property_descriptor=__commonJS({"node_modules/core-js/internals/object-get-own-property-descriptor.js":function node_modulesCoreJsInternalsObjectGetOwnPropertyDescriptorJs(exports){var DESCRIPTORS2=require_descriptors();var call=require_function_call();var propertyIsEnumerableModule=require_object_property_is_enumerable();var createPropertyDescriptor=require_create_property_descriptor();var toIndexedObject=require_to_indexed_object();var toPropertyKey=require_to_property_key();var hasOwn=require_has_own_property();var IE8_DOM_DEFINE=require_ie8_dom_define();var $getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor;exports.f=DESCRIPTORS2?$getOwnPropertyDescriptor:function getOwnPropertyDescriptor(O,P){O=toIndexedObject(O);P=toPropertyKey(P);if(IE8_DOM_DEFINE)try{return $getOwnPropertyDescriptor(O,P);}catch(error){}if(hasOwn(O,P))return createPropertyDescriptor(!call(propertyIsEnumerableModule.f,O,P),O[P]);};}});// node_modules/core-js/internals/function-name.js
var require_function_name=__commonJS({"node_modules/core-js/internals/function-name.js":function node_modulesCoreJsInternalsFunctionNameJs(exports,module){var DESCRIPTORS2=require_descriptors();var hasOwn=require_has_own_property();var FunctionPrototype=Function.prototype;var getDescriptor3=DESCRIPTORS2&&Object.getOwnPropertyDescriptor;var EXISTS=hasOwn(FunctionPrototype,"name");var PROPER=EXISTS&&function something(){}.name==="something";var CONFIGURABLE=EXISTS&&(!DESCRIPTORS2||DESCRIPTORS2&&getDescriptor3(FunctionPrototype,"name").configurable);module.exports={EXISTS:EXISTS,PROPER:PROPER,CONFIGURABLE:CONFIGURABLE};}});// node_modules/core-js/internals/make-built-in.js
var require_make_built_in=__commonJS({"node_modules/core-js/internals/make-built-in.js":function node_modulesCoreJsInternalsMakeBuiltInJs(exports,module){var fails=require_fails();var isCallable=require_is_callable();var hasOwn=require_has_own_property();var DESCRIPTORS2=require_descriptors();var CONFIGURABLE_FUNCTION_NAME=require_function_name().CONFIGURABLE;var inspectSource=require_inspect_source();var InternalStateModule=require_internal_state();var enforceInternalState=InternalStateModule.enforce;var getInternalState=InternalStateModule.get;var defineProperty=Object.defineProperty;var CONFIGURABLE_LENGTH=DESCRIPTORS2&&!fails(function(){return defineProperty(function(){},"length",{value:8}).length!==8;});var TEMPLATE=String(String).split("String");var makeBuiltIn=module.exports=function(value,name,options){if(String(name).slice(0,7)==="Symbol("){name="["+String(name).replace(/^Symbol\(([^)]*)\)/,"$1")+"]";}if(options&&options.getter)name="get "+name;if(options&&options.setter)name="set "+name;if(!hasOwn(value,"name")||CONFIGURABLE_FUNCTION_NAME&&value.name!==name){defineProperty(value,"name",{value:name,configurable:true});}if(CONFIGURABLE_LENGTH&&options&&hasOwn(options,"arity")&&value.length!==options.arity){defineProperty(value,"length",{value:options.arity});}if(options&&hasOwn(options,"constructor")&&options.constructor){if(DESCRIPTORS2)try{defineProperty(value,"prototype",{writable:false});}catch(error){}}else value.prototype=void 0;var state=enforceInternalState(value);if(!hasOwn(state,"source")){state.source=TEMPLATE.join(typeof name=="string"?name:"");}return value;};Function.prototype.toString=makeBuiltIn(function toString2(){return isCallable(this)&&getInternalState(this).source||inspectSource(this);},"toString");}});// node_modules/core-js/internals/define-built-in.js
var require_define_built_in=__commonJS({"node_modules/core-js/internals/define-built-in.js":function node_modulesCoreJsInternalsDefineBuiltInJs(exports,module){var global2=require_global();var isCallable=require_is_callable();var createNonEnumerableProperty=require_create_non_enumerable_property();var makeBuiltIn=require_make_built_in();var setGlobal=require_set_global();module.exports=function(O,key,value,options){var unsafe=options?!!options.unsafe:false;var simple=options?!!options.enumerable:false;var noTargetGet=options?!!options.noTargetGet:false;var name=options&&options.name!==void 0?options.name:key;if(isCallable(value))makeBuiltIn(value,name,options);if(O===global2){if(simple)O[key]=value;else setGlobal(key,value);return O;}else if(!unsafe){delete O[key];}else if(!noTargetGet&&O[key]){simple=true;}if(simple)O[key]=value;else createNonEnumerableProperty(O,key,value);return O;};}});// node_modules/core-js/internals/object-get-own-property-names.js
var require_object_get_own_property_names=__commonJS({"node_modules/core-js/internals/object-get-own-property-names.js":function node_modulesCoreJsInternalsObjectGetOwnPropertyNamesJs(exports){var internalObjectKeys=require_object_keys_internal();var enumBugKeys=require_enum_bug_keys();var hiddenKeys=enumBugKeys.concat("length","prototype");exports.f=Object.getOwnPropertyNames||function getOwnPropertyNames(O){return internalObjectKeys(O,hiddenKeys);};}});// node_modules/core-js/internals/object-get-own-property-symbols.js
var require_object_get_own_property_symbols=__commonJS({"node_modules/core-js/internals/object-get-own-property-symbols.js":function node_modulesCoreJsInternalsObjectGetOwnPropertySymbolsJs(exports){exports.f=Object.getOwnPropertySymbols;}});// node_modules/core-js/internals/own-keys.js
var require_own_keys=__commonJS({"node_modules/core-js/internals/own-keys.js":function node_modulesCoreJsInternalsOwnKeysJs(exports,module){var getBuiltIn=require_get_built_in();var uncurryThis=require_function_uncurry_this();var getOwnPropertyNamesModule=require_object_get_own_property_names();var getOwnPropertySymbolsModule=require_object_get_own_property_symbols();var anObject=require_an_object();var concat=uncurryThis([].concat);module.exports=getBuiltIn("Reflect","ownKeys")||function ownKeys(it){var keys3=getOwnPropertyNamesModule.f(anObject(it));var getOwnPropertySymbols=getOwnPropertySymbolsModule.f;return getOwnPropertySymbols?concat(keys3,getOwnPropertySymbols(it)):keys3;};}});// node_modules/core-js/internals/copy-constructor-properties.js
var require_copy_constructor_properties=__commonJS({"node_modules/core-js/internals/copy-constructor-properties.js":function node_modulesCoreJsInternalsCopyConstructorPropertiesJs(exports,module){var hasOwn=require_has_own_property();var ownKeys=require_own_keys();var getOwnPropertyDescriptorModule=require_object_get_own_property_descriptor();var definePropertyModule=require_object_define_property();module.exports=function(target,source,exceptions){var keys3=ownKeys(source);var defineProperty=definePropertyModule.f;var getOwnPropertyDescriptor=getOwnPropertyDescriptorModule.f;for(var i=0;i<keys3.length;i++){var key=keys3[i];if(!hasOwn(target,key)&&!(exceptions&&hasOwn(exceptions,key))){defineProperty(target,key,getOwnPropertyDescriptor(source,key));}}};}});// node_modules/core-js/internals/is-forced.js
var require_is_forced=__commonJS({"node_modules/core-js/internals/is-forced.js":function node_modulesCoreJsInternalsIsForcedJs(exports,module){var fails=require_fails();var isCallable=require_is_callable();var replacement=/#|\.prototype\./;var isForced=function isForced(feature,detection){var value=data[normalize3(feature)];return value==POLYFILL?true:value==NATIVE?false:isCallable(detection)?fails(detection):!!detection;};var normalize3=isForced.normalize=function(string){return String(string).replace(replacement,".").toLowerCase();};var data=isForced.data={};var NATIVE=isForced.NATIVE="N";var POLYFILL=isForced.POLYFILL="P";module.exports=isForced;}});// node_modules/core-js/internals/export.js
var require_export=__commonJS({"node_modules/core-js/internals/export.js":function node_modulesCoreJsInternalsExportJs(exports,module){var global2=require_global();var getOwnPropertyDescriptor=require_object_get_own_property_descriptor().f;var createNonEnumerableProperty=require_create_non_enumerable_property();var defineBuiltIn=require_define_built_in();var setGlobal=require_set_global();var copyConstructorProperties=require_copy_constructor_properties();var isForced=require_is_forced();module.exports=function(options,source){var TARGET=options.target;var GLOBAL=options.global;var STATIC=options.stat;var FORCED,target,key,targetProperty,sourceProperty,descriptor;if(GLOBAL){target=global2;}else if(STATIC){target=global2[TARGET]||setGlobal(TARGET,{});}else{target=(global2[TARGET]||{}).prototype;}if(target)for(key in source){sourceProperty=source[key];if(options.noTargetGet){descriptor=getOwnPropertyDescriptor(target,key);targetProperty=descriptor&&descriptor.value;}else targetProperty=target[key];FORCED=isForced(GLOBAL?key:TARGET+(STATIC?".":"#")+key,options.forced);if(!FORCED&&targetProperty!==void 0){if(_typeof(sourceProperty)==_typeof(targetProperty))continue;copyConstructorProperties(sourceProperty,targetProperty);}if(options.sham||targetProperty&&targetProperty.sham){createNonEnumerableProperty(sourceProperty,"sham",true);}defineBuiltIn(target,key,sourceProperty,options);}};}});// node_modules/core-js/internals/correct-prototype-getter.js
var require_correct_prototype_getter=__commonJS({"node_modules/core-js/internals/correct-prototype-getter.js":function node_modulesCoreJsInternalsCorrectPrototypeGetterJs(exports,module){var fails=require_fails();module.exports=!fails(function(){function F(){}F.prototype.constructor=null;return Object.getPrototypeOf(new F())!==F.prototype;});}});// node_modules/core-js/internals/object-get-prototype-of.js
var require_object_get_prototype_of=__commonJS({"node_modules/core-js/internals/object-get-prototype-of.js":function node_modulesCoreJsInternalsObjectGetPrototypeOfJs(exports,module){var global2=require_global();var hasOwn=require_has_own_property();var isCallable=require_is_callable();var toObject=require_to_object();var sharedKey=require_shared_key();var CORRECT_PROTOTYPE_GETTER=require_correct_prototype_getter();var IE_PROTO=sharedKey("IE_PROTO");var Object2=global2.Object;var ObjectPrototype=Object2.prototype;module.exports=CORRECT_PROTOTYPE_GETTER?Object2.getPrototypeOf:function(O){var object=toObject(O);if(hasOwn(object,IE_PROTO))return object[IE_PROTO];var constructor=object.constructor;if(isCallable(constructor)&&object instanceof constructor){return constructor.prototype;}return object instanceof Object2?ObjectPrototype:null;};}});// node_modules/core-js/internals/iterators-core.js
var require_iterators_core=__commonJS({"node_modules/core-js/internals/iterators-core.js":function node_modulesCoreJsInternalsIteratorsCoreJs(exports,module){"use strict";var fails=require_fails();var isCallable=require_is_callable();var create=require_object_create();var getPrototypeOf=require_object_get_prototype_of();var defineBuiltIn=require_define_built_in();var wellKnownSymbol=require_well_known_symbol();var IS_PURE=require_is_pure();var ITERATOR=wellKnownSymbol("iterator");var BUGGY_SAFARI_ITERATORS=false;var IteratorPrototype;var PrototypeOfArrayIteratorPrototype;var arrayIterator;if([].keys){arrayIterator=[].keys();if(!("next"in arrayIterator))BUGGY_SAFARI_ITERATORS=true;else{PrototypeOfArrayIteratorPrototype=getPrototypeOf(getPrototypeOf(arrayIterator));if(PrototypeOfArrayIteratorPrototype!==Object.prototype)IteratorPrototype=PrototypeOfArrayIteratorPrototype;}}var NEW_ITERATOR_PROTOTYPE=IteratorPrototype==void 0||fails(function(){var test={};return IteratorPrototype[ITERATOR].call(test)!==test;});if(NEW_ITERATOR_PROTOTYPE)IteratorPrototype={};else if(IS_PURE)IteratorPrototype=create(IteratorPrototype);if(!isCallable(IteratorPrototype[ITERATOR])){defineBuiltIn(IteratorPrototype,ITERATOR,function(){return this;});}module.exports={IteratorPrototype:IteratorPrototype,BUGGY_SAFARI_ITERATORS:BUGGY_SAFARI_ITERATORS};}});// node_modules/core-js/internals/set-to-string-tag.js
var require_set_to_string_tag=__commonJS({"node_modules/core-js/internals/set-to-string-tag.js":function node_modulesCoreJsInternalsSetToStringTagJs(exports,module){var defineProperty=require_object_define_property().f;var hasOwn=require_has_own_property();var wellKnownSymbol=require_well_known_symbol();var TO_STRING_TAG=wellKnownSymbol("toStringTag");module.exports=function(target,TAG,STATIC){if(target&&!STATIC)target=target.prototype;if(target&&!hasOwn(target,TO_STRING_TAG)){defineProperty(target,TO_STRING_TAG,{configurable:true,value:TAG});}};}});// node_modules/core-js/internals/create-iterator-constructor.js
var require_create_iterator_constructor=__commonJS({"node_modules/core-js/internals/create-iterator-constructor.js":function node_modulesCoreJsInternalsCreateIteratorConstructorJs(exports,module){"use strict";var IteratorPrototype=require_iterators_core().IteratorPrototype;var create=require_object_create();var createPropertyDescriptor=require_create_property_descriptor();var setToStringTag=require_set_to_string_tag();var Iterators=require_iterators();var returnThis=function returnThis(){return this;};module.exports=function(IteratorConstructor,NAME,next,ENUMERABLE_NEXT){var TO_STRING_TAG=NAME+" Iterator";IteratorConstructor.prototype=create(IteratorPrototype,{next:createPropertyDescriptor(+!ENUMERABLE_NEXT,next)});setToStringTag(IteratorConstructor,TO_STRING_TAG,false,true);Iterators[TO_STRING_TAG]=returnThis;return IteratorConstructor;};}});// node_modules/core-js/internals/a-possible-prototype.js
var require_a_possible_prototype=__commonJS({"node_modules/core-js/internals/a-possible-prototype.js":function node_modulesCoreJsInternalsAPossiblePrototypeJs(exports,module){var global2=require_global();var isCallable=require_is_callable();var String2=global2.String;var TypeError2=global2.TypeError;module.exports=function(argument){if(_typeof(argument)=="object"||isCallable(argument))return argument;throw TypeError2("Can't set "+String2(argument)+" as a prototype");};}});// node_modules/core-js/internals/object-set-prototype-of.js
var require_object_set_prototype_of=__commonJS({"node_modules/core-js/internals/object-set-prototype-of.js":function node_modulesCoreJsInternalsObjectSetPrototypeOfJs(exports,module){var uncurryThis=require_function_uncurry_this();var anObject=require_an_object();var aPossiblePrototype=require_a_possible_prototype();module.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var CORRECT_SETTER=false;var test={};var setter;try{setter=uncurryThis(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set);setter(test,[]);CORRECT_SETTER=test instanceof Array;}catch(error){}return function setPrototypeOf(O,proto){anObject(O);aPossiblePrototype(proto);if(CORRECT_SETTER)setter(O,proto);else O.__proto__=proto;return O;};}():void 0);}});// node_modules/core-js/internals/define-iterator.js
var require_define_iterator=__commonJS({"node_modules/core-js/internals/define-iterator.js":function node_modulesCoreJsInternalsDefineIteratorJs(exports,module){"use strict";var $2=require_export();var call=require_function_call();var IS_PURE=require_is_pure();var FunctionName=require_function_name();var isCallable=require_is_callable();var createIteratorConstructor=require_create_iterator_constructor();var getPrototypeOf=require_object_get_prototype_of();var setPrototypeOf=require_object_set_prototype_of();var setToStringTag=require_set_to_string_tag();var createNonEnumerableProperty=require_create_non_enumerable_property();var defineBuiltIn=require_define_built_in();var wellKnownSymbol=require_well_known_symbol();var Iterators=require_iterators();var IteratorsCore=require_iterators_core();var PROPER_FUNCTION_NAME=FunctionName.PROPER;var CONFIGURABLE_FUNCTION_NAME=FunctionName.CONFIGURABLE;var IteratorPrototype=IteratorsCore.IteratorPrototype;var BUGGY_SAFARI_ITERATORS=IteratorsCore.BUGGY_SAFARI_ITERATORS;var ITERATOR=wellKnownSymbol("iterator");var KEYS="keys";var VALUES="values";var ENTRIES="entries";var returnThis=function returnThis(){return this;};module.exports=function(Iterable,NAME,IteratorConstructor,next,DEFAULT2,IS_SET,FORCED){createIteratorConstructor(IteratorConstructor,NAME,next);var getIterationMethod=function getIterationMethod(KIND){if(KIND===DEFAULT2&&defaultIterator)return defaultIterator;if(!BUGGY_SAFARI_ITERATORS&&KIND in IterablePrototype)return IterablePrototype[KIND];switch(KIND){case KEYS:return function keys3(){return new IteratorConstructor(this,KIND);};case VALUES:return function values3(){return new IteratorConstructor(this,KIND);};case ENTRIES:return function entries(){return new IteratorConstructor(this,KIND);};}return function(){return new IteratorConstructor(this);};};var TO_STRING_TAG=NAME+" Iterator";var INCORRECT_VALUES_NAME=false;var IterablePrototype=Iterable.prototype;var nativeIterator=IterablePrototype[ITERATOR]||IterablePrototype["@@iterator"]||DEFAULT2&&IterablePrototype[DEFAULT2];var defaultIterator=!BUGGY_SAFARI_ITERATORS&&nativeIterator||getIterationMethod(DEFAULT2);var anyNativeIterator=NAME=="Array"?IterablePrototype.entries||nativeIterator:nativeIterator;var CurrentIteratorPrototype,methods,KEY;if(anyNativeIterator){CurrentIteratorPrototype=getPrototypeOf(anyNativeIterator.call(new Iterable()));if(CurrentIteratorPrototype!==Object.prototype&&CurrentIteratorPrototype.next){if(!IS_PURE&&getPrototypeOf(CurrentIteratorPrototype)!==IteratorPrototype){if(setPrototypeOf){setPrototypeOf(CurrentIteratorPrototype,IteratorPrototype);}else if(!isCallable(CurrentIteratorPrototype[ITERATOR])){defineBuiltIn(CurrentIteratorPrototype,ITERATOR,returnThis);}}setToStringTag(CurrentIteratorPrototype,TO_STRING_TAG,true,true);if(IS_PURE)Iterators[TO_STRING_TAG]=returnThis;}}if(PROPER_FUNCTION_NAME&&DEFAULT2==VALUES&&nativeIterator&&nativeIterator.name!==VALUES){if(!IS_PURE&&CONFIGURABLE_FUNCTION_NAME){createNonEnumerableProperty(IterablePrototype,"name",VALUES);}else{INCORRECT_VALUES_NAME=true;defaultIterator=function values3(){return call(nativeIterator,this);};}}if(DEFAULT2){methods={values:getIterationMethod(VALUES),keys:IS_SET?defaultIterator:getIterationMethod(KEYS),entries:getIterationMethod(ENTRIES)};if(FORCED)for(KEY in methods){if(BUGGY_SAFARI_ITERATORS||INCORRECT_VALUES_NAME||!(KEY in IterablePrototype)){defineBuiltIn(IterablePrototype,KEY,methods[KEY]);}}else $2({target:NAME,proto:true,forced:BUGGY_SAFARI_ITERATORS||INCORRECT_VALUES_NAME},methods);}if((!IS_PURE||FORCED)&&IterablePrototype[ITERATOR]!==defaultIterator){defineBuiltIn(IterablePrototype,ITERATOR,defaultIterator,{name:DEFAULT2});}Iterators[NAME]=defaultIterator;return methods;};}});// node_modules/core-js/modules/es.array.iterator.js
var require_es_array_iterator=__commonJS({"node_modules/core-js/modules/es.array.iterator.js":function node_modulesCoreJsModulesEsArrayIteratorJs(exports,module){"use strict";var toIndexedObject=require_to_indexed_object();var addToUnscopables=require_add_to_unscopables();var Iterators=require_iterators();var InternalStateModule=require_internal_state();var defineProperty=require_object_define_property().f;var defineIterator=require_define_iterator();var IS_PURE=require_is_pure();var DESCRIPTORS2=require_descriptors();var ARRAY_ITERATOR="Array Iterator";var setInternalState=InternalStateModule.set;var getInternalState=InternalStateModule.getterFor(ARRAY_ITERATOR);module.exports=defineIterator(Array,"Array",function(iterated,kind){setInternalState(this,{type:ARRAY_ITERATOR,target:toIndexedObject(iterated),index:0,kind:kind});},function(){var state=getInternalState(this);var target=state.target;var kind=state.kind;var index=state.index++;if(!target||index>=target.length){state.target=void 0;return{value:void 0,done:true};}if(kind=="keys")return{value:index,done:false};if(kind=="values")return{value:target[index],done:false};return{value:[index,target[index]],done:false};},"values");var values3=Iterators.Arguments=Iterators.Array;addToUnscopables("keys");addToUnscopables("values");addToUnscopables("entries");if(!IS_PURE&&DESCRIPTORS2&&values3.name!=="values")try{defineProperty(values3,"name",{value:"values"});}catch(error){}}});// node_modules/core-js/internals/create-property.js
var require_create_property=__commonJS({"node_modules/core-js/internals/create-property.js":function node_modulesCoreJsInternalsCreatePropertyJs(exports,module){"use strict";var toPropertyKey=require_to_property_key();var definePropertyModule=require_object_define_property();var createPropertyDescriptor=require_create_property_descriptor();module.exports=function(object,key,value){var propertyKey=toPropertyKey(key);if(propertyKey in object)definePropertyModule.f(object,propertyKey,createPropertyDescriptor(0,value));else object[propertyKey]=value;};}});// node_modules/core-js/internals/array-slice-simple.js
var require_array_slice_simple=__commonJS({"node_modules/core-js/internals/array-slice-simple.js":function node_modulesCoreJsInternalsArraySliceSimpleJs(exports,module){var global2=require_global();var toAbsoluteIndex=require_to_absolute_index();var lengthOfArrayLike=require_length_of_array_like();var createProperty=require_create_property();var Array2=global2.Array;var max=Math.max;module.exports=function(O,start2,end){var length=lengthOfArrayLike(O);var k=toAbsoluteIndex(start2,length);var fin=toAbsoluteIndex(end===void 0?length:end,length);var result=Array2(max(fin-k,0));for(var n=0;k<fin;k++,n++){createProperty(result,n,O[k]);}result.length=n;return result;};}});// node_modules/core-js/internals/object-get-own-property-names-external.js
var require_object_get_own_property_names_external=__commonJS({"node_modules/core-js/internals/object-get-own-property-names-external.js":function node_modulesCoreJsInternalsObjectGetOwnPropertyNamesExternalJs(exports,module){var classof=require_classof_raw();var toIndexedObject=require_to_indexed_object();var $getOwnPropertyNames=require_object_get_own_property_names().f;var arraySlice=require_array_slice_simple();var windowNames=(typeof window==="undefined"?"undefined":_typeof(window))=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];var getWindowNames=function getWindowNames(it){try{return $getOwnPropertyNames(it);}catch(error){return arraySlice(windowNames);}};module.exports.f=function getOwnPropertyNames(it){return windowNames&&classof(it)=="Window"?getWindowNames(it):$getOwnPropertyNames(toIndexedObject(it));};}});// node_modules/core-js/internals/array-buffer-non-extensible.js
var require_array_buffer_non_extensible=__commonJS({"node_modules/core-js/internals/array-buffer-non-extensible.js":function node_modulesCoreJsInternalsArrayBufferNonExtensibleJs(exports,module){var fails=require_fails();module.exports=fails(function(){if(typeof ArrayBuffer=="function"){var buffer=new ArrayBuffer(8);if(Object.isExtensible(buffer))Object.defineProperty(buffer,"a",{value:8});}});}});// node_modules/core-js/internals/object-is-extensible.js
var require_object_is_extensible=__commonJS({"node_modules/core-js/internals/object-is-extensible.js":function node_modulesCoreJsInternalsObjectIsExtensibleJs(exports,module){var fails=require_fails();var isObject5=require_is_object();var classof=require_classof_raw();var ARRAY_BUFFER_NON_EXTENSIBLE=require_array_buffer_non_extensible();var $isExtensible=Object.isExtensible;var FAILS_ON_PRIMITIVES=fails(function(){$isExtensible(1);});module.exports=FAILS_ON_PRIMITIVES||ARRAY_BUFFER_NON_EXTENSIBLE?function isExtensible(it){if(!isObject5(it))return false;if(ARRAY_BUFFER_NON_EXTENSIBLE&&classof(it)=="ArrayBuffer")return false;return $isExtensible?$isExtensible(it):true;}:$isExtensible;}});// node_modules/core-js/internals/freezing.js
var require_freezing=__commonJS({"node_modules/core-js/internals/freezing.js":function node_modulesCoreJsInternalsFreezingJs(exports,module){var fails=require_fails();module.exports=!fails(function(){return Object.isExtensible(Object.preventExtensions({}));});}});// node_modules/core-js/internals/internal-metadata.js
var require_internal_metadata=__commonJS({"node_modules/core-js/internals/internal-metadata.js":function node_modulesCoreJsInternalsInternalMetadataJs(exports,module){var $2=require_export();var uncurryThis=require_function_uncurry_this();var hiddenKeys=require_hidden_keys();var isObject5=require_is_object();var hasOwn=require_has_own_property();var defineProperty=require_object_define_property().f;var getOwnPropertyNamesModule=require_object_get_own_property_names();var getOwnPropertyNamesExternalModule=require_object_get_own_property_names_external();var isExtensible=require_object_is_extensible();var uid=require_uid();var FREEZING=require_freezing();var REQUIRED=false;var METADATA=uid("meta");var id=0;var setMetadata=function setMetadata(it){defineProperty(it,METADATA,{value:{objectID:"O"+id++,weakData:{}}});};var fastKey=function fastKey(it,create){if(!isObject5(it))return _typeof(it)=="symbol"?it:(typeof it=="string"?"S":"P")+it;if(!hasOwn(it,METADATA)){if(!isExtensible(it))return"F";if(!create)return"E";setMetadata(it);}return it[METADATA].objectID;};var getWeakData=function getWeakData(it,create){if(!hasOwn(it,METADATA)){if(!isExtensible(it))return true;if(!create)return false;setMetadata(it);}return it[METADATA].weakData;};var onFreeze=function onFreeze(it){if(FREEZING&&REQUIRED&&isExtensible(it)&&!hasOwn(it,METADATA))setMetadata(it);return it;};var enable=function enable(){meta.enable=function(){};REQUIRED=true;var getOwnPropertyNames=getOwnPropertyNamesModule.f;var splice=uncurryThis([].splice);var test={};test[METADATA]=1;if(getOwnPropertyNames(test).length){getOwnPropertyNamesModule.f=function(it){var result=getOwnPropertyNames(it);for(var i=0,length=result.length;i<length;i++){if(result[i]===METADATA){splice(result,i,1);break;}}return result;};$2({target:"Object",stat:true,forced:true},{getOwnPropertyNames:getOwnPropertyNamesExternalModule.f});}};var meta=module.exports={enable:enable,fastKey:fastKey,getWeakData:getWeakData,onFreeze:onFreeze};hiddenKeys[METADATA]=true;}});// node_modules/core-js/internals/function-bind-context.js
var require_function_bind_context=__commonJS({"node_modules/core-js/internals/function-bind-context.js":function node_modulesCoreJsInternalsFunctionBindContextJs(exports,module){var uncurryThis=require_function_uncurry_this();var aCallable=require_a_callable();var NATIVE_BIND=require_function_bind_native();var bind3=uncurryThis(uncurryThis.bind);module.exports=function(fn,that){aCallable(fn);return that===void 0?fn:NATIVE_BIND?bind3(fn,that):function(){return fn.apply(that,arguments);};};}});// node_modules/core-js/internals/is-array-iterator-method.js
var require_is_array_iterator_method=__commonJS({"node_modules/core-js/internals/is-array-iterator-method.js":function node_modulesCoreJsInternalsIsArrayIteratorMethodJs(exports,module){var wellKnownSymbol=require_well_known_symbol();var Iterators=require_iterators();var ITERATOR=wellKnownSymbol("iterator");var ArrayPrototype=Array.prototype;module.exports=function(it){return it!==void 0&&(Iterators.Array===it||ArrayPrototype[ITERATOR]===it);};}});// node_modules/core-js/internals/to-string-tag-support.js
var require_to_string_tag_support=__commonJS({"node_modules/core-js/internals/to-string-tag-support.js":function node_modulesCoreJsInternalsToStringTagSupportJs(exports,module){var wellKnownSymbol=require_well_known_symbol();var TO_STRING_TAG=wellKnownSymbol("toStringTag");var test={};test[TO_STRING_TAG]="z";module.exports=String(test)==="[object z]";}});// node_modules/core-js/internals/classof.js
var require_classof=__commonJS({"node_modules/core-js/internals/classof.js":function node_modulesCoreJsInternalsClassofJs(exports,module){var global2=require_global();var TO_STRING_TAG_SUPPORT=require_to_string_tag_support();var isCallable=require_is_callable();var classofRaw=require_classof_raw();var wellKnownSymbol=require_well_known_symbol();var TO_STRING_TAG=wellKnownSymbol("toStringTag");var Object2=global2.Object;var CORRECT_ARGUMENTS=classofRaw(function(){return arguments;}())=="Arguments";var tryGet=function tryGet(it,key){try{return it[key];}catch(error){}};module.exports=TO_STRING_TAG_SUPPORT?classofRaw:function(it){var O,tag,result;return it===void 0?"Undefined":it===null?"Null":typeof(tag=tryGet(O=Object2(it),TO_STRING_TAG))=="string"?tag:CORRECT_ARGUMENTS?classofRaw(O):(result=classofRaw(O))=="Object"&&isCallable(O.callee)?"Arguments":result;};}});// node_modules/core-js/internals/get-iterator-method.js
var require_get_iterator_method=__commonJS({"node_modules/core-js/internals/get-iterator-method.js":function node_modulesCoreJsInternalsGetIteratorMethodJs(exports,module){var classof=require_classof();var getMethod=require_get_method();var Iterators=require_iterators();var wellKnownSymbol=require_well_known_symbol();var ITERATOR=wellKnownSymbol("iterator");module.exports=function(it){if(it!=void 0)return getMethod(it,ITERATOR)||getMethod(it,"@@iterator")||Iterators[classof(it)];};}});// node_modules/core-js/internals/get-iterator.js
var require_get_iterator=__commonJS({"node_modules/core-js/internals/get-iterator.js":function node_modulesCoreJsInternalsGetIteratorJs(exports,module){var global2=require_global();var call=require_function_call();var aCallable=require_a_callable();var anObject=require_an_object();var tryToString=require_try_to_string();var getIteratorMethod=require_get_iterator_method();var TypeError2=global2.TypeError;module.exports=function(argument,usingIterator){var iteratorMethod=arguments.length<2?getIteratorMethod(argument):usingIterator;if(aCallable(iteratorMethod))return anObject(call(iteratorMethod,argument));throw TypeError2(tryToString(argument)+" is not iterable");};}});// node_modules/core-js/internals/iterator-close.js
var require_iterator_close=__commonJS({"node_modules/core-js/internals/iterator-close.js":function node_modulesCoreJsInternalsIteratorCloseJs(exports,module){var call=require_function_call();var anObject=require_an_object();var getMethod=require_get_method();module.exports=function(iterator,kind,value){var innerResult,innerError;anObject(iterator);try{innerResult=getMethod(iterator,"return");if(!innerResult){if(kind==="throw")throw value;return value;}innerResult=call(innerResult,iterator);}catch(error){innerError=true;innerResult=error;}if(kind==="throw")throw value;if(innerError)throw innerResult;anObject(innerResult);return value;};}});// node_modules/core-js/internals/iterate.js
var require_iterate=__commonJS({"node_modules/core-js/internals/iterate.js":function node_modulesCoreJsInternalsIterateJs(exports,module){var global2=require_global();var bind3=require_function_bind_context();var call=require_function_call();var anObject=require_an_object();var tryToString=require_try_to_string();var isArrayIteratorMethod=require_is_array_iterator_method();var lengthOfArrayLike=require_length_of_array_like();var isPrototypeOf=require_object_is_prototype_of();var getIterator=require_get_iterator();var getIteratorMethod=require_get_iterator_method();var iteratorClose=require_iterator_close();var TypeError2=global2.TypeError;var Result=function Result(stopped,result){this.stopped=stopped;this.result=result;};var ResultPrototype=Result.prototype;module.exports=function(iterable,unboundFunction,options){var that=options&&options.that;var AS_ENTRIES=!!(options&&options.AS_ENTRIES);var IS_ITERATOR=!!(options&&options.IS_ITERATOR);var INTERRUPTED=!!(options&&options.INTERRUPTED);var fn=bind3(unboundFunction,that);var iterator,iterFn,index,length,result,next,step;var stop=function stop(condition){if(iterator)iteratorClose(iterator,"normal",condition);return new Result(true,condition);};var callFn=function callFn(value){if(AS_ENTRIES){anObject(value);return INTERRUPTED?fn(value[0],value[1],stop):fn(value[0],value[1]);}return INTERRUPTED?fn(value,stop):fn(value);};if(IS_ITERATOR){iterator=iterable;}else{iterFn=getIteratorMethod(iterable);if(!iterFn)throw TypeError2(tryToString(iterable)+" is not iterable");if(isArrayIteratorMethod(iterFn)){for(index=0,length=lengthOfArrayLike(iterable);length>index;index++){result=callFn(iterable[index]);if(result&&isPrototypeOf(ResultPrototype,result))return result;}return new Result(false);}iterator=getIterator(iterable,iterFn);}next=iterator.next;while(!(step=call(next,iterator)).done){try{result=callFn(step.value);}catch(error){iteratorClose(iterator,"throw",error);}if(_typeof(result)=="object"&&result&&isPrototypeOf(ResultPrototype,result))return result;}return new Result(false);};}});// node_modules/core-js/internals/an-instance.js
var require_an_instance=__commonJS({"node_modules/core-js/internals/an-instance.js":function node_modulesCoreJsInternalsAnInstanceJs(exports,module){var global2=require_global();var isPrototypeOf=require_object_is_prototype_of();var TypeError2=global2.TypeError;module.exports=function(it,Prototype){if(isPrototypeOf(Prototype,it))return it;throw TypeError2("Incorrect invocation");};}});// node_modules/core-js/internals/check-correctness-of-iteration.js
var require_check_correctness_of_iteration=__commonJS({"node_modules/core-js/internals/check-correctness-of-iteration.js":function node_modulesCoreJsInternalsCheckCorrectnessOfIterationJs(exports,module){var wellKnownSymbol=require_well_known_symbol();var ITERATOR=wellKnownSymbol("iterator");var SAFE_CLOSING=false;try{called=0;iteratorWithReturn={next:function next(){return{done:!!called++};},"return":function _return(){SAFE_CLOSING=true;}};iteratorWithReturn[ITERATOR]=function(){return this;};Array.from(iteratorWithReturn,function(){throw 2;});}catch(error){}var called;var iteratorWithReturn;module.exports=function(exec,SKIP_CLOSING){if(!SKIP_CLOSING&&!SAFE_CLOSING)return false;var ITERATION_SUPPORT=false;try{var object={};object[ITERATOR]=function(){return{next:function next(){return{done:ITERATION_SUPPORT=true};}};};exec(object);}catch(error){}return ITERATION_SUPPORT;};}});// node_modules/core-js/internals/inherit-if-required.js
var require_inherit_if_required=__commonJS({"node_modules/core-js/internals/inherit-if-required.js":function node_modulesCoreJsInternalsInheritIfRequiredJs(exports,module){var isCallable=require_is_callable();var isObject5=require_is_object();var setPrototypeOf=require_object_set_prototype_of();module.exports=function($this,dummy,Wrapper){var NewTarget,NewTargetPrototype;if(setPrototypeOf&&isCallable(NewTarget=dummy.constructor)&&NewTarget!==Wrapper&&isObject5(NewTargetPrototype=NewTarget.prototype)&&NewTargetPrototype!==Wrapper.prototype)setPrototypeOf($this,NewTargetPrototype);return $this;};}});// node_modules/core-js/internals/collection.js
var require_collection=__commonJS({"node_modules/core-js/internals/collection.js":function node_modulesCoreJsInternalsCollectionJs(exports,module){"use strict";var $2=require_export();var global2=require_global();var uncurryThis=require_function_uncurry_this();var isForced=require_is_forced();var defineBuiltIn=require_define_built_in();var InternalMetadataModule=require_internal_metadata();var iterate=require_iterate();var anInstance=require_an_instance();var isCallable=require_is_callable();var isObject5=require_is_object();var fails=require_fails();var checkCorrectnessOfIteration=require_check_correctness_of_iteration();var setToStringTag=require_set_to_string_tag();var inheritIfRequired=require_inherit_if_required();module.exports=function(CONSTRUCTOR_NAME,wrapper,common){var IS_MAP=CONSTRUCTOR_NAME.indexOf("Map")!==-1;var IS_WEAK=CONSTRUCTOR_NAME.indexOf("Weak")!==-1;var ADDER=IS_MAP?"set":"add";var NativeConstructor=global2[CONSTRUCTOR_NAME];var NativePrototype=NativeConstructor&&NativeConstructor.prototype;var Constructor=NativeConstructor;var exported={};var fixMethod=function fixMethod(KEY){var uncurriedNativeMethod=uncurryThis(NativePrototype[KEY]);defineBuiltIn(NativePrototype,KEY,KEY=="add"?function add(value){uncurriedNativeMethod(this,value===0?0:value);return this;}:KEY=="delete"?function(key){return IS_WEAK&&!isObject5(key)?false:uncurriedNativeMethod(this,key===0?0:key);}:KEY=="get"?function get7(key){return IS_WEAK&&!isObject5(key)?void 0:uncurriedNativeMethod(this,key===0?0:key);}:KEY=="has"?function has(key){return IS_WEAK&&!isObject5(key)?false:uncurriedNativeMethod(this,key===0?0:key);}:function set4(key,value){uncurriedNativeMethod(this,key===0?0:key,value);return this;});};var REPLACE=isForced(CONSTRUCTOR_NAME,!isCallable(NativeConstructor)||!(IS_WEAK||NativePrototype.forEach&&!fails(function(){new NativeConstructor().entries().next();})));if(REPLACE){Constructor=common.getConstructor(wrapper,CONSTRUCTOR_NAME,IS_MAP,ADDER);InternalMetadataModule.enable();}else if(isForced(CONSTRUCTOR_NAME,true)){var instance=new Constructor();var HASNT_CHAINING=instance[ADDER](IS_WEAK?{}:-0,1)!=instance;var THROWS_ON_PRIMITIVES=fails(function(){instance.has(1);});var ACCEPT_ITERABLES=checkCorrectnessOfIteration(function(iterable){new NativeConstructor(iterable);});var BUGGY_ZERO=!IS_WEAK&&fails(function(){var $instance=new NativeConstructor();var index=5;while(index--){$instance[ADDER](index,index);}return!$instance.has(-0);});if(!ACCEPT_ITERABLES){Constructor=wrapper(function(dummy,iterable){anInstance(dummy,NativePrototype);var that=inheritIfRequired(new NativeConstructor(),dummy,Constructor);if(iterable!=void 0)iterate(iterable,that[ADDER],{that:that,AS_ENTRIES:IS_MAP});return that;});Constructor.prototype=NativePrototype;NativePrototype.constructor=Constructor;}if(THROWS_ON_PRIMITIVES||BUGGY_ZERO){fixMethod("delete");fixMethod("has");IS_MAP&&fixMethod("get");}if(BUGGY_ZERO||HASNT_CHAINING)fixMethod(ADDER);if(IS_WEAK&&NativePrototype.clear)delete NativePrototype.clear;}exported[CONSTRUCTOR_NAME]=Constructor;$2({global:true,constructor:true,forced:Constructor!=NativeConstructor},exported);setToStringTag(Constructor,CONSTRUCTOR_NAME);if(!IS_WEAK)common.setStrong(Constructor,CONSTRUCTOR_NAME,IS_MAP);return Constructor;};}});// node_modules/core-js/internals/define-built-ins.js
var require_define_built_ins=__commonJS({"node_modules/core-js/internals/define-built-ins.js":function node_modulesCoreJsInternalsDefineBuiltInsJs(exports,module){var defineBuiltIn=require_define_built_in();module.exports=function(target,src,options){for(var key in src){defineBuiltIn(target,key,src[key],options);}return target;};}});// node_modules/core-js/internals/set-species.js
var require_set_species=__commonJS({"node_modules/core-js/internals/set-species.js":function node_modulesCoreJsInternalsSetSpeciesJs(exports,module){"use strict";var getBuiltIn=require_get_built_in();var definePropertyModule=require_object_define_property();var wellKnownSymbol=require_well_known_symbol();var DESCRIPTORS2=require_descriptors();var SPECIES=wellKnownSymbol("species");module.exports=function(CONSTRUCTOR_NAME){var Constructor=getBuiltIn(CONSTRUCTOR_NAME);var defineProperty=definePropertyModule.f;if(DESCRIPTORS2&&Constructor&&!Constructor[SPECIES]){defineProperty(Constructor,SPECIES,{configurable:true,get:function get(){return this;}});}};}});// node_modules/core-js/internals/collection-strong.js
var require_collection_strong=__commonJS({"node_modules/core-js/internals/collection-strong.js":function node_modulesCoreJsInternalsCollectionStrongJs(exports,module){"use strict";var defineProperty=require_object_define_property().f;var create=require_object_create();var defineBuiltIns=require_define_built_ins();var bind3=require_function_bind_context();var anInstance=require_an_instance();var iterate=require_iterate();var defineIterator=require_define_iterator();var setSpecies=require_set_species();var DESCRIPTORS2=require_descriptors();var fastKey=require_internal_metadata().fastKey;var InternalStateModule=require_internal_state();var setInternalState=InternalStateModule.set;var internalStateGetterFor=InternalStateModule.getterFor;module.exports={getConstructor:function getConstructor(wrapper,CONSTRUCTOR_NAME,IS_MAP,ADDER){var Constructor=wrapper(function(that,iterable){anInstance(that,Prototype);setInternalState(that,{type:CONSTRUCTOR_NAME,index:create(null),first:void 0,last:void 0,size:0});if(!DESCRIPTORS2)that.size=0;if(iterable!=void 0)iterate(iterable,that[ADDER],{that:that,AS_ENTRIES:IS_MAP});});var Prototype=Constructor.prototype;var getInternalState=internalStateGetterFor(CONSTRUCTOR_NAME);var define2=function define2(that,key,value){var state=getInternalState(that);var entry=getEntry(that,key);var previous,index;if(entry){entry.value=value;}else{state.last=entry={index:index=fastKey(key,true),key:key,value:value,previous:previous=state.last,next:void 0,removed:false};if(!state.first)state.first=entry;if(previous)previous.next=entry;if(DESCRIPTORS2)state.size++;else that.size++;if(index!=="F")state.index[index]=entry;}return that;};var getEntry=function getEntry(that,key){var state=getInternalState(that);var index=fastKey(key);var entry;if(index!=="F")return state.index[index];for(entry=state.first;entry;entry=entry.next){if(entry.key==key)return entry;}};defineBuiltIns(Prototype,{clear:function clear(){var that=this;var state=getInternalState(that);var data=state.index;var entry=state.first;while(entry){entry.removed=true;if(entry.previous)entry.previous=entry.previous.next=void 0;delete data[entry.index];entry=entry.next;}state.first=state.last=void 0;if(DESCRIPTORS2)state.size=0;else that.size=0;},"delete":function _delete(key){var that=this;var state=getInternalState(that);var entry=getEntry(that,key);if(entry){var next=entry.next;var prev=entry.previous;delete state.index[entry.index];entry.removed=true;if(prev)prev.next=next;if(next)next.previous=prev;if(state.first==entry)state.first=next;if(state.last==entry)state.last=prev;if(DESCRIPTORS2)state.size--;else that.size--;}return!!entry;},forEach:function forEach(callbackfn){var state=getInternalState(this);var boundFunction=bind3(callbackfn,arguments.length>1?arguments[1]:void 0);var entry;while(entry=entry?entry.next:state.first){boundFunction(entry.value,entry.key,this);while(entry&&entry.removed){entry=entry.previous;}}},has:function has(key){return!!getEntry(this,key);}});defineBuiltIns(Prototype,IS_MAP?{get:function get7(key){var entry=getEntry(this,key);return entry&&entry.value;},set:function set4(key,value){return define2(this,key===0?0:key,value);}}:{add:function add(value){return define2(this,value=value===0?0:value,value);}});if(DESCRIPTORS2)defineProperty(Prototype,"size",{get:function get(){return getInternalState(this).size;}});return Constructor;},setStrong:function setStrong(Constructor,CONSTRUCTOR_NAME,IS_MAP){var ITERATOR_NAME=CONSTRUCTOR_NAME+" Iterator";var getInternalCollectionState=internalStateGetterFor(CONSTRUCTOR_NAME);var getInternalIteratorState=internalStateGetterFor(ITERATOR_NAME);defineIterator(Constructor,CONSTRUCTOR_NAME,function(iterated,kind){setInternalState(this,{type:ITERATOR_NAME,target:iterated,state:getInternalCollectionState(iterated),kind:kind,last:void 0});},function(){var state=getInternalIteratorState(this);var kind=state.kind;var entry=state.last;while(entry&&entry.removed){entry=entry.previous;}if(!state.target||!(state.last=entry=entry?entry.next:state.state.first)){state.target=void 0;return{value:void 0,done:true};}if(kind=="keys")return{value:entry.key,done:false};if(kind=="values")return{value:entry.value,done:false};return{value:[entry.key,entry.value],done:false};},IS_MAP?"entries":"values",!IS_MAP,true);setSpecies(CONSTRUCTOR_NAME);}};}});// node_modules/core-js/modules/es.map.constructor.js
var require_es_map_constructor=__commonJS({"node_modules/core-js/modules/es.map.constructor.js":function node_modulesCoreJsModulesEsMapConstructorJs(){"use strict";var collection=require_collection();var collectionStrong=require_collection_strong();collection("Map",function(init5){return function Map2(){return init5(this,arguments.length?arguments[0]:void 0);};},collectionStrong);}});// node_modules/core-js/modules/es.map.js
var require_es_map=__commonJS({"node_modules/core-js/modules/es.map.js":function node_modulesCoreJsModulesEsMapJs(){require_es_map_constructor();}});// node_modules/core-js/internals/object-to-string.js
var require_object_to_string=__commonJS({"node_modules/core-js/internals/object-to-string.js":function node_modulesCoreJsInternalsObjectToStringJs(exports,module){"use strict";var TO_STRING_TAG_SUPPORT=require_to_string_tag_support();var classof=require_classof();module.exports=TO_STRING_TAG_SUPPORT?{}.toString:function toString2(){return"[object "+classof(this)+"]";};}});// node_modules/core-js/modules/es.object.to-string.js
var require_es_object_to_string=__commonJS({"node_modules/core-js/modules/es.object.to-string.js":function node_modulesCoreJsModulesEsObjectToStringJs(){var TO_STRING_TAG_SUPPORT=require_to_string_tag_support();var defineBuiltIn=require_define_built_in();var toString2=require_object_to_string();if(!TO_STRING_TAG_SUPPORT){defineBuiltIn(Object.prototype,"toString",toString2,{unsafe:true});}}});// node_modules/core-js/internals/to-string.js
var require_to_string=__commonJS({"node_modules/core-js/internals/to-string.js":function node_modulesCoreJsInternalsToStringJs(exports,module){var global2=require_global();var classof=require_classof();var String2=global2.String;module.exports=function(argument){if(classof(argument)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return String2(argument);};}});// node_modules/core-js/internals/string-multibyte.js
var require_string_multibyte=__commonJS({"node_modules/core-js/internals/string-multibyte.js":function node_modulesCoreJsInternalsStringMultibyteJs(exports,module){var uncurryThis=require_function_uncurry_this();var toIntegerOrInfinity=require_to_integer_or_infinity();var toString2=require_to_string();var requireObjectCoercible=require_require_object_coercible();var charAt=uncurryThis("".charAt);var charCodeAt=uncurryThis("".charCodeAt);var stringSlice=uncurryThis("".slice);var createMethod=function createMethod(CONVERT_TO_STRING){return function($this,pos){var S=toString2(requireObjectCoercible($this));var position=toIntegerOrInfinity(pos);var size=S.length;var first,second;if(position<0||position>=size)return CONVERT_TO_STRING?"":void 0;first=charCodeAt(S,position);return first<55296||first>56319||position+1===size||(second=charCodeAt(S,position+1))<56320||second>57343?CONVERT_TO_STRING?charAt(S,position):first:CONVERT_TO_STRING?stringSlice(S,position,position+2):(first-55296<<10)+(second-56320)+65536;};};module.exports={codeAt:createMethod(false),charAt:createMethod(true)};}});// node_modules/core-js/modules/es.string.iterator.js
var require_es_string_iterator=__commonJS({"node_modules/core-js/modules/es.string.iterator.js":function node_modulesCoreJsModulesEsStringIteratorJs(){"use strict";var charAt=require_string_multibyte().charAt;var toString2=require_to_string();var InternalStateModule=require_internal_state();var defineIterator=require_define_iterator();var STRING_ITERATOR="String Iterator";var setInternalState=InternalStateModule.set;var getInternalState=InternalStateModule.getterFor(STRING_ITERATOR);defineIterator(String,"String",function(iterated){setInternalState(this,{type:STRING_ITERATOR,string:toString2(iterated),index:0});},function next(){var state=getInternalState(this);var string=state.string;var index=state.index;var point;if(index>=string.length)return{value:void 0,done:true};point=charAt(string,index);state.index+=point.length;return{value:point,done:false};});}});// node_modules/core-js/internals/path.js
var require_path=__commonJS({"node_modules/core-js/internals/path.js":function node_modulesCoreJsInternalsPathJs(exports,module){var global2=require_global();module.exports=global2;}});// node_modules/core-js/es/map/index.js
var require_map=__commonJS({"node_modules/core-js/es/map/index.js":function node_modulesCoreJsEsMapIndexJs(exports,module){require_es_array_iterator();require_es_map();require_es_object_to_string();require_es_string_iterator();var path=require_path();module.exports=path.Map;}});// node_modules/core-js/modules/es.set.constructor.js
var require_es_set_constructor=__commonJS({"node_modules/core-js/modules/es.set.constructor.js":function node_modulesCoreJsModulesEsSetConstructorJs(){"use strict";var collection=require_collection();var collectionStrong=require_collection_strong();collection("Set",function(init5){return function Set2(){return init5(this,arguments.length?arguments[0]:void 0);};},collectionStrong);}});// node_modules/core-js/modules/es.set.js
var require_es_set=__commonJS({"node_modules/core-js/modules/es.set.js":function node_modulesCoreJsModulesEsSetJs(){require_es_set_constructor();}});// node_modules/core-js/es/set/index.js
var require_set=__commonJS({"node_modules/core-js/es/set/index.js":function node_modulesCoreJsEsSetIndexJs(exports,module){require_es_array_iterator();require_es_object_to_string();require_es_set();require_es_string_iterator();var path=require_path();module.exports=path.Set;}});// node_modules/core-js/internals/is-array.js
var require_is_array=__commonJS({"node_modules/core-js/internals/is-array.js":function node_modulesCoreJsInternalsIsArrayJs(exports,module){var classof=require_classof_raw();module.exports=Array.isArray||function isArray(argument){return classof(argument)=="Array";};}});// node_modules/core-js/internals/is-constructor.js
var require_is_constructor=__commonJS({"node_modules/core-js/internals/is-constructor.js":function node_modulesCoreJsInternalsIsConstructorJs(exports,module){var uncurryThis=require_function_uncurry_this();var fails=require_fails();var isCallable=require_is_callable();var classof=require_classof();var getBuiltIn=require_get_built_in();var inspectSource=require_inspect_source();var noop2=function noop2(){};var empty=[];var construct=getBuiltIn("Reflect","construct");var constructorRegExp=/^\s*(?:class|function)\b/;var exec=uncurryThis(constructorRegExp.exec);var INCORRECT_TO_STRING=!constructorRegExp.exec(noop2);var isConstructorModern=function isConstructor(argument){if(!isCallable(argument))return false;try{construct(noop2,empty,argument);return true;}catch(error){return false;}};var isConstructorLegacy=function isConstructor(argument){if(!isCallable(argument))return false;switch(classof(argument)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return false;}try{return INCORRECT_TO_STRING||!!exec(constructorRegExp,inspectSource(argument));}catch(error){return true;}};isConstructorLegacy.sham=true;module.exports=!construct||fails(function(){var called;return isConstructorModern(isConstructorModern.call)||!isConstructorModern(Object)||!isConstructorModern(function(){called=true;})||called;})?isConstructorLegacy:isConstructorModern;}});// node_modules/core-js/internals/array-species-constructor.js
var require_array_species_constructor=__commonJS({"node_modules/core-js/internals/array-species-constructor.js":function node_modulesCoreJsInternalsArraySpeciesConstructorJs(exports,module){var global2=require_global();var isArray=require_is_array();var isConstructor=require_is_constructor();var isObject5=require_is_object();var wellKnownSymbol=require_well_known_symbol();var SPECIES=wellKnownSymbol("species");var Array2=global2.Array;module.exports=function(originalArray){var C;if(isArray(originalArray)){C=originalArray.constructor;if(isConstructor(C)&&(C===Array2||isArray(C.prototype)))C=void 0;else if(isObject5(C)){C=C[SPECIES];if(C===null)C=void 0;}}return C===void 0?Array2:C;};}});// node_modules/core-js/internals/array-species-create.js
var require_array_species_create=__commonJS({"node_modules/core-js/internals/array-species-create.js":function node_modulesCoreJsInternalsArraySpeciesCreateJs(exports,module){var arraySpeciesConstructor=require_array_species_constructor();module.exports=function(originalArray,length){return new(arraySpeciesConstructor(originalArray))(length===0?0:length);};}});// node_modules/core-js/internals/array-iteration.js
var require_array_iteration=__commonJS({"node_modules/core-js/internals/array-iteration.js":function node_modulesCoreJsInternalsArrayIterationJs(exports,module){var bind3=require_function_bind_context();var uncurryThis=require_function_uncurry_this();var IndexedObject=require_indexed_object();var toObject=require_to_object();var lengthOfArrayLike=require_length_of_array_like();var arraySpeciesCreate=require_array_species_create();var push=uncurryThis([].push);var createMethod=function createMethod(TYPE){var IS_MAP=TYPE==1;var IS_FILTER=TYPE==2;var IS_SOME=TYPE==3;var IS_EVERY=TYPE==4;var IS_FIND_INDEX=TYPE==6;var IS_FILTER_REJECT=TYPE==7;var NO_HOLES=TYPE==5||IS_FIND_INDEX;return function($this,callbackfn,that,specificCreate){var O=toObject($this);var self2=IndexedObject(O);var boundFunction=bind3(callbackfn,that);var length=lengthOfArrayLike(self2);var index=0;var create=specificCreate||arraySpeciesCreate;var target=IS_MAP?create($this,length):IS_FILTER||IS_FILTER_REJECT?create($this,0):void 0;var value,result;for(;length>index;index++){if(NO_HOLES||index in self2){value=self2[index];result=boundFunction(value,index,O);if(TYPE){if(IS_MAP)target[index]=result;else if(result)switch(TYPE){case 3:return true;case 5:return value;case 6:return index;case 2:push(target,value);}else switch(TYPE){case 4:return false;case 7:push(target,value);}}}}return IS_FIND_INDEX?-1:IS_SOME||IS_EVERY?IS_EVERY:target;};};module.exports={forEach:createMethod(0),map:createMethod(1),filter:createMethod(2),some:createMethod(3),every:createMethod(4),find:createMethod(5),findIndex:createMethod(6),filterReject:createMethod(7)};}});// node_modules/core-js/internals/collection-weak.js
var require_collection_weak=__commonJS({"node_modules/core-js/internals/collection-weak.js":function node_modulesCoreJsInternalsCollectionWeakJs(exports,module){"use strict";var uncurryThis=require_function_uncurry_this();var defineBuiltIns=require_define_built_ins();var getWeakData=require_internal_metadata().getWeakData;var anObject=require_an_object();var isObject5=require_is_object();var anInstance=require_an_instance();var iterate=require_iterate();var ArrayIterationModule=require_array_iteration();var hasOwn=require_has_own_property();var InternalStateModule=require_internal_state();var setInternalState=InternalStateModule.set;var internalStateGetterFor=InternalStateModule.getterFor;var find=ArrayIterationModule.find;var findIndex3=ArrayIterationModule.findIndex;var splice=uncurryThis([].splice);var id=0;var uncaughtFrozenStore=function uncaughtFrozenStore(store){return store.frozen||(store.frozen=new UncaughtFrozenStore());};var UncaughtFrozenStore=function UncaughtFrozenStore(){this.entries=[];};var findUncaughtFrozen=function findUncaughtFrozen(store,key){return find(store.entries,function(it){return it[0]===key;});};UncaughtFrozenStore.prototype={get:function get(key){var entry=findUncaughtFrozen(this,key);if(entry)return entry[1];},has:function has(key){return!!findUncaughtFrozen(this,key);},set:function set(key,value){var entry=findUncaughtFrozen(this,key);if(entry)entry[1]=value;else this.entries.push([key,value]);},"delete":function _delete(key){var index=findIndex3(this.entries,function(it){return it[0]===key;});if(~index)splice(this.entries,index,1);return!!~index;}};module.exports={getConstructor:function getConstructor(wrapper,CONSTRUCTOR_NAME,IS_MAP,ADDER){var Constructor=wrapper(function(that,iterable){anInstance(that,Prototype);setInternalState(that,{type:CONSTRUCTOR_NAME,id:id++,frozen:void 0});if(iterable!=void 0)iterate(iterable,that[ADDER],{that:that,AS_ENTRIES:IS_MAP});});var Prototype=Constructor.prototype;var getInternalState=internalStateGetterFor(CONSTRUCTOR_NAME);var define2=function define2(that,key,value){var state=getInternalState(that);var data=getWeakData(anObject(key),true);if(data===true)uncaughtFrozenStore(state).set(key,value);else data[state.id]=value;return that;};defineBuiltIns(Prototype,{"delete":function _delete(key){var state=getInternalState(this);if(!isObject5(key))return false;var data=getWeakData(key);if(data===true)return uncaughtFrozenStore(state)["delete"](key);return data&&hasOwn(data,state.id)&&delete data[state.id];},has:function has(key){var state=getInternalState(this);if(!isObject5(key))return false;var data=getWeakData(key);if(data===true)return uncaughtFrozenStore(state).has(key);return data&&hasOwn(data,state.id);}});defineBuiltIns(Prototype,IS_MAP?{get:function get7(key){var state=getInternalState(this);if(isObject5(key)){var data=getWeakData(key);if(data===true)return uncaughtFrozenStore(state).get(key);return data?data[state.id]:void 0;}},set:function set4(key,value){return define2(this,key,value);}}:{add:function add(value){return define2(this,value,true);}});return Constructor;}};}});// node_modules/core-js/modules/es.weak-map.constructor.js
var require_es_weak_map_constructor=__commonJS({"node_modules/core-js/modules/es.weak-map.constructor.js":function node_modulesCoreJsModulesEsWeakMapConstructorJs(){"use strict";var global2=require_global();var uncurryThis=require_function_uncurry_this();var defineBuiltIns=require_define_built_ins();var InternalMetadataModule=require_internal_metadata();var collection=require_collection();var collectionWeak=require_collection_weak();var isObject5=require_is_object();var isExtensible=require_object_is_extensible();var enforceInternalState=require_internal_state().enforce;var NATIVE_WEAK_MAP=require_native_weak_map();var IS_IE11=!global2.ActiveXObject&&"ActiveXObject"in global2;var InternalWeakMap;var wrapper=function wrapper(init5){return function WeakMap2(){return init5(this,arguments.length?arguments[0]:void 0);};};var $WeakMap=collection("WeakMap",wrapper,collectionWeak);if(NATIVE_WEAK_MAP&&IS_IE11){InternalWeakMap=collectionWeak.getConstructor(wrapper,"WeakMap",true);InternalMetadataModule.enable();WeakMapPrototype=$WeakMap.prototype;nativeDelete=uncurryThis(WeakMapPrototype["delete"]);nativeHas=uncurryThis(WeakMapPrototype.has);nativeGet=uncurryThis(WeakMapPrototype.get);nativeSet=uncurryThis(WeakMapPrototype.set);defineBuiltIns(WeakMapPrototype,{"delete":function _delete(key){if(isObject5(key)&&!isExtensible(key)){var state=enforceInternalState(this);if(!state.frozen)state.frozen=new InternalWeakMap();return nativeDelete(this,key)||state.frozen["delete"](key);}return nativeDelete(this,key);},has:function has(key){if(isObject5(key)&&!isExtensible(key)){var state=enforceInternalState(this);if(!state.frozen)state.frozen=new InternalWeakMap();return nativeHas(this,key)||state.frozen.has(key);}return nativeHas(this,key);},get:function get7(key){if(isObject5(key)&&!isExtensible(key)){var state=enforceInternalState(this);if(!state.frozen)state.frozen=new InternalWeakMap();return nativeHas(this,key)?nativeGet(this,key):state.frozen.get(key);}return nativeGet(this,key);},set:function set4(key,value){if(isObject5(key)&&!isExtensible(key)){var state=enforceInternalState(this);if(!state.frozen)state.frozen=new InternalWeakMap();nativeHas(this,key)?nativeSet(this,key,value):state.frozen.set(key,value);}else nativeSet(this,key,value);return this;}});}var WeakMapPrototype;var nativeDelete;var nativeHas;var nativeGet;var nativeSet;}});// node_modules/core-js/modules/es.weak-map.js
var require_es_weak_map=__commonJS({"node_modules/core-js/modules/es.weak-map.js":function node_modulesCoreJsModulesEsWeakMapJs(){require_es_weak_map_constructor();}});// node_modules/core-js/es/weak-map/index.js
var require_weak_map=__commonJS({"node_modules/core-js/es/weak-map/index.js":function node_modulesCoreJsEsWeakMapIndexJs(exports,module){require_es_array_iterator();require_es_object_to_string();require_es_weak_map();var path=require_path();module.exports=path.WeakMap;}});// node_modules/core-js/internals/call-with-safe-iteration-closing.js
var require_call_with_safe_iteration_closing=__commonJS({"node_modules/core-js/internals/call-with-safe-iteration-closing.js":function node_modulesCoreJsInternalsCallWithSafeIterationClosingJs(exports,module){var anObject=require_an_object();var iteratorClose=require_iterator_close();module.exports=function(iterator,fn,value,ENTRIES){try{return ENTRIES?fn(anObject(value)[0],value[1]):fn(value);}catch(error){iteratorClose(iterator,"throw",error);}};}});// node_modules/core-js/internals/array-from.js
var require_array_from=__commonJS({"node_modules/core-js/internals/array-from.js":function node_modulesCoreJsInternalsArrayFromJs(exports,module){"use strict";var global2=require_global();var bind3=require_function_bind_context();var call=require_function_call();var toObject=require_to_object();var callWithSafeIterationClosing=require_call_with_safe_iteration_closing();var isArrayIteratorMethod=require_is_array_iterator_method();var isConstructor=require_is_constructor();var lengthOfArrayLike=require_length_of_array_like();var createProperty=require_create_property();var getIterator=require_get_iterator();var getIteratorMethod=require_get_iterator_method();var Array2=global2.Array;module.exports=function from3(arrayLike){var O=toObject(arrayLike);var IS_CONSTRUCTOR=isConstructor(this);var argumentsLength=arguments.length;var mapfn=argumentsLength>1?arguments[1]:void 0;var mapping=mapfn!==void 0;if(mapping)mapfn=bind3(mapfn,argumentsLength>2?arguments[2]:void 0);var iteratorMethod=getIteratorMethod(O);var index=0;var length,result,step,iterator,next,value;if(iteratorMethod&&!(this==Array2&&isArrayIteratorMethod(iteratorMethod))){iterator=getIterator(O,iteratorMethod);next=iterator.next;result=IS_CONSTRUCTOR?new this():[];for(;!(step=call(next,iterator)).done;index++){value=mapping?callWithSafeIterationClosing(iterator,mapfn,[step.value,index],true):step.value;createProperty(result,index,value);}}else{length=lengthOfArrayLike(O);result=IS_CONSTRUCTOR?new this(length):Array2(length);for(;length>index;index++){value=mapping?mapfn(O[index],index):O[index];createProperty(result,index,value);}}result.length=index;return result;};}});// node_modules/core-js/modules/es.array.from.js
var require_es_array_from=__commonJS({"node_modules/core-js/modules/es.array.from.js":function node_modulesCoreJsModulesEsArrayFromJs(){var $2=require_export();var from3=require_array_from();var checkCorrectnessOfIteration=require_check_correctness_of_iteration();var INCORRECT_ITERATION=!checkCorrectnessOfIteration(function(iterable){Array.from(iterable);});$2({target:"Array",stat:true,forced:INCORRECT_ITERATION},{from:from3});}});// node_modules/core-js/es/array/from.js
var require_from=__commonJS({"node_modules/core-js/es/array/from.js":function node_modulesCoreJsEsArrayFromJs(exports,module){require_es_string_iterator();require_es_array_from();var path=require_path();module.exports=path.Array.from;}});// node_modules/core-js/internals/object-assign.js
var require_object_assign=__commonJS({"node_modules/core-js/internals/object-assign.js":function node_modulesCoreJsInternalsObjectAssignJs(exports,module){"use strict";var DESCRIPTORS2=require_descriptors();var uncurryThis=require_function_uncurry_this();var call=require_function_call();var fails=require_fails();var objectKeys=require_object_keys();var getOwnPropertySymbolsModule=require_object_get_own_property_symbols();var propertyIsEnumerableModule=require_object_property_is_enumerable();var toObject=require_to_object();var IndexedObject=require_indexed_object();var $assign=Object.assign;var defineProperty=Object.defineProperty;var concat=uncurryThis([].concat);module.exports=!$assign||fails(function(){if(DESCRIPTORS2&&$assign({b:1},$assign(defineProperty({},"a",{enumerable:true,get:function get(){defineProperty(this,"b",{value:3,enumerable:false});}}),{b:2})).b!==1)return true;var A={};var B={};var symbol=Symbol();var alphabet="abcdefghijklmnopqrst";A[symbol]=7;alphabet.split("").forEach(function(chr){B[chr]=chr;});return $assign({},A)[symbol]!=7||objectKeys($assign({},B)).join("")!=alphabet;})?function assign2(target,source){var T=toObject(target);var argumentsLength=arguments.length;var index=1;var getOwnPropertySymbols=getOwnPropertySymbolsModule.f;var propertyIsEnumerable=propertyIsEnumerableModule.f;while(argumentsLength>index){var S=IndexedObject(arguments[index++]);var keys3=getOwnPropertySymbols?concat(objectKeys(S),getOwnPropertySymbols(S)):objectKeys(S);var length=keys3.length;var j=0;var key;while(length>j){key=keys3[j++];if(!DESCRIPTORS2||call(propertyIsEnumerable,S,key))T[key]=S[key];}}return T;}:$assign;}});// node_modules/core-js/modules/es.object.assign.js
var require_es_object_assign=__commonJS({"node_modules/core-js/modules/es.object.assign.js":function node_modulesCoreJsModulesEsObjectAssignJs(){var $2=require_export();var assign2=require_object_assign();$2({target:"Object",stat:true,arity:2,forced:Object.assign!==assign2},{assign:assign2});}});// node_modules/core-js/es/object/assign.js
var require_assign=__commonJS({"node_modules/core-js/es/object/assign.js":function node_modulesCoreJsEsObjectAssignJs(exports,module){require_es_object_assign();var path=require_path();module.exports=path.Object.assign;}});// node_modules/global/window.js
var require_window=__commonJS({"node_modules/global/window.js":function node_modulesGlobalWindowJs(exports,module){var win;if(typeof window!=="undefined"){win=window;}else if(typeof global!=="undefined"){win=global;}else if(typeof self!=="undefined"){win=self;}else{win={};}module.exports=win;}});// (disabled):node_modules/min-document/index.js
var require_min_document=__commonJS({"(disabled):node_modules/min-document/index.js":function disabledNode_modulesMinDocumentIndexJs(){}});// node_modules/global/document.js
var require_document=__commonJS({"node_modules/global/document.js":function node_modulesGlobalDocumentJs(exports,module){var topLevel=typeof global!=="undefined"?global:typeof window!=="undefined"?window:{};var minDoc=require_min_document();var doccy;if(typeof document!=="undefined"){doccy=document;}else{doccy=topLevel["__GLOBAL_DOCUMENT_CACHE@4"];if(!doccy){doccy=topLevel["__GLOBAL_DOCUMENT_CACHE@4"]=minDoc;}}module.exports=doccy;}});// node_modules/keycode/index.js
var require_keycode=__commonJS({"node_modules/keycode/index.js":function node_modulesKeycodeIndexJs(exports,module){function keyCode(searchInput){if(searchInput&&_typeof(searchInput)==="object"){var hasKeyCode=searchInput.which||searchInput.keyCode||searchInput.charCode;if(hasKeyCode)searchInput=hasKeyCode;}if(typeof searchInput==="number")return names[searchInput];var search=String(searchInput);var foundNamedKey=codes[search.toLowerCase()];if(foundNamedKey)return foundNamedKey;var foundNamedKey=aliases[search.toLowerCase()];if(foundNamedKey)return foundNamedKey;if(search.length===1)return search.charCodeAt(0);return void 0;}keyCode.isEventKey=function isEventKey(event,nameOrCode){if(event&&_typeof(event)==="object"){var keyCode2=event.which||event.keyCode||event.charCode;if(keyCode2===null||keyCode2===void 0){return false;}if(typeof nameOrCode==="string"){var foundNamedKey=codes[nameOrCode.toLowerCase()];if(foundNamedKey){return foundNamedKey===keyCode2;}var foundNamedKey=aliases[nameOrCode.toLowerCase()];if(foundNamedKey){return foundNamedKey===keyCode2;}}else if(typeof nameOrCode==="number"){return nameOrCode===keyCode2;}return false;}};exports=module.exports=keyCode;var codes=exports.code=exports.codes={"backspace":8,"tab":9,"enter":13,"shift":16,"ctrl":17,"alt":18,"pause/break":19,"caps lock":20,"esc":27,"space":32,"page up":33,"page down":34,"end":35,"home":36,"left":37,"up":38,"right":39,"down":40,"insert":45,"delete":46,"command":91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222};var aliases=exports.aliases={"windows":91,"\u21E7":16,"\u2325":18,"\u2303":17,"\u2318":91,"ctl":17,"control":17,"option":18,"pause":19,"break":19,"caps":20,"return":13,"escape":27,"spc":32,"spacebar":32,"pgup":33,"pgdn":34,"ins":45,"del":46,"cmd":91};for(i=97;i<123;i++){codes[String.fromCharCode(i)]=i-32;}for(i=48;i<58;i++){codes[i-48]=i;}var i;for(i=1;i<13;i++){codes["f"+i]=i+111;}for(i=0;i<10;i++){codes["numpad "+i]=i+96;}var names=exports.names=exports.title={};for(i in codes){names[codes[i]]=i;}for(alias in aliases){codes[alias]=aliases[alias];}var alias;}});// node_modules/safe-json-parse/tuple.js
var require_tuple=__commonJS({"node_modules/safe-json-parse/tuple.js":function node_modulesSafeJsonParseTupleJs(exports,module){module.exports=SafeParseTuple;function SafeParseTuple(obj,reviver){var json;var error=null;try{json=JSON.parse(obj,reviver);}catch(err){error=err;}return[error,json];}}});// node_modules/@babel/runtime/helpers/extends.js
var require_extends=__commonJS({"node_modules/@babel/runtime/helpers/extends.js":function node_modulesBabelRuntimeHelpersExtendsJs(exports,module){function _extends2(){module.exports=_extends2=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;},module.exports.__esModule=true,module.exports["default"]=module.exports;return _extends2.apply(this,arguments);}module.exports=_extends2,module.exports.__esModule=true,module.exports["default"]=module.exports;}});// node_modules/is-function/index.js
var require_is_function=__commonJS({"node_modules/is-function/index.js":function node_modulesIsFunctionIndexJs(exports,module){module.exports=isFunction;var toString2=Object.prototype.toString;function isFunction(fn){if(!fn){return false;}var string=toString2.call(fn);return string==="[object Function]"||typeof fn==="function"&&string!=="[object RegExp]"||typeof window!=="undefined"&&(fn===window.setTimeout||fn===window.alert||fn===window.confirm||fn===window.prompt);}}});// node_modules/@videojs/xhr/lib/http-handler.js
var require_http_handler=__commonJS({"node_modules/@videojs/xhr/lib/http-handler.js":function node_modulesVideojsXhrLibHttpHandlerJs(exports,module){"use strict";var window7=require_window();var httpResponseHandler=function httpResponseHandler2(callback2,decodeResponseBody){if(decodeResponseBody===void 0){decodeResponseBody=false;}return function(err,response,responseBody){if(err){callback2(err);return;}if(response.statusCode>=400&&response.statusCode<=599){var cause=responseBody;if(decodeResponseBody){if(window7.TextDecoder){var charset=getCharset(response.headers&&response.headers["content-type"]);try{cause=new TextDecoder(charset).decode(responseBody);}catch(e){}}else{cause=String.fromCharCode.apply(null,new Uint8Array(responseBody));}}callback2({cause:cause});return;}callback2(null,responseBody);};};function getCharset(contentTypeHeader){if(contentTypeHeader===void 0){contentTypeHeader="";}return contentTypeHeader.toLowerCase().split(";").reduce(function(charset,contentType){var _contentType$split=contentType.split("="),type2=_contentType$split[0],value=_contentType$split[1];if(type2.trim()==="charset"){return value.trim();}return charset;},"utf-8");}module.exports=httpResponseHandler;}});// node_modules/@videojs/xhr/lib/index.js
var require_lib=__commonJS({"node_modules/@videojs/xhr/lib/index.js":function node_modulesVideojsXhrLibIndexJs(exports,module){"use strict";var window7=require_window();var _extends2=require_extends();var isFunction=require_is_function();createXHR.httpHandler=require_http_handler();var parseHeaders=function parseHeaders2(headers){var result={};if(!headers){return result;}headers.trim().split("\n").forEach(function(row){var index=row.indexOf(":");var key=row.slice(0,index).trim().toLowerCase();var value=row.slice(index+1).trim();if(typeof result[key]==="undefined"){result[key]=value;}else if(Array.isArray(result[key])){result[key].push(value);}else{result[key]=[result[key],value];}});return result;};module.exports=createXHR;module.exports["default"]=createXHR;createXHR.XMLHttpRequest=window7.XMLHttpRequest||noop2;createXHR.XDomainRequest="withCredentials"in new createXHR.XMLHttpRequest()?createXHR.XMLHttpRequest:window7.XDomainRequest;forEachArray(["get","put","post","patch","head","delete"],function(method){createXHR[method==="delete"?"del":method]=function(uri,options,callback2){options=initParams(uri,options,callback2);options.method=method.toUpperCase();return _createXHR(options);};});function forEachArray(array,iterator){for(var i=0;i<array.length;i++){iterator(array[i]);}}function isEmpty(obj){for(var i in obj){if(obj.hasOwnProperty(i))return false;}return true;}function initParams(uri,options,callback2){var params=uri;if(isFunction(options)){callback2=options;if(typeof uri==="string"){params={uri:uri};}}else{params=_extends2({},options,{uri:uri});}params.callback=callback2;return params;}function createXHR(uri,options,callback2){options=initParams(uri,options,callback2);return _createXHR(options);}function _createXHR(options){if(typeof options.callback==="undefined"){throw new Error("callback argument missing");}var called=false;var callback2=function cbOnce(err,response,body2){if(!called){called=true;options.callback(err,response,body2);}};function readystatechange(){if(xhr.readyState===4){setTimeout(loadFunc,0);}}function getBody(){var body2=void 0;if(xhr.response){body2=xhr.response;}else{body2=xhr.responseText||getXml(xhr);}if(isJson){try{body2=JSON.parse(body2);}catch(e){}}return body2;}function errorFunc(evt){clearTimeout(timeoutTimer);if(!(evt instanceof Error)){evt=new Error(""+(evt||"Unknown XMLHttpRequest Error"));}evt.statusCode=0;return callback2(evt,failureResponse);}function loadFunc(){if(aborted)return;var status;clearTimeout(timeoutTimer);if(options.useXDR&&xhr.status===void 0){status=200;}else{status=xhr.status===1223?204:xhr.status;}var response=failureResponse;var err=null;if(status!==0){response={body:getBody(),statusCode:status,method:method,headers:{},url:uri,rawRequest:xhr};if(xhr.getAllResponseHeaders){response.headers=parseHeaders(xhr.getAllResponseHeaders());}}else{err=new Error("Internal XMLHttpRequest Error");}return callback2(err,response,response.body);}var xhr=options.xhr||null;if(!xhr){if(options.cors||options.useXDR){xhr=new createXHR.XDomainRequest();}else{xhr=new createXHR.XMLHttpRequest();}}var key;var aborted;var uri=xhr.url=options.uri||options.url;var method=xhr.method=options.method||"GET";var body=options.body||options.data;var headers=xhr.headers=options.headers||{};var sync=!!options.sync;var isJson=false;var timeoutTimer;var failureResponse={body:void 0,headers:{},statusCode:0,method:method,url:uri,rawRequest:xhr};if("json"in options&&options.json!==false){isJson=true;headers["accept"]||headers["Accept"]||(headers["Accept"]="application/json");if(method!=="GET"&&method!=="HEAD"){headers["content-type"]||headers["Content-Type"]||(headers["Content-Type"]="application/json");body=JSON.stringify(options.json===true?body:options.json);}}xhr.onreadystatechange=readystatechange;xhr.onload=loadFunc;xhr.onerror=errorFunc;xhr.onprogress=function(){};xhr.onabort=function(){aborted=true;};xhr.ontimeout=errorFunc;xhr.open(method,uri,!sync,options.username,options.password);if(!sync){xhr.withCredentials=!!options.withCredentials;}if(!sync&&options.timeout>0){timeoutTimer=setTimeout(function(){if(aborted)return;aborted=true;xhr.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT";errorFunc(e);},options.timeout);}if(xhr.setRequestHeader){for(key in headers){if(headers.hasOwnProperty(key)){xhr.setRequestHeader(key,headers[key]);}}}else if(options.headers&&!isEmpty(options.headers)){throw new Error("Headers cannot be set on an XDomainRequest object");}if("responseType"in options){xhr.responseType=options.responseType;}if("beforeSend"in options&&typeof options.beforeSend==="function"){options.beforeSend(xhr);}xhr.send(body||null);return xhr;}function getXml(xhr){try{if(xhr.responseType==="document"){return xhr.responseXML;}var firefoxBugTakenEffect=xhr.responseXML&&xhr.responseXML.documentElement.nodeName==="parsererror";if(xhr.responseType===""&&!firefoxBugTakenEffect){return xhr.responseXML;}}catch(e){}return null;}function noop2(){}}});// node_modules/videojs-vtt.js/lib/vtt.js
var require_vtt=__commonJS({"node_modules/videojs-vtt.js/lib/vtt.js":function node_modulesVideojsVttJsLibVttJs(exports,module){var document3=require_document();var _objCreate=Object.create||function(){function F(){}return function(o){if(arguments.length!==1){throw new Error("Object.create shim only accepts one parameter.");}F.prototype=o;return new F();};}();function ParsingError(errorData,message){this.name="ParsingError";this.code=errorData.code;this.message=message||errorData.message;}ParsingError.prototype=_objCreate(Error.prototype);ParsingError.prototype.constructor=ParsingError;ParsingError.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}};function parseTimeStamp(input){function computeSeconds(h,m2,s,f){return(h|0)*3600+(m2|0)*60+(s|0)+(f|0)/1e3;}var m=input.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);if(!m){return null;}if(m[3]){return computeSeconds(m[1],m[2],m[3].replace(":",""),m[4]);}else if(m[1]>59){return computeSeconds(m[1],m[2],0,m[4]);}else{return computeSeconds(0,m[1],m[2],m[4]);}}function Settings(){this.values=_objCreate(null);}Settings.prototype={set:function set(k,v){if(!this.get(k)&&v!==""){this.values[k]=v;}},get:function get(k,dflt,defaultKey){if(defaultKey){return this.has(k)?this.values[k]:dflt[defaultKey];}return this.has(k)?this.values[k]:dflt;},has:function has(k){return k in this.values;},alt:function alt(k,v,a){for(var n=0;n<a.length;++n){if(v===a[n]){this.set(k,v);break;}}},integer:function integer(k,v){if(/^-?\d+$/.test(v)){this.set(k,parseInt(v,10));}},percent:function percent(k,v){var m;if(m=v.match(/^([\d]{1,3})(\.[\d]*)?%$/)){v=parseFloat(v);if(v>=0&&v<=100){this.set(k,v);return true;}}return false;}};function parseOptions(input,callback2,keyValueDelim,groupDelim){var groups=groupDelim?input.split(groupDelim):[input];for(var i in groups){if(typeof groups[i]!=="string"){continue;}var kv=groups[i].split(keyValueDelim);if(kv.length!==2){continue;}var k=kv[0];var v=kv[1];callback2(k,v);}}function parseCue(input,cue,regionList){var oInput=input;function consumeTimeStamp(){var ts2=parseTimeStamp(input);if(ts2===null){throw new ParsingError(ParsingError.Errors.BadTimeStamp,"Malformed timestamp: "+oInput);}input=input.replace(/^[^\sa-zA-Z-]+/,"");return ts2;}function consumeCueSettings(input2,cue2){var settings=new Settings();parseOptions(input2,function(k,v){switch(k){case"region":for(var i=regionList.length-1;i>=0;i--){if(regionList[i].id===v){settings.set(k,regionList[i].region);break;}}break;case"vertical":settings.alt(k,v,["rl","lr"]);break;case"line":var vals=v.split(","),vals0=vals[0];settings.integer(k,vals0);settings.percent(k,vals0)?settings.set("snapToLines",false):null;settings.alt(k,vals0,["auto"]);if(vals.length===2){settings.alt("lineAlign",vals[1],["start","center","end"]);}break;case"position":vals=v.split(",");settings.percent(k,vals[0]);if(vals.length===2){settings.alt("positionAlign",vals[1],["start","center","end"]);}break;case"size":settings.percent(k,v);break;case"align":settings.alt(k,v,["start","center","end","left","right"]);break;}},/:/,/\s/);cue2.region=settings.get("region",null);cue2.vertical=settings.get("vertical","");try{cue2.line=settings.get("line","auto");}catch(e){}cue2.lineAlign=settings.get("lineAlign","start");cue2.snapToLines=settings.get("snapToLines",true);cue2.size=settings.get("size",100);try{cue2.align=settings.get("align","center");}catch(e){cue2.align=settings.get("align","middle");}try{cue2.position=settings.get("position","auto");}catch(e){cue2.position=settings.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},cue2.align);}cue2.positionAlign=settings.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},cue2.align);}function skipWhitespace(){input=input.replace(/^\s+/,"");}skipWhitespace();cue.startTime=consumeTimeStamp();skipWhitespace();if(input.substr(0,3)!=="-->"){throw new ParsingError(ParsingError.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+oInput);}input=input.substr(3);skipWhitespace();cue.endTime=consumeTimeStamp();skipWhitespace();consumeCueSettings(input,cue);}var TEXTAREA_ELEMENT=document3.createElement&&document3.createElement("textarea");var TAG_NAME={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"};var DEFAULT_COLOR_CLASS={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"};var TAG_ANNOTATION={v:"title",lang:"lang"};var NEEDS_PARENT={rt:"ruby"};function parseContent(window7,input){function nextToken(){if(!input){return null;}function consume(result){input=input.substr(result.length);return result;}var m2=input.match(/^([^<]*)(<[^>]*>?)?/);return consume(m2[1]?m2[1]:m2[2]);}function unescape2(s){TEXTAREA_ELEMENT.innerHTML=s;s=TEXTAREA_ELEMENT.textContent;TEXTAREA_ELEMENT.textContent="";return s;}function shouldAdd(current2,element){return!NEEDS_PARENT[element.localName]||NEEDS_PARENT[element.localName]===current2.localName;}function createElement(type2,annotation){var tagName=TAG_NAME[type2];if(!tagName){return null;}var element=window7.document.createElement(tagName);var name=TAG_ANNOTATION[type2];if(name&&annotation){element[name]=annotation.trim();}return element;}var rootDiv=window7.document.createElement("div"),current=rootDiv,t2,tagStack=[];while((t2=nextToken())!==null){if(t2[0]==="<"){if(t2[1]==="/"){if(tagStack.length&&tagStack[tagStack.length-1]===t2.substr(2).replace(">","")){tagStack.pop();current=current.parentNode;}continue;}var ts2=parseTimeStamp(t2.substr(1,t2.length-2));var node;if(ts2){node=window7.document.createProcessingInstruction("timestamp",ts2);current.appendChild(node);continue;}var m=t2.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!m){continue;}node=createElement(m[1],m[3]);if(!node){continue;}if(!shouldAdd(current,node)){continue;}if(m[2]){var classes=m[2].split(".");classes.forEach(function(cl){var bgColor=/^bg_/.test(cl);var colorName=bgColor?cl.slice(3):cl;if(DEFAULT_COLOR_CLASS.hasOwnProperty(colorName)){var propName=bgColor?"background-color":"color";var propValue=DEFAULT_COLOR_CLASS[colorName];node.style[propName]=propValue;}});node.className=classes.join(" ");}tagStack.push(m[1]);current.appendChild(node);current=node;continue;}current.appendChild(window7.document.createTextNode(unescape2(t2)));}return rootDiv;}var strongRTLRanges=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function isStrongRTLChar(charCode){for(var i=0;i<strongRTLRanges.length;i++){var currentRange=strongRTLRanges[i];if(charCode>=currentRange[0]&&charCode<=currentRange[1]){return true;}}return false;}function determineBidi(cueDiv){var nodeStack=[],text="",charCode;if(!cueDiv||!cueDiv.childNodes){return"ltr";}function pushNodes(nodeStack2,node){for(var i2=node.childNodes.length-1;i2>=0;i2--){nodeStack2.push(node.childNodes[i2]);}}function nextTextNode(nodeStack2){if(!nodeStack2||!nodeStack2.length){return null;}var node=nodeStack2.pop(),text2=node.textContent||node.innerText;if(text2){var m=text2.match(/^.*(\n|\r)/);if(m){nodeStack2.length=0;return m[0];}return text2;}if(node.tagName==="ruby"){return nextTextNode(nodeStack2);}if(node.childNodes){pushNodes(nodeStack2,node);return nextTextNode(nodeStack2);}}pushNodes(nodeStack,cueDiv);while(text=nextTextNode(nodeStack)){for(var i=0;i<text.length;i++){charCode=text.charCodeAt(i);if(isStrongRTLChar(charCode)){return"rtl";}}}return"ltr";}function computeLinePos(cue){if(typeof cue.line==="number"&&(cue.snapToLines||cue.line>=0&&cue.line<=100)){return cue.line;}if(!cue.track||!cue.track.textTrackList||!cue.track.textTrackList.mediaElement){return-1;}var track=cue.track,trackList=track.textTrackList,count=0;for(var i=0;i<trackList.length&&trackList[i]!==track;i++){if(trackList[i].mode==="showing"){count++;}}return++count*-1;}function StyleBox(){}StyleBox.prototype.applyStyles=function(styles,div){div=div||this.div;for(var prop in styles){if(styles.hasOwnProperty(prop)){div.style[prop]=styles[prop];}}};StyleBox.prototype.formatStyle=function(val,unit){return val===0?0:val+unit;};function CueStyleBox(window7,cue,styleOptions){StyleBox.call(this);this.cue=cue;this.cueDiv=parseContent(window7,cue.text);var styles={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:cue.vertical===""?"horizontal-tb":cue.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(styles,this.cueDiv);this.div=window7.document.createElement("div");styles={direction:determineBidi(this.cueDiv),writingMode:cue.vertical===""?"horizontal-tb":cue.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:cue.align==="middle"?"center":cue.align,font:styleOptions.font,whiteSpace:"pre-line",position:"absolute"};this.applyStyles(styles);this.div.appendChild(this.cueDiv);var textPos=0;switch(cue.positionAlign){case"start":textPos=cue.position;break;case"center":textPos=cue.position-cue.size/2;break;case"end":textPos=cue.position-cue.size;break;}if(cue.vertical===""){this.applyStyles({left:this.formatStyle(textPos,"%"),width:this.formatStyle(cue.size,"%")});}else{this.applyStyles({top:this.formatStyle(textPos,"%"),height:this.formatStyle(cue.size,"%")});}this.move=function(box){this.applyStyles({top:this.formatStyle(box.top,"px"),bottom:this.formatStyle(box.bottom,"px"),left:this.formatStyle(box.left,"px"),right:this.formatStyle(box.right,"px"),height:this.formatStyle(box.height,"px"),width:this.formatStyle(box.width,"px")});};}CueStyleBox.prototype=_objCreate(StyleBox.prototype);CueStyleBox.prototype.constructor=CueStyleBox;function BoxPosition(obj){var lh,height2,width2,top;if(obj.div){height2=obj.div.offsetHeight;width2=obj.div.offsetWidth;top=obj.div.offsetTop;var rects=(rects=obj.div.childNodes)&&(rects=rects[0])&&rects.getClientRects&&rects.getClientRects();obj=obj.div.getBoundingClientRect();lh=rects?Math.max(rects[0]&&rects[0].height||0,obj.height/rects.length):0;}this.left=obj.left;this.right=obj.right;this.top=obj.top||top;this.height=obj.height||height2;this.bottom=obj.bottom||top+(obj.height||height2);this.width=obj.width||width2;this.lineHeight=lh!==void 0?lh:obj.lineHeight;}BoxPosition.prototype.move=function(axis,toMove){toMove=toMove!==void 0?toMove:this.lineHeight;switch(axis){case"+x":this.left+=toMove;this.right+=toMove;break;case"-x":this.left-=toMove;this.right-=toMove;break;case"+y":this.top+=toMove;this.bottom+=toMove;break;case"-y":this.top-=toMove;this.bottom-=toMove;break;}};BoxPosition.prototype.overlaps=function(b2){return this.left<b2.right&&this.right>b2.left&&this.top<b2.bottom&&this.bottom>b2.top;};BoxPosition.prototype.overlapsAny=function(boxes){for(var i=0;i<boxes.length;i++){if(this.overlaps(boxes[i])){return true;}}return false;};BoxPosition.prototype.within=function(container){return this.top>=container.top&&this.bottom<=container.bottom&&this.left>=container.left&&this.right<=container.right;};BoxPosition.prototype.overlapsOppositeAxis=function(container,axis){switch(axis){case"+x":return this.left<container.left;case"-x":return this.right>container.right;case"+y":return this.top<container.top;case"-y":return this.bottom>container.bottom;}};BoxPosition.prototype.intersectPercentage=function(b2){var x=Math.max(0,Math.min(this.right,b2.right)-Math.max(this.left,b2.left)),y=Math.max(0,Math.min(this.bottom,b2.bottom)-Math.max(this.top,b2.top)),intersectArea=x*y;return intersectArea/(this.height*this.width);};BoxPosition.prototype.toCSSCompatValues=function(reference){return{top:this.top-reference.top,bottom:reference.bottom-this.bottom,left:this.left-reference.left,right:reference.right-this.right,height:this.height,width:this.width};};BoxPosition.getSimpleBoxPosition=function(obj){var height2=obj.div?obj.div.offsetHeight:obj.tagName?obj.offsetHeight:0;var width2=obj.div?obj.div.offsetWidth:obj.tagName?obj.offsetWidth:0;var top=obj.div?obj.div.offsetTop:obj.tagName?obj.offsetTop:0;obj=obj.div?obj.div.getBoundingClientRect():obj.tagName?obj.getBoundingClientRect():obj;var ret={left:obj.left,right:obj.right,top:obj.top||top,height:obj.height||height2,bottom:obj.bottom||top+(obj.height||height2),width:obj.width||width2};return ret;};function moveBoxToLinePosition(window7,styleBox,containerBox,boxPositions){function findBestPosition(b,axis2){var bestPosition2,specifiedPosition=new BoxPosition(b),percentage=1;for(var i=0;i<axis2.length;i++){while(b.overlapsOppositeAxis(containerBox,axis2[i])||b.within(containerBox)&&b.overlapsAny(boxPositions)){b.move(axis2[i]);}if(b.within(containerBox)){return b;}var p=b.intersectPercentage(containerBox);if(percentage>p){bestPosition2=new BoxPosition(b);percentage=p;}b=new BoxPosition(specifiedPosition);}return bestPosition2||specifiedPosition;}var boxPosition=new BoxPosition(styleBox),cue=styleBox.cue,linePos=computeLinePos(cue),axis=[];if(cue.snapToLines){var size;switch(cue.vertical){case"":axis=["+y","-y"];size="height";break;case"rl":axis=["+x","-x"];size="width";break;case"lr":axis=["-x","+x"];size="width";break;}var step=boxPosition.lineHeight,position=step*Math.round(linePos),maxPosition=containerBox[size]+step,initialAxis=axis[0];if(Math.abs(position)>maxPosition){position=position<0?-1:1;position*=Math.ceil(maxPosition/step)*step;}if(linePos<0){position+=cue.vertical===""?containerBox.height:containerBox.width;axis=axis.reverse();}boxPosition.move(initialAxis,position);}else{var calculatedPercentage=boxPosition.lineHeight/containerBox.height*100;switch(cue.lineAlign){case"center":linePos-=calculatedPercentage/2;break;case"end":linePos-=calculatedPercentage;break;}switch(cue.vertical){case"":styleBox.applyStyles({top:styleBox.formatStyle(linePos,"%")});break;case"rl":styleBox.applyStyles({left:styleBox.formatStyle(linePos,"%")});break;case"lr":styleBox.applyStyles({right:styleBox.formatStyle(linePos,"%")});break;}axis=["+y","-x","+x","-y"];boxPosition=new BoxPosition(styleBox);}var bestPosition=findBestPosition(boxPosition,axis);styleBox.move(bestPosition.toCSSCompatValues(containerBox));}function WebVTT2(){}WebVTT2.StringDecoder=function(){return{decode:function decode(data){if(!data){return"";}if(typeof data!=="string"){throw new Error("Error - expected string data.");}return decodeURIComponent(encodeURIComponent(data));}};};WebVTT2.convertCueToDOMTree=function(window7,cuetext){if(!window7||!cuetext){return null;}return parseContent(window7,cuetext);};var FONT_SIZE_PERCENT=0.05;var FONT_STYLE="sans-serif";var CUE_BACKGROUND_PADDING="1.5%";WebVTT2.processCues=function(window7,cues,overlay){if(!window7||!cues||!overlay){return null;}while(overlay.firstChild){overlay.removeChild(overlay.firstChild);}var paddedOverlay=window7.document.createElement("div");paddedOverlay.style.position="absolute";paddedOverlay.style.left="0";paddedOverlay.style.right="0";paddedOverlay.style.top="0";paddedOverlay.style.bottom="0";paddedOverlay.style.margin=CUE_BACKGROUND_PADDING;overlay.appendChild(paddedOverlay);function shouldCompute(cues2){for(var i2=0;i2<cues2.length;i2++){if(cues2[i2].hasBeenReset||!cues2[i2].displayState){return true;}}return false;}if(!shouldCompute(cues)){for(var i=0;i<cues.length;i++){paddedOverlay.appendChild(cues[i].displayState);}return;}var boxPositions=[],containerBox=BoxPosition.getSimpleBoxPosition(paddedOverlay),fontSize=Math.round(containerBox.height*FONT_SIZE_PERCENT*100)/100;var styleOptions={font:fontSize+"px "+FONT_STYLE};(function(){var styleBox,cue;for(var i2=0;i2<cues.length;i2++){cue=cues[i2];styleBox=new CueStyleBox(window7,cue,styleOptions);paddedOverlay.appendChild(styleBox.div);moveBoxToLinePosition(window7,styleBox,containerBox,boxPositions);cue.displayState=styleBox.div;boxPositions.push(BoxPosition.getSimpleBoxPosition(styleBox));}})();};WebVTT2.Parser=function(window7,vttjs,decoder){if(!decoder){decoder=vttjs;vttjs={};}if(!vttjs){vttjs={};}this.window=window7;this.vttjs=vttjs;this.state="INITIAL";this.buffer="";this.decoder=decoder||new TextDecoder("utf8");this.regionList=[];};WebVTT2.Parser.prototype={reportOrThrowError:function reportOrThrowError(e){if(e instanceof ParsingError){this.onparsingerror&&this.onparsingerror(e);}else{throw e;}},parse:function parse(data){var self2=this;if(data){self2.buffer+=self2.decoder.decode(data,{stream:true});}function collectNextLine(){var buffer=self2.buffer;var pos=0;while(pos<buffer.length&&buffer[pos]!=="\r"&&buffer[pos]!=="\n"){++pos;}var line2=buffer.substr(0,pos);if(buffer[pos]==="\r"){++pos;}if(buffer[pos]==="\n"){++pos;}self2.buffer=buffer.substr(pos);return line2;}function parseRegion(input){var settings=new Settings();parseOptions(input,function(k,v){switch(k){case"id":settings.set(k,v);break;case"width":settings.percent(k,v);break;case"lines":settings.integer(k,v);break;case"regionanchor":case"viewportanchor":var xy=v.split(",");if(xy.length!==2){break;}var anchor=new Settings();anchor.percent("x",xy[0]);anchor.percent("y",xy[1]);if(!anchor.has("x")||!anchor.has("y")){break;}settings.set(k+"X",anchor.get("x"));settings.set(k+"Y",anchor.get("y"));break;case"scroll":settings.alt(k,v,["up"]);break;}},/=/,/\s/);if(settings.has("id")){var region=new(self2.vttjs.VTTRegion||self2.window.VTTRegion)();region.width=settings.get("width",100);region.lines=settings.get("lines",3);region.regionAnchorX=settings.get("regionanchorX",0);region.regionAnchorY=settings.get("regionanchorY",100);region.viewportAnchorX=settings.get("viewportanchorX",0);region.viewportAnchorY=settings.get("viewportanchorY",100);region.scroll=settings.get("scroll","");self2.onregion&&self2.onregion(region);self2.regionList.push({id:settings.get("id"),region:region});}}function parseTimestampMap(input){var settings=new Settings();parseOptions(input,function(k,v){switch(k){case"MPEGT":settings.integer(k+"S",v);break;case"LOCA":settings.set(k+"L",parseTimeStamp(v));break;}},/[^\d]:/,/,/);self2.ontimestampmap&&self2.ontimestampmap({"MPEGTS":settings.get("MPEGTS"),"LOCAL":settings.get("LOCAL")});}function parseHeader(input){if(input.match(/X-TIMESTAMP-MAP/)){parseOptions(input,function(k,v){switch(k){case"X-TIMESTAMP-MAP":parseTimestampMap(v);break;}},/=/);}else{parseOptions(input,function(k,v){switch(k){case"Region":parseRegion(v);break;}},/:/);}}try{var line;if(self2.state==="INITIAL"){if(!/\r\n|\n/.test(self2.buffer)){return this;}line=collectNextLine();var m=line.match(/^WEBVTT([ \t].*)?$/);if(!m||!m[0]){throw new ParsingError(ParsingError.Errors.BadSignature);}self2.state="HEADER";}var alreadyCollectedLine=false;while(self2.buffer){if(!/\r\n|\n/.test(self2.buffer)){return this;}if(!alreadyCollectedLine){line=collectNextLine();}else{alreadyCollectedLine=false;}switch(self2.state){case"HEADER":if(/:/.test(line)){parseHeader(line);}else if(!line){self2.state="ID";}continue;case"NOTE":if(!line){self2.state="ID";}continue;case"ID":if(/^NOTE($|[ \t])/.test(line)){self2.state="NOTE";break;}if(!line){continue;}self2.cue=new(self2.vttjs.VTTCue||self2.window.VTTCue)(0,0,"");try{self2.cue.align="center";}catch(e){self2.cue.align="middle";}self2.state="CUE";if(line.indexOf("-->")===-1){self2.cue.id=line;continue;}case"CUE":try{parseCue(line,self2.cue,self2.regionList);}catch(e){self2.reportOrThrowError(e);self2.cue=null;self2.state="BADCUE";continue;}self2.state="CUETEXT";continue;case"CUETEXT":var hasSubstring=line.indexOf("-->")!==-1;if(!line||hasSubstring&&(alreadyCollectedLine=true)){self2.oncue&&self2.oncue(self2.cue);self2.cue=null;self2.state="ID";continue;}if(self2.cue.text){self2.cue.text+="\n";}self2.cue.text+=line.replace(/\u2028/g,"\n").replace(/u2029/g,"\n");continue;case"BADCUE":if(!line){self2.state="ID";}continue;}}}catch(e){self2.reportOrThrowError(e);if(self2.state==="CUETEXT"&&self2.cue&&self2.oncue){self2.oncue(self2.cue);}self2.cue=null;self2.state=self2.state==="INITIAL"?"BADWEBVTT":"BADCUE";}return this;},flush:function flush(){var self2=this;try{self2.buffer+=self2.decoder.decode();if(self2.cue||self2.state==="HEADER"){self2.buffer+="\n\n";self2.parse();}if(self2.state==="INITIAL"){throw new ParsingError(ParsingError.Errors.BadSignature);}}catch(e){self2.reportOrThrowError(e);}self2.onflush&&self2.onflush();return this;}};module.exports=WebVTT2;}});// node_modules/videojs-vtt.js/lib/vttcue.js
var require_vttcue=__commonJS({"node_modules/videojs-vtt.js/lib/vttcue.js":function node_modulesVideojsVttJsLibVttcueJs(exports,module){var autoKeyword="auto";var directionSetting={"":1,"lr":1,"rl":1};var alignSetting={"start":1,"center":1,"end":1,"left":1,"right":1,"auto":1,"line-left":1,"line-right":1};function findDirectionSetting(value){if(typeof value!=="string"){return false;}var dir=directionSetting[value.toLowerCase()];return dir?value.toLowerCase():false;}function findAlignSetting(value){if(typeof value!=="string"){return false;}var align=alignSetting[value.toLowerCase()];return align?value.toLowerCase():false;}function VTTCue(startTime,endTime,text){this.hasBeenReset=false;var _id="";var _pauseOnExit=false;var _startTime=startTime;var _endTime=endTime;var _text=text;var _region=null;var _vertical2="";var _snapToLines=true;var _line="auto";var _lineAlign="start";var _position="auto";var _positionAlign="auto";var _size=100;var _align="center";Object.defineProperties(this,{"id":{enumerable:true,get:function get(){return _id;},set:function set(value){_id=""+value;}},"pauseOnExit":{enumerable:true,get:function get(){return _pauseOnExit;},set:function set(value){_pauseOnExit=!!value;}},"startTime":{enumerable:true,get:function get(){return _startTime;},set:function set(value){if(typeof value!=="number"){throw new TypeError("Start time must be set to a number.");}_startTime=value;this.hasBeenReset=true;}},"endTime":{enumerable:true,get:function get(){return _endTime;},set:function set(value){if(typeof value!=="number"){throw new TypeError("End time must be set to a number.");}_endTime=value;this.hasBeenReset=true;}},"text":{enumerable:true,get:function get(){return _text;},set:function set(value){_text=""+value;this.hasBeenReset=true;}},"region":{enumerable:true,get:function get(){return _region;},set:function set(value){_region=value;this.hasBeenReset=true;}},"vertical":{enumerable:true,get:function get(){return _vertical2;},set:function set(value){var setting=findDirectionSetting(value);if(setting===false){throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");}_vertical2=setting;this.hasBeenReset=true;}},"snapToLines":{enumerable:true,get:function get(){return _snapToLines;},set:function set(value){_snapToLines=!!value;this.hasBeenReset=true;}},"line":{enumerable:true,get:function get(){return _line;},set:function set(value){if(typeof value!=="number"&&value!==autoKeyword){throw new SyntaxError("Line: an invalid number or illegal string was specified.");}_line=value;this.hasBeenReset=true;}},"lineAlign":{enumerable:true,get:function get(){return _lineAlign;},set:function set(value){var setting=findAlignSetting(value);if(!setting){console.warn("lineAlign: an invalid or illegal string was specified.");}else{_lineAlign=setting;this.hasBeenReset=true;}}},"position":{enumerable:true,get:function get(){return _position;},set:function set(value){if(value<0||value>100){throw new Error("Position must be between 0 and 100.");}_position=value;this.hasBeenReset=true;}},"positionAlign":{enumerable:true,get:function get(){return _positionAlign;},set:function set(value){var setting=findAlignSetting(value);if(!setting){console.warn("positionAlign: an invalid or illegal string was specified.");}else{_positionAlign=setting;this.hasBeenReset=true;}}},"size":{enumerable:true,get:function get(){return _size;},set:function set(value){if(value<0||value>100){throw new Error("Size must be between 0 and 100.");}_size=value;this.hasBeenReset=true;}},"align":{enumerable:true,get:function get(){return _align;},set:function set(value){var setting=findAlignSetting(value);if(!setting){throw new SyntaxError("align: an invalid or illegal alignment string was specified.");}_align=setting;this.hasBeenReset=true;}}});this.displayState=void 0;}VTTCue.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text);};module.exports=VTTCue;}});// node_modules/videojs-vtt.js/lib/vttregion.js
var require_vttregion=__commonJS({"node_modules/videojs-vtt.js/lib/vttregion.js":function node_modulesVideojsVttJsLibVttregionJs(exports,module){var scrollSetting={"":true,"up":true};function findScrollSetting(value){if(typeof value!=="string"){return false;}var scroll=scrollSetting[value.toLowerCase()];return scroll?value.toLowerCase():false;}function isValidPercentValue(value){return typeof value==="number"&&value>=0&&value<=100;}function VTTRegion(){var _width2=100;var _lines=3;var _regionAnchorX=0;var _regionAnchorY=100;var _viewportAnchorX=0;var _viewportAnchorY=100;var _scroll="";Object.defineProperties(this,{"width":{enumerable:true,get:function get(){return _width2;},set:function set(value){if(!isValidPercentValue(value)){throw new Error("Width must be between 0 and 100.");}_width2=value;}},"lines":{enumerable:true,get:function get(){return _lines;},set:function set(value){if(typeof value!=="number"){throw new TypeError("Lines must be set to a number.");}_lines=value;}},"regionAnchorY":{enumerable:true,get:function get(){return _regionAnchorY;},set:function set(value){if(!isValidPercentValue(value)){throw new Error("RegionAnchorX must be between 0 and 100.");}_regionAnchorY=value;}},"regionAnchorX":{enumerable:true,get:function get(){return _regionAnchorX;},set:function set(value){if(!isValidPercentValue(value)){throw new Error("RegionAnchorY must be between 0 and 100.");}_regionAnchorX=value;}},"viewportAnchorY":{enumerable:true,get:function get(){return _viewportAnchorY;},set:function set(value){if(!isValidPercentValue(value)){throw new Error("ViewportAnchorY must be between 0 and 100.");}_viewportAnchorY=value;}},"viewportAnchorX":{enumerable:true,get:function get(){return _viewportAnchorX;},set:function set(value){if(!isValidPercentValue(value)){throw new Error("ViewportAnchorX must be between 0 and 100.");}_viewportAnchorX=value;}},"scroll":{enumerable:true,get:function get(){return _scroll;},set:function set(value){var setting=findScrollSetting(value);if(setting===false){console.warn("Scroll: an invalid or illegal string was specified.");}else{_scroll=setting;}}}});}module.exports=VTTRegion;}});// node_modules/videojs-vtt.js/lib/browser-index.js
var require_browser_index=__commonJS({"node_modules/videojs-vtt.js/lib/browser-index.js":function node_modulesVideojsVttJsLibBrowserIndexJs(exports,module){var window7=require_window();var vttjs=module.exports={WebVTT:require_vtt(),VTTCue:require_vttcue(),VTTRegion:require_vttregion()};window7.vttjs=vttjs;window7.WebVTT=vttjs.WebVTT;var cueShim=vttjs.VTTCue;var regionShim=vttjs.VTTRegion;var nativeVTTCue=window7.VTTCue;var nativeVTTRegion=window7.VTTRegion;vttjs.shim=function(){window7.VTTCue=cueShim;window7.VTTRegion=regionShim;};vttjs.restore=function(){window7.VTTCue=nativeVTTCue;window7.VTTRegion=nativeVTTRegion;};if(!window7.VTTCue){vttjs.shim();}}});// node_modules/url-toolkit/src/url-toolkit.js
var require_url_toolkit=__commonJS({"node_modules/url-toolkit/src/url-toolkit.js":function node_modulesUrlToolkitSrcUrlToolkitJs(exports,module){(function(root2){var URL_REGEX=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/;var FIRST_SEGMENT_REGEX=/^(?=([^\/?#]*))\1([^]*)$/;var SLASH_DOT_REGEX=/(?:\/|^)\.(?=\/)/g;var SLASH_DOT_DOT_REGEX=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g;var URLToolkit2={buildAbsoluteURL:function buildAbsoluteURL(baseURL,relativeURL,opts){opts=opts||{};baseURL=baseURL.trim();relativeURL=relativeURL.trim();if(!relativeURL){if(!opts.alwaysNormalize){return baseURL;}var basePartsForNormalise=URLToolkit2.parseURL(baseURL);if(!basePartsForNormalise){throw new Error("Error trying to parse base URL.");}basePartsForNormalise.path=URLToolkit2.normalizePath(basePartsForNormalise.path);return URLToolkit2.buildURLFromParts(basePartsForNormalise);}var relativeParts=URLToolkit2.parseURL(relativeURL);if(!relativeParts){throw new Error("Error trying to parse relative URL.");}if(relativeParts.scheme){if(!opts.alwaysNormalize){return relativeURL;}relativeParts.path=URLToolkit2.normalizePath(relativeParts.path);return URLToolkit2.buildURLFromParts(relativeParts);}var baseParts=URLToolkit2.parseURL(baseURL);if(!baseParts){throw new Error("Error trying to parse base URL.");}if(!baseParts.netLoc&&baseParts.path&&baseParts.path[0]!=="/"){var pathParts=FIRST_SEGMENT_REGEX.exec(baseParts.path);baseParts.netLoc=pathParts[1];baseParts.path=pathParts[2];}if(baseParts.netLoc&&!baseParts.path){baseParts.path="/";}var builtParts={scheme:baseParts.scheme,netLoc:relativeParts.netLoc,path:null,params:relativeParts.params,query:relativeParts.query,fragment:relativeParts.fragment};if(!relativeParts.netLoc){builtParts.netLoc=baseParts.netLoc;if(relativeParts.path[0]!=="/"){if(!relativeParts.path){builtParts.path=baseParts.path;if(!relativeParts.params){builtParts.params=baseParts.params;if(!relativeParts.query){builtParts.query=baseParts.query;}}}else{var baseURLPath=baseParts.path;var newPath=baseURLPath.substring(0,baseURLPath.lastIndexOf("/")+1)+relativeParts.path;builtParts.path=URLToolkit2.normalizePath(newPath);}}}if(builtParts.path===null){builtParts.path=opts.alwaysNormalize?URLToolkit2.normalizePath(relativeParts.path):relativeParts.path;}return URLToolkit2.buildURLFromParts(builtParts);},parseURL:function parseURL(url){var parts=URL_REGEX.exec(url);if(!parts){return null;}return{scheme:parts[1]||"",netLoc:parts[2]||"",path:parts[3]||"",params:parts[4]||"",query:parts[5]||"",fragment:parts[6]||""};},normalizePath:function normalizePath(path){path=path.split("").reverse().join("").replace(SLASH_DOT_REGEX,"");while(path.length!==(path=path.replace(SLASH_DOT_DOT_REGEX,"")).length){}return path.split("").reverse().join("");},buildURLFromParts:function buildURLFromParts(parts){return parts.scheme+parts.netLoc+parts.path+parts.params+parts.query+parts.fragment;}};if(_typeof(exports)==="object"&&_typeof(module)==="object")module.exports=URLToolkit2;else if(typeof define==="function"&&define.amd)define([],function(){return URLToolkit2;});else if(_typeof(exports)==="object")exports["URLToolkit"]=URLToolkit2;else root2["URLToolkit"]=URLToolkit2;})(exports);}});// node_modules/@xmldom/xmldom/lib/conventions.js
var require_conventions=__commonJS({"node_modules/@xmldom/xmldom/lib/conventions.js":function node_modulesXmldomXmldomLibConventionsJs(exports){"use strict";function freeze(object,oc){if(oc===void 0){oc=Object;}return oc&&typeof oc.freeze==="function"?oc.freeze(object):object;}var MIME_TYPE=freeze({HTML:"text/html",isHTML:function isHTML(value){return value===MIME_TYPE.HTML;},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"});var NAMESPACE=freeze({HTML:"http://www.w3.org/1999/xhtml",isHTML:function isHTML(uri){return uri===NAMESPACE.HTML;},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});exports.freeze=freeze;exports.MIME_TYPE=MIME_TYPE;exports.NAMESPACE=NAMESPACE;}});// node_modules/@xmldom/xmldom/lib/dom.js
var require_dom=__commonJS({"node_modules/@xmldom/xmldom/lib/dom.js":function node_modulesXmldomXmldomLibDomJs(exports){var conventions=require_conventions();var NAMESPACE=conventions.NAMESPACE;function notEmptyString(input){return input!=="";}function splitOnASCIIWhitespace(input){return input?input.split(/[\t\n\f\r ]+/).filter(notEmptyString):[];}function orderedSetReducer(current,element){if(!current.hasOwnProperty(element)){current[element]=true;}return current;}function toOrderedSet(input){if(!input)return[];var list=splitOnASCIIWhitespace(input);return Object.keys(list.reduce(orderedSetReducer,{}));}function arrayIncludes(list){return function(element){return list&&list.indexOf(element)!==-1;};}function copy(src,dest){for(var p in src){dest[p]=src[p];}}function _extends2(Class,Super){var pt=Class.prototype;if(!(pt instanceof Super)){var t3=function t3(){};var t2=t3;;t3.prototype=Super.prototype;t3=new t3();copy(pt,t3);Class.prototype=pt=t3;}if(pt.constructor!=Class){if(typeof Class!="function"){console.error("unknown Class:"+Class);}pt.constructor=Class;}}var NodeType={};var ELEMENT_NODE=NodeType.ELEMENT_NODE=1;var ATTRIBUTE_NODE=NodeType.ATTRIBUTE_NODE=2;var TEXT_NODE=NodeType.TEXT_NODE=3;var CDATA_SECTION_NODE=NodeType.CDATA_SECTION_NODE=4;var ENTITY_REFERENCE_NODE=NodeType.ENTITY_REFERENCE_NODE=5;var ENTITY_NODE=NodeType.ENTITY_NODE=6;var PROCESSING_INSTRUCTION_NODE=NodeType.PROCESSING_INSTRUCTION_NODE=7;var COMMENT_NODE=NodeType.COMMENT_NODE=8;var DOCUMENT_NODE=NodeType.DOCUMENT_NODE=9;var DOCUMENT_TYPE_NODE=NodeType.DOCUMENT_TYPE_NODE=10;var DOCUMENT_FRAGMENT_NODE=NodeType.DOCUMENT_FRAGMENT_NODE=11;var NOTATION_NODE=NodeType.NOTATION_NODE=12;var ExceptionCode={};var ExceptionMessage={};var INDEX_SIZE_ERR=ExceptionCode.INDEX_SIZE_ERR=(ExceptionMessage[1]="Index size error",1);var DOMSTRING_SIZE_ERR=ExceptionCode.DOMSTRING_SIZE_ERR=(ExceptionMessage[2]="DOMString size error",2);var HIERARCHY_REQUEST_ERR=ExceptionCode.HIERARCHY_REQUEST_ERR=(ExceptionMessage[3]="Hierarchy request error",3);var WRONG_DOCUMENT_ERR=ExceptionCode.WRONG_DOCUMENT_ERR=(ExceptionMessage[4]="Wrong document",4);var INVALID_CHARACTER_ERR=ExceptionCode.INVALID_CHARACTER_ERR=(ExceptionMessage[5]="Invalid character",5);var NO_DATA_ALLOWED_ERR=ExceptionCode.NO_DATA_ALLOWED_ERR=(ExceptionMessage[6]="No data allowed",6);var NO_MODIFICATION_ALLOWED_ERR=ExceptionCode.NO_MODIFICATION_ALLOWED_ERR=(ExceptionMessage[7]="No modification allowed",7);var NOT_FOUND_ERR=ExceptionCode.NOT_FOUND_ERR=(ExceptionMessage[8]="Not found",8);var NOT_SUPPORTED_ERR=ExceptionCode.NOT_SUPPORTED_ERR=(ExceptionMessage[9]="Not supported",9);var INUSE_ATTRIBUTE_ERR=ExceptionCode.INUSE_ATTRIBUTE_ERR=(ExceptionMessage[10]="Attribute in use",10);var INVALID_STATE_ERR=ExceptionCode.INVALID_STATE_ERR=(ExceptionMessage[11]="Invalid state",11);var SYNTAX_ERR=ExceptionCode.SYNTAX_ERR=(ExceptionMessage[12]="Syntax error",12);var INVALID_MODIFICATION_ERR=ExceptionCode.INVALID_MODIFICATION_ERR=(ExceptionMessage[13]="Invalid modification",13);var NAMESPACE_ERR=ExceptionCode.NAMESPACE_ERR=(ExceptionMessage[14]="Invalid namespace",14);var INVALID_ACCESS_ERR=ExceptionCode.INVALID_ACCESS_ERR=(ExceptionMessage[15]="Invalid access",15);function DOMException(code,message){if(message instanceof Error){var error=message;}else{error=this;Error.call(this,ExceptionMessage[code]);this.message=ExceptionMessage[code];if(Error.captureStackTrace)Error.captureStackTrace(this,DOMException);}error.code=code;if(message)this.message=this.message+": "+message;return error;}DOMException.prototype=Error.prototype;copy(ExceptionCode,DOMException);function NodeList(){}NodeList.prototype={length:0,item:function item(index){return this[index]||null;},toString:function toString(isHTML,nodeFilter){for(var buf=[],i=0;i<this.length;i++){serializeToString(this[i],buf,isHTML,nodeFilter);}return buf.join("");}};function LiveNodeList(node,refresh){this._node=node;this._refresh=refresh;_updateLiveList(this);}function _updateLiveList(list){var inc=list._node._inc||list._node.ownerDocument._inc;if(list._inc!=inc){var ls=list._refresh(list._node);__set__(list,"length",ls.length);copy(ls,list);list._inc=inc;}}LiveNodeList.prototype.item=function(i){_updateLiveList(this);return this[i];};_extends2(LiveNodeList,NodeList);function NamedNodeMap(){}function _findNodeIndex(list,node){var i=list.length;while(i--){if(list[i]===node){return i;}}}function _addNamedNode(el,list,newAttr,oldAttr){if(oldAttr){list[_findNodeIndex(list,oldAttr)]=newAttr;}else{list[list.length++]=newAttr;}if(el){newAttr.ownerElement=el;var doc=el.ownerDocument;if(doc){oldAttr&&_onRemoveAttribute(doc,el,oldAttr);_onAddAttribute(doc,el,newAttr);}}}function _removeNamedNode(el,list,attr){var i=_findNodeIndex(list,attr);if(i>=0){var lastIndex=list.length-1;while(i<lastIndex){list[i]=list[++i];}list.length=lastIndex;if(el){var doc=el.ownerDocument;if(doc){_onRemoveAttribute(doc,el,attr);attr.ownerElement=null;}}}else{throw DOMException(NOT_FOUND_ERR,new Error(el.tagName+"@"+attr));}}NamedNodeMap.prototype={length:0,item:NodeList.prototype.item,getNamedItem:function getNamedItem(key){var i=this.length;while(i--){var attr=this[i];if(attr.nodeName==key){return attr;}}},setNamedItem:function setNamedItem(attr){var el=attr.ownerElement;if(el&&el!=this._ownerElement){throw new DOMException(INUSE_ATTRIBUTE_ERR);}var oldAttr=this.getNamedItem(attr.nodeName);_addNamedNode(this._ownerElement,this,attr,oldAttr);return oldAttr;},setNamedItemNS:function setNamedItemNS(attr){var el=attr.ownerElement,oldAttr;if(el&&el!=this._ownerElement){throw new DOMException(INUSE_ATTRIBUTE_ERR);}oldAttr=this.getNamedItemNS(attr.namespaceURI,attr.localName);_addNamedNode(this._ownerElement,this,attr,oldAttr);return oldAttr;},removeNamedItem:function removeNamedItem(key){var attr=this.getNamedItem(key);_removeNamedNode(this._ownerElement,this,attr);return attr;},removeNamedItemNS:function removeNamedItemNS(namespaceURI,localName){var attr=this.getNamedItemNS(namespaceURI,localName);_removeNamedNode(this._ownerElement,this,attr);return attr;},getNamedItemNS:function getNamedItemNS(namespaceURI,localName){var i=this.length;while(i--){var node=this[i];if(node.localName==localName&&node.namespaceURI==namespaceURI){return node;}}return null;}};function DOMImplementation(){}DOMImplementation.prototype={hasFeature:function hasFeature(feature,version2){return true;},createDocument:function createDocument(namespaceURI,qualifiedName,doctype){var doc=new Document();doc.implementation=this;doc.childNodes=new NodeList();doc.doctype=doctype||null;if(doctype){doc.appendChild(doctype);}if(qualifiedName){var root2=doc.createElementNS(namespaceURI,qualifiedName);doc.appendChild(root2);}return doc;},createDocumentType:function createDocumentType(qualifiedName,publicId,systemId){var node=new DocumentType();node.name=qualifiedName;node.nodeName=qualifiedName;node.publicId=publicId||"";node.systemId=systemId||"";return node;}};function Node(){}Node.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function insertBefore(newChild,refChild){return _insertBefore(this,newChild,refChild);},replaceChild:function replaceChild(newChild,oldChild){this.insertBefore(newChild,oldChild);if(oldChild){this.removeChild(oldChild);}},removeChild:function removeChild(oldChild){return _removeChild(this,oldChild);},appendChild:function appendChild(newChild){return this.insertBefore(newChild,null);},hasChildNodes:function hasChildNodes(){return this.firstChild!=null;},cloneNode:function cloneNode(deep){return _cloneNode(this.ownerDocument||this,this,deep);},normalize:function normalize(){var child=this.firstChild;while(child){var next=child.nextSibling;if(next&&next.nodeType==TEXT_NODE&&child.nodeType==TEXT_NODE){this.removeChild(next);child.appendData(next.data);}else{child.normalize();child=next;}}},isSupported:function isSupported(feature,version2){return this.ownerDocument.implementation.hasFeature(feature,version2);},hasAttributes:function hasAttributes(){return this.attributes.length>0;},lookupPrefix:function lookupPrefix(namespaceURI){var el=this;while(el){var map=el._nsMap;if(map){for(var n in map){if(map[n]==namespaceURI){return n;}}}el=el.nodeType==ATTRIBUTE_NODE?el.ownerDocument:el.parentNode;}return null;},lookupNamespaceURI:function lookupNamespaceURI(prefix){var el=this;while(el){var map=el._nsMap;if(map){if(prefix in map){return map[prefix];}}el=el.nodeType==ATTRIBUTE_NODE?el.ownerDocument:el.parentNode;}return null;},isDefaultNamespace:function isDefaultNamespace(namespaceURI){var prefix=this.lookupPrefix(namespaceURI);return prefix==null;}};function _xmlEncoder(c){return c=="<"&&"&lt;"||c==">"&&"&gt;"||c=="&"&&"&amp;"||c=='"'&&"&quot;"||"&#"+c.charCodeAt()+";";}copy(NodeType,Node);copy(NodeType,Node.prototype);function _visitNode(node,callback2){if(callback2(node)){return true;}if(node=node.firstChild){do{if(_visitNode(node,callback2)){return true;}}while(node=node.nextSibling);}}function Document(){}function _onAddAttribute(doc,el,newAttr){doc&&doc._inc++;var ns=newAttr.namespaceURI;if(ns===NAMESPACE.XMLNS){el._nsMap[newAttr.prefix?newAttr.localName:""]=newAttr.value;}}function _onRemoveAttribute(doc,el,newAttr,remove2){doc&&doc._inc++;var ns=newAttr.namespaceURI;if(ns===NAMESPACE.XMLNS){delete el._nsMap[newAttr.prefix?newAttr.localName:""];}}function _onUpdateChild(doc,el,newChild){if(doc&&doc._inc){doc._inc++;var cs=el.childNodes;if(newChild){cs[cs.length++]=newChild;}else{var child=el.firstChild;var i=0;while(child){cs[i++]=child;child=child.nextSibling;}cs.length=i;}}}function _removeChild(parentNode,child){var previous=child.previousSibling;var next=child.nextSibling;if(previous){previous.nextSibling=next;}else{parentNode.firstChild=next;}if(next){next.previousSibling=previous;}else{parentNode.lastChild=previous;}_onUpdateChild(parentNode.ownerDocument,parentNode);return child;}function _insertBefore(parentNode,newChild,nextChild){var cp=newChild.parentNode;if(cp){cp.removeChild(newChild);}if(newChild.nodeType===DOCUMENT_FRAGMENT_NODE){var newFirst=newChild.firstChild;if(newFirst==null){return newChild;}var newLast=newChild.lastChild;}else{newFirst=newLast=newChild;}var pre=nextChild?nextChild.previousSibling:parentNode.lastChild;newFirst.previousSibling=pre;newLast.nextSibling=nextChild;if(pre){pre.nextSibling=newFirst;}else{parentNode.firstChild=newFirst;}if(nextChild==null){parentNode.lastChild=newLast;}else{nextChild.previousSibling=newLast;}do{newFirst.parentNode=parentNode;}while(newFirst!==newLast&&(newFirst=newFirst.nextSibling));_onUpdateChild(parentNode.ownerDocument||parentNode,parentNode);if(newChild.nodeType==DOCUMENT_FRAGMENT_NODE){newChild.firstChild=newChild.lastChild=null;}return newChild;}function _appendSingleChild(parentNode,newChild){var cp=newChild.parentNode;if(cp){var pre=parentNode.lastChild;cp.removeChild(newChild);var pre=parentNode.lastChild;}var pre=parentNode.lastChild;newChild.parentNode=parentNode;newChild.previousSibling=pre;newChild.nextSibling=null;if(pre){pre.nextSibling=newChild;}else{parentNode.firstChild=newChild;}parentNode.lastChild=newChild;_onUpdateChild(parentNode.ownerDocument,parentNode,newChild);return newChild;}Document.prototype={nodeName:"#document",nodeType:DOCUMENT_NODE,doctype:null,documentElement:null,_inc:1,insertBefore:function insertBefore(newChild,refChild){if(newChild.nodeType==DOCUMENT_FRAGMENT_NODE){var child=newChild.firstChild;while(child){var next=child.nextSibling;this.insertBefore(child,refChild);child=next;}return newChild;}if(this.documentElement==null&&newChild.nodeType==ELEMENT_NODE){this.documentElement=newChild;}return _insertBefore(this,newChild,refChild),newChild.ownerDocument=this,newChild;},removeChild:function removeChild(oldChild){if(this.documentElement==oldChild){this.documentElement=null;}return _removeChild(this,oldChild);},importNode:function importNode(importedNode,deep){return _importNode(this,importedNode,deep);},getElementById:function getElementById(id){var rtv=null;_visitNode(this.documentElement,function(node){if(node.nodeType==ELEMENT_NODE){if(node.getAttribute("id")==id){rtv=node;return true;}}});return rtv;},getElementsByClassName:function getElementsByClassName(classNames){var classNamesSet=toOrderedSet(classNames);return new LiveNodeList(this,function(base){var ls=[];if(classNamesSet.length>0){_visitNode(base.documentElement,function(node){if(node!==base&&node.nodeType===ELEMENT_NODE){var nodeClassNames=node.getAttribute("class");if(nodeClassNames){var matches=classNames===nodeClassNames;if(!matches){var nodeClassNamesSet=toOrderedSet(nodeClassNames);matches=classNamesSet.every(arrayIncludes(nodeClassNamesSet));}if(matches){ls.push(node);}}}});}return ls;});},createElement:function createElement(tagName){var node=new Element2();node.ownerDocument=this;node.nodeName=tagName;node.tagName=tagName;node.localName=tagName;node.childNodes=new NodeList();var attrs=node.attributes=new NamedNodeMap();attrs._ownerElement=node;return node;},createDocumentFragment:function createDocumentFragment(){var node=new DocumentFragment();node.ownerDocument=this;node.childNodes=new NodeList();return node;},createTextNode:function createTextNode(data){var node=new Text();node.ownerDocument=this;node.appendData(data);return node;},createComment:function createComment(data){var node=new Comment();node.ownerDocument=this;node.appendData(data);return node;},createCDATASection:function createCDATASection(data){var node=new CDATASection();node.ownerDocument=this;node.appendData(data);return node;},createProcessingInstruction:function createProcessingInstruction(target,data){var node=new ProcessingInstruction();node.ownerDocument=this;node.tagName=node.target=target;node.nodeValue=node.data=data;return node;},createAttribute:function createAttribute(name){var node=new Attr();node.ownerDocument=this;node.name=name;node.nodeName=name;node.localName=name;node.specified=true;return node;},createEntityReference:function createEntityReference(name){var node=new EntityReference();node.ownerDocument=this;node.nodeName=name;return node;},createElementNS:function createElementNS(namespaceURI,qualifiedName){var node=new Element2();var pl=qualifiedName.split(":");var attrs=node.attributes=new NamedNodeMap();node.childNodes=new NodeList();node.ownerDocument=this;node.nodeName=qualifiedName;node.tagName=qualifiedName;node.namespaceURI=namespaceURI;if(pl.length==2){node.prefix=pl[0];node.localName=pl[1];}else{node.localName=qualifiedName;}attrs._ownerElement=node;return node;},createAttributeNS:function createAttributeNS(namespaceURI,qualifiedName){var node=new Attr();var pl=qualifiedName.split(":");node.ownerDocument=this;node.nodeName=qualifiedName;node.name=qualifiedName;node.namespaceURI=namespaceURI;node.specified=true;if(pl.length==2){node.prefix=pl[0];node.localName=pl[1];}else{node.localName=qualifiedName;}return node;}};_extends2(Document,Node);function Element2(){this._nsMap={};}Element2.prototype={nodeType:ELEMENT_NODE,hasAttribute:function hasAttribute(name){return this.getAttributeNode(name)!=null;},getAttribute:function getAttribute(name){var attr=this.getAttributeNode(name);return attr&&attr.value||"";},getAttributeNode:function getAttributeNode(name){return this.attributes.getNamedItem(name);},setAttribute:function setAttribute(name,value){var attr=this.ownerDocument.createAttribute(name);attr.value=attr.nodeValue=""+value;this.setAttributeNode(attr);},removeAttribute:function removeAttribute(name){var attr=this.getAttributeNode(name);attr&&this.removeAttributeNode(attr);},appendChild:function appendChild(newChild){if(newChild.nodeType===DOCUMENT_FRAGMENT_NODE){return this.insertBefore(newChild,null);}else{return _appendSingleChild(this,newChild);}},setAttributeNode:function setAttributeNode(newAttr){return this.attributes.setNamedItem(newAttr);},setAttributeNodeNS:function setAttributeNodeNS(newAttr){return this.attributes.setNamedItemNS(newAttr);},removeAttributeNode:function removeAttributeNode(oldAttr){return this.attributes.removeNamedItem(oldAttr.nodeName);},removeAttributeNS:function removeAttributeNS(namespaceURI,localName){var old=this.getAttributeNodeNS(namespaceURI,localName);old&&this.removeAttributeNode(old);},hasAttributeNS:function hasAttributeNS(namespaceURI,localName){return this.getAttributeNodeNS(namespaceURI,localName)!=null;},getAttributeNS:function getAttributeNS(namespaceURI,localName){var attr=this.getAttributeNodeNS(namespaceURI,localName);return attr&&attr.value||"";},setAttributeNS:function setAttributeNS(namespaceURI,qualifiedName,value){var attr=this.ownerDocument.createAttributeNS(namespaceURI,qualifiedName);attr.value=attr.nodeValue=""+value;this.setAttributeNode(attr);},getAttributeNodeNS:function getAttributeNodeNS(namespaceURI,localName){return this.attributes.getNamedItemNS(namespaceURI,localName);},getElementsByTagName:function getElementsByTagName(tagName){return new LiveNodeList(this,function(base){var ls=[];_visitNode(base,function(node){if(node!==base&&node.nodeType==ELEMENT_NODE&&(tagName==="*"||node.tagName==tagName)){ls.push(node);}});return ls;});},getElementsByTagNameNS:function getElementsByTagNameNS(namespaceURI,localName){return new LiveNodeList(this,function(base){var ls=[];_visitNode(base,function(node){if(node!==base&&node.nodeType===ELEMENT_NODE&&(namespaceURI==="*"||node.namespaceURI===namespaceURI)&&(localName==="*"||node.localName==localName)){ls.push(node);}});return ls;});}};Document.prototype.getElementsByTagName=Element2.prototype.getElementsByTagName;Document.prototype.getElementsByTagNameNS=Element2.prototype.getElementsByTagNameNS;_extends2(Element2,Node);function Attr(){}Attr.prototype.nodeType=ATTRIBUTE_NODE;_extends2(Attr,Node);function CharacterData(){}CharacterData.prototype={data:"",substringData:function substringData(offset,count){return this.data.substring(offset,offset+count);},appendData:function appendData(text){text=this.data+text;this.nodeValue=this.data=text;this.length=text.length;},insertData:function insertData(offset,text){this.replaceData(offset,0,text);},appendChild:function appendChild(newChild){throw new Error(ExceptionMessage[HIERARCHY_REQUEST_ERR]);},deleteData:function deleteData(offset,count){this.replaceData(offset,count,"");},replaceData:function replaceData(offset,count,text){var start2=this.data.substring(0,offset);var end=this.data.substring(offset+count);text=start2+text+end;this.nodeValue=this.data=text;this.length=text.length;}};_extends2(CharacterData,Node);function Text(){}Text.prototype={nodeName:"#text",nodeType:TEXT_NODE,splitText:function splitText(offset){var text=this.data;var newText=text.substring(offset);text=text.substring(0,offset);this.data=this.nodeValue=text;this.length=text.length;var newNode=this.ownerDocument.createTextNode(newText);if(this.parentNode){this.parentNode.insertBefore(newNode,this.nextSibling);}return newNode;}};_extends2(Text,CharacterData);function Comment(){}Comment.prototype={nodeName:"#comment",nodeType:COMMENT_NODE};_extends2(Comment,CharacterData);function CDATASection(){}CDATASection.prototype={nodeName:"#cdata-section",nodeType:CDATA_SECTION_NODE};_extends2(CDATASection,CharacterData);function DocumentType(){}DocumentType.prototype.nodeType=DOCUMENT_TYPE_NODE;_extends2(DocumentType,Node);function Notation(){}Notation.prototype.nodeType=NOTATION_NODE;_extends2(Notation,Node);function Entity(){}Entity.prototype.nodeType=ENTITY_NODE;_extends2(Entity,Node);function EntityReference(){}EntityReference.prototype.nodeType=ENTITY_REFERENCE_NODE;_extends2(EntityReference,Node);function DocumentFragment(){}DocumentFragment.prototype.nodeName="#document-fragment";DocumentFragment.prototype.nodeType=DOCUMENT_FRAGMENT_NODE;_extends2(DocumentFragment,Node);function ProcessingInstruction(){}ProcessingInstruction.prototype.nodeType=PROCESSING_INSTRUCTION_NODE;_extends2(ProcessingInstruction,Node);function XMLSerializer(){}XMLSerializer.prototype.serializeToString=function(node,isHtml,nodeFilter){return nodeSerializeToString.call(node,isHtml,nodeFilter);};Node.prototype.toString=nodeSerializeToString;function nodeSerializeToString(isHtml,nodeFilter){var buf=[];var refNode=this.nodeType==9&&this.documentElement||this;var prefix=refNode.prefix;var uri=refNode.namespaceURI;if(uri&&prefix==null){var prefix=refNode.lookupPrefix(uri);if(prefix==null){var visibleNamespaces=[{namespace:uri,prefix:null}];}}serializeToString(this,buf,isHtml,nodeFilter,visibleNamespaces);return buf.join("");}function needNamespaceDefine(node,isHTML,visibleNamespaces){var prefix=node.prefix||"";var uri=node.namespaceURI;if(!uri){return false;}if(prefix==="xml"&&uri===NAMESPACE.XML||uri===NAMESPACE.XMLNS){return false;}var i=visibleNamespaces.length;while(i--){var ns=visibleNamespaces[i];if(ns.prefix===prefix){return ns.namespace!==uri;}}return true;}function addSerializedAttribute(buf,qualifiedName,value){buf.push(" ",qualifiedName,'="',value.replace(/[<&"]/g,_xmlEncoder),'"');}function serializeToString(node,buf,isHTML,nodeFilter,visibleNamespaces){if(!visibleNamespaces){visibleNamespaces=[];}if(nodeFilter){node=nodeFilter(node);if(node){if(typeof node=="string"){buf.push(node);return;}}else{return;}}switch(node.nodeType){case ELEMENT_NODE:var attrs=node.attributes;var len=attrs.length;var child=node.firstChild;var nodeName=node.tagName;isHTML=NAMESPACE.isHTML(node.namespaceURI)||isHTML;var prefixedNodeName=nodeName;if(!isHTML&&!node.prefix&&node.namespaceURI){var defaultNS;for(var ai=0;ai<attrs.length;ai++){if(attrs.item(ai).name==="xmlns"){defaultNS=attrs.item(ai).value;break;}}if(!defaultNS){for(var nsi=visibleNamespaces.length-1;nsi>=0;nsi--){var namespace=visibleNamespaces[nsi];if(namespace.prefix===""&&namespace.namespace===node.namespaceURI){defaultNS=namespace.namespace;break;}}}if(defaultNS!==node.namespaceURI){for(var nsi=visibleNamespaces.length-1;nsi>=0;nsi--){var namespace=visibleNamespaces[nsi];if(namespace.namespace===node.namespaceURI){if(namespace.prefix){prefixedNodeName=namespace.prefix+":"+nodeName;}break;}}}}buf.push("<",prefixedNodeName);for(var i=0;i<len;i++){var attr=attrs.item(i);if(attr.prefix=="xmlns"){visibleNamespaces.push({prefix:attr.localName,namespace:attr.value});}else if(attr.nodeName=="xmlns"){visibleNamespaces.push({prefix:"",namespace:attr.value});}}for(var i=0;i<len;i++){var attr=attrs.item(i);if(needNamespaceDefine(attr,isHTML,visibleNamespaces)){var prefix=attr.prefix||"";var uri=attr.namespaceURI;addSerializedAttribute(buf,prefix?"xmlns:"+prefix:"xmlns",uri);visibleNamespaces.push({prefix:prefix,namespace:uri});}serializeToString(attr,buf,isHTML,nodeFilter,visibleNamespaces);}if(nodeName===prefixedNodeName&&needNamespaceDefine(node,isHTML,visibleNamespaces)){var prefix=node.prefix||"";var uri=node.namespaceURI;addSerializedAttribute(buf,prefix?"xmlns:"+prefix:"xmlns",uri);visibleNamespaces.push({prefix:prefix,namespace:uri});}if(child||isHTML&&!/^(?:meta|link|img|br|hr|input)$/i.test(nodeName)){buf.push(">");if(isHTML&&/^script$/i.test(nodeName)){while(child){if(child.data){buf.push(child.data);}else{serializeToString(child,buf,isHTML,nodeFilter,visibleNamespaces.slice());}child=child.nextSibling;}}else{while(child){serializeToString(child,buf,isHTML,nodeFilter,visibleNamespaces.slice());child=child.nextSibling;}}buf.push("</",prefixedNodeName,">");}else{buf.push("/>");}return;case DOCUMENT_NODE:case DOCUMENT_FRAGMENT_NODE:var child=node.firstChild;while(child){serializeToString(child,buf,isHTML,nodeFilter,visibleNamespaces.slice());child=child.nextSibling;}return;case ATTRIBUTE_NODE:return addSerializedAttribute(buf,node.name,node.value);case TEXT_NODE:return buf.push(node.data.replace(/[<&]/g,_xmlEncoder).replace(/]]>/g,"]]&gt;"));case CDATA_SECTION_NODE:return buf.push("<![CDATA[",node.data,"]]>");case COMMENT_NODE:return buf.push("<!--",node.data,"-->");case DOCUMENT_TYPE_NODE:var pubid=node.publicId;var sysid=node.systemId;buf.push("<!DOCTYPE ",node.name);if(pubid){buf.push(" PUBLIC ",pubid);if(sysid&&sysid!="."){buf.push(" ",sysid);}buf.push(">");}else if(sysid&&sysid!="."){buf.push(" SYSTEM ",sysid,">");}else{var sub=node.internalSubset;if(sub){buf.push(" [",sub,"]");}buf.push(">");}return;case PROCESSING_INSTRUCTION_NODE:return buf.push("<?",node.target," ",node.data,"?>");case ENTITY_REFERENCE_NODE:return buf.push("&",node.nodeName,";");default:buf.push("??",node.nodeName);}}function _importNode(doc,node,deep){var node2;switch(node.nodeType){case ELEMENT_NODE:node2=node.cloneNode(false);node2.ownerDocument=doc;case DOCUMENT_FRAGMENT_NODE:break;case ATTRIBUTE_NODE:deep=true;break;}if(!node2){node2=node.cloneNode(false);}node2.ownerDocument=doc;node2.parentNode=null;if(deep){var child=node.firstChild;while(child){node2.appendChild(_importNode(doc,child,deep));child=child.nextSibling;}}return node2;}function _cloneNode(doc,node,deep){var node2=new node.constructor();for(var n in node){var v=node[n];if(_typeof(v)!="object"){if(v!=node2[n]){node2[n]=v;}}}if(node.childNodes){node2.childNodes=new NodeList();}node2.ownerDocument=doc;switch(node2.nodeType){case ELEMENT_NODE:var attrs=node.attributes;var attrs2=node2.attributes=new NamedNodeMap();var len=attrs.length;attrs2._ownerElement=node2;for(var i=0;i<len;i++){node2.setAttributeNode(_cloneNode(doc,attrs.item(i),true));}break;;case ATTRIBUTE_NODE:deep=true;}if(deep){var child=node.firstChild;while(child){node2.appendChild(_cloneNode(doc,child,deep));child=child.nextSibling;}}return node2;}function __set__(object,key,value){object[key]=value;}try{if(Object.defineProperty){var getTextContent2=function getTextContent2(node){switch(node.nodeType){case ELEMENT_NODE:case DOCUMENT_FRAGMENT_NODE:var buf=[];node=node.firstChild;while(node){if(node.nodeType!==7&&node.nodeType!==8){buf.push(getTextContent2(node));}node=node.nextSibling;}return buf.join("");default:return node.nodeValue;}};getTextContent=getTextContent2;Object.defineProperty(LiveNodeList.prototype,"length",{get:function get(){_updateLiveList(this);return this.$$length;}});Object.defineProperty(Node.prototype,"textContent",{get:function get(){return getTextContent2(this);},set:function set(data){switch(this.nodeType){case ELEMENT_NODE:case DOCUMENT_FRAGMENT_NODE:while(this.firstChild){this.removeChild(this.firstChild);}if(data||String(data)){this.appendChild(this.ownerDocument.createTextNode(data));}break;default:this.data=data;this.value=data;this.nodeValue=data;}}});__set__=function __set__(object,key,value){object["$$"+key]=value;};}}catch(e){}var getTextContent;exports.DocumentType=DocumentType;exports.DOMException=DOMException;exports.DOMImplementation=DOMImplementation;exports.Element=Element2;exports.Node=Node;exports.NodeList=NodeList;exports.XMLSerializer=XMLSerializer;}});// node_modules/@xmldom/xmldom/lib/entities.js
var require_entities=__commonJS({"node_modules/@xmldom/xmldom/lib/entities.js":function node_modulesXmldomXmldomLibEntitiesJs(exports){var freeze=require_conventions().freeze;exports.XML_ENTITIES=freeze({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'});exports.HTML_ENTITIES=freeze({lt:"<",gt:">",amp:"&",quot:'"',apos:"'",Agrave:"\xC0",Aacute:"\xC1",Acirc:"\xC2",Atilde:"\xC3",Auml:"\xC4",Aring:"\xC5",AElig:"\xC6",Ccedil:"\xC7",Egrave:"\xC8",Eacute:"\xC9",Ecirc:"\xCA",Euml:"\xCB",Igrave:"\xCC",Iacute:"\xCD",Icirc:"\xCE",Iuml:"\xCF",ETH:"\xD0",Ntilde:"\xD1",Ograve:"\xD2",Oacute:"\xD3",Ocirc:"\xD4",Otilde:"\xD5",Ouml:"\xD6",Oslash:"\xD8",Ugrave:"\xD9",Uacute:"\xDA",Ucirc:"\xDB",Uuml:"\xDC",Yacute:"\xDD",THORN:"\xDE",szlig:"\xDF",agrave:"\xE0",aacute:"\xE1",acirc:"\xE2",atilde:"\xE3",auml:"\xE4",aring:"\xE5",aelig:"\xE6",ccedil:"\xE7",egrave:"\xE8",eacute:"\xE9",ecirc:"\xEA",euml:"\xEB",igrave:"\xEC",iacute:"\xED",icirc:"\xEE",iuml:"\xEF",eth:"\xF0",ntilde:"\xF1",ograve:"\xF2",oacute:"\xF3",ocirc:"\xF4",otilde:"\xF5",ouml:"\xF6",oslash:"\xF8",ugrave:"\xF9",uacute:"\xFA",ucirc:"\xFB",uuml:"\xFC",yacute:"\xFD",thorn:"\xFE",yuml:"\xFF",nbsp:"\xA0",iexcl:"\xA1",cent:"\xA2",pound:"\xA3",curren:"\xA4",yen:"\xA5",brvbar:"\xA6",sect:"\xA7",uml:"\xA8",copy:"\xA9",ordf:"\xAA",laquo:"\xAB",not:"\xAC",shy:"\xAD\xAD",reg:"\xAE",macr:"\xAF",deg:"\xB0",plusmn:"\xB1",sup2:"\xB2",sup3:"\xB3",acute:"\xB4",micro:"\xB5",para:"\xB6",middot:"\xB7",cedil:"\xB8",sup1:"\xB9",ordm:"\xBA",raquo:"\xBB",frac14:"\xBC",frac12:"\xBD",frac34:"\xBE",iquest:"\xBF",times:"\xD7",divide:"\xF7",forall:"\u2200",part:"\u2202",exist:"\u2203",empty:"\u2205",nabla:"\u2207",isin:"\u2208",notin:"\u2209",ni:"\u220B",prod:"\u220F",sum:"\u2211",minus:"\u2212",lowast:"\u2217",radic:"\u221A",prop:"\u221D",infin:"\u221E",ang:"\u2220",and:"\u2227",or:"\u2228",cap:"\u2229",cup:"\u222A","int":"\u222B",there4:"\u2234",sim:"\u223C",cong:"\u2245",asymp:"\u2248",ne:"\u2260",equiv:"\u2261",le:"\u2264",ge:"\u2265",sub:"\u2282",sup:"\u2283",nsub:"\u2284",sube:"\u2286",supe:"\u2287",oplus:"\u2295",otimes:"\u2297",perp:"\u22A5",sdot:"\u22C5",Alpha:"\u0391",Beta:"\u0392",Gamma:"\u0393",Delta:"\u0394",Epsilon:"\u0395",Zeta:"\u0396",Eta:"\u0397",Theta:"\u0398",Iota:"\u0399",Kappa:"\u039A",Lambda:"\u039B",Mu:"\u039C",Nu:"\u039D",Xi:"\u039E",Omicron:"\u039F",Pi:"\u03A0",Rho:"\u03A1",Sigma:"\u03A3",Tau:"\u03A4",Upsilon:"\u03A5",Phi:"\u03A6",Chi:"\u03A7",Psi:"\u03A8",Omega:"\u03A9",alpha:"\u03B1",beta:"\u03B2",gamma:"\u03B3",delta:"\u03B4",epsilon:"\u03B5",zeta:"\u03B6",eta:"\u03B7",theta:"\u03B8",iota:"\u03B9",kappa:"\u03BA",lambda:"\u03BB",mu:"\u03BC",nu:"\u03BD",xi:"\u03BE",omicron:"\u03BF",pi:"\u03C0",rho:"\u03C1",sigmaf:"\u03C2",sigma:"\u03C3",tau:"\u03C4",upsilon:"\u03C5",phi:"\u03C6",chi:"\u03C7",psi:"\u03C8",omega:"\u03C9",thetasym:"\u03D1",upsih:"\u03D2",piv:"\u03D6",OElig:"\u0152",oelig:"\u0153",Scaron:"\u0160",scaron:"\u0161",Yuml:"\u0178",fnof:"\u0192",circ:"\u02C6",tilde:"\u02DC",ensp:"\u2002",emsp:"\u2003",thinsp:"\u2009",zwnj:"\u200C",zwj:"\u200D",lrm:"\u200E",rlm:"\u200F",ndash:"\u2013",mdash:"\u2014",lsquo:"\u2018",rsquo:"\u2019",sbquo:"\u201A",ldquo:"\u201C",rdquo:"\u201D",bdquo:"\u201E",dagger:"\u2020",Dagger:"\u2021",bull:"\u2022",hellip:"\u2026",permil:"\u2030",prime:"\u2032",Prime:"\u2033",lsaquo:"\u2039",rsaquo:"\u203A",oline:"\u203E",euro:"\u20AC",trade:"\u2122",larr:"\u2190",uarr:"\u2191",rarr:"\u2192",darr:"\u2193",harr:"\u2194",crarr:"\u21B5",lceil:"\u2308",rceil:"\u2309",lfloor:"\u230A",rfloor:"\u230B",loz:"\u25CA",spades:"\u2660",clubs:"\u2663",hearts:"\u2665",diams:"\u2666"});exports.entityMap=exports.HTML_ENTITIES;}});// node_modules/@xmldom/xmldom/lib/sax.js
var require_sax=__commonJS({"node_modules/@xmldom/xmldom/lib/sax.js":function node_modulesXmldomXmldomLibSaxJs(exports){var NAMESPACE=require_conventions().NAMESPACE;var nameStartChar=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/;var nameChar=new RegExp("[\\-\\.0-9"+nameStartChar.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]");var tagNamePattern=new RegExp("^"+nameStartChar.source+nameChar.source+"*(?::"+nameStartChar.source+nameChar.source+"*)?$");var S_TAG=0;var S_ATTR=1;var S_ATTR_SPACE=2;var S_EQ=3;var S_ATTR_NOQUOT_VALUE=4;var S_ATTR_END=5;var S_TAG_SPACE=6;var S_TAG_CLOSE=7;function ParseError(message,locator){this.message=message;this.locator=locator;if(Error.captureStackTrace)Error.captureStackTrace(this,ParseError);}ParseError.prototype=new Error();ParseError.prototype.name=ParseError.name;function XMLReader(){}XMLReader.prototype={parse:function parse(source,defaultNSMap,entityMap){var domBuilder=this.domBuilder;domBuilder.startDocument();_copy3(defaultNSMap,defaultNSMap={});parse3(source,defaultNSMap,entityMap,domBuilder,this.errorHandler);domBuilder.endDocument();}};function parse3(source,defaultNSMapCopy,entityMap,domBuilder,errorHandler){function fixedFromCharCode(code){if(code>65535){code-=65536;var surrogate1=55296+(code>>10),surrogate2=56320+(code&1023);return String.fromCharCode(surrogate1,surrogate2);}else{return String.fromCharCode(code);}}function entityReplacer(a2){var k=a2.slice(1,-1);if(k in entityMap){return entityMap[k];}else if(k.charAt(0)==="#"){return fixedFromCharCode(parseInt(k.substr(1).replace("x","0x")));}else{errorHandler.error("entity not found:"+a2);return a2;}}function appendText(end2){if(end2>start2){var xt=source.substring(start2,end2).replace(/&#?\w+;/g,entityReplacer);locator&&position(start2);domBuilder.characters(xt,0,end2-start2);start2=end2;}}function position(p,m){while(p>=lineEnd&&(m=linePattern.exec(source))){lineStart=m.index;lineEnd=lineStart+m[0].length;locator.lineNumber++;}locator.columnNumber=p-lineStart+1;}var lineStart=0;var lineEnd=0;var linePattern=/.*(?:\r\n?|\n)|.*$/g;var locator=domBuilder.locator;var parseStack=[{currentNSMap:defaultNSMapCopy}];var closeMap={};var start2=0;while(true){try{var tagStart=source.indexOf("<",start2);if(tagStart<0){if(!source.substr(start2).match(/^\s*$/)){var doc=domBuilder.doc;var text=doc.createTextNode(source.substr(start2));doc.appendChild(text);domBuilder.currentElement=text;}return;}if(tagStart>start2){appendText(tagStart);}switch(source.charAt(tagStart+1)){case"/":var end=source.indexOf(">",tagStart+3);var tagName=source.substring(tagStart+2,end).replace(/[ \t\n\r]+$/g,"");var config3=parseStack.pop();if(end<0){tagName=source.substring(tagStart+2).replace(/[\s<].*/,"");errorHandler.error("end tag name: "+tagName+" is not complete:"+config3.tagName);end=tagStart+1+tagName.length;}else if(tagName.match(/\s</)){tagName=tagName.replace(/[\s<].*/,"");errorHandler.error("end tag name: "+tagName+" maybe not complete");end=tagStart+1+tagName.length;}var localNSMap=config3.localNSMap;var endMatch=config3.tagName==tagName;var endIgnoreCaseMach=endMatch||config3.tagName&&config3.tagName.toLowerCase()==tagName.toLowerCase();if(endIgnoreCaseMach){domBuilder.endElement(config3.uri,config3.localName,tagName);if(localNSMap){for(var prefix in localNSMap){domBuilder.endPrefixMapping(prefix);}}if(!endMatch){errorHandler.fatalError("end tag name: "+tagName+" is not match the current start tagName:"+config3.tagName);}}else{parseStack.push(config3);}end++;break;case"?":locator&&position(tagStart);end=parseInstruction(source,tagStart,domBuilder);break;case"!":locator&&position(tagStart);end=parseDCC(source,tagStart,domBuilder,errorHandler);break;default:locator&&position(tagStart);var el=new ElementAttributes();var currentNSMap=parseStack[parseStack.length-1].currentNSMap;var end=parseElementStartPart(source,tagStart,el,currentNSMap,entityReplacer,errorHandler);var len=el.length;if(!el.closed&&fixSelfClosed(source,end,el.tagName,closeMap)){el.closed=true;if(!entityMap.nbsp){errorHandler.warning("unclosed xml attribute");}}if(locator&&len){var locator2=copyLocator(locator,{});for(var i=0;i<len;i++){var a=el[i];position(a.offset);a.locator=copyLocator(locator,{});}domBuilder.locator=locator2;if(appendElement(el,domBuilder,currentNSMap)){parseStack.push(el);}domBuilder.locator=locator;}else{if(appendElement(el,domBuilder,currentNSMap)){parseStack.push(el);}}if(NAMESPACE.isHTML(el.uri)&&!el.closed){end=parseHtmlSpecialContent(source,end,el.tagName,entityReplacer,domBuilder);}else{end++;}}}catch(e){if(e instanceof ParseError){throw e;}errorHandler.error("element parse error: "+e);end=-1;}if(end>start2){start2=end;}else{appendText(Math.max(tagStart,start2)+1);}}}function copyLocator(f,t2){t2.lineNumber=f.lineNumber;t2.columnNumber=f.columnNumber;return t2;}function parseElementStartPart(source,start2,el,currentNSMap,entityReplacer,errorHandler){function addAttribute(qname,value2,startIndex){if(el.attributeNames.hasOwnProperty(qname)){errorHandler.fatalError("Attribute "+qname+" redefined");}el.addValue(qname,value2,startIndex);}var attrName;var value;var p=++start2;var s=S_TAG;while(true){var c=source.charAt(p);switch(c){case"=":if(s===S_ATTR){attrName=source.slice(start2,p);s=S_EQ;}else if(s===S_ATTR_SPACE){s=S_EQ;}else{throw new Error("attribute equal must after attrName");}break;case"'":case'"':if(s===S_EQ||s===S_ATTR){if(s===S_ATTR){errorHandler.warning('attribute value must after "="');attrName=source.slice(start2,p);}start2=p+1;p=source.indexOf(c,start2);if(p>0){value=source.slice(start2,p).replace(/&#?\w+;/g,entityReplacer);addAttribute(attrName,value,start2-1);s=S_ATTR_END;}else{throw new Error("attribute value no end '"+c+"' match");}}else if(s==S_ATTR_NOQUOT_VALUE){value=source.slice(start2,p).replace(/&#?\w+;/g,entityReplacer);addAttribute(attrName,value,start2);errorHandler.warning('attribute "'+attrName+'" missed start quot('+c+")!!");start2=p+1;s=S_ATTR_END;}else{throw new Error('attribute value must after "="');}break;case"/":switch(s){case S_TAG:el.setTagName(source.slice(start2,p));case S_ATTR_END:case S_TAG_SPACE:case S_TAG_CLOSE:s=S_TAG_CLOSE;el.closed=true;case S_ATTR_NOQUOT_VALUE:case S_ATTR:case S_ATTR_SPACE:break;default:throw new Error("attribute invalid close char('/')");}break;case"":errorHandler.error("unexpected end of input");if(s==S_TAG){el.setTagName(source.slice(start2,p));}return p;case">":switch(s){case S_TAG:el.setTagName(source.slice(start2,p));case S_ATTR_END:case S_TAG_SPACE:case S_TAG_CLOSE:break;case S_ATTR_NOQUOT_VALUE:case S_ATTR:value=source.slice(start2,p);if(value.slice(-1)==="/"){el.closed=true;value=value.slice(0,-1);}case S_ATTR_SPACE:if(s===S_ATTR_SPACE){value=attrName;}if(s==S_ATTR_NOQUOT_VALUE){errorHandler.warning('attribute "'+value+'" missed quot(")!');addAttribute(attrName,value.replace(/&#?\w+;/g,entityReplacer),start2);}else{if(!NAMESPACE.isHTML(currentNSMap[""])||!value.match(/^(?:disabled|checked|selected)$/i)){errorHandler.warning('attribute "'+value+'" missed value!! "'+value+'" instead!!');}addAttribute(value,value,start2);}break;case S_EQ:throw new Error("attribute value missed!!");}return p;case"\x80":c=" ";default:if(c<=" "){switch(s){case S_TAG:el.setTagName(source.slice(start2,p));s=S_TAG_SPACE;break;case S_ATTR:attrName=source.slice(start2,p);s=S_ATTR_SPACE;break;case S_ATTR_NOQUOT_VALUE:var value=source.slice(start2,p).replace(/&#?\w+;/g,entityReplacer);errorHandler.warning('attribute "'+value+'" missed quot(")!!');addAttribute(attrName,value,start2);case S_ATTR_END:s=S_TAG_SPACE;break;}}else{switch(s){case S_ATTR_SPACE:var tagName=el.tagName;if(!NAMESPACE.isHTML(currentNSMap[""])||!attrName.match(/^(?:disabled|checked|selected)$/i)){errorHandler.warning('attribute "'+attrName+'" missed value!! "'+attrName+'" instead2!!');}addAttribute(attrName,attrName,start2);start2=p;s=S_ATTR;break;case S_ATTR_END:errorHandler.warning('attribute space is required"'+attrName+'"!!');case S_TAG_SPACE:s=S_ATTR;start2=p;break;case S_EQ:s=S_ATTR_NOQUOT_VALUE;start2=p;break;case S_TAG_CLOSE:throw new Error("elements closed character '/' and '>' must be connected to");}}}p++;}}function appendElement(el,domBuilder,currentNSMap){var tagName=el.tagName;var localNSMap=null;var i=el.length;while(i--){var a=el[i];var qName=a.qName;var value=a.value;var nsp=qName.indexOf(":");if(nsp>0){var prefix=a.prefix=qName.slice(0,nsp);var localName=qName.slice(nsp+1);var nsPrefix=prefix==="xmlns"&&localName;}else{localName=qName;prefix=null;nsPrefix=qName==="xmlns"&&"";}a.localName=localName;if(nsPrefix!==false){if(localNSMap==null){localNSMap={};_copy3(currentNSMap,currentNSMap={});}currentNSMap[nsPrefix]=localNSMap[nsPrefix]=value;a.uri=NAMESPACE.XMLNS;domBuilder.startPrefixMapping(nsPrefix,value);}}var i=el.length;while(i--){a=el[i];var prefix=a.prefix;if(prefix){if(prefix==="xml"){a.uri=NAMESPACE.XML;}if(prefix!=="xmlns"){a.uri=currentNSMap[prefix||""];}}}var nsp=tagName.indexOf(":");if(nsp>0){prefix=el.prefix=tagName.slice(0,nsp);localName=el.localName=tagName.slice(nsp+1);}else{prefix=null;localName=el.localName=tagName;}var ns=el.uri=currentNSMap[prefix||""];domBuilder.startElement(ns,localName,tagName,el);if(el.closed){domBuilder.endElement(ns,localName,tagName);if(localNSMap){for(prefix in localNSMap){domBuilder.endPrefixMapping(prefix);}}}else{el.currentNSMap=currentNSMap;el.localNSMap=localNSMap;return true;}}function parseHtmlSpecialContent(source,elStartEnd,tagName,entityReplacer,domBuilder){if(/^(?:script|textarea)$/i.test(tagName)){var elEndStart=source.indexOf("</"+tagName+">",elStartEnd);var text=source.substring(elStartEnd+1,elEndStart);if(/[&<]/.test(text)){if(/^script$/i.test(tagName)){domBuilder.characters(text,0,text.length);return elEndStart;}text=text.replace(/&#?\w+;/g,entityReplacer);domBuilder.characters(text,0,text.length);return elEndStart;}}return elStartEnd+1;}function fixSelfClosed(source,elStartEnd,tagName,closeMap){var pos=closeMap[tagName];if(pos==null){pos=source.lastIndexOf("</"+tagName+">");if(pos<elStartEnd){pos=source.lastIndexOf("</"+tagName);}closeMap[tagName]=pos;}return pos<elStartEnd;}function _copy3(source,target){for(var n in source){target[n]=source[n];}}function parseDCC(source,start2,domBuilder,errorHandler){var next=source.charAt(start2+2);switch(next){case"-":if(source.charAt(start2+3)==="-"){var end=source.indexOf("-->",start2+4);if(end>start2){domBuilder.comment(source,start2+4,end-start2-4);return end+3;}else{errorHandler.error("Unclosed comment");return-1;}}else{return-1;}default:if(source.substr(start2+3,6)=="CDATA["){var end=source.indexOf("]]>",start2+9);domBuilder.startCDATA();domBuilder.characters(source,start2+9,end-start2-9);domBuilder.endCDATA();return end+3;}var matchs=split(source,start2);var len=matchs.length;if(len>1&&/!doctype/i.test(matchs[0][0])){var name=matchs[1][0];var pubid=false;var sysid=false;if(len>3){if(/^public$/i.test(matchs[2][0])){pubid=matchs[3][0];sysid=len>4&&matchs[4][0];}else if(/^system$/i.test(matchs[2][0])){sysid=matchs[3][0];}}var lastMatch=matchs[len-1];domBuilder.startDTD(name,pubid,sysid);domBuilder.endDTD();return lastMatch.index+lastMatch[0].length;}}return-1;}function parseInstruction(source,start2,domBuilder){var end=source.indexOf("?>",start2);if(end){var match=source.substring(start2,end).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(match){var len=match[0].length;domBuilder.processingInstruction(match[1],match[2]);return end+2;}else{return-1;}}return-1;}function ElementAttributes(){this.attributeNames={};}ElementAttributes.prototype={setTagName:function setTagName(tagName){if(!tagNamePattern.test(tagName)){throw new Error("invalid tagName:"+tagName);}this.tagName=tagName;},addValue:function addValue(qName,value,offset){if(!tagNamePattern.test(qName)){throw new Error("invalid attribute:"+qName);}this.attributeNames[qName]=this.length;this[this.length++]={qName:qName,value:value,offset:offset};},length:0,getLocalName:function getLocalName(i){return this[i].localName;},getLocator:function getLocator(i){return this[i].locator;},getQName:function getQName(i){return this[i].qName;},getURI:function getURI(i){return this[i].uri;},getValue:function getValue(i){return this[i].value;}};function split(source,start2){var match;var buf=[];var reg=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;reg.lastIndex=start2;reg.exec(source);while(match=reg.exec(source)){buf.push(match);if(match[1])return buf;}}exports.XMLReader=XMLReader;exports.ParseError=ParseError;}});// node_modules/@xmldom/xmldom/lib/dom-parser.js
var require_dom_parser=__commonJS({"node_modules/@xmldom/xmldom/lib/dom-parser.js":function node_modulesXmldomXmldomLibDomParserJs(exports){var conventions=require_conventions();var dom=require_dom();var entities=require_entities();var sax=require_sax();var DOMImplementation=dom.DOMImplementation;var NAMESPACE=conventions.NAMESPACE;var ParseError=sax.ParseError;var XMLReader=sax.XMLReader;function DOMParser2(options){this.options=options||{locator:{}};}DOMParser2.prototype.parseFromString=function(source,mimeType){var options=this.options;var sax2=new XMLReader();var domBuilder=options.domBuilder||new DOMHandler();var errorHandler=options.errorHandler;var locator=options.locator;var defaultNSMap=options.xmlns||{};var isHTML=/\/x?html?$/.test(mimeType);var entityMap=isHTML?entities.HTML_ENTITIES:entities.XML_ENTITIES;if(locator){domBuilder.setDocumentLocator(locator);}sax2.errorHandler=buildErrorHandler(errorHandler,domBuilder,locator);sax2.domBuilder=options.domBuilder||domBuilder;if(isHTML){defaultNSMap[""]=NAMESPACE.HTML;}defaultNSMap.xml=defaultNSMap.xml||NAMESPACE.XML;if(source&&typeof source==="string"){sax2.parse(source,defaultNSMap,entityMap);}else{sax2.errorHandler.error("invalid doc source");}return domBuilder.doc;};function buildErrorHandler(errorImpl,domBuilder,locator){if(!errorImpl){if(domBuilder instanceof DOMHandler){return domBuilder;}errorImpl=domBuilder;}var errorHandler={};var isCallback=errorImpl instanceof Function;locator=locator||{};function build(key){var fn=errorImpl[key];if(!fn&&isCallback){fn=errorImpl.length==2?function(msg){errorImpl(key,msg);}:errorImpl;}errorHandler[key]=fn&&function(msg){fn("[xmldom "+key+"]	"+msg+_locator(locator));}||function(){};}build("warning");build("error");build("fatalError");return errorHandler;}function DOMHandler(){this.cdata=false;}function position(locator,node){node.lineNumber=locator.lineNumber;node.columnNumber=locator.columnNumber;}DOMHandler.prototype={startDocument:function startDocument(){this.doc=new DOMImplementation().createDocument(null,null,null);if(this.locator){this.doc.documentURI=this.locator.systemId;}},startElement:function startElement(namespaceURI,localName,qName,attrs){var doc=this.doc;var el=doc.createElementNS(namespaceURI,qName||localName);var len=attrs.length;appendElement(this,el);this.currentElement=el;this.locator&&position(this.locator,el);for(var i=0;i<len;i++){var namespaceURI=attrs.getURI(i);var value=attrs.getValue(i);var qName=attrs.getQName(i);var attr=doc.createAttributeNS(namespaceURI,qName);this.locator&&position(attrs.getLocator(i),attr);attr.value=attr.nodeValue=value;el.setAttributeNode(attr);}},endElement:function endElement(namespaceURI,localName,qName){var current=this.currentElement;var tagName=current.tagName;this.currentElement=current.parentNode;},startPrefixMapping:function startPrefixMapping(prefix,uri){},endPrefixMapping:function endPrefixMapping(prefix){},processingInstruction:function processingInstruction(target,data){var ins=this.doc.createProcessingInstruction(target,data);this.locator&&position(this.locator,ins);appendElement(this,ins);},ignorableWhitespace:function ignorableWhitespace(ch,start2,length){},characters:function characters(chars,start2,length){chars=_toString.apply(this,arguments);if(chars){if(this.cdata){var charNode=this.doc.createCDATASection(chars);}else{var charNode=this.doc.createTextNode(chars);}if(this.currentElement){this.currentElement.appendChild(charNode);}else if(/^\s*$/.test(chars)){this.doc.appendChild(charNode);}this.locator&&position(this.locator,charNode);}},skippedEntity:function skippedEntity(name){},endDocument:function endDocument(){this.doc.normalize();},setDocumentLocator:function setDocumentLocator(locator){if(this.locator=locator){locator.lineNumber=0;}},comment:function comment(chars,start2,length){chars=_toString.apply(this,arguments);var comm=this.doc.createComment(chars);this.locator&&position(this.locator,comm);appendElement(this,comm);},startCDATA:function startCDATA(){this.cdata=true;},endCDATA:function endCDATA(){this.cdata=false;},startDTD:function startDTD(name,publicId,systemId){var impl=this.doc.implementation;if(impl&&impl.createDocumentType){var dt=impl.createDocumentType(name,publicId,systemId);this.locator&&position(this.locator,dt);appendElement(this,dt);this.doc.doctype=dt;}},warning:function warning(error){console.warn("[xmldom warning]	"+error,_locator(this.locator));},error:function error(_error2){console.error("[xmldom error]	"+_error2,_locator(this.locator));},fatalError:function fatalError(error){throw new ParseError(error,this.locator);}};function _locator(l){if(l){return"\n@"+(l.systemId||"")+"#[line:"+l.lineNumber+",col:"+l.columnNumber+"]";}}function _toString(chars,start2,length){if(typeof chars=="string"){return chars.substr(start2,length);}else{if(chars.length>=start2+length||start2){return new java.lang.String(chars,start2,length)+"";}return chars;}}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(key){DOMHandler.prototype[key]=function(){return null;};});function appendElement(hander,node){if(!hander.currentElement){hander.doc.appendChild(node);}else{hander.currentElement.appendChild(node);}}exports.__DOMHandler=DOMHandler;exports.DOMParser=DOMParser2;exports.DOMImplementation=dom.DOMImplementation;exports.XMLSerializer=dom.XMLSerializer;}});// node_modules/@xmldom/xmldom/lib/index.js
var require_lib2=__commonJS({"node_modules/@xmldom/xmldom/lib/index.js":function node_modulesXmldomXmldomLibIndexJs(exports){var dom=require_dom();exports.DOMImplementation=dom.DOMImplementation;exports.XMLSerializer=dom.XMLSerializer;exports.DOMParser=require_dom_parser().DOMParser;}});// node_modules/mux.js/lib/utils/numbers.js
var require_numbers=__commonJS({"node_modules/mux.js/lib/utils/numbers.js":function node_modulesMuxJsLibUtilsNumbersJs(exports,module){var MAX_UINT32=Math.pow(2,32);var getUint64=function getUint64(uint8){var dv=new DataView(uint8.buffer,uint8.byteOffset,uint8.byteLength);var value;if(dv.getBigUint64){value=dv.getBigUint64(0);if(value<Number.MAX_SAFE_INTEGER){return Number(value);}return value;}return dv.getUint32(0)*MAX_UINT32+dv.getUint32(4);};module.exports={getUint64:getUint64,MAX_UINT32:MAX_UINT32};}});// node_modules/mux.js/lib/tools/parse-sidx.js
var require_parse_sidx=__commonJS({"node_modules/mux.js/lib/tools/parse-sidx.js":function node_modulesMuxJsLibToolsParseSidxJs(exports,module){var getUint64=require_numbers().getUint64;var parseSidx2=function parseSidx2(data){var view=new DataView(data.buffer,data.byteOffset,data.byteLength),result={version:data[0],flags:new Uint8Array(data.subarray(1,4)),references:[],referenceId:view.getUint32(4),timescale:view.getUint32(8)},i=12;if(result.version===0){result.earliestPresentationTime=view.getUint32(i);result.firstOffset=view.getUint32(i+4);i+=8;}else{result.earliestPresentationTime=getUint64(data.subarray(i));result.firstOffset=getUint64(data.subarray(i+8));i+=16;}i+=2;var referenceCount=view.getUint16(i);i+=2;for(;referenceCount>0;i+=12,referenceCount--){result.references.push({referenceType:(data[i]&128)>>>7,referencedSize:view.getUint32(i)&2147483647,subsegmentDuration:view.getUint32(i+4),startsWithSap:!!(data[i+8]&128),sapType:(data[i+8]&112)>>>4,sapDeltaTime:view.getUint32(i+8)&268435455});}return result;};module.exports=parseSidx2;}});// node_modules/mux.js/lib/utils/clock.js
var require_clock=__commonJS({"node_modules/mux.js/lib/utils/clock.js":function node_modulesMuxJsLibUtilsClockJs(exports,module){var ONE_SECOND_IN_TS2=9e4;var secondsToVideoTs;var secondsToAudioTs;var videoTsToSeconds;var audioTsToSeconds;var audioTsToVideoTs;var videoTsToAudioTs;var metadataTsToSeconds;secondsToVideoTs=function secondsToVideoTs(seconds){return seconds*ONE_SECOND_IN_TS2;};secondsToAudioTs=function secondsToAudioTs(seconds,sampleRate){return seconds*sampleRate;};videoTsToSeconds=function videoTsToSeconds(timestamp){return timestamp/ONE_SECOND_IN_TS2;};audioTsToSeconds=function audioTsToSeconds(timestamp,sampleRate){return timestamp/sampleRate;};audioTsToVideoTs=function audioTsToVideoTs(timestamp,sampleRate){return secondsToVideoTs(audioTsToSeconds(timestamp,sampleRate));};videoTsToAudioTs=function videoTsToAudioTs(timestamp,sampleRate){return secondsToAudioTs(videoTsToSeconds(timestamp),sampleRate);};metadataTsToSeconds=function metadataTsToSeconds(timestamp,timelineStartPts,keepOriginalTimestamps){return videoTsToSeconds(keepOriginalTimestamps?timestamp:timestamp-timelineStartPts);};module.exports={ONE_SECOND_IN_TS:ONE_SECOND_IN_TS2,secondsToVideoTs:secondsToVideoTs,secondsToAudioTs:secondsToAudioTs,videoTsToSeconds:videoTsToSeconds,audioTsToSeconds:audioTsToSeconds,audioTsToVideoTs:audioTsToVideoTs,videoTsToAudioTs:videoTsToAudioTs,metadataTsToSeconds:metadataTsToSeconds};}});// node_modules/gsap/gsap-core.js
function _assertThisInitialized(self2){if(self2===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self2;}function _inheritsLoose(subClass,superClass){subClass.prototype=Object.create(superClass.prototype);subClass.prototype.constructor=subClass;subClass.__proto__=superClass;}var _config={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}};var _defaults={duration:0.5,overwrite:false,delay:0};var _suppressOverwrites;var _bigNum=1e8;var _tinyNum=1/_bigNum;var _2PI=Math.PI*2;var _HALF_PI=_2PI/4;var _gsID=0;var _sqrt=Math.sqrt;var _cos=Math.cos;var _sin=Math.sin;var _isString=function _isString2(value){return typeof value==="string";};var _isFunction=function _isFunction2(value){return typeof value==="function";};var _isNumber=function _isNumber2(value){return typeof value==="number";};var _isUndefined=function _isUndefined2(value){return typeof value==="undefined";};var _isObject=function _isObject2(value){return _typeof(value)==="object";};var _isNotFalse=function _isNotFalse2(value){return value!==false;};var _windowExists=function _windowExists2(){return typeof window!=="undefined";};var _isFuncOrString=function _isFuncOrString2(value){return _isFunction(value)||_isString(value);};var _isTypedArray=typeof ArrayBuffer==="function"&&ArrayBuffer.isView||function(){};var _isArray=Array.isArray;var _strictNumExp=/(?:-?\.?\d|\.)+/gi;var _numExp=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g;var _numWithUnitExp=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g;var _complexStringNumExp=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi;var _relExp=/[+-]=-?[.\d]+/;var _delimitedValueExp=/[^,'"\[\]\s]+/gi;var _unitExp=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i;var _globalTimeline;var _win;var _coreInitted;var _doc;var _globals={};var _installScope={};var _coreReady;var _install=function _install2(scope){return(_installScope=_merge(scope,_globals))&&gsap;};var _missingPlugin=function _missingPlugin2(property,value){return console.warn("Invalid property",property,"set to",value,"Missing plugin? gsap.registerPlugin()");};var _warn=function _warn2(message,suppress){return!suppress&&console.warn(message);};var _addGlobal=function _addGlobal2(name,obj){return name&&(_globals[name]=obj)&&_installScope&&(_installScope[name]=obj)||_globals;};var _emptyFunc=function _emptyFunc2(){return 0;};var _reservedProps={};var _lazyTweens=[];var _lazyLookup={};var _lastRenderedFrame;var _plugins={};var _effects={};var _nextGCFrame=30;var _harnessPlugins=[];var _callbackNames="";var _harness=function _harness2(targets){var target=targets[0],harnessPlugin,i;_isObject(target)||_isFunction(target)||(targets=[targets]);if(!(harnessPlugin=(target._gsap||{}).harness)){i=_harnessPlugins.length;while(i--&&!_harnessPlugins[i].targetTest(target)){}harnessPlugin=_harnessPlugins[i];}i=targets.length;while(i--){targets[i]&&(targets[i]._gsap||(targets[i]._gsap=new GSCache(targets[i],harnessPlugin)))||targets.splice(i,1);}return targets;};var _getCache=function _getCache2(target){return target._gsap||_harness(toArray(target))[0]._gsap;};var _getProperty=function _getProperty2(target,property,v){return(v=target[property])&&_isFunction(v)?target[property]():_isUndefined(v)&&target.getAttribute&&target.getAttribute(property)||v;};var _forEachName=function _forEachName2(names,func){return(names=names.split(",")).forEach(func)||names;};var _round=function _round2(value){return Math.round(value*1e5)/1e5||0;};var _roundPrecise=function _roundPrecise2(value){return Math.round(value*1e7)/1e7||0;};var _parseRelative=function _parseRelative2(start2,value){var operator=value.charAt(0),end=parseFloat(value.substr(2));start2=parseFloat(start2);return operator==="+"?start2+end:operator==="-"?start2-end:operator==="*"?start2*end:start2/end;};var _arrayContainsAny=function _arrayContainsAny2(toSearch,toFind){var l=toFind.length,i=0;for(;toSearch.indexOf(toFind[i])<0&&++i<l;){}return i<l;};var _lazyRender=function _lazyRender2(){var l=_lazyTweens.length,a=_lazyTweens.slice(0),i,tween;_lazyLookup={};_lazyTweens.length=0;for(i=0;i<l;i++){tween=a[i];tween&&tween._lazy&&(tween.render(tween._lazy[0],tween._lazy[1],true)._lazy=0);}};var _lazySafeRender=function _lazySafeRender2(animation,time,suppressEvents,force){_lazyTweens.length&&_lazyRender();animation.render(time,suppressEvents,force);_lazyTweens.length&&_lazyRender();};var _numericIfPossible=function _numericIfPossible2(value){var n=parseFloat(value);return(n||n===0)&&(value+"").match(_delimitedValueExp).length<2?n:_isString(value)?value.trim():value;};var _passThrough=function _passThrough2(p){return p;};var _setDefaults=function _setDefaults2(obj,defaults3){for(var p in defaults3){p in obj||(obj[p]=defaults3[p]);}return obj;};var _setKeyframeDefaults=function _setKeyframeDefaults2(excludeDuration){return function(obj,defaults3){for(var p in defaults3){p in obj||p==="duration"&&excludeDuration||p==="ease"||(obj[p]=defaults3[p]);}};};var _merge=function _merge2(base,toMerge){for(var p in toMerge){base[p]=toMerge[p];}return base;};var _mergeDeep=function _mergeDeep2(base,toMerge){for(var p in toMerge){p!=="__proto__"&&p!=="constructor"&&p!=="prototype"&&(base[p]=_isObject(toMerge[p])?_mergeDeep2(base[p]||(base[p]={}),toMerge[p]):toMerge[p]);}return base;};var _copyExcluding=function _copyExcluding2(obj,excluding){var copy={},p;for(p in obj){p in excluding||(copy[p]=obj[p]);}return copy;};var _inheritDefaults=function _inheritDefaults2(vars){var parent=vars.parent||_globalTimeline,func=vars.keyframes?_setKeyframeDefaults(_isArray(vars.keyframes)):_setDefaults;if(_isNotFalse(vars.inherit)){while(parent){func(vars,parent.vars.defaults);parent=parent.parent||parent._dp;}}return vars;};var _arraysMatch=function _arraysMatch2(a1,a2){var i=a1.length,match=i===a2.length;while(match&&i--&&a1[i]===a2[i]){}return i<0;};var _addLinkedListItem=function _addLinkedListItem2(parent,child,firstProp,lastProp,sortBy){if(firstProp===void 0){firstProp="_first";}if(lastProp===void 0){lastProp="_last";}var prev=parent[lastProp],t2;if(sortBy){t2=child[sortBy];while(prev&&prev[sortBy]>t2){prev=prev._prev;}}if(prev){child._next=prev._next;prev._next=child;}else{child._next=parent[firstProp];parent[firstProp]=child;}if(child._next){child._next._prev=child;}else{parent[lastProp]=child;}child._prev=prev;child.parent=child._dp=parent;return child;};var _removeLinkedListItem=function _removeLinkedListItem2(parent,child,firstProp,lastProp){if(firstProp===void 0){firstProp="_first";}if(lastProp===void 0){lastProp="_last";}var prev=child._prev,next=child._next;if(prev){prev._next=next;}else if(parent[firstProp]===child){parent[firstProp]=next;}if(next){next._prev=prev;}else if(parent[lastProp]===child){parent[lastProp]=prev;}child._next=child._prev=child.parent=null;};var _removeFromParent=function _removeFromParent2(child,onlyIfParentHasAutoRemove){child.parent&&(!onlyIfParentHasAutoRemove||child.parent.autoRemoveChildren)&&child.parent.remove(child);child._act=0;};var _uncache=function _uncache2(animation,child){if(animation&&(!child||child._end>animation._dur||child._start<0)){var a=animation;while(a){a._dirty=1;a=a.parent;}}return animation;};var _recacheAncestors=function _recacheAncestors2(animation){var parent=animation.parent;while(parent&&parent.parent){parent._dirty=1;parent.totalDuration();parent=parent.parent;}return animation;};var _hasNoPausedAncestors=function _hasNoPausedAncestors2(animation){return!animation||animation._ts&&_hasNoPausedAncestors2(animation.parent);};var _elapsedCycleDuration=function _elapsedCycleDuration2(animation){return animation._repeat?_animationCycle(animation._tTime,animation=animation.duration()+animation._rDelay)*animation:0;};var _animationCycle=function _animationCycle2(tTime,cycleDuration){var whole=Math.floor(tTime/=cycleDuration);return tTime&&whole===tTime?whole-1:whole;};var _parentToChildTotalTime=function _parentToChildTotalTime2(parentTime,child){return(parentTime-child._start)*child._ts+(child._ts>=0?0:child._dirty?child.totalDuration():child._tDur);};var _setEnd=function _setEnd2(animation){return animation._end=_roundPrecise(animation._start+(animation._tDur/Math.abs(animation._ts||animation._rts||_tinyNum)||0));};var _alignPlayhead=function _alignPlayhead2(animation,totalTime){var parent=animation._dp;if(parent&&parent.smoothChildTiming&&animation._ts){animation._start=_roundPrecise(parent._time-(animation._ts>0?totalTime/animation._ts:((animation._dirty?animation.totalDuration():animation._tDur)-totalTime)/-animation._ts));_setEnd(animation);parent._dirty||_uncache(parent,animation);}return animation;};var _postAddChecks=function _postAddChecks2(timeline2,child){var t2;if(child._time||child._initted&&!child._dur){t2=_parentToChildTotalTime(timeline2.rawTime(),child);if(!child._dur||_clamp(0,child.totalDuration(),t2)-child._tTime>_tinyNum){child.render(t2,true);}}if(_uncache(timeline2,child)._dp&&timeline2._initted&&timeline2._time>=timeline2._dur&&timeline2._ts){if(timeline2._dur<timeline2.duration()){t2=timeline2;while(t2._dp){t2.rawTime()>=0&&t2.totalTime(t2._tTime);t2=t2._dp;}}timeline2._zTime=-_tinyNum;}};var _addToTimeline=function _addToTimeline2(timeline2,child,position,skipChecks){child.parent&&_removeFromParent(child);child._start=_roundPrecise((_isNumber(position)?position:position||timeline2!==_globalTimeline?_parsePosition(timeline2,position,child):timeline2._time)+child._delay);child._end=_roundPrecise(child._start+(child.totalDuration()/Math.abs(child.timeScale())||0));_addLinkedListItem(timeline2,child,"_first","_last",timeline2._sort?"_start":0);_isFromOrFromStart(child)||(timeline2._recent=child);skipChecks||_postAddChecks(timeline2,child);return timeline2;};var _scrollTrigger=function _scrollTrigger2(animation,trigger2){return(_globals.ScrollTrigger||_missingPlugin("scrollTrigger",trigger2))&&_globals.ScrollTrigger.create(trigger2,animation);};var _attemptInitTween=function _attemptInitTween2(tween,totalTime,force,suppressEvents){_initTween(tween,totalTime);if(!tween._initted){return 1;}if(!force&&tween._pt&&(tween._dur&&tween.vars.lazy!==false||!tween._dur&&tween.vars.lazy)&&_lastRenderedFrame!==_ticker.frame){_lazyTweens.push(tween);tween._lazy=[totalTime,suppressEvents];return 1;}};var _parentPlayheadIsBeforeStart=function _parentPlayheadIsBeforeStart2(_ref){var parent=_ref.parent;return parent&&parent._ts&&parent._initted&&!parent._lock&&(parent.rawTime()<0||_parentPlayheadIsBeforeStart2(parent));};var _isFromOrFromStart=function _isFromOrFromStart2(_ref2){var data=_ref2.data;return data==="isFromStart"||data==="isStart";};var _renderZeroDurationTween=function _renderZeroDurationTween2(tween,totalTime,suppressEvents,force){var prevRatio=tween.ratio,ratio=totalTime<0||!totalTime&&(!tween._start&&_parentPlayheadIsBeforeStart(tween)&&!(!tween._initted&&_isFromOrFromStart(tween))||(tween._ts<0||tween._dp._ts<0)&&!_isFromOrFromStart(tween))?0:1,repeatDelay=tween._rDelay,tTime=0,pt,iteration,prevIteration;if(repeatDelay&&tween._repeat){tTime=_clamp(0,tween._tDur,totalTime);iteration=_animationCycle(tTime,repeatDelay);tween._yoyo&&iteration&1&&(ratio=1-ratio);if(iteration!==_animationCycle(tween._tTime,repeatDelay)){prevRatio=1-ratio;tween.vars.repeatRefresh&&tween._initted&&tween.invalidate();}}if(ratio!==prevRatio||force||tween._zTime===_tinyNum||!totalTime&&tween._zTime){if(!tween._initted&&_attemptInitTween(tween,totalTime,force,suppressEvents)){return;}prevIteration=tween._zTime;tween._zTime=totalTime||(suppressEvents?_tinyNum:0);suppressEvents||(suppressEvents=totalTime&&!prevIteration);tween.ratio=ratio;tween._from&&(ratio=1-ratio);tween._time=0;tween._tTime=tTime;pt=tween._pt;while(pt){pt.r(ratio,pt.d);pt=pt._next;}tween._startAt&&totalTime<0&&tween._startAt.render(totalTime,true,true);tween._onUpdate&&!suppressEvents&&_callback(tween,"onUpdate");tTime&&tween._repeat&&!suppressEvents&&tween.parent&&_callback(tween,"onRepeat");if((totalTime>=tween._tDur||totalTime<0)&&tween.ratio===ratio){ratio&&_removeFromParent(tween,1);if(!suppressEvents){_callback(tween,ratio?"onComplete":"onReverseComplete",true);tween._prom&&tween._prom();}}}else if(!tween._zTime){tween._zTime=totalTime;}};var _findNextPauseTween=function _findNextPauseTween2(animation,prevTime,time){var child;if(time>prevTime){child=animation._first;while(child&&child._start<=time){if(child.data==="isPause"&&child._start>prevTime){return child;}child=child._next;}}else{child=animation._last;while(child&&child._start>=time){if(child.data==="isPause"&&child._start<prevTime){return child;}child=child._prev;}}};var _setDuration=function _setDuration2(animation,duration5,skipUncache,leavePlayhead){var repeat=animation._repeat,dur=_roundPrecise(duration5)||0,totalProgress=animation._tTime/animation._tDur;totalProgress&&!leavePlayhead&&(animation._time*=dur/animation._dur);animation._dur=dur;animation._tDur=!repeat?dur:repeat<0?1e10:_roundPrecise(dur*(repeat+1)+animation._rDelay*repeat);totalProgress>0&&!leavePlayhead?_alignPlayhead(animation,animation._tTime=animation._tDur*totalProgress):animation.parent&&_setEnd(animation);skipUncache||_uncache(animation.parent,animation);return animation;};var _onUpdateTotalDuration=function _onUpdateTotalDuration2(animation){return animation instanceof Timeline?_uncache(animation):_setDuration(animation,animation._dur);};var _zeroPosition={_start:0,endTime:_emptyFunc,totalDuration:_emptyFunc};var _parsePosition=function _parsePosition2(animation,position,percentAnimation){var labels=animation.labels,recent=animation._recent||_zeroPosition,clippedDuration=animation.duration()>=_bigNum?recent.endTime(false):animation._dur,i,offset,isPercent;if(_isString(position)&&(isNaN(position)||position in labels)){offset=position.charAt(0);isPercent=position.substr(-1)==="%";i=position.indexOf("=");if(offset==="<"||offset===">"){i>=0&&(position=position.replace(/=/,""));return(offset==="<"?recent._start:recent.endTime(recent._repeat>=0))+(parseFloat(position.substr(1))||0)*(isPercent?(i<0?recent:percentAnimation).totalDuration()/100:1);}if(i<0){position in labels||(labels[position]=clippedDuration);return labels[position];}offset=parseFloat(position.charAt(i-1)+position.substr(i+1));if(isPercent&&percentAnimation){offset=offset/100*(_isArray(percentAnimation)?percentAnimation[0]:percentAnimation).totalDuration();}return i>1?_parsePosition2(animation,position.substr(0,i-1),percentAnimation)+offset:clippedDuration+offset;}return position==null?clippedDuration:+position;};var _createTweenType=function _createTweenType2(type2,params,timeline2){var isLegacy=_isNumber(params[1]),varsIndex=(isLegacy?2:1)+(type2<2?0:1),vars=params[varsIndex],irVars,parent;isLegacy&&(vars.duration=params[1]);vars.parent=timeline2;if(type2){irVars=vars;parent=timeline2;while(parent&&!("immediateRender"in irVars)){irVars=parent.vars.defaults||{};parent=_isNotFalse(parent.vars.inherit)&&parent.parent;}vars.immediateRender=_isNotFalse(irVars.immediateRender);type2<2?vars.runBackwards=1:vars.startAt=params[varsIndex-1];}return new Tween(params[0],vars,params[varsIndex+1]);};var _conditionalReturn=function _conditionalReturn2(value,func){return value||value===0?func(value):func;};var _clamp=function _clamp2(min,max,value){return value<min?min:value>max?max:value;};var getUnit=function getUnit2(value,v){return!_isString(value)||!(v=_unitExp.exec(value))?"":v[1];};var clamp=function clamp2(min,max,value){return _conditionalReturn(value,function(v){return _clamp(min,max,v);});};var _slice=[].slice;var _isArrayLike=function _isArrayLike2(value,nonEmpty){return value&&_isObject(value)&&"length"in value&&(!nonEmpty&&!value.length||value.length-1 in value&&_isObject(value[0]))&&!value.nodeType&&value!==_win;};var _flatten=function _flatten2(ar,leaveStrings,accumulator){if(accumulator===void 0){accumulator=[];}return ar.forEach(function(value){var _accumulator;return _isString(value)&&!leaveStrings||_isArrayLike(value,1)?(_accumulator=accumulator).push.apply(_accumulator,toArray(value)):accumulator.push(value);})||accumulator;};var toArray=function toArray2(value,scope,leaveStrings){return _isString(value)&&!leaveStrings&&(_coreInitted||!_wake())?_slice.call((scope||_doc).querySelectorAll(value),0):_isArray(value)?_flatten(value,leaveStrings):_isArrayLike(value)?_slice.call(value,0):value?[value]:[];};var selector=function selector2(value){value=toArray(value)[0]||_warn("Invalid scope")||{};return function(v){var el=value.current||value.nativeElement||value;return toArray(v,el.querySelectorAll?el:el===value?_warn("Invalid scope")||_doc.createElement("div"):value);};};var shuffle=function shuffle2(a){return a.sort(function(){return 0.5-Math.random();});};var distribute=function distribute2(v){if(_isFunction(v)){return v;}var vars=_isObject(v)?v:{each:v},ease=_parseEase(vars.ease),from3=vars.from||0,base=parseFloat(vars.base)||0,cache={},isDecimal=from3>0&&from3<1,ratios=isNaN(from3)||isDecimal,axis=vars.axis,ratioX=from3,ratioY=from3;if(_isString(from3)){ratioX=ratioY={center:0.5,edges:0.5,end:1}[from3]||0;}else if(!isDecimal&&ratios){ratioX=from3[0];ratioY=from3[1];}return function(i,target,a){var l=(a||vars).length,distances=cache[l],originX,originY,x,y,d2,j,max,min,wrapAt;if(!distances){wrapAt=vars.grid==="auto"?0:(vars.grid||[1,_bigNum])[1];if(!wrapAt){max=-_bigNum;while(max<(max=a[wrapAt++].getBoundingClientRect().left)&&wrapAt<l){}wrapAt--;}distances=cache[l]=[];originX=ratios?Math.min(wrapAt,l)*ratioX-0.5:from3%wrapAt;originY=wrapAt===_bigNum?0:ratios?l*ratioY/wrapAt-0.5:from3/wrapAt|0;max=0;min=_bigNum;for(j=0;j<l;j++){x=j%wrapAt-originX;y=originY-(j/wrapAt|0);distances[j]=d2=!axis?_sqrt(x*x+y*y):Math.abs(axis==="y"?y:x);d2>max&&(max=d2);d2<min&&(min=d2);}from3==="random"&&shuffle(distances);distances.max=max-min;distances.min=min;distances.v=l=(parseFloat(vars.amount)||parseFloat(vars.each)*(wrapAt>l?l-1:!axis?Math.max(wrapAt,l/wrapAt):axis==="y"?l/wrapAt:wrapAt)||0)*(from3==="edges"?-1:1);distances.b=l<0?base-l:base;distances.u=getUnit(vars.amount||vars.each)||0;ease=ease&&l<0?_invertEase(ease):ease;}l=(distances[i]-distances.min)/distances.max||0;return _roundPrecise(distances.b+(ease?ease(l):l)*distances.v)+distances.u;};};var _roundModifier=function _roundModifier2(v){var p=Math.pow(10,((v+"").split(".")[1]||"").length);return function(raw){var n=Math.round(parseFloat(raw)/v)*v*p;return(n-n%1)/p+(_isNumber(raw)?0:getUnit(raw));};};var snap=function snap2(snapTo,value){var isArray=_isArray(snapTo),radius,is2D;if(!isArray&&_isObject(snapTo)){radius=isArray=snapTo.radius||_bigNum;if(snapTo.values){snapTo=toArray(snapTo.values);if(is2D=!_isNumber(snapTo[0])){radius*=radius;}}else{snapTo=_roundModifier(snapTo.increment);}}return _conditionalReturn(value,!isArray?_roundModifier(snapTo):_isFunction(snapTo)?function(raw){is2D=snapTo(raw);return Math.abs(is2D-raw)<=radius?is2D:raw;}:function(raw){var x=parseFloat(is2D?raw.x:raw),y=parseFloat(is2D?raw.y:0),min=_bigNum,closest=0,i=snapTo.length,dx,dy;while(i--){if(is2D){dx=snapTo[i].x-x;dy=snapTo[i].y-y;dx=dx*dx+dy*dy;}else{dx=Math.abs(snapTo[i]-x);}if(dx<min){min=dx;closest=i;}}closest=!radius||min<=radius?snapTo[closest]:raw;return is2D||closest===raw||_isNumber(raw)?closest:closest+getUnit(raw);});};var random=function random2(min,max,roundingIncrement,returnFunction){return _conditionalReturn(_isArray(min)?!max:roundingIncrement===true?!!(roundingIncrement=0):!returnFunction,function(){return _isArray(min)?min[~~(Math.random()*min.length)]:(roundingIncrement=roundingIncrement||1e-5)&&(returnFunction=roundingIncrement<1?Math.pow(10,(roundingIncrement+"").length-2):1)&&Math.floor(Math.round((min-roundingIncrement/2+Math.random()*(max-min+roundingIncrement*0.99))/roundingIncrement)*roundingIncrement*returnFunction)/returnFunction;});};var pipe=function pipe2(){for(var _len=arguments.length,functions=new Array(_len),_key=0;_key<_len;_key++){functions[_key]=arguments[_key];}return function(value){return functions.reduce(function(v,f){return f(v);},value);};};var unitize=function unitize2(func,unit){return function(value){return func(parseFloat(value))+(unit||getUnit(value));};};var normalize=function normalize2(min,max,value){return mapRange(min,max,0,1,value);};var _wrapArray=function _wrapArray2(a,wrapper,value){return _conditionalReturn(value,function(index){return a[~~wrapper(index)];});};var wrap=function wrap2(min,max,value){var range4=max-min;return _isArray(min)?_wrapArray(min,wrap2(0,min.length),max):_conditionalReturn(value,function(value2){return(range4+(value2-min)%range4)%range4+min;});};var wrapYoyo=function wrapYoyo2(min,max,value){var range4=max-min,total=range4*2;return _isArray(min)?_wrapArray(min,wrapYoyo2(0,min.length-1),max):_conditionalReturn(value,function(value2){value2=(total+(value2-min)%total)%total||0;return min+(value2>range4?total-value2:value2);});};var _replaceRandom=function _replaceRandom2(value){var prev=0,s="",i,nums,end,isArray;while(~(i=value.indexOf("random(",prev))){end=value.indexOf(")",i);isArray=value.charAt(i+7)==="[";nums=value.substr(i+7,end-i-7).match(isArray?_delimitedValueExp:_strictNumExp);s+=value.substr(prev,i-prev)+random(isArray?nums:+nums[0],isArray?0:+nums[1],+nums[2]||1e-5);prev=end+1;}return s+value.substr(prev,value.length-prev);};var mapRange=function mapRange2(inMin,inMax,outMin,outMax,value){var inRange=inMax-inMin,outRange=outMax-outMin;return _conditionalReturn(value,function(value2){return outMin+((value2-inMin)/inRange*outRange||0);});};var interpolate=function interpolate2(start2,end,progress,mutate){var func=isNaN(start2+end)?0:function(p2){return(1-p2)*start2+p2*end;};if(!func){var isString=_isString(start2),master={},p,i,interpolators,l,il;progress===true&&(mutate=1)&&(progress=null);if(isString){start2={p:start2};end={p:end};}else if(_isArray(start2)&&!_isArray(end)){interpolators=[];l=start2.length;il=l-2;for(i=1;i<l;i++){interpolators.push(interpolate2(start2[i-1],start2[i]));}l--;func=function func2(p2){p2*=l;var i2=Math.min(il,~~p2);return interpolators[i2](p2-i2);};progress=end;}else if(!mutate){start2=_merge(_isArray(start2)?[]:{},start2);}if(!interpolators){for(p in end){_addPropTween.call(master,start2,p,"get",end[p]);}func=function func2(p2){return _renderPropTweens(p2,master)||(isString?start2.p:start2);};}}return _conditionalReturn(progress,func);};var _getLabelInDirection=function _getLabelInDirection2(timeline2,fromTime,backward){var labels=timeline2.labels,min=_bigNum,p,distance,label;for(p in labels){distance=labels[p]-fromTime;if(distance<0===!!backward&&distance&&min>(distance=Math.abs(distance))){label=p;min=distance;}}return label;};var _callback=function _callback2(animation,type2,executeLazyFirst){var v=animation.vars,callback2=v[type2],params,scope;if(!callback2){return;}params=v[type2+"Params"];scope=v.callbackScope||animation;executeLazyFirst&&_lazyTweens.length&&_lazyRender();return params?callback2.apply(scope,params):callback2.call(scope);};var _interrupt=function _interrupt2(animation){_removeFromParent(animation);animation.scrollTrigger&&animation.scrollTrigger.kill(false);animation.progress()<1&&_callback(animation,"onInterrupt");return animation;};var _quickTween;var _createPlugin=function _createPlugin2(config3){config3=!config3.name&&config3["default"]||config3;var name=config3.name,isFunc=_isFunction(config3),Plugin2=name&&!isFunc&&config3.init?function(){this._props=[];}:config3,instanceDefaults={init:_emptyFunc,render:_renderPropTweens,add:_addPropTween,kill:_killPropTweensOf,modifier:_addPluginModifier,rawVars:0},statics={targetTest:0,get:0,getSetter:_getSetter,aliases:{},register:0};_wake();if(config3!==Plugin2){if(_plugins[name]){return;}_setDefaults(Plugin2,_setDefaults(_copyExcluding(config3,instanceDefaults),statics));_merge(Plugin2.prototype,_merge(instanceDefaults,_copyExcluding(config3,statics)));_plugins[Plugin2.prop=name]=Plugin2;if(config3.targetTest){_harnessPlugins.push(Plugin2);_reservedProps[name]=1;}name=(name==="css"?"CSS":name.charAt(0).toUpperCase()+name.substr(1))+"Plugin";}_addGlobal(name,Plugin2);config3.register&&config3.register(gsap,Plugin2,PropTween);};var _255=255;var _colorLookup={aqua:[0,_255,_255],lime:[0,_255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,_255],navy:[0,0,128],white:[_255,_255,_255],olive:[128,128,0],yellow:[_255,_255,0],orange:[_255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[_255,0,0],pink:[_255,192,203],cyan:[0,_255,_255],transparent:[_255,_255,_255,0]};var _hue=function _hue2(h,m1,m2){h+=h<0?1:h>1?-1:0;return(h*6<1?m1+(m2-m1)*h*6:h<0.5?m2:h*3<2?m1+(m2-m1)*(2/3-h)*6:m1)*_255+0.5|0;};var splitColor=function splitColor2(v,toHSL,forceAlpha){var a=!v?_colorLookup.black:_isNumber(v)?[v>>16,v>>8&_255,v&_255]:0,r2,g,b,h,s,l,max,min,d2,wasHSL;if(!a){if(v.substr(-1)===","){v=v.substr(0,v.length-1);}if(_colorLookup[v]){a=_colorLookup[v];}else if(v.charAt(0)==="#"){if(v.length<6){r2=v.charAt(1);g=v.charAt(2);b=v.charAt(3);v="#"+r2+r2+g+g+b+b+(v.length===5?v.charAt(4)+v.charAt(4):"");}if(v.length===9){a=parseInt(v.substr(1,6),16);return[a>>16,a>>8&_255,a&_255,parseInt(v.substr(7),16)/255];}v=parseInt(v.substr(1),16);a=[v>>16,v>>8&_255,v&_255];}else if(v.substr(0,3)==="hsl"){a=wasHSL=v.match(_strictNumExp);if(!toHSL){h=+a[0]%360/360;s=+a[1]/100;l=+a[2]/100;g=l<=0.5?l*(s+1):l+s-l*s;r2=l*2-g;a.length>3&&(a[3]*=1);a[0]=_hue(h+1/3,r2,g);a[1]=_hue(h,r2,g);a[2]=_hue(h-1/3,r2,g);}else if(~v.indexOf("=")){a=v.match(_numExp);forceAlpha&&a.length<4&&(a[3]=1);return a;}}else{a=v.match(_strictNumExp)||_colorLookup.transparent;}a=a.map(Number);}if(toHSL&&!wasHSL){r2=a[0]/_255;g=a[1]/_255;b=a[2]/_255;max=Math.max(r2,g,b);min=Math.min(r2,g,b);l=(max+min)/2;if(max===min){h=s=0;}else{d2=max-min;s=l>0.5?d2/(2-max-min):d2/(max+min);h=max===r2?(g-b)/d2+(g<b?6:0):max===g?(b-r2)/d2+2:(r2-g)/d2+4;h*=60;}a[0]=~~(h+0.5);a[1]=~~(s*100+0.5);a[2]=~~(l*100+0.5);}forceAlpha&&a.length<4&&(a[3]=1);return a;};var _colorOrderData=function _colorOrderData2(v){var values3=[],c=[],i=-1;v.split(_colorExp).forEach(function(v2){var a=v2.match(_numWithUnitExp)||[];values3.push.apply(values3,a);c.push(i+=a.length+1);});values3.c=c;return values3;};var _formatColors=function _formatColors2(s,toHSL,orderMatchData){var result="",colors=(s+result).match(_colorExp),type2=toHSL?"hsla(":"rgba(",i=0,c,shell,d2,l;if(!colors){return s;}colors=colors.map(function(color){return(color=splitColor(color,toHSL,1))&&type2+(toHSL?color[0]+","+color[1]+"%,"+color[2]+"%,"+color[3]:color.join(","))+")";});if(orderMatchData){d2=_colorOrderData(s);c=orderMatchData.c;if(c.join(result)!==d2.c.join(result)){shell=s.replace(_colorExp,"1").split(_numWithUnitExp);l=shell.length-1;for(;i<l;i++){result+=shell[i]+(~c.indexOf(i)?colors.shift()||type2+"0,0,0,0)":(d2.length?d2:colors.length?colors:orderMatchData).shift());}}}if(!shell){shell=s.split(_colorExp);l=shell.length-1;for(;i<l;i++){result+=shell[i]+colors[i];}}return result+shell[l];};var _colorExp=function(){var s="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",p;for(p in _colorLookup){s+="|"+p+"\\b";}return new RegExp(s+")","gi");}();var _hslExp=/hsl[a]?\(/;var _colorStringFilter=function _colorStringFilter2(a){var combined=a.join(" "),toHSL;_colorExp.lastIndex=0;if(_colorExp.test(combined)){toHSL=_hslExp.test(combined);a[1]=_formatColors(a[1],toHSL);a[0]=_formatColors(a[0],toHSL,_colorOrderData(a[1]));return true;}};var _tickerActive;var _ticker=function(){var _getTime4=Date.now,_lagThreshold=500,_adjustedLag=33,_startTime=_getTime4(),_lastUpdate=_startTime,_gap=1e3/240,_nextTime=_gap,_listeners2=[],_id,_req,_raf,_self,_delta,_i2,_tick=function _tick2(v){var elapsed=_getTime4()-_lastUpdate,manual=v===true,overlap,dispatch,time,frame;elapsed>_lagThreshold&&(_startTime+=elapsed-_adjustedLag);_lastUpdate+=elapsed;time=_lastUpdate-_startTime;overlap=time-_nextTime;if(overlap>0||manual){frame=++_self.frame;_delta=time-_self.time*1e3;_self.time=time=time/1e3;_nextTime+=overlap+(overlap>=_gap?4:_gap-overlap);dispatch=1;}manual||(_id=_req(_tick2));if(dispatch){for(_i2=0;_i2<_listeners2.length;_i2++){_listeners2[_i2](time,_delta,frame,v);}}};_self={time:0,frame:0,tick:function tick(){_tick(true);},deltaRatio:function deltaRatio(fps){return _delta/(1e3/(fps||60));},wake:function wake(){if(_coreReady){if(!_coreInitted&&_windowExists()){_win=_coreInitted=window;_doc=_win.document||{};_globals.gsap=gsap;(_win.gsapVersions||(_win.gsapVersions=[])).push(gsap.version);_install(_installScope||_win.GreenSockGlobals||!_win.gsap&&_win||{});_raf=_win.requestAnimationFrame;}_id&&_self.sleep();_req=_raf||function(f){return setTimeout(f,_nextTime-_self.time*1e3+1|0);};_tickerActive=1;_tick(2);}},sleep:function sleep(){(_raf?_win.cancelAnimationFrame:clearTimeout)(_id);_tickerActive=0;_req=_emptyFunc;},lagSmoothing:function lagSmoothing(threshold,adjustedLag){_lagThreshold=threshold||1/_tinyNum;_adjustedLag=Math.min(adjustedLag,_lagThreshold,0);},fps:function fps(_fps){_gap=1e3/(_fps||240);_nextTime=_self.time*1e3+_gap;},add:function add(callback2,once,prioritize){var func=once?function(t2,d2,f,v){callback2(t2,d2,f,v);_self.remove(func);}:callback2;_self.remove(callback2);_listeners2[prioritize?"unshift":"push"](func);_wake();return func;},remove:function remove2(callback2,i){~(i=_listeners2.indexOf(callback2))&&_listeners2.splice(i,1)&&_i2>=i&&_i2--;},_listeners:_listeners2};return _self;}();var _wake=function _wake2(){return!_tickerActive&&_ticker.wake();};var _easeMap={};var _customEaseExp=/^[\d.\-M][\d.\-,\s]/;var _quotesExp=/["']/g;var _parseObjectInString=function _parseObjectInString2(value){var obj={},split=value.substr(1,value.length-3).split(":"),key=split[0],i=1,l=split.length,index,val,parsedVal;for(;i<l;i++){val=split[i];index=i!==l-1?val.lastIndexOf(","):val.length;parsedVal=val.substr(0,index);obj[key]=isNaN(parsedVal)?parsedVal.replace(_quotesExp,"").trim():+parsedVal;key=val.substr(index+1).trim();}return obj;};var _valueInParentheses=function _valueInParentheses2(value){var open=value.indexOf("(")+1,close=value.indexOf(")"),nested=value.indexOf("(",open);return value.substring(open,~nested&&nested<close?value.indexOf(")",close+1):close);};var _configEaseFromString=function _configEaseFromString2(name){var split=(name+"").split("("),ease=_easeMap[split[0]];return ease&&split.length>1&&ease.config?ease.config.apply(null,~name.indexOf("{")?[_parseObjectInString(split[1])]:_valueInParentheses(name).split(",").map(_numericIfPossible)):_easeMap._CE&&_customEaseExp.test(name)?_easeMap._CE("",name):ease;};var _invertEase=function _invertEase2(ease){return function(p){return 1-ease(1-p);};};var _propagateYoyoEase=function _propagateYoyoEase2(timeline2,isYoyo){var child=timeline2._first,ease;while(child){if(child instanceof Timeline){_propagateYoyoEase2(child,isYoyo);}else if(child.vars.yoyoEase&&(!child._yoyo||!child._repeat)&&child._yoyo!==isYoyo){if(child.timeline){_propagateYoyoEase2(child.timeline,isYoyo);}else{ease=child._ease;child._ease=child._yEase;child._yEase=ease;child._yoyo=isYoyo;}}child=child._next;}};var _parseEase=function _parseEase2(ease,defaultEase){return!ease?defaultEase:(_isFunction(ease)?ease:_easeMap[ease]||_configEaseFromString(ease))||defaultEase;};var _insertEase=function _insertEase2(names,easeIn,easeOut,easeInOut){if(easeOut===void 0){easeOut=function easeOut2(p){return 1-easeIn(1-p);};}if(easeInOut===void 0){easeInOut=function easeInOut2(p){return p<0.5?easeIn(p*2)/2:1-easeIn((1-p)*2)/2;};}var ease={easeIn:easeIn,easeOut:easeOut,easeInOut:easeInOut},lowercaseName;_forEachName(names,function(name){_easeMap[name]=_globals[name]=ease;_easeMap[lowercaseName=name.toLowerCase()]=easeOut;for(var p in ease){_easeMap[lowercaseName+(p==="easeIn"?".in":p==="easeOut"?".out":".inOut")]=_easeMap[name+"."+p]=ease[p];}});return ease;};var _easeInOutFromOut=function _easeInOutFromOut2(easeOut){return function(p){return p<0.5?(1-easeOut(1-p*2))/2:0.5+easeOut((p-0.5)*2)/2;};};var _configElastic=function _configElastic2(type2,amplitude,period){var p1=amplitude>=1?amplitude:1,p2=(period||(type2?0.3:0.45))/(amplitude<1?amplitude:1),p3=p2/_2PI*(Math.asin(1/p1)||0),easeOut=function easeOut2(p){return p===1?1:p1*Math.pow(2,-10*p)*_sin((p-p3)*p2)+1;},ease=type2==="out"?easeOut:type2==="in"?function(p){return 1-easeOut(1-p);}:_easeInOutFromOut(easeOut);p2=_2PI/p2;ease.config=function(amplitude2,period2){return _configElastic2(type2,amplitude2,period2);};return ease;};var _configBack=function _configBack2(type2,overshoot){if(overshoot===void 0){overshoot=1.70158;}var easeOut=function easeOut2(p){return p?--p*p*((overshoot+1)*p+overshoot)+1:0;},ease=type2==="out"?easeOut:type2==="in"?function(p){return 1-easeOut(1-p);}:_easeInOutFromOut(easeOut);ease.config=function(overshoot2){return _configBack2(type2,overshoot2);};return ease;};_forEachName("Linear,Quad,Cubic,Quart,Quint,Strong",function(name,i){var power=i<5?i+1:i;_insertEase(name+",Power"+(power-1),i?function(p){return Math.pow(p,power);}:function(p){return p;},function(p){return 1-Math.pow(1-p,power);},function(p){return p<0.5?Math.pow(p*2,power)/2:1-Math.pow((1-p)*2,power)/2;});});_easeMap.Linear.easeNone=_easeMap.none=_easeMap.Linear.easeIn;_insertEase("Elastic",_configElastic("in"),_configElastic("out"),_configElastic());(function(n,c){var n1=1/c,n2=2*n1,n3=2.5*n1,easeOut=function easeOut2(p){return p<n1?n*p*p:p<n2?n*Math.pow(p-1.5/c,2)+0.75:p<n3?n*(p-=2.25/c)*p+0.9375:n*Math.pow(p-2.625/c,2)+0.984375;};_insertEase("Bounce",function(p){return 1-easeOut(1-p);},easeOut);})(7.5625,2.75);_insertEase("Expo",function(p){return p?Math.pow(2,10*(p-1)):0;});_insertEase("Circ",function(p){return-(_sqrt(1-p*p)-1);});_insertEase("Sine",function(p){return p===1?1:-_cos(p*_HALF_PI)+1;});_insertEase("Back",_configBack("in"),_configBack("out"),_configBack());_easeMap.SteppedEase=_easeMap.steps=_globals.SteppedEase={config:function config(steps,immediateStart){if(steps===void 0){steps=1;}var p1=1/steps,p2=steps+(immediateStart?0:1),p3=immediateStart?1:0,max=1-_tinyNum;return function(p){return((p2*_clamp(0,max,p)|0)+p3)*p1;};}};_defaults.ease=_easeMap["quad.out"];_forEachName("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(name){return _callbackNames+=name+","+name+"Params,";});var GSCache=function GSCache2(target,harness){this.id=_gsID++;target._gsap=this;this.target=target;this.harness=harness;this.get=harness?harness.get:_getProperty;this.set=harness?harness.getSetter:_getSetter;};var Animation=/* @__PURE__ */function(){function Animation2(vars){this.vars=vars;this._delay=+vars.delay||0;if(this._repeat=vars.repeat===Infinity?-2:vars.repeat||0){this._rDelay=vars.repeatDelay||0;this._yoyo=!!vars.yoyo||!!vars.yoyoEase;}this._ts=1;_setDuration(this,+vars.duration,1,1);this.data=vars.data;_tickerActive||_ticker.wake();}var _proto=Animation2.prototype;_proto.delay=function delay(value){if(value||value===0){this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+value-this._delay);this._delay=value;return this;}return this._delay;};_proto.duration=function duration5(value){return arguments.length?this.totalDuration(this._repeat>0?value+(value+this._rDelay)*this._repeat:value):this.totalDuration()&&this._dur;};_proto.totalDuration=function totalDuration(value){if(!arguments.length){return this._tDur;}this._dirty=0;return _setDuration(this,this._repeat<0?value:(value-this._repeat*this._rDelay)/(this._repeat+1));};_proto.totalTime=function totalTime(_totalTime,suppressEvents){_wake();if(!arguments.length){return this._tTime;}var parent=this._dp;if(parent&&parent.smoothChildTiming&&this._ts){_alignPlayhead(this,_totalTime);!parent._dp||parent.parent||_postAddChecks(parent,this);while(parent&&parent.parent){if(parent.parent._time!==parent._start+(parent._ts>=0?parent._tTime/parent._ts:(parent.totalDuration()-parent._tTime)/-parent._ts)){parent.totalTime(parent._tTime,true);}parent=parent.parent;}if(!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&_totalTime<this._tDur||this._ts<0&&_totalTime>0||!this._tDur&&!_totalTime)){_addToTimeline(this._dp,this,this._start-this._delay);}}if(this._tTime!==_totalTime||!this._dur&&!suppressEvents||this._initted&&Math.abs(this._zTime)===_tinyNum||!_totalTime&&!this._initted&&(this.add||this._ptLookup)){this._ts||(this._pTime=_totalTime);_lazySafeRender(this,_totalTime,suppressEvents);}return this;};_proto.time=function time(value,suppressEvents){return arguments.length?this.totalTime(Math.min(this.totalDuration(),value+_elapsedCycleDuration(this))%(this._dur+this._rDelay)||(value?this._dur:0),suppressEvents):this._time;};_proto.totalProgress=function totalProgress(value,suppressEvents){return arguments.length?this.totalTime(this.totalDuration()*value,suppressEvents):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio;};_proto.progress=function progress(value,suppressEvents){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-value:value)+_elapsedCycleDuration(this),suppressEvents):this.duration()?Math.min(1,this._time/this._dur):this.ratio;};_proto.iteration=function iteration(value,suppressEvents){var cycleDuration=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(value-1)*cycleDuration,suppressEvents):this._repeat?_animationCycle(this._tTime,cycleDuration)+1:1;};_proto.timeScale=function timeScale(value){if(!arguments.length){return this._rts===-_tinyNum?0:this._rts;}if(this._rts===value){return this;}var tTime=this.parent&&this._ts?_parentToChildTotalTime(this.parent._time,this):this._tTime;this._rts=+value||0;this._ts=this._ps||value===-_tinyNum?0:this._rts;this.totalTime(_clamp(-this._delay,this._tDur,tTime),true);_setEnd(this);return _recacheAncestors(this);};_proto.paused=function paused(value){if(!arguments.length){return this._ps;}if(this._ps!==value){this._ps=value;if(value){this._pTime=this._tTime||Math.max(-this._delay,this.rawTime());this._ts=this._act=0;}else{_wake();this._ts=this._rts;this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==_tinyNum&&(this._tTime-=_tinyNum));}}return this;};_proto.startTime=function startTime(value){if(arguments.length){this._start=value;var parent=this.parent||this._dp;parent&&(parent._sort||!this.parent)&&_addToTimeline(parent,this,value-this._delay);return this;}return this._start;};_proto.endTime=function endTime(includeRepeats){return this._start+(_isNotFalse(includeRepeats)?this.totalDuration():this.duration())/Math.abs(this._ts||1);};_proto.rawTime=function rawTime(wrapRepeats){var parent=this.parent||this._dp;return!parent?this._tTime:wrapRepeats&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):!this._ts?this._tTime:_parentToChildTotalTime(parent.rawTime(wrapRepeats),this);};_proto.globalTime=function globalTime(rawTime){var animation=this,time=arguments.length?rawTime:animation.rawTime();while(animation){time=animation._start+time/(animation._ts||1);animation=animation._dp;}return time;};_proto.repeat=function repeat(value){if(arguments.length){this._repeat=value===Infinity?-2:value;return _onUpdateTotalDuration(this);}return this._repeat===-2?Infinity:this._repeat;};_proto.repeatDelay=function repeatDelay(value){if(arguments.length){var time=this._time;this._rDelay=value;_onUpdateTotalDuration(this);return time?this.time(time):this;}return this._rDelay;};_proto.yoyo=function yoyo(value){if(arguments.length){this._yoyo=value;return this;}return this._yoyo;};_proto.seek=function seek(position,suppressEvents){return this.totalTime(_parsePosition(this,position),_isNotFalse(suppressEvents));};_proto.restart=function restart(includeDelay,suppressEvents){return this.play().totalTime(includeDelay?-this._delay:0,_isNotFalse(suppressEvents));};_proto.play=function play(from3,suppressEvents){from3!=null&&this.seek(from3,suppressEvents);return this.reversed(false).paused(false);};_proto.reverse=function reverse(from3,suppressEvents){from3!=null&&this.seek(from3||this.totalDuration(),suppressEvents);return this.reversed(true).paused(false);};_proto.pause=function pause(atTime,suppressEvents){atTime!=null&&this.seek(atTime,suppressEvents);return this.paused(true);};_proto.resume=function resume(){return this.paused(false);};_proto.reversed=function reversed(value){if(arguments.length){!!value!==this.reversed()&&this.timeScale(-this._rts||(value?-_tinyNum:0));return this;}return this._rts<0;};_proto.invalidate=function invalidate(){this._initted=this._act=0;this._zTime=-_tinyNum;return this;};_proto.isActive=function isActive(){var parent=this.parent||this._dp,start2=this._start,rawTime;return!!(!parent||this._ts&&this._initted&&parent.isActive()&&(rawTime=parent.rawTime(true))>=start2&&rawTime<this.endTime(true)-_tinyNum);};_proto.eventCallback=function eventCallback(type2,callback2,params){var vars=this.vars;if(arguments.length>1){if(!callback2){delete vars[type2];}else{vars[type2]=callback2;params&&(vars[type2+"Params"]=params);type2==="onUpdate"&&(this._onUpdate=callback2);}return this;}return vars[type2];};_proto.then=function then(onFulfilled){var self2=this;return new Promise(function(resolve){var f=_isFunction(onFulfilled)?onFulfilled:_passThrough,_resolve=function _resolve2(){var _then=self2.then;self2.then=null;_isFunction(f)&&(f=f(self2))&&(f.then||f===self2)&&(self2.then=_then);resolve(f);self2.then=_then;};if(self2._initted&&self2.totalProgress()===1&&self2._ts>=0||!self2._tTime&&self2._ts<0){_resolve();}else{self2._prom=_resolve;}});};_proto.kill=function kill2(){_interrupt(this);};return Animation2;}();_setDefaults(Animation.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:false,parent:null,_initted:false,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-_tinyNum,_prom:0,_ps:false,_rts:1});var Timeline=/* @__PURE__ */function(_Animation){_inheritsLoose(Timeline2,_Animation);function Timeline2(vars,position){var _this;if(vars===void 0){vars={};}_this=_Animation.call(this,vars)||this;_this.labels={};_this.smoothChildTiming=!!vars.smoothChildTiming;_this.autoRemoveChildren=!!vars.autoRemoveChildren;_this._sort=_isNotFalse(vars.sortChildren);_globalTimeline&&_addToTimeline(vars.parent||_globalTimeline,_assertThisInitialized(_this),position);vars.reversed&&_this.reverse();vars.paused&&_this.paused(true);vars.scrollTrigger&&_scrollTrigger(_assertThisInitialized(_this),vars.scrollTrigger);return _this;}var _proto2=Timeline2.prototype;_proto2.to=function to(targets,vars,position){_createTweenType(0,arguments,this);return this;};_proto2.from=function from3(targets,vars,position){_createTweenType(1,arguments,this);return this;};_proto2.fromTo=function fromTo(targets,fromVars,toVars,position){_createTweenType(2,arguments,this);return this;};_proto2.set=function set4(targets,vars,position){vars.duration=0;vars.parent=this;_inheritDefaults(vars).repeatDelay||(vars.repeat=0);vars.immediateRender=!!vars.immediateRender;new Tween(targets,vars,_parsePosition(this,position),1);return this;};_proto2.call=function call(callback2,params,position){return _addToTimeline(this,Tween.delayedCall(0,callback2,params),position);};_proto2.staggerTo=function staggerTo(targets,duration5,vars,stagger,position,onCompleteAll,onCompleteAllParams){vars.duration=duration5;vars.stagger=vars.stagger||stagger;vars.onComplete=onCompleteAll;vars.onCompleteParams=onCompleteAllParams;vars.parent=this;new Tween(targets,vars,_parsePosition(this,position));return this;};_proto2.staggerFrom=function staggerFrom(targets,duration5,vars,stagger,position,onCompleteAll,onCompleteAllParams){vars.runBackwards=1;_inheritDefaults(vars).immediateRender=_isNotFalse(vars.immediateRender);return this.staggerTo(targets,duration5,vars,stagger,position,onCompleteAll,onCompleteAllParams);};_proto2.staggerFromTo=function staggerFromTo(targets,duration5,fromVars,toVars,stagger,position,onCompleteAll,onCompleteAllParams){toVars.startAt=fromVars;_inheritDefaults(toVars).immediateRender=_isNotFalse(toVars.immediateRender);return this.staggerTo(targets,duration5,toVars,stagger,position,onCompleteAll,onCompleteAllParams);};_proto2.render=function render2(totalTime,suppressEvents,force){var prevTime=this._time,tDur=this._dirty?this.totalDuration():this._tDur,dur=this._dur,tTime=totalTime<=0?0:_roundPrecise(totalTime),crossingStart=this._zTime<0!==totalTime<0&&(this._initted||!dur),time,child,next,iteration,cycleDuration,prevPaused,pauseTween,timeScale,prevStart,prevIteration,yoyo,isYoyo;this!==_globalTimeline&&tTime>tDur&&totalTime>=0&&(tTime=tDur);if(tTime!==this._tTime||force||crossingStart){if(prevTime!==this._time&&dur){tTime+=this._time-prevTime;totalTime+=this._time-prevTime;}time=tTime;prevStart=this._start;timeScale=this._ts;prevPaused=!timeScale;if(crossingStart){dur||(prevTime=this._zTime);(totalTime||!suppressEvents)&&(this._zTime=totalTime);}if(this._repeat){yoyo=this._yoyo;cycleDuration=dur+this._rDelay;if(this._repeat<-1&&totalTime<0){return this.totalTime(cycleDuration*100+totalTime,suppressEvents,force);}time=_roundPrecise(tTime%cycleDuration);if(tTime===tDur){iteration=this._repeat;time=dur;}else{iteration=~~(tTime/cycleDuration);if(iteration&&iteration===tTime/cycleDuration){time=dur;iteration--;}time>dur&&(time=dur);}prevIteration=_animationCycle(this._tTime,cycleDuration);!prevTime&&this._tTime&&prevIteration!==iteration&&(prevIteration=iteration);if(yoyo&&iteration&1){time=dur-time;isYoyo=1;}if(iteration!==prevIteration&&!this._lock){var rewinding=yoyo&&prevIteration&1,doesWrap=rewinding===(yoyo&&iteration&1);iteration<prevIteration&&(rewinding=!rewinding);prevTime=rewinding?0:dur;this._lock=1;this.render(prevTime||(isYoyo?0:_roundPrecise(iteration*cycleDuration)),suppressEvents,!dur)._lock=0;this._tTime=tTime;!suppressEvents&&this.parent&&_callback(this,"onRepeat");this.vars.repeatRefresh&&!isYoyo&&(this.invalidate()._lock=1);if(prevTime&&prevTime!==this._time||prevPaused!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act){return this;}dur=this._dur;tDur=this._tDur;if(doesWrap){this._lock=2;prevTime=rewinding?dur:-1e-4;this.render(prevTime,true);this.vars.repeatRefresh&&!isYoyo&&this.invalidate();}this._lock=0;if(!this._ts&&!prevPaused){return this;}_propagateYoyoEase(this,isYoyo);}}if(this._hasPause&&!this._forcing&&this._lock<2){pauseTween=_findNextPauseTween(this,_roundPrecise(prevTime),_roundPrecise(time));if(pauseTween){tTime-=time-(time=pauseTween._start);}}this._tTime=tTime;this._time=time;this._act=!timeScale;if(!this._initted){this._onUpdate=this.vars.onUpdate;this._initted=1;this._zTime=totalTime;prevTime=0;}if(!prevTime&&time&&!suppressEvents){_callback(this,"onStart");if(this._tTime!==tTime){return this;}}if(time>=prevTime&&totalTime>=0){child=this._first;while(child){next=child._next;if((child._act||time>=child._start)&&child._ts&&pauseTween!==child){if(child.parent!==this){return this.render(totalTime,suppressEvents,force);}child.render(child._ts>0?(time-child._start)*child._ts:(child._dirty?child.totalDuration():child._tDur)+(time-child._start)*child._ts,suppressEvents,force);if(time!==this._time||!this._ts&&!prevPaused){pauseTween=0;next&&(tTime+=this._zTime=-_tinyNum);break;}}child=next;}}else{child=this._last;var adjustedTime=totalTime<0?totalTime:time;while(child){next=child._prev;if((child._act||adjustedTime<=child._end)&&child._ts&&pauseTween!==child){if(child.parent!==this){return this.render(totalTime,suppressEvents,force);}child.render(child._ts>0?(adjustedTime-child._start)*child._ts:(child._dirty?child.totalDuration():child._tDur)+(adjustedTime-child._start)*child._ts,suppressEvents,force);if(time!==this._time||!this._ts&&!prevPaused){pauseTween=0;next&&(tTime+=this._zTime=adjustedTime?-_tinyNum:_tinyNum);break;}}child=next;}}if(pauseTween&&!suppressEvents){this.pause();pauseTween.render(time>=prevTime?0:-_tinyNum)._zTime=time>=prevTime?1:-1;if(this._ts){this._start=prevStart;_setEnd(this);return this.render(totalTime,suppressEvents,force);}}this._onUpdate&&!suppressEvents&&_callback(this,"onUpdate",true);if(tTime===tDur&&this._tTime>=this.totalDuration()||!tTime&&prevTime){if(prevStart===this._start||Math.abs(timeScale)!==Math.abs(this._ts)){if(!this._lock){(totalTime||!dur)&&(tTime===tDur&&this._ts>0||!tTime&&this._ts<0)&&_removeFromParent(this,1);if(!suppressEvents&&!(totalTime<0&&!prevTime)&&(tTime||prevTime||!tDur)){_callback(this,tTime===tDur&&totalTime>=0?"onComplete":"onReverseComplete",true);this._prom&&!(tTime<tDur&&this.timeScale()>0)&&this._prom();}}}}}return this;};_proto2.add=function add(child,position){var _this2=this;_isNumber(position)||(position=_parsePosition(this,position,child));if(!(child instanceof Animation)){if(_isArray(child)){child.forEach(function(obj){return _this2.add(obj,position);});return this;}if(_isString(child)){return this.addLabel(child,position);}if(_isFunction(child)){child=Tween.delayedCall(0,child);}else{return this;}}return this!==child?_addToTimeline(this,child,position):this;};_proto2.getChildren=function getChildren(nested,tweens,timelines,ignoreBeforeTime){if(nested===void 0){nested=true;}if(tweens===void 0){tweens=true;}if(timelines===void 0){timelines=true;}if(ignoreBeforeTime===void 0){ignoreBeforeTime=-_bigNum;}var a=[],child=this._first;while(child){if(child._start>=ignoreBeforeTime){if(child instanceof Tween){tweens&&a.push(child);}else{timelines&&a.push(child);nested&&a.push.apply(a,child.getChildren(true,tweens,timelines));}}child=child._next;}return a;};_proto2.getById=function getById2(id){var animations=this.getChildren(1,1,1),i=animations.length;while(i--){if(animations[i].vars.id===id){return animations[i];}}};_proto2.remove=function remove2(child){if(_isString(child)){return this.removeLabel(child);}if(_isFunction(child)){return this.killTweensOf(child);}_removeLinkedListItem(this,child);if(child===this._recent){this._recent=this._last;}return _uncache(this);};_proto2.totalTime=function totalTime(_totalTime2,suppressEvents){if(!arguments.length){return this._tTime;}this._forcing=1;if(!this._dp&&this._ts){this._start=_roundPrecise(_ticker.time-(this._ts>0?_totalTime2/this._ts:(this.totalDuration()-_totalTime2)/-this._ts));}_Animation.prototype.totalTime.call(this,_totalTime2,suppressEvents);this._forcing=0;return this;};_proto2.addLabel=function addLabel(label,position){this.labels[label]=_parsePosition(this,position);return this;};_proto2.removeLabel=function removeLabel(label){delete this.labels[label];return this;};_proto2.addPause=function addPause(position,callback2,params){var t2=Tween.delayedCall(0,callback2||_emptyFunc,params);t2.data="isPause";this._hasPause=1;return _addToTimeline(this,t2,_parsePosition(this,position));};_proto2.removePause=function removePause(position){var child=this._first;position=_parsePosition(this,position);while(child){if(child._start===position&&child.data==="isPause"){_removeFromParent(child);}child=child._next;}};_proto2.killTweensOf=function killTweensOf(targets,props,onlyActive){var tweens=this.getTweensOf(targets,onlyActive),i=tweens.length;while(i--){_overwritingTween!==tweens[i]&&tweens[i].kill(targets,props);}return this;};_proto2.getTweensOf=function getTweensOf2(targets,onlyActive){var a=[],parsedTargets=toArray(targets),child=this._first,isGlobalTime=_isNumber(onlyActive),children;while(child){if(child instanceof Tween){if(_arrayContainsAny(child._targets,parsedTargets)&&(isGlobalTime?(!_overwritingTween||child._initted&&child._ts)&&child.globalTime(0)<=onlyActive&&child.globalTime(child.totalDuration())>onlyActive:!onlyActive||child.isActive())){a.push(child);}}else if((children=child.getTweensOf(parsedTargets,onlyActive)).length){a.push.apply(a,children);}child=child._next;}return a;};_proto2.tweenTo=function tweenTo(position,vars){vars=vars||{};var tl=this,endTime=_parsePosition(tl,position),_vars=vars,startAt=_vars.startAt,_onStart=_vars.onStart,onStartParams=_vars.onStartParams,immediateRender=_vars.immediateRender,initted,tween=Tween.to(tl,_setDefaults({ease:vars.ease||"none",lazy:false,immediateRender:false,time:endTime,overwrite:"auto",duration:vars.duration||Math.abs((endTime-(startAt&&"time"in startAt?startAt.time:tl._time))/tl.timeScale())||_tinyNum,onStart:function onStart(){tl.pause();if(!initted){var duration5=vars.duration||Math.abs((endTime-(startAt&&"time"in startAt?startAt.time:tl._time))/tl.timeScale());tween._dur!==duration5&&_setDuration(tween,duration5,0,1).render(tween._time,true,true);initted=1;}_onStart&&_onStart.apply(tween,onStartParams||[]);}},vars));return immediateRender?tween.render(0):tween;};_proto2.tweenFromTo=function tweenFromTo(fromPosition,toPosition,vars){return this.tweenTo(toPosition,_setDefaults({startAt:{time:_parsePosition(this,fromPosition)}},vars));};_proto2.recent=function recent(){return this._recent;};_proto2.nextLabel=function nextLabel(afterTime){if(afterTime===void 0){afterTime=this._time;}return _getLabelInDirection(this,_parsePosition(this,afterTime));};_proto2.previousLabel=function previousLabel(beforeTime){if(beforeTime===void 0){beforeTime=this._time;}return _getLabelInDirection(this,_parsePosition(this,beforeTime),1);};_proto2.currentLabel=function currentLabel(value){return arguments.length?this.seek(value,true):this.previousLabel(this._time+_tinyNum);};_proto2.shiftChildren=function shiftChildren(amount,adjustLabels,ignoreBeforeTime){if(ignoreBeforeTime===void 0){ignoreBeforeTime=0;}var child=this._first,labels=this.labels,p;while(child){if(child._start>=ignoreBeforeTime){child._start+=amount;child._end+=amount;}child=child._next;}if(adjustLabels){for(p in labels){if(labels[p]>=ignoreBeforeTime){labels[p]+=amount;}}}return _uncache(this);};_proto2.invalidate=function invalidate(){var child=this._first;this._lock=0;while(child){child.invalidate();child=child._next;}return _Animation.prototype.invalidate.call(this);};_proto2.clear=function clear(includeLabels){if(includeLabels===void 0){includeLabels=true;}var child=this._first,next;while(child){next=child._next;this.remove(child);child=next;}this._dp&&(this._time=this._tTime=this._pTime=0);includeLabels&&(this.labels={});return _uncache(this);};_proto2.totalDuration=function totalDuration(value){var max=0,self2=this,child=self2._last,prevStart=_bigNum,prev,start2,parent;if(arguments.length){return self2.timeScale((self2._repeat<0?self2.duration():self2.totalDuration())/(self2.reversed()?-value:value));}if(self2._dirty){parent=self2.parent;while(child){prev=child._prev;child._dirty&&child.totalDuration();start2=child._start;if(start2>prevStart&&self2._sort&&child._ts&&!self2._lock){self2._lock=1;_addToTimeline(self2,child,start2-child._delay,1)._lock=0;}else{prevStart=start2;}if(start2<0&&child._ts){max-=start2;if(!parent&&!self2._dp||parent&&parent.smoothChildTiming){self2._start+=start2/self2._ts;self2._time-=start2;self2._tTime-=start2;}self2.shiftChildren(-start2,false,-Infinity);prevStart=0;}child._end>max&&child._ts&&(max=child._end);child=prev;}_setDuration(self2,self2===_globalTimeline&&self2._time>max?self2._time:max,1,1);self2._dirty=0;}return self2._tDur;};Timeline2.updateRoot=function updateRoot(time){if(_globalTimeline._ts){_lazySafeRender(_globalTimeline,_parentToChildTotalTime(time,_globalTimeline));_lastRenderedFrame=_ticker.frame;}if(_ticker.frame>=_nextGCFrame){_nextGCFrame+=_config.autoSleep||120;var child=_globalTimeline._first;if(!child||!child._ts){if(_config.autoSleep&&_ticker._listeners.length<2){while(child&&!child._ts){child=child._next;}child||_ticker.sleep();}}}};return Timeline2;}(Animation);_setDefaults(Timeline.prototype,{_lock:0,_hasPause:0,_forcing:0});var _addComplexStringPropTween=function _addComplexStringPropTween2(target,prop,start2,end,setter,stringFilter,funcParam){var pt=new PropTween(this._pt,target,prop,0,1,_renderComplexString,null,setter),index=0,matchIndex=0,result,startNums,color,endNum,chunk,startNum,hasRandom,a;pt.b=start2;pt.e=end;start2+="";end+="";if(hasRandom=~end.indexOf("random(")){end=_replaceRandom(end);}if(stringFilter){a=[start2,end];stringFilter(a,target,prop);start2=a[0];end=a[1];}startNums=start2.match(_complexStringNumExp)||[];while(result=_complexStringNumExp.exec(end)){endNum=result[0];chunk=end.substring(index,result.index);if(color){color=(color+1)%5;}else if(chunk.substr(-5)==="rgba("){color=1;}if(endNum!==startNums[matchIndex++]){startNum=parseFloat(startNums[matchIndex-1])||0;pt._pt={_next:pt._pt,p:chunk||matchIndex===1?chunk:",",s:startNum,c:endNum.charAt(1)==="="?_parseRelative(startNum,endNum)-startNum:parseFloat(endNum)-startNum,m:color&&color<4?Math.round:0};index=_complexStringNumExp.lastIndex;}}pt.c=index<end.length?end.substring(index,end.length):"";pt.fp=funcParam;if(_relExp.test(end)||hasRandom){pt.e=0;}this._pt=pt;return pt;};var _addPropTween=function _addPropTween2(target,prop,start2,end,index,targets,modifier,stringFilter,funcParam){_isFunction(end)&&(end=end(index||0,target,targets));var currentValue=target[prop],parsedStart=start2!=="get"?start2:!_isFunction(currentValue)?currentValue:funcParam?target[prop.indexOf("set")||!_isFunction(target["get"+prop.substr(3)])?prop:"get"+prop.substr(3)](funcParam):target[prop](),setter=!_isFunction(currentValue)?_setterPlain:funcParam?_setterFuncWithParam:_setterFunc,pt;if(_isString(end)){if(~end.indexOf("random(")){end=_replaceRandom(end);}if(end.charAt(1)==="="){pt=_parseRelative(parsedStart,end)+(getUnit(parsedStart)||0);if(pt||pt===0){end=pt;}}}if(parsedStart!==end||_forceAllPropTweens){if(!isNaN(parsedStart*end)&&end!==""){pt=new PropTween(this._pt,target,prop,+parsedStart||0,end-(parsedStart||0),typeof currentValue==="boolean"?_renderBoolean:_renderPlain,0,setter);funcParam&&(pt.fp=funcParam);modifier&&pt.modifier(modifier,this,target);return this._pt=pt;}!currentValue&&!(prop in target)&&_missingPlugin(prop,end);return _addComplexStringPropTween.call(this,target,prop,parsedStart,end,setter,stringFilter||_config.stringFilter,funcParam);}};var _processVars=function _processVars2(vars,index,target,targets,tween){_isFunction(vars)&&(vars=_parseFuncOrString(vars,tween,index,target,targets));if(!_isObject(vars)||vars.style&&vars.nodeType||_isArray(vars)||_isTypedArray(vars)){return _isString(vars)?_parseFuncOrString(vars,tween,index,target,targets):vars;}var copy={},p;for(p in vars){copy[p]=_parseFuncOrString(vars[p],tween,index,target,targets);}return copy;};var _checkPlugin=function _checkPlugin2(property,vars,tween,index,target,targets){var plugin,pt,ptLookup,i;if(_plugins[property]&&(plugin=new _plugins[property]()).init(target,plugin.rawVars?vars[property]:_processVars(vars[property],index,target,targets,tween),tween,index,targets)!==false){tween._pt=pt=new PropTween(tween._pt,target,property,0,1,plugin.render,plugin,0,plugin.priority);if(tween!==_quickTween){ptLookup=tween._ptLookup[tween._targets.indexOf(target)];i=plugin._props.length;while(i--){ptLookup[plugin._props[i]]=pt;}}}return plugin;};var _overwritingTween;var _forceAllPropTweens;var _initTween=function _initTween2(tween,time){var vars=tween.vars,ease=vars.ease,startAt=vars.startAt,immediateRender=vars.immediateRender,lazy=vars.lazy,onUpdate=vars.onUpdate,onUpdateParams=vars.onUpdateParams,callbackScope=vars.callbackScope,runBackwards=vars.runBackwards,yoyoEase=vars.yoyoEase,keyframes=vars.keyframes,autoRevert=vars.autoRevert,dur=tween._dur,prevStartAt=tween._startAt,targets=tween._targets,parent=tween.parent,fullTargets=parent&&parent.data==="nested"?parent.parent._targets:targets,autoOverwrite=tween._overwrite==="auto"&&!_suppressOverwrites,tl=tween.timeline,cleanVars,i,p,pt,target,hasPriority,gsData,harness,plugin,ptLookup,index,harnessVars,overwritten;tl&&(!keyframes||!ease)&&(ease="none");tween._ease=_parseEase(ease,_defaults.ease);tween._yEase=yoyoEase?_invertEase(_parseEase(yoyoEase===true?ease:yoyoEase,_defaults.ease)):0;if(yoyoEase&&tween._yoyo&&!tween._repeat){yoyoEase=tween._yEase;tween._yEase=tween._ease;tween._ease=yoyoEase;}tween._from=!tl&&!!vars.runBackwards;if(!tl||keyframes&&!vars.stagger){harness=targets[0]?_getCache(targets[0]).harness:0;harnessVars=harness&&vars[harness.prop];cleanVars=_copyExcluding(vars,_reservedProps);if(prevStartAt){_removeFromParent(prevStartAt.render(-1,true));prevStartAt._lazy=0;}if(startAt){_removeFromParent(tween._startAt=Tween.set(targets,_setDefaults({data:"isStart",overwrite:false,parent:parent,immediateRender:true,lazy:_isNotFalse(lazy),startAt:null,delay:0,onUpdate:onUpdate,onUpdateParams:onUpdateParams,callbackScope:callbackScope,stagger:0},startAt)));time<0&&!immediateRender&&!autoRevert&&tween._startAt.render(-1,true);if(immediateRender){time>0&&!autoRevert&&(tween._startAt=0);if(dur&&time<=0){time&&(tween._zTime=time);return;}}else if(autoRevert===false){tween._startAt=0;}}else if(runBackwards&&dur){if(prevStartAt){!autoRevert&&(tween._startAt=0);}else{time&&(immediateRender=false);p=_setDefaults({overwrite:false,data:"isFromStart",lazy:immediateRender&&_isNotFalse(lazy),immediateRender:immediateRender,stagger:0,parent:parent},cleanVars);harnessVars&&(p[harness.prop]=harnessVars);_removeFromParent(tween._startAt=Tween.set(targets,p));time<0&&tween._startAt.render(-1,true);tween._zTime=time;if(!immediateRender){_initTween2(tween._startAt,_tinyNum);}else if(!time){return;}}}tween._pt=tween._ptCache=0;lazy=dur&&_isNotFalse(lazy)||lazy&&!dur;for(i=0;i<targets.length;i++){target=targets[i];gsData=target._gsap||_harness(targets)[i]._gsap;tween._ptLookup[i]=ptLookup={};_lazyLookup[gsData.id]&&_lazyTweens.length&&_lazyRender();index=fullTargets===targets?i:fullTargets.indexOf(target);if(harness&&(plugin=new harness()).init(target,harnessVars||cleanVars,tween,index,fullTargets)!==false){tween._pt=pt=new PropTween(tween._pt,target,plugin.name,0,1,plugin.render,plugin,0,plugin.priority);plugin._props.forEach(function(name){ptLookup[name]=pt;});plugin.priority&&(hasPriority=1);}if(!harness||harnessVars){for(p in cleanVars){if(_plugins[p]&&(plugin=_checkPlugin(p,cleanVars,tween,index,target,fullTargets))){plugin.priority&&(hasPriority=1);}else{ptLookup[p]=pt=_addPropTween.call(tween,target,p,"get",cleanVars[p],index,fullTargets,0,vars.stringFilter);}}}tween._op&&tween._op[i]&&tween.kill(target,tween._op[i]);if(autoOverwrite&&tween._pt){_overwritingTween=tween;_globalTimeline.killTweensOf(target,ptLookup,tween.globalTime(time));overwritten=!tween.parent;_overwritingTween=0;}tween._pt&&lazy&&(_lazyLookup[gsData.id]=1);}hasPriority&&_sortPropTweensByPriority(tween);tween._onInit&&tween._onInit(tween);}tween._onUpdate=onUpdate;tween._initted=(!tween._op||tween._pt)&&!overwritten;keyframes&&time<=0&&tl.render(_bigNum,true,true);};var _updatePropTweens=function _updatePropTweens2(tween,property,value,start2,startIsRelative,ratio,time){var ptCache=(tween._pt&&tween._ptCache||(tween._ptCache={}))[property],pt,lookup,i;if(!ptCache){ptCache=tween._ptCache[property]=[];lookup=tween._ptLookup;i=tween._targets.length;while(i--){pt=lookup[i][property];if(pt&&pt.d&&pt.d._pt){pt=pt.d._pt;while(pt&&pt.p!==property){pt=pt._next;}}if(!pt){_forceAllPropTweens=1;tween.vars[property]="+=0";_initTween(tween,time);_forceAllPropTweens=0;return 1;}ptCache.push(pt);}}i=ptCache.length;while(i--){pt=ptCache[i];pt.s=(start2||start2===0)&&!startIsRelative?start2:pt.s+(start2||0)+ratio*pt.c;pt.c=value-pt.s;pt.e&&(pt.e=_round(value)+getUnit(pt.e));pt.b&&(pt.b=pt.s+getUnit(pt.b));}};var _addAliasesToVars=function _addAliasesToVars2(targets,vars){var harness=targets[0]?_getCache(targets[0]).harness:0,propertyAliases=harness&&harness.aliases,copy,p,i,aliases;if(!propertyAliases){return vars;}copy=_merge({},vars);for(p in propertyAliases){if(p in copy){aliases=propertyAliases[p].split(",");i=aliases.length;while(i--){copy[aliases[i]]=copy[p];}}}return copy;};var _parseKeyframe=function _parseKeyframe2(prop,obj,allProps,easeEach){var ease=obj.ease||easeEach||"power1.inOut",p,a;if(_isArray(obj)){a=allProps[prop]||(allProps[prop]=[]);obj.forEach(function(value,i){return a.push({t:i/(obj.length-1)*100,v:value,e:ease});});}else{for(p in obj){a=allProps[p]||(allProps[p]=[]);p==="ease"||a.push({t:parseFloat(prop),v:obj[p],e:ease});}}};var _parseFuncOrString=function _parseFuncOrString2(value,tween,i,target,targets){return _isFunction(value)?value.call(tween,i,target,targets):_isString(value)&&~value.indexOf("random(")?_replaceRandom(value):value;};var _staggerTweenProps=_callbackNames+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert";var _staggerPropsToSkip={};_forEachName(_staggerTweenProps+",id,stagger,delay,duration,paused,scrollTrigger",function(name){return _staggerPropsToSkip[name]=1;});var Tween=/* @__PURE__ */function(_Animation2){_inheritsLoose(Tween2,_Animation2);function Tween2(targets,vars,position,skipInherit){var _this3;if(typeof vars==="number"){position.duration=vars;vars=position;position=null;}_this3=_Animation2.call(this,skipInherit?vars:_inheritDefaults(vars))||this;var _this3$vars=_this3.vars,duration5=_this3$vars.duration,delay=_this3$vars.delay,immediateRender=_this3$vars.immediateRender,stagger=_this3$vars.stagger,overwrite=_this3$vars.overwrite,keyframes=_this3$vars.keyframes,defaults3=_this3$vars.defaults,scrollTrigger=_this3$vars.scrollTrigger,yoyoEase=_this3$vars.yoyoEase,parent=vars.parent||_globalTimeline,parsedTargets=(_isArray(targets)||_isTypedArray(targets)?_isNumber(targets[0]):"length"in vars)?[targets]:toArray(targets),tl,i,copy,l,p,curTarget,staggerFunc,staggerVarsToMerge;_this3._targets=parsedTargets.length?_harness(parsedTargets):_warn("GSAP target "+targets+" not found. https://greensock.com",!_config.nullTargetWarn)||[];_this3._ptLookup=[];_this3._overwrite=overwrite;if(keyframes||stagger||_isFuncOrString(duration5)||_isFuncOrString(delay)){vars=_this3.vars;tl=_this3.timeline=new Timeline({data:"nested",defaults:defaults3||{}});tl.kill();tl.parent=tl._dp=_assertThisInitialized(_this3);tl._start=0;if(stagger||_isFuncOrString(duration5)||_isFuncOrString(delay)){l=parsedTargets.length;staggerFunc=stagger&&distribute(stagger);if(_isObject(stagger)){for(p in stagger){if(~_staggerTweenProps.indexOf(p)){staggerVarsToMerge||(staggerVarsToMerge={});staggerVarsToMerge[p]=stagger[p];}}}for(i=0;i<l;i++){copy=_copyExcluding(vars,_staggerPropsToSkip);copy.stagger=0;yoyoEase&&(copy.yoyoEase=yoyoEase);staggerVarsToMerge&&_merge(copy,staggerVarsToMerge);curTarget=parsedTargets[i];copy.duration=+_parseFuncOrString(duration5,_assertThisInitialized(_this3),i,curTarget,parsedTargets);copy.delay=(+_parseFuncOrString(delay,_assertThisInitialized(_this3),i,curTarget,parsedTargets)||0)-_this3._delay;if(!stagger&&l===1&&copy.delay){_this3._delay=delay=copy.delay;_this3._start+=delay;copy.delay=0;}tl.to(curTarget,copy,staggerFunc?staggerFunc(i,curTarget,parsedTargets):0);tl._ease=_easeMap.none;}tl.duration()?duration5=delay=0:_this3.timeline=0;}else if(keyframes){_inheritDefaults(_setDefaults(tl.vars.defaults,{ease:"none"}));tl._ease=_parseEase(keyframes.ease||vars.ease||"none");var time=0,a,kf,v;if(_isArray(keyframes)){keyframes.forEach(function(frame){return tl.to(parsedTargets,frame,">");});}else{copy={};for(p in keyframes){p==="ease"||p==="easeEach"||_parseKeyframe(p,keyframes[p],copy,keyframes.easeEach);}for(p in copy){a=copy[p].sort(function(a2,b){return a2.t-b.t;});time=0;for(i=0;i<a.length;i++){kf=a[i];v={ease:kf.e,duration:(kf.t-(i?a[i-1].t:0))/100*duration5};v[p]=kf.v;tl.to(parsedTargets,v,time);time+=v.duration;}}tl.duration()<duration5&&tl.to({},{duration:duration5-tl.duration()});}}duration5||_this3.duration(duration5=tl.duration());}else{_this3.timeline=0;}if(overwrite===true&&!_suppressOverwrites){_overwritingTween=_assertThisInitialized(_this3);_globalTimeline.killTweensOf(parsedTargets);_overwritingTween=0;}_addToTimeline(parent,_assertThisInitialized(_this3),position);vars.reversed&&_this3.reverse();vars.paused&&_this3.paused(true);if(immediateRender||!duration5&&!keyframes&&_this3._start===_roundPrecise(parent._time)&&_isNotFalse(immediateRender)&&_hasNoPausedAncestors(_assertThisInitialized(_this3))&&parent.data!=="nested"){_this3._tTime=-_tinyNum;_this3.render(Math.max(0,-delay));}scrollTrigger&&_scrollTrigger(_assertThisInitialized(_this3),scrollTrigger);return _this3;}var _proto3=Tween2.prototype;_proto3.render=function render2(totalTime,suppressEvents,force){var prevTime=this._time,tDur=this._tDur,dur=this._dur,tTime=totalTime>tDur-_tinyNum&&totalTime>=0?tDur:totalTime<_tinyNum?0:totalTime,time,pt,iteration,cycleDuration,prevIteration,isYoyo,ratio,timeline2,yoyoEase;if(!dur){_renderZeroDurationTween(this,totalTime,suppressEvents,force);}else if(tTime!==this._tTime||!totalTime||force||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==totalTime<0){time=tTime;timeline2=this.timeline;if(this._repeat){cycleDuration=dur+this._rDelay;if(this._repeat<-1&&totalTime<0){return this.totalTime(cycleDuration*100+totalTime,suppressEvents,force);}time=_roundPrecise(tTime%cycleDuration);if(tTime===tDur){iteration=this._repeat;time=dur;}else{iteration=~~(tTime/cycleDuration);if(iteration&&iteration===tTime/cycleDuration){time=dur;iteration--;}time>dur&&(time=dur);}isYoyo=this._yoyo&&iteration&1;if(isYoyo){yoyoEase=this._yEase;time=dur-time;}prevIteration=_animationCycle(this._tTime,cycleDuration);if(time===prevTime&&!force&&this._initted){this._tTime=tTime;return this;}if(iteration!==prevIteration){timeline2&&this._yEase&&_propagateYoyoEase(timeline2,isYoyo);if(this.vars.repeatRefresh&&!isYoyo&&!this._lock){this._lock=force=1;this.render(_roundPrecise(cycleDuration*iteration),true).invalidate()._lock=0;}}}if(!this._initted){if(_attemptInitTween(this,totalTime<0?totalTime:time,force,suppressEvents)){this._tTime=0;return this;}if(prevTime!==this._time){return this;}if(dur!==this._dur){return this.render(totalTime,suppressEvents,force);}}this._tTime=tTime;this._time=time;if(!this._act&&this._ts){this._act=1;this._lazy=0;}this.ratio=ratio=(yoyoEase||this._ease)(time/dur);if(this._from){this.ratio=ratio=1-ratio;}if(time&&!prevTime&&!suppressEvents){_callback(this,"onStart");if(this._tTime!==tTime){return this;}}pt=this._pt;while(pt){pt.r(ratio,pt.d);pt=pt._next;}timeline2&&timeline2.render(totalTime<0?totalTime:!time&&isYoyo?-_tinyNum:timeline2._dur*timeline2._ease(time/this._dur),suppressEvents,force)||this._startAt&&(this._zTime=totalTime);if(this._onUpdate&&!suppressEvents){totalTime<0&&this._startAt&&this._startAt.render(totalTime,true,force);_callback(this,"onUpdate");}this._repeat&&iteration!==prevIteration&&this.vars.onRepeat&&!suppressEvents&&this.parent&&_callback(this,"onRepeat");if((tTime===this._tDur||!tTime)&&this._tTime===tTime){totalTime<0&&this._startAt&&!this._onUpdate&&this._startAt.render(totalTime,true,true);(totalTime||!dur)&&(tTime===this._tDur&&this._ts>0||!tTime&&this._ts<0)&&_removeFromParent(this,1);if(!suppressEvents&&!(totalTime<0&&!prevTime)&&(tTime||prevTime)){_callback(this,tTime===tDur?"onComplete":"onReverseComplete",true);this._prom&&!(tTime<tDur&&this.timeScale()>0)&&this._prom();}}}return this;};_proto3.targets=function targets(){return this._targets;};_proto3.invalidate=function invalidate(){this._pt=this._op=this._startAt=this._onUpdate=this._lazy=this.ratio=0;this._ptLookup=[];this.timeline&&this.timeline.invalidate();return _Animation2.prototype.invalidate.call(this);};_proto3.resetTo=function resetTo(property,value,start2,startIsRelative){_tickerActive||_ticker.wake();this._ts||this.play();var time=Math.min(this._dur,(this._dp._time-this._start)*this._ts),ratio;this._initted||_initTween(this,time);ratio=this._ease(time/this._dur);if(_updatePropTweens(this,property,value,start2,startIsRelative,ratio,time)){return this.resetTo(property,value,start2,startIsRelative);}_alignPlayhead(this,0);this.parent||_addLinkedListItem(this._dp,this,"_first","_last",this._dp._sort?"_start":0);return this.render(0);};_proto3.kill=function kill2(targets,vars){if(vars===void 0){vars="all";}if(!targets&&(!vars||vars==="all")){this._lazy=this._pt=0;return this.parent?_interrupt(this):this;}if(this.timeline){var tDur=this.timeline.totalDuration();this.timeline.killTweensOf(targets,vars,_overwritingTween&&_overwritingTween.vars.overwrite!==true)._first||_interrupt(this);this.parent&&tDur!==this.timeline.totalDuration()&&_setDuration(this,this._dur*this.timeline._tDur/tDur,0,1);return this;}var parsedTargets=this._targets,killingTargets=targets?toArray(targets):parsedTargets,propTweenLookup=this._ptLookup,firstPT=this._pt,overwrittenProps,curLookup,curOverwriteProps,props,p,pt,i;if((!vars||vars==="all")&&_arraysMatch(parsedTargets,killingTargets)){vars==="all"&&(this._pt=0);return _interrupt(this);}overwrittenProps=this._op=this._op||[];if(vars!=="all"){if(_isString(vars)){p={};_forEachName(vars,function(name){return p[name]=1;});vars=p;}vars=_addAliasesToVars(parsedTargets,vars);}i=parsedTargets.length;while(i--){if(~killingTargets.indexOf(parsedTargets[i])){curLookup=propTweenLookup[i];if(vars==="all"){overwrittenProps[i]=vars;props=curLookup;curOverwriteProps={};}else{curOverwriteProps=overwrittenProps[i]=overwrittenProps[i]||{};props=vars;}for(p in props){pt=curLookup&&curLookup[p];if(pt){if(!("kill"in pt.d)||pt.d.kill(p)===true){_removeLinkedListItem(this,pt,"_pt");}delete curLookup[p];}if(curOverwriteProps!=="all"){curOverwriteProps[p]=1;}}}}this._initted&&!this._pt&&firstPT&&_interrupt(this);return this;};Tween2.to=function to(targets,vars){return new Tween2(targets,vars,arguments[2]);};Tween2.from=function from3(targets,vars){return _createTweenType(1,arguments);};Tween2.delayedCall=function delayedCall(delay,callback2,params,scope){return new Tween2(callback2,0,{immediateRender:false,lazy:false,overwrite:false,delay:delay,onComplete:callback2,onReverseComplete:callback2,onCompleteParams:params,onReverseCompleteParams:params,callbackScope:scope});};Tween2.fromTo=function fromTo(targets,fromVars,toVars){return _createTweenType(2,arguments);};Tween2.set=function set4(targets,vars){vars.duration=0;vars.repeatDelay||(vars.repeat=0);return new Tween2(targets,vars);};Tween2.killTweensOf=function killTweensOf(targets,props,onlyActive){return _globalTimeline.killTweensOf(targets,props,onlyActive);};return Tween2;}(Animation);_setDefaults(Tween.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});_forEachName("staggerTo,staggerFrom,staggerFromTo",function(name){Tween[name]=function(){var tl=new Timeline(),params=_slice.call(arguments,0);params.splice(name==="staggerFromTo"?5:4,0,0);return tl[name].apply(tl,params);};});var _setterPlain=function _setterPlain2(target,property,value){return target[property]=value;};var _setterFunc=function _setterFunc2(target,property,value){return target[property](value);};var _setterFuncWithParam=function _setterFuncWithParam2(target,property,value,data){return target[property](data.fp,value);};var _setterAttribute=function _setterAttribute2(target,property,value){return target.setAttribute(property,value);};var _getSetter=function _getSetter2(target,property){return _isFunction(target[property])?_setterFunc:_isUndefined(target[property])&&target.setAttribute?_setterAttribute:_setterPlain;};var _renderPlain=function _renderPlain2(ratio,data){return data.set(data.t,data.p,Math.round((data.s+data.c*ratio)*1e6)/1e6,data);};var _renderBoolean=function _renderBoolean2(ratio,data){return data.set(data.t,data.p,!!(data.s+data.c*ratio),data);};var _renderComplexString=function _renderComplexString2(ratio,data){var pt=data._pt,s="";if(!ratio&&data.b){s=data.b;}else if(ratio===1&&data.e){s=data.e;}else{while(pt){s=pt.p+(pt.m?pt.m(pt.s+pt.c*ratio):Math.round((pt.s+pt.c*ratio)*1e4)/1e4)+s;pt=pt._next;}s+=data.c;}data.set(data.t,data.p,s,data);};var _renderPropTweens=function _renderPropTweens2(ratio,data){var pt=data._pt;while(pt){pt.r(ratio,pt.d);pt=pt._next;}};var _addPluginModifier=function _addPluginModifier2(modifier,tween,target,property){var pt=this._pt,next;while(pt){next=pt._next;pt.p===property&&pt.modifier(modifier,tween,target);pt=next;}};var _killPropTweensOf=function _killPropTweensOf2(property){var pt=this._pt,hasNonDependentRemaining,next;while(pt){next=pt._next;if(pt.p===property&&!pt.op||pt.op===property){_removeLinkedListItem(this,pt,"_pt");}else if(!pt.dep){hasNonDependentRemaining=1;}pt=next;}return!hasNonDependentRemaining;};var _setterWithModifier=function _setterWithModifier2(target,property,value,data){data.mSet(target,property,data.m.call(data.tween,value,data.mt),data);};var _sortPropTweensByPriority=function _sortPropTweensByPriority2(parent){var pt=parent._pt,next,pt2,first,last;while(pt){next=pt._next;pt2=first;while(pt2&&pt2.pr>pt.pr){pt2=pt2._next;}if(pt._prev=pt2?pt2._prev:last){pt._prev._next=pt;}else{first=pt;}if(pt._next=pt2){pt2._prev=pt;}else{last=pt;}pt=next;}parent._pt=first;};var PropTween=/* @__PURE__ */function(){function PropTween2(next,target,prop,start2,change,renderer,data,setter,priority){this.t=target;this.s=start2;this.c=change;this.p=prop;this.r=renderer||_renderPlain;this.d=data||this;this.set=setter||_setterPlain;this.pr=priority||0;this._next=next;if(next){next._prev=this;}}var _proto4=PropTween2.prototype;_proto4.modifier=function modifier(func,tween,target){this.mSet=this.mSet||this.set;this.set=_setterWithModifier;this.m=func;this.mt=target;this.tween=tween;};return PropTween2;}();_forEachName(_callbackNames+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(name){return _reservedProps[name]=1;});_globals.TweenMax=_globals.TweenLite=Tween;_globals.TimelineLite=_globals.TimelineMax=Timeline;_globalTimeline=new Timeline({sortChildren:false,defaults:_defaults,autoRemoveChildren:true,id:"root",smoothChildTiming:true});_config.stringFilter=_colorStringFilter;var _gsap={registerPlugin:function registerPlugin(){for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2];}args.forEach(function(config3){return _createPlugin(config3);});},timeline:function timeline(vars){return new Timeline(vars);},getTweensOf:function getTweensOf(targets,onlyActive){return _globalTimeline.getTweensOf(targets,onlyActive);},getProperty:function getProperty(target,property,unit,uncache){_isString(target)&&(target=toArray(target)[0]);var getter=_getCache(target||{}).get,format=unit?_passThrough:_numericIfPossible;unit==="native"&&(unit="");return!target?target:!property?function(property2,unit2,uncache2){return format((_plugins[property2]&&_plugins[property2].get||getter)(target,property2,unit2,uncache2));}:format((_plugins[property]&&_plugins[property].get||getter)(target,property,unit,uncache));},quickSetter:function quickSetter(target,property,unit){target=toArray(target);if(target.length>1){var setters=target.map(function(t2){return gsap.quickSetter(t2,property,unit);}),l=setters.length;return function(value){var i=l;while(i--){setters[i](value);}};}target=target[0]||{};var Plugin2=_plugins[property],cache=_getCache(target),p=cache.harness&&(cache.harness.aliases||{})[property]||property,setter=Plugin2?function(value){var p2=new Plugin2();_quickTween._pt=0;p2.init(target,unit?value+unit:value,_quickTween,0,[target]);p2.render(1,p2);_quickTween._pt&&_renderPropTweens(1,_quickTween);}:cache.set(target,p);return Plugin2?setter:function(value){return setter(target,p,unit?value+unit:value,cache,1);};},quickTo:function quickTo(target,property,vars){var _merge22;var tween=gsap.to(target,_merge((_merge22={},_merge22[property]="+=0.1",_merge22.paused=true,_merge22),vars||{})),func=function func2(value,start2,startIsRelative){return tween.resetTo(property,value,start2,startIsRelative);};func.tween=tween;return func;},isTweening:function isTweening(targets){return _globalTimeline.getTweensOf(targets,true).length>0;},defaults:function defaults(value){value&&value.ease&&(value.ease=_parseEase(value.ease,_defaults.ease));return _mergeDeep(_defaults,value||{});},config:function config2(value){return _mergeDeep(_config,value||{});},registerEffect:function registerEffect(_ref3){var name=_ref3.name,effect=_ref3.effect,plugins=_ref3.plugins,defaults3=_ref3.defaults,extendTimeline=_ref3.extendTimeline;(plugins||"").split(",").forEach(function(pluginName){return pluginName&&!_plugins[pluginName]&&!_globals[pluginName]&&_warn(name+" effect requires "+pluginName+" plugin.");});_effects[name]=function(targets,vars,tl){return effect(toArray(targets),_setDefaults(vars||{},defaults3),tl);};if(extendTimeline){Timeline.prototype[name]=function(targets,vars,position){return this.add(_effects[name](targets,_isObject(vars)?vars:(position=vars)&&{},this),position);};}},registerEase:function registerEase(name,ease){_easeMap[name]=_parseEase(ease);},parseEase:function parseEase(ease,defaultEase){return arguments.length?_parseEase(ease,defaultEase):_easeMap;},getById:function getById(id){return _globalTimeline.getById(id);},exportRoot:function exportRoot(vars,includeDelayedCalls){if(vars===void 0){vars={};}var tl=new Timeline(vars),child,next;tl.smoothChildTiming=_isNotFalse(vars.smoothChildTiming);_globalTimeline.remove(tl);tl._dp=0;tl._time=tl._tTime=_globalTimeline._time;child=_globalTimeline._first;while(child){next=child._next;if(includeDelayedCalls||!(!child._dur&&child instanceof Tween&&child.vars.onComplete===child._targets[0])){_addToTimeline(tl,child,child._start-child._delay);}child=next;}_addToTimeline(_globalTimeline,tl,0);return tl;},utils:{wrap:wrap,wrapYoyo:wrapYoyo,distribute:distribute,random:random,snap:snap,normalize:normalize,getUnit:getUnit,clamp:clamp,splitColor:splitColor,toArray:toArray,selector:selector,mapRange:mapRange,pipe:pipe,unitize:unitize,interpolate:interpolate,shuffle:shuffle},install:_install,effects:_effects,ticker:_ticker,updateRoot:Timeline.updateRoot,plugins:_plugins,globalTimeline:_globalTimeline,core:{PropTween:PropTween,globals:_addGlobal,Tween:Tween,Timeline:Timeline,Animation:Animation,getCache:_getCache,_removeLinkedListItem:_removeLinkedListItem,suppressOverwrites:function suppressOverwrites(value){return _suppressOverwrites=value;}}};_forEachName("to,from,fromTo,delayedCall,set,killTweensOf",function(name){return _gsap[name]=Tween[name];});_ticker.add(Timeline.updateRoot);_quickTween=_gsap.to({},{duration:0});var _getPluginPropTween=function _getPluginPropTween2(plugin,prop){var pt=plugin._pt;while(pt&&pt.p!==prop&&pt.op!==prop&&pt.fp!==prop){pt=pt._next;}return pt;};var _addModifiers=function _addModifiers2(tween,modifiers){var targets=tween._targets,p,i,pt;for(p in modifiers){i=targets.length;while(i--){pt=tween._ptLookup[i][p];if(pt&&(pt=pt.d)){if(pt._pt){pt=_getPluginPropTween(pt,p);}pt&&pt.modifier&&pt.modifier(modifiers[p],tween,targets[i],p);}}}};var _buildModifierPlugin=function _buildModifierPlugin2(name,modifier){return{name:name,rawVars:1,init:function init5(target,vars,tween){tween._onInit=function(tween2){var temp,p;if(_isString(vars)){temp={};_forEachName(vars,function(name2){return temp[name2]=1;});vars=temp;}if(modifier){temp={};for(p in vars){temp[p]=modifier(vars[p]);}vars=temp;}_addModifiers(tween2,vars);};}};};var gsap=_gsap.registerPlugin({name:"attr",init:function init(target,vars,tween,index,targets){var p,pt;for(p in vars){pt=this.add(target,"setAttribute",(target.getAttribute(p)||0)+"",vars[p],index,targets,0,0,p);pt&&(pt.op=p);this._props.push(p);}}},{name:"endArray",init:function init2(target,value){var i=value.length;while(i--){this.add(target,i,target[i]||0,value[i]);}}},_buildModifierPlugin("roundProps",_roundModifier),_buildModifierPlugin("modifiers"),_buildModifierPlugin("snap",snap))||_gsap;Tween.version=Timeline.version=gsap.version="3.10.4";_coreReady=1;_windowExists()&&_wake();var Power0=_easeMap.Power0;var Power1=_easeMap.Power1;var Power2=_easeMap.Power2;var Power3=_easeMap.Power3;var Power4=_easeMap.Power4;var Linear=_easeMap.Linear;var Quad=_easeMap.Quad;var Cubic=_easeMap.Cubic;var Quart=_easeMap.Quart;var Quint=_easeMap.Quint;var Strong=_easeMap.Strong;var Elastic=_easeMap.Elastic;var Back=_easeMap.Back;var SteppedEase=_easeMap.SteppedEase;var Bounce=_easeMap.Bounce;var Sine=_easeMap.Sine;var Expo=_easeMap.Expo;var Circ=_easeMap.Circ;// node_modules/gsap/CSSPlugin.js
var _win2;var _doc2;var _docElement;var _pluginInitted;var _tempDiv;var _tempDivStyler;var _recentSetterPlugin;var _windowExists3=function _windowExists4(){return typeof window!=="undefined";};var _transformProps={};var _RAD2DEG=180/Math.PI;var _DEG2RAD=Math.PI/180;var _atan2=Math.atan2;var _bigNum2=1e8;var _capsExp=/([A-Z])/g;var _horizontalExp=/(left|right|width|margin|padding|x)/i;var _complexExp=/[\s,\(]\S/;var _propertyAliases={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"};var _renderCSSProp=function _renderCSSProp2(ratio,data){return data.set(data.t,data.p,Math.round((data.s+data.c*ratio)*1e4)/1e4+data.u,data);};var _renderPropWithEnd=function _renderPropWithEnd2(ratio,data){return data.set(data.t,data.p,ratio===1?data.e:Math.round((data.s+data.c*ratio)*1e4)/1e4+data.u,data);};var _renderCSSPropWithBeginning=function _renderCSSPropWithBeginning2(ratio,data){return data.set(data.t,data.p,ratio?Math.round((data.s+data.c*ratio)*1e4)/1e4+data.u:data.b,data);};var _renderRoundedCSSProp=function _renderRoundedCSSProp2(ratio,data){var value=data.s+data.c*ratio;data.set(data.t,data.p,~~(value+(value<0?-0.5:0.5))+data.u,data);};var _renderNonTweeningValue=function _renderNonTweeningValue2(ratio,data){return data.set(data.t,data.p,ratio?data.e:data.b,data);};var _renderNonTweeningValueOnlyAtEnd=function _renderNonTweeningValueOnlyAtEnd2(ratio,data){return data.set(data.t,data.p,ratio!==1?data.b:data.e,data);};var _setterCSSStyle=function _setterCSSStyle2(target,property,value){return target.style[property]=value;};var _setterCSSProp=function _setterCSSProp2(target,property,value){return target.style.setProperty(property,value);};var _setterTransform=function _setterTransform2(target,property,value){return target._gsap[property]=value;};var _setterScale=function _setterScale2(target,property,value){return target._gsap.scaleX=target._gsap.scaleY=value;};var _setterScaleWithRender=function _setterScaleWithRender2(target,property,value,data,ratio){var cache=target._gsap;cache.scaleX=cache.scaleY=value;cache.renderTransform(ratio,cache);};var _setterTransformWithRender=function _setterTransformWithRender2(target,property,value,data,ratio){var cache=target._gsap;cache[property]=value;cache.renderTransform(ratio,cache);};var _transformProp="transform";var _transformOriginProp=_transformProp+"Origin";var _supports3D;var _createElement=function _createElement2(type2,ns){var e=_doc2.createElementNS?_doc2.createElementNS((ns||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),type2):_doc2.createElement(type2);return e.style?e:_doc2.createElement(type2);};var _getComputedProperty=function _getComputedProperty2(target,property,skipPrefixFallback){var cs=getComputedStyle(target);return cs[property]||cs.getPropertyValue(property.replace(_capsExp,"-$1").toLowerCase())||cs.getPropertyValue(property)||!skipPrefixFallback&&_getComputedProperty2(target,_checkPropPrefix(property)||property,1)||"";};var _prefixes="O,Moz,ms,Ms,Webkit".split(",");var _checkPropPrefix=function _checkPropPrefix2(property,element,preferPrefix){var e=element||_tempDiv,s=e.style,i=5;if(property in s&&!preferPrefix){return property;}property=property.charAt(0).toUpperCase()+property.substr(1);while(i--&&!(_prefixes[i]+property in s)){}return i<0?null:(i===3?"ms":i>=0?_prefixes[i]:"")+property;};var _initCore=function _initCore2(){if(_windowExists3()&&window.document){_win2=window;_doc2=_win2.document;_docElement=_doc2.documentElement;_tempDiv=_createElement("div")||{style:{}};_tempDivStyler=_createElement("div");_transformProp=_checkPropPrefix(_transformProp);_transformOriginProp=_transformProp+"Origin";_tempDiv.style.cssText="border-width:0;line-height:0;position:absolute;padding:0";_supports3D=!!_checkPropPrefix("perspective");_pluginInitted=1;}};var _getBBoxHack=function _getBBoxHack2(swapIfPossible){var svg=_createElement("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),oldParent=this.parentNode,oldSibling=this.nextSibling,oldCSS=this.style.cssText,bbox;_docElement.appendChild(svg);svg.appendChild(this);this.style.display="block";if(swapIfPossible){try{bbox=this.getBBox();this._gsapBBox=this.getBBox;this.getBBox=_getBBoxHack2;}catch(e){}}else if(this._gsapBBox){bbox=this._gsapBBox();}if(oldParent){if(oldSibling){oldParent.insertBefore(this,oldSibling);}else{oldParent.appendChild(this);}}_docElement.removeChild(svg);this.style.cssText=oldCSS;return bbox;};var _getAttributeFallbacks=function _getAttributeFallbacks2(target,attributesArray){var i=attributesArray.length;while(i--){if(target.hasAttribute(attributesArray[i])){return target.getAttribute(attributesArray[i]);}}};var _getBBox=function _getBBox2(target){var bounds;try{bounds=target.getBBox();}catch(error){bounds=_getBBoxHack.call(target,true);}bounds&&(bounds.width||bounds.height)||target.getBBox===_getBBoxHack||(bounds=_getBBoxHack.call(target,true));return bounds&&!bounds.width&&!bounds.x&&!bounds.y?{x:+_getAttributeFallbacks(target,["x","cx","x1"])||0,y:+_getAttributeFallbacks(target,["y","cy","y1"])||0,width:0,height:0}:bounds;};var _isSVG=function _isSVG2(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&_getBBox(e));};var _removeProperty=function _removeProperty2(target,property){if(property){var style=target.style;if(property in _transformProps&&property!==_transformOriginProp){property=_transformProp;}if(style.removeProperty){if(property.substr(0,2)==="ms"||property.substr(0,6)==="webkit"){property="-"+property;}style.removeProperty(property.replace(_capsExp,"-$1").toLowerCase());}else{style.removeAttribute(property);}}};var _addNonTweeningPT=function _addNonTweeningPT2(plugin,target,property,beginning,end,onlySetAtEnd){var pt=new PropTween(plugin._pt,target,property,0,1,onlySetAtEnd?_renderNonTweeningValueOnlyAtEnd:_renderNonTweeningValue);plugin._pt=pt;pt.b=beginning;pt.e=end;plugin._props.push(property);return pt;};var _nonConvertibleUnits={deg:1,rad:1,turn:1};var _convertToUnit=function _convertToUnit2(target,property,value,unit){var curValue=parseFloat(value)||0,curUnit=(value+"").trim().substr((curValue+"").length)||"px",style=_tempDiv.style,horizontal=_horizontalExp.test(property),isRootSVG=target.tagName.toLowerCase()==="svg",measureProperty=(isRootSVG?"client":"offset")+(horizontal?"Width":"Height"),amount=100,toPixels=unit==="px",toPercent=unit==="%",px,parent,cache,isSVG;if(unit===curUnit||!curValue||_nonConvertibleUnits[unit]||_nonConvertibleUnits[curUnit]){return curValue;}curUnit!=="px"&&!toPixels&&(curValue=_convertToUnit2(target,property,value,"px"));isSVG=target.getCTM&&_isSVG(target);if((toPercent||curUnit==="%")&&(_transformProps[property]||~property.indexOf("adius"))){px=isSVG?target.getBBox()[horizontal?"width":"height"]:target[measureProperty];return _round(toPercent?curValue/px*amount:curValue/100*px);}style[horizontal?"width":"height"]=amount+(toPixels?curUnit:unit);parent=~property.indexOf("adius")||unit==="em"&&target.appendChild&&!isRootSVG?target:target.parentNode;if(isSVG){parent=(target.ownerSVGElement||{}).parentNode;}if(!parent||parent===_doc2||!parent.appendChild){parent=_doc2.body;}cache=parent._gsap;if(cache&&toPercent&&cache.width&&horizontal&&cache.time===_ticker.time){return _round(curValue/cache.width*amount);}else{(toPercent||curUnit==="%")&&(style.position=_getComputedProperty(target,"position"));parent===target&&(style.position="static");parent.appendChild(_tempDiv);px=_tempDiv[measureProperty];parent.removeChild(_tempDiv);style.position="absolute";if(horizontal&&toPercent){cache=_getCache(parent);cache.time=_ticker.time;cache.width=parent[measureProperty];}}return _round(toPixels?px*curValue/amount:px&&curValue?amount/px*curValue:0);};var _get=function _get2(target,property,unit,uncache){var value;_pluginInitted||_initCore();if(property in _propertyAliases&&property!=="transform"){property=_propertyAliases[property];if(~property.indexOf(",")){property=property.split(",")[0];}}if(_transformProps[property]&&property!=="transform"){value=_parseTransform(target,uncache);value=property!=="transformOrigin"?value[property]:value.svg?value.origin:_firstTwoOnly(_getComputedProperty(target,_transformOriginProp))+" "+value.zOrigin+"px";}else{value=target.style[property];if(!value||value==="auto"||uncache||~(value+"").indexOf("calc(")){value=_specialProps[property]&&_specialProps[property](target,property,unit)||_getComputedProperty(target,property)||_getProperty(target,property)||(property==="opacity"?1:0);}}return unit&&!~(value+"").trim().indexOf(" ")?_convertToUnit(target,property,value,unit)+unit:value;};var _tweenComplexCSSString=function _tweenComplexCSSString2(target,prop,start2,end){if(!start2||start2==="none"){var p=_checkPropPrefix(prop,target,1),s=p&&_getComputedProperty(target,p,1);if(s&&s!==start2){prop=p;start2=s;}else if(prop==="borderColor"){start2=_getComputedProperty(target,"borderTopColor");}}var pt=new PropTween(this._pt,target.style,prop,0,1,_renderComplexString),index=0,matchIndex=0,a,result,startValues,startNum,color,startValue,endValue,endNum,chunk,endUnit,startUnit,endValues;pt.b=start2;pt.e=end;start2+="";end+="";if(end==="auto"){target.style[prop]=end;end=_getComputedProperty(target,prop)||end;target.style[prop]=start2;}a=[start2,end];_colorStringFilter(a);start2=a[0];end=a[1];startValues=start2.match(_numWithUnitExp)||[];endValues=end.match(_numWithUnitExp)||[];if(endValues.length){while(result=_numWithUnitExp.exec(end)){endValue=result[0];chunk=end.substring(index,result.index);if(color){color=(color+1)%5;}else if(chunk.substr(-5)==="rgba("||chunk.substr(-5)==="hsla("){color=1;}if(endValue!==(startValue=startValues[matchIndex++]||"")){startNum=parseFloat(startValue)||0;startUnit=startValue.substr((startNum+"").length);endValue.charAt(1)==="="&&(endValue=_parseRelative(startNum,endValue)+startUnit);endNum=parseFloat(endValue);endUnit=endValue.substr((endNum+"").length);index=_numWithUnitExp.lastIndex-endUnit.length;if(!endUnit){endUnit=endUnit||_config.units[prop]||startUnit;if(index===end.length){end+=endUnit;pt.e+=endUnit;}}if(startUnit!==endUnit){startNum=_convertToUnit(target,prop,startValue,endUnit)||0;}pt._pt={_next:pt._pt,p:chunk||matchIndex===1?chunk:",",s:startNum,c:endNum-startNum,m:color&&color<4||prop==="zIndex"?Math.round:0};}}pt.c=index<end.length?end.substring(index,end.length):"";}else{pt.r=prop==="display"&&end==="none"?_renderNonTweeningValueOnlyAtEnd:_renderNonTweeningValue;}_relExp.test(end)&&(pt.e=0);this._pt=pt;return pt;};var _keywordToPercent={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"};var _convertKeywordsToPercentages=function _convertKeywordsToPercentages2(value){var split=value.split(" "),x=split[0],y=split[1]||"50%";if(x==="top"||x==="bottom"||y==="left"||y==="right"){value=x;x=y;y=value;}split[0]=_keywordToPercent[x]||x;split[1]=_keywordToPercent[y]||y;return split.join(" ");};var _renderClearProps=function _renderClearProps2(ratio,data){if(data.tween&&data.tween._time===data.tween._dur){var target=data.t,style=target.style,props=data.u,cache=target._gsap,prop,clearTransforms,i;if(props==="all"||props===true){style.cssText="";clearTransforms=1;}else{props=props.split(",");i=props.length;while(--i>-1){prop=props[i];if(_transformProps[prop]){clearTransforms=1;prop=prop==="transformOrigin"?_transformOriginProp:_transformProp;}_removeProperty(target,prop);}}if(clearTransforms){_removeProperty(target,_transformProp);if(cache){cache.svg&&target.removeAttribute("transform");_parseTransform(target,1);cache.uncache=1;}}}};var _specialProps={clearProps:function clearProps(plugin,target,property,endValue,tween){if(tween.data!=="isFromStart"){var pt=plugin._pt=new PropTween(plugin._pt,target,property,0,0,_renderClearProps);pt.u=endValue;pt.pr=-10;pt.tween=tween;plugin._props.push(property);return 1;}}};var _identity2DMatrix=[1,0,0,1,0,0];var _rotationalProperties={};var _isNullTransform=function _isNullTransform2(value){return value==="matrix(1, 0, 0, 1, 0, 0)"||value==="none"||!value;};var _getComputedTransformMatrixAsArray=function _getComputedTransformMatrixAsArray2(target){var matrixString=_getComputedProperty(target,_transformProp);return _isNullTransform(matrixString)?_identity2DMatrix:matrixString.substr(7).match(_numExp).map(_round);};var _getMatrix=function _getMatrix2(target,force2D){var cache=target._gsap||_getCache(target),style=target.style,matrix=_getComputedTransformMatrixAsArray(target),parent,nextSibling,temp,addedToDOM;if(cache.svg&&target.getAttribute("transform")){temp=target.transform.baseVal.consolidate().matrix;matrix=[temp.a,temp.b,temp.c,temp.d,temp.e,temp.f];return matrix.join(",")==="1,0,0,1,0,0"?_identity2DMatrix:matrix;}else if(matrix===_identity2DMatrix&&!target.offsetParent&&target!==_docElement&&!cache.svg){temp=style.display;style.display="block";parent=target.parentNode;if(!parent||!target.offsetParent){addedToDOM=1;nextSibling=target.nextSibling;_docElement.appendChild(target);}matrix=_getComputedTransformMatrixAsArray(target);temp?style.display=temp:_removeProperty(target,"display");if(addedToDOM){nextSibling?parent.insertBefore(target,nextSibling):parent?parent.appendChild(target):_docElement.removeChild(target);}}return force2D&&matrix.length>6?[matrix[0],matrix[1],matrix[4],matrix[5],matrix[12],matrix[13]]:matrix;};var _applySVGOrigin=function _applySVGOrigin2(target,origin,originIsAbsolute,smooth,matrixArray,pluginToAddPropTweensTo){var cache=target._gsap,matrix=matrixArray||_getMatrix(target,true),xOriginOld=cache.xOrigin||0,yOriginOld=cache.yOrigin||0,xOffsetOld=cache.xOffset||0,yOffsetOld=cache.yOffset||0,a=matrix[0],b=matrix[1],c=matrix[2],d2=matrix[3],tx=matrix[4],ty=matrix[5],originSplit=origin.split(" "),xOrigin=parseFloat(originSplit[0])||0,yOrigin=parseFloat(originSplit[1])||0,bounds,determinant,x,y;if(!originIsAbsolute){bounds=_getBBox(target);xOrigin=bounds.x+(~originSplit[0].indexOf("%")?xOrigin/100*bounds.width:xOrigin);yOrigin=bounds.y+(~(originSplit[1]||originSplit[0]).indexOf("%")?yOrigin/100*bounds.height:yOrigin);}else if(matrix!==_identity2DMatrix&&(determinant=a*d2-b*c)){x=xOrigin*(d2/determinant)+yOrigin*(-c/determinant)+(c*ty-d2*tx)/determinant;y=xOrigin*(-b/determinant)+yOrigin*(a/determinant)-(a*ty-b*tx)/determinant;xOrigin=x;yOrigin=y;}if(smooth||smooth!==false&&cache.smooth){tx=xOrigin-xOriginOld;ty=yOrigin-yOriginOld;cache.xOffset=xOffsetOld+(tx*a+ty*c)-tx;cache.yOffset=yOffsetOld+(tx*b+ty*d2)-ty;}else{cache.xOffset=cache.yOffset=0;}cache.xOrigin=xOrigin;cache.yOrigin=yOrigin;cache.smooth=!!smooth;cache.origin=origin;cache.originIsAbsolute=!!originIsAbsolute;target.style[_transformOriginProp]="0px 0px";if(pluginToAddPropTweensTo){_addNonTweeningPT(pluginToAddPropTweensTo,cache,"xOrigin",xOriginOld,xOrigin);_addNonTweeningPT(pluginToAddPropTweensTo,cache,"yOrigin",yOriginOld,yOrigin);_addNonTweeningPT(pluginToAddPropTweensTo,cache,"xOffset",xOffsetOld,cache.xOffset);_addNonTweeningPT(pluginToAddPropTweensTo,cache,"yOffset",yOffsetOld,cache.yOffset);}target.setAttribute("data-svg-origin",xOrigin+" "+yOrigin);};var _parseTransform=function _parseTransform2(target,uncache){var cache=target._gsap||new GSCache(target);if("x"in cache&&!uncache&&!cache.uncache){return cache;}var style=target.style,invertedScaleX=cache.scaleX<0,px="px",deg="deg",origin=_getComputedProperty(target,_transformOriginProp)||"0",x,y,z,scaleX,scaleY,rotation,rotationX,rotationY,skewX,skewY,perspective,xOrigin,yOrigin,matrix,angle,cos,sin,a,b,c,d2,a12,a22,t1,t2,t3,a13,a23,a33,a42,a43,a32;x=y=z=rotation=rotationX=rotationY=skewX=skewY=perspective=0;scaleX=scaleY=1;cache.svg=!!(target.getCTM&&_isSVG(target));matrix=_getMatrix(target,cache.svg);if(cache.svg){t1=(!cache.uncache||origin==="0px 0px")&&!uncache&&target.getAttribute("data-svg-origin");_applySVGOrigin(target,t1||origin,!!t1||cache.originIsAbsolute,cache.smooth!==false,matrix);}xOrigin=cache.xOrigin||0;yOrigin=cache.yOrigin||0;if(matrix!==_identity2DMatrix){a=matrix[0];b=matrix[1];c=matrix[2];d2=matrix[3];x=a12=matrix[4];y=a22=matrix[5];if(matrix.length===6){scaleX=Math.sqrt(a*a+b*b);scaleY=Math.sqrt(d2*d2+c*c);rotation=a||b?_atan2(b,a)*_RAD2DEG:0;skewX=c||d2?_atan2(c,d2)*_RAD2DEG+rotation:0;skewX&&(scaleY*=Math.abs(Math.cos(skewX*_DEG2RAD)));if(cache.svg){x-=xOrigin-(xOrigin*a+yOrigin*c);y-=yOrigin-(xOrigin*b+yOrigin*d2);}}else{a32=matrix[6];a42=matrix[7];a13=matrix[8];a23=matrix[9];a33=matrix[10];a43=matrix[11];x=matrix[12];y=matrix[13];z=matrix[14];angle=_atan2(a32,a33);rotationX=angle*_RAD2DEG;if(angle){cos=Math.cos(-angle);sin=Math.sin(-angle);t1=a12*cos+a13*sin;t2=a22*cos+a23*sin;t3=a32*cos+a33*sin;a13=a12*-sin+a13*cos;a23=a22*-sin+a23*cos;a33=a32*-sin+a33*cos;a43=a42*-sin+a43*cos;a12=t1;a22=t2;a32=t3;}angle=_atan2(-c,a33);rotationY=angle*_RAD2DEG;if(angle){cos=Math.cos(-angle);sin=Math.sin(-angle);t1=a*cos-a13*sin;t2=b*cos-a23*sin;t3=c*cos-a33*sin;a43=d2*sin+a43*cos;a=t1;b=t2;c=t3;}angle=_atan2(b,a);rotation=angle*_RAD2DEG;if(angle){cos=Math.cos(angle);sin=Math.sin(angle);t1=a*cos+b*sin;t2=a12*cos+a22*sin;b=b*cos-a*sin;a22=a22*cos-a12*sin;a=t1;a12=t2;}if(rotationX&&Math.abs(rotationX)+Math.abs(rotation)>359.9){rotationX=rotation=0;rotationY=180-rotationY;}scaleX=_round(Math.sqrt(a*a+b*b+c*c));scaleY=_round(Math.sqrt(a22*a22+a32*a32));angle=_atan2(a12,a22);skewX=Math.abs(angle)>2e-4?angle*_RAD2DEG:0;perspective=a43?1/(a43<0?-a43:a43):0;}if(cache.svg){t1=target.getAttribute("transform");cache.forceCSS=target.setAttribute("transform","")||!_isNullTransform(_getComputedProperty(target,_transformProp));t1&&target.setAttribute("transform",t1);}}if(Math.abs(skewX)>90&&Math.abs(skewX)<270){if(invertedScaleX){scaleX*=-1;skewX+=rotation<=0?180:-180;rotation+=rotation<=0?180:-180;}else{scaleY*=-1;skewX+=skewX<=0?180:-180;}}uncache=uncache||cache.uncache;cache.x=x-((cache.xPercent=x&&(!uncache&&cache.xPercent||(Math.round(target.offsetWidth/2)===Math.round(-x)?-50:0)))?target.offsetWidth*cache.xPercent/100:0)+px;cache.y=y-((cache.yPercent=y&&(!uncache&&cache.yPercent||(Math.round(target.offsetHeight/2)===Math.round(-y)?-50:0)))?target.offsetHeight*cache.yPercent/100:0)+px;cache.z=z+px;cache.scaleX=_round(scaleX);cache.scaleY=_round(scaleY);cache.rotation=_round(rotation)+deg;cache.rotationX=_round(rotationX)+deg;cache.rotationY=_round(rotationY)+deg;cache.skewX=skewX+deg;cache.skewY=skewY+deg;cache.transformPerspective=perspective+px;if(cache.zOrigin=parseFloat(origin.split(" ")[2])||0){style[_transformOriginProp]=_firstTwoOnly(origin);}cache.xOffset=cache.yOffset=0;cache.force3D=_config.force3D;cache.renderTransform=cache.svg?_renderSVGTransforms:_supports3D?_renderCSSTransforms:_renderNon3DTransforms;cache.uncache=0;return cache;};var _firstTwoOnly=function _firstTwoOnly2(value){return(value=value.split(" "))[0]+" "+value[1];};var _addPxTranslate=function _addPxTranslate2(target,start2,value){var unit=getUnit(start2);return _round(parseFloat(start2)+parseFloat(_convertToUnit(target,"x",value+"px",unit)))+unit;};var _renderNon3DTransforms=function _renderNon3DTransforms2(ratio,cache){cache.z="0px";cache.rotationY=cache.rotationX="0deg";cache.force3D=0;_renderCSSTransforms(ratio,cache);};var _zeroDeg="0deg";var _zeroPx="0px";var _endParenthesis=") ";var _renderCSSTransforms=function _renderCSSTransforms2(ratio,cache){var _ref=cache||this,xPercent=_ref.xPercent,yPercent=_ref.yPercent,x=_ref.x,y=_ref.y,z=_ref.z,rotation=_ref.rotation,rotationY=_ref.rotationY,rotationX=_ref.rotationX,skewX=_ref.skewX,skewY=_ref.skewY,scaleX=_ref.scaleX,scaleY=_ref.scaleY,transformPerspective=_ref.transformPerspective,force3D=_ref.force3D,target=_ref.target,zOrigin=_ref.zOrigin,transforms="",use3D=force3D==="auto"&&ratio&&ratio!==1||force3D===true;if(zOrigin&&(rotationX!==_zeroDeg||rotationY!==_zeroDeg)){var angle=parseFloat(rotationY)*_DEG2RAD,a13=Math.sin(angle),a33=Math.cos(angle),cos;angle=parseFloat(rotationX)*_DEG2RAD;cos=Math.cos(angle);x=_addPxTranslate(target,x,a13*cos*-zOrigin);y=_addPxTranslate(target,y,-Math.sin(angle)*-zOrigin);z=_addPxTranslate(target,z,a33*cos*-zOrigin+zOrigin);}if(transformPerspective!==_zeroPx){transforms+="perspective("+transformPerspective+_endParenthesis;}if(xPercent||yPercent){transforms+="translate("+xPercent+"%, "+yPercent+"%) ";}if(use3D||x!==_zeroPx||y!==_zeroPx||z!==_zeroPx){transforms+=z!==_zeroPx||use3D?"translate3d("+x+", "+y+", "+z+") ":"translate("+x+", "+y+_endParenthesis;}if(rotation!==_zeroDeg){transforms+="rotate("+rotation+_endParenthesis;}if(rotationY!==_zeroDeg){transforms+="rotateY("+rotationY+_endParenthesis;}if(rotationX!==_zeroDeg){transforms+="rotateX("+rotationX+_endParenthesis;}if(skewX!==_zeroDeg||skewY!==_zeroDeg){transforms+="skew("+skewX+", "+skewY+_endParenthesis;}if(scaleX!==1||scaleY!==1){transforms+="scale("+scaleX+", "+scaleY+_endParenthesis;}target.style[_transformProp]=transforms||"translate(0, 0)";};var _renderSVGTransforms=function _renderSVGTransforms2(ratio,cache){var _ref2=cache||this,xPercent=_ref2.xPercent,yPercent=_ref2.yPercent,x=_ref2.x,y=_ref2.y,rotation=_ref2.rotation,skewX=_ref2.skewX,skewY=_ref2.skewY,scaleX=_ref2.scaleX,scaleY=_ref2.scaleY,target=_ref2.target,xOrigin=_ref2.xOrigin,yOrigin=_ref2.yOrigin,xOffset=_ref2.xOffset,yOffset=_ref2.yOffset,forceCSS=_ref2.forceCSS,tx=parseFloat(x),ty=parseFloat(y),a11,a21,a12,a22,temp;rotation=parseFloat(rotation);skewX=parseFloat(skewX);skewY=parseFloat(skewY);if(skewY){skewY=parseFloat(skewY);skewX+=skewY;rotation+=skewY;}if(rotation||skewX){rotation*=_DEG2RAD;skewX*=_DEG2RAD;a11=Math.cos(rotation)*scaleX;a21=Math.sin(rotation)*scaleX;a12=Math.sin(rotation-skewX)*-scaleY;a22=Math.cos(rotation-skewX)*scaleY;if(skewX){skewY*=_DEG2RAD;temp=Math.tan(skewX-skewY);temp=Math.sqrt(1+temp*temp);a12*=temp;a22*=temp;if(skewY){temp=Math.tan(skewY);temp=Math.sqrt(1+temp*temp);a11*=temp;a21*=temp;}}a11=_round(a11);a21=_round(a21);a12=_round(a12);a22=_round(a22);}else{a11=scaleX;a22=scaleY;a21=a12=0;}if(tx&&!~(x+"").indexOf("px")||ty&&!~(y+"").indexOf("px")){tx=_convertToUnit(target,"x",x,"px");ty=_convertToUnit(target,"y",y,"px");}if(xOrigin||yOrigin||xOffset||yOffset){tx=_round(tx+xOrigin-(xOrigin*a11+yOrigin*a12)+xOffset);ty=_round(ty+yOrigin-(xOrigin*a21+yOrigin*a22)+yOffset);}if(xPercent||yPercent){temp=target.getBBox();tx=_round(tx+xPercent/100*temp.width);ty=_round(ty+yPercent/100*temp.height);}temp="matrix("+a11+","+a21+","+a12+","+a22+","+tx+","+ty+")";target.setAttribute("transform",temp);forceCSS&&(target.style[_transformProp]=temp);};var _addRotationalPropTween=function _addRotationalPropTween2(plugin,target,property,startNum,endValue){var cap=360,isString=_isString(endValue),endNum=parseFloat(endValue)*(isString&&~endValue.indexOf("rad")?_RAD2DEG:1),change=endNum-startNum,finalValue=startNum+change+"deg",direction,pt;if(isString){direction=endValue.split("_")[1];if(direction==="short"){change%=cap;if(change!==change%(cap/2)){change+=change<0?cap:-cap;}}if(direction==="cw"&&change<0){change=(change+cap*_bigNum2)%cap-~~(change/cap)*cap;}else if(direction==="ccw"&&change>0){change=(change-cap*_bigNum2)%cap-~~(change/cap)*cap;}}plugin._pt=pt=new PropTween(plugin._pt,target,property,startNum,change,_renderPropWithEnd);pt.e=finalValue;pt.u="deg";plugin._props.push(property);return pt;};var _assign=function _assign2(target,source){for(var p in source){target[p]=source[p];}return target;};var _addRawTransformPTs=function _addRawTransformPTs2(plugin,transforms,target){var startCache=_assign({},target._gsap),exclude="perspective,force3D,transformOrigin,svgOrigin",style=target.style,endCache,p,startValue,endValue,startNum,endNum,startUnit,endUnit;if(startCache.svg){startValue=target.getAttribute("transform");target.setAttribute("transform","");style[_transformProp]=transforms;endCache=_parseTransform(target,1);_removeProperty(target,_transformProp);target.setAttribute("transform",startValue);}else{startValue=getComputedStyle(target)[_transformProp];style[_transformProp]=transforms;endCache=_parseTransform(target,1);style[_transformProp]=startValue;}for(p in _transformProps){startValue=startCache[p];endValue=endCache[p];if(startValue!==endValue&&exclude.indexOf(p)<0){startUnit=getUnit(startValue);endUnit=getUnit(endValue);startNum=startUnit!==endUnit?_convertToUnit(target,p,startValue,endUnit):parseFloat(startValue);endNum=parseFloat(endValue);plugin._pt=new PropTween(plugin._pt,endCache,p,startNum,endNum-startNum,_renderCSSProp);plugin._pt.u=endUnit||0;plugin._props.push(p);}}_assign(endCache,startCache);};_forEachName("padding,margin,Width,Radius",function(name,index){var t2="Top",r2="Right",b="Bottom",l="Left",props=(index<3?[t2,r2,b,l]:[t2+l,t2+r2,b+r2,b+l]).map(function(side){return index<2?name+side:"border"+side+name;});_specialProps[index>1?"border"+name:name]=function(plugin,target,property,endValue,tween){var a,vars;if(arguments.length<4){a=props.map(function(prop){return _get(plugin,prop,property);});vars=a.join(" ");return vars.split(a[0]).length===5?a[0]:vars;}a=(endValue+"").split(" ");vars={};props.forEach(function(prop,i){return vars[prop]=a[i]=a[i]||a[(i-1)/2|0];});plugin.init(target,vars,tween);};});var CSSPlugin={name:"css",register:_initCore,targetTest:function targetTest(target){return target.style&&target.nodeType;},init:function init3(target,vars,tween,index,targets){var props=this._props,style=target.style,startAt=tween.vars.startAt,startValue,endValue,endNum,startNum,type2,specialProp,p,startUnit,endUnit,relative,isTransformRelated,transformPropTween,cache,smooth,hasPriority;_pluginInitted||_initCore();for(p in vars){if(p==="autoRound"){continue;}endValue=vars[p];if(_plugins[p]&&_checkPlugin(p,vars,tween,index,target,targets)){continue;}type2=_typeof(endValue);specialProp=_specialProps[p];if(type2==="function"){endValue=endValue.call(tween,index,target,targets);type2=_typeof(endValue);}if(type2==="string"&&~endValue.indexOf("random(")){endValue=_replaceRandom(endValue);}if(specialProp){specialProp(this,target,p,endValue,tween)&&(hasPriority=1);}else if(p.substr(0,2)==="--"){startValue=(getComputedStyle(target).getPropertyValue(p)+"").trim();endValue+="";_colorExp.lastIndex=0;if(!_colorExp.test(startValue)){startUnit=getUnit(startValue);endUnit=getUnit(endValue);}endUnit?startUnit!==endUnit&&(startValue=_convertToUnit(target,p,startValue,endUnit)+endUnit):startUnit&&(endValue+=startUnit);this.add(style,"setProperty",startValue,endValue,index,targets,0,0,p);props.push(p);}else if(type2!=="undefined"){if(startAt&&p in startAt){startValue=typeof startAt[p]==="function"?startAt[p].call(tween,index,target,targets):startAt[p];_isString(startValue)&&~startValue.indexOf("random(")&&(startValue=_replaceRandom(startValue));getUnit(startValue+"")||(startValue+=_config.units[p]||getUnit(_get(target,p))||"");(startValue+"").charAt(1)==="="&&(startValue=_get(target,p));}else{startValue=_get(target,p);}startNum=parseFloat(startValue);relative=type2==="string"&&endValue.charAt(1)==="="&&endValue.substr(0,2);relative&&(endValue=endValue.substr(2));endNum=parseFloat(endValue);if(p in _propertyAliases){if(p==="autoAlpha"){if(startNum===1&&_get(target,"visibility")==="hidden"&&endNum){startNum=0;}_addNonTweeningPT(this,style,"visibility",startNum?"inherit":"hidden",endNum?"inherit":"hidden",!endNum);}if(p!=="scale"&&p!=="transform"){p=_propertyAliases[p];~p.indexOf(",")&&(p=p.split(",")[0]);}}isTransformRelated=p in _transformProps;if(isTransformRelated){if(!transformPropTween){cache=target._gsap;cache.renderTransform&&!vars.parseTransform||_parseTransform(target,vars.parseTransform);smooth=vars.smoothOrigin!==false&&cache.smooth;transformPropTween=this._pt=new PropTween(this._pt,style,_transformProp,0,1,cache.renderTransform,cache,0,-1);transformPropTween.dep=1;}if(p==="scale"){this._pt=new PropTween(this._pt,cache,"scaleY",cache.scaleY,(relative?_parseRelative(cache.scaleY,relative+endNum):endNum)-cache.scaleY||0);props.push("scaleY",p);p+="X";}else if(p==="transformOrigin"){endValue=_convertKeywordsToPercentages(endValue);if(cache.svg){_applySVGOrigin(target,endValue,0,smooth,0,this);}else{endUnit=parseFloat(endValue.split(" ")[2])||0;endUnit!==cache.zOrigin&&_addNonTweeningPT(this,cache,"zOrigin",cache.zOrigin,endUnit);_addNonTweeningPT(this,style,p,_firstTwoOnly(startValue),_firstTwoOnly(endValue));}continue;}else if(p==="svgOrigin"){_applySVGOrigin(target,endValue,1,smooth,0,this);continue;}else if(p in _rotationalProperties){_addRotationalPropTween(this,cache,p,startNum,relative?_parseRelative(startNum,relative+endValue):endValue);continue;}else if(p==="smoothOrigin"){_addNonTweeningPT(this,cache,"smooth",cache.smooth,endValue);continue;}else if(p==="force3D"){cache[p]=endValue;continue;}else if(p==="transform"){_addRawTransformPTs(this,endValue,target);continue;}}else if(!(p in style)){p=_checkPropPrefix(p)||p;}if(isTransformRelated||(endNum||endNum===0)&&(startNum||startNum===0)&&!_complexExp.test(endValue)&&p in style){startUnit=(startValue+"").substr((startNum+"").length);endNum||(endNum=0);endUnit=getUnit(endValue)||(p in _config.units?_config.units[p]:startUnit);startUnit!==endUnit&&(startNum=_convertToUnit(target,p,startValue,endUnit));this._pt=new PropTween(this._pt,isTransformRelated?cache:style,p,startNum,(relative?_parseRelative(startNum,relative+endNum):endNum)-startNum,!isTransformRelated&&(endUnit==="px"||p==="zIndex")&&vars.autoRound!==false?_renderRoundedCSSProp:_renderCSSProp);this._pt.u=endUnit||0;if(startUnit!==endUnit&&endUnit!=="%"){this._pt.b=startValue;this._pt.r=_renderCSSPropWithBeginning;}}else if(!(p in style)){if(p in target){this.add(target,p,startValue||target[p],relative?relative+endValue:endValue,index,targets);}else{_missingPlugin(p,endValue);continue;}}else{_tweenComplexCSSString.call(this,target,p,startValue,relative?relative+endValue:endValue);}props.push(p);}}hasPriority&&_sortPropTweensByPriority(this);},get:_get,aliases:_propertyAliases,getSetter:function getSetter(target,property,plugin){var p=_propertyAliases[property];p&&p.indexOf(",")<0&&(property=p);return property in _transformProps&&property!==_transformOriginProp&&(target._gsap.x||_get(target,"x"))?plugin&&_recentSetterPlugin===plugin?property==="scale"?_setterScale:_setterTransform:(_recentSetterPlugin=plugin||{})&&(property==="scale"?_setterScaleWithRender:_setterTransformWithRender):target.style&&!_isUndefined(target.style[property])?_setterCSSStyle:~property.indexOf("-")?_setterCSSProp:_getSetter(target,property);},core:{_removeProperty:_removeProperty,_getMatrix:_getMatrix}};gsap.utils.checkPrefix=_checkPropPrefix;(function(positionAndScale,rotation,others,aliases){var all=_forEachName(positionAndScale+","+rotation+","+others,function(name){_transformProps[name]=1;});_forEachName(rotation,function(name){_config.units[name]="deg";_rotationalProperties[name]=1;});_propertyAliases[all[13]]=positionAndScale+","+rotation;_forEachName(aliases,function(name){var split=name.split(":");_propertyAliases[split[1]]=all[split[0]];});})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");_forEachName("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(name){_config.units[name]="px";});gsap.registerPlugin(CSSPlugin);// node_modules/gsap/index.js
var gsapWithCSS=gsap.registerPlugin(CSSPlugin)||gsap;var TweenMaxWithCSS=gsapWithCSS.core.Tween;// node_modules/gsap/ScrollToPlugin.js
var gsap2;var _coreInitted2;var _window;var _docEl;var _body;var _toArray;var _config2;var _windowExists5=function _windowExists6(){return typeof window!=="undefined";};var _getGSAP=function _getGSAP2(){return gsap2||_windowExists5()&&(gsap2=window.gsap)&&gsap2.registerPlugin&&gsap2;};var _isString3=function _isString4(value){return typeof value==="string";};var _isFunction3=function _isFunction4(value){return typeof value==="function";};var _max=function _max2(element,axis){var dim=axis==="x"?"Width":"Height",scroll="scroll"+dim,client="client"+dim;return element===_window||element===_docEl||element===_body?Math.max(_docEl[scroll],_body[scroll])-(_window["inner"+dim]||_docEl[client]||_body[client]):element[scroll]-element["offset"+dim];};var _buildGetter=function _buildGetter2(e,axis){var p="scroll"+(axis==="x"?"Left":"Top");if(e===_window){if(e.pageXOffset!=null){p="page"+axis.toUpperCase()+"Offset";}else{e=_docEl[p]!=null?_docEl:_body;}}return function(){return e[p];};};var _clean=function _clean2(value,index,target,targets){_isFunction3(value)&&(value=value(index,target,targets));if(_typeof(value)!=="object"){return _isString3(value)&&value!=="max"&&value.charAt(1)!=="="?{x:value,y:value}:{y:value};}else if(value.nodeType){return{y:value,x:value};}else{var result={},p;for(p in value){result[p]=p!=="onAutoKill"&&_isFunction3(value[p])?value[p](index,target,targets):value[p];}return result;}};var _getOffset=function _getOffset2(element,container){element=_toArray(element)[0];if(!element||!element.getBoundingClientRect){return console.warn("scrollTo target doesn't exist. Using 0")||{x:0,y:0};}var rect=element.getBoundingClientRect(),isRoot=!container||container===_window||container===_body,cRect=isRoot?{top:_docEl.clientTop-(_window.pageYOffset||_docEl.scrollTop||_body.scrollTop||0),left:_docEl.clientLeft-(_window.pageXOffset||_docEl.scrollLeft||_body.scrollLeft||0)}:container.getBoundingClientRect(),offsets={x:rect.left-cRect.left,y:rect.top-cRect.top};if(!isRoot&&container){offsets.x+=_buildGetter(container,"x")();offsets.y+=_buildGetter(container,"y")();}return offsets;};var _parseVal=function _parseVal2(value,target,axis,currentVal,offset){return!isNaN(value)&&_typeof(value)!=="object"?parseFloat(value)-offset:_isString3(value)&&value.charAt(1)==="="?parseFloat(value.substr(2))*(value.charAt(0)==="-"?-1:1)+currentVal-offset:value==="max"?_max(target,axis)-offset:Math.min(_max(target,axis),_getOffset(value,target)[axis]-offset);};var _initCore3=function _initCore4(){gsap2=_getGSAP();if(_windowExists5()&&gsap2&&document.body){_window=window;_body=document.body;_docEl=document.documentElement;_toArray=gsap2.utils.toArray;gsap2.config({autoKillThreshold:7});_config2=gsap2.config();_coreInitted2=1;}};var ScrollToPlugin={version:"3.10.4",name:"scrollTo",rawVars:1,register:function register(core){gsap2=core;_initCore3();},init:function init4(target,value,tween,index,targets){_coreInitted2||_initCore3();var data=this,snapType=gsap2.getProperty(target,"scrollSnapType");data.isWin=target===_window;data.target=target;data.tween=tween;value=_clean(value,index,target,targets);data.vars=value;data.autoKill=!!value.autoKill;data.getX=_buildGetter(target,"x");data.getY=_buildGetter(target,"y");data.x=data.xPrev=data.getX();data.y=data.yPrev=data.getY();if(snapType&&snapType!=="none"){data.snap=1;data.snapInline=target.style.scrollSnapType;target.style.scrollSnapType="none";}if(value.x!=null){data.add(data,"x",data.x,_parseVal(value.x,target,"x",data.x,value.offsetX||0),index,targets);data._props.push("scrollTo_x");}else{data.skipX=1;}if(value.y!=null){data.add(data,"y",data.y,_parseVal(value.y,target,"y",data.y,value.offsetY||0),index,targets);data._props.push("scrollTo_y");}else{data.skipY=1;}},render:function render(ratio,data){var pt=data._pt,target=data.target,tween=data.tween,autoKill=data.autoKill,xPrev=data.xPrev,yPrev=data.yPrev,isWin=data.isWin,snap3=data.snap,snapInline=data.snapInline,x,y,yDif,xDif,threshold;while(pt){pt.r(ratio,pt.d);pt=pt._next;}x=isWin||!data.skipX?data.getX():xPrev;y=isWin||!data.skipY?data.getY():yPrev;yDif=y-yPrev;xDif=x-xPrev;threshold=_config2.autoKillThreshold;if(data.x<0){data.x=0;}if(data.y<0){data.y=0;}if(autoKill){if(!data.skipX&&(xDif>threshold||xDif<-threshold)&&x<_max(target,"x")){data.skipX=1;}if(!data.skipY&&(yDif>threshold||yDif<-threshold)&&y<_max(target,"y")){data.skipY=1;}if(data.skipX&&data.skipY){tween.kill();data.vars.onAutoKill&&data.vars.onAutoKill.apply(tween,data.vars.onAutoKillParams||[]);}}if(isWin){_window.scrollTo(!data.skipX?data.x:x,!data.skipY?data.y:y);}else{data.skipY||(target.scrollTop=data.y);data.skipX||(target.scrollLeft=data.x);}if(snap3&&(ratio===1||ratio===0)){y=target.scrollTop;x=target.scrollLeft;snapInline?target.style.scrollSnapType=snapInline:target.style.removeProperty("scroll-snap-type");target.scrollTop=y+1;target.scrollLeft=x+1;target.scrollTop=y;target.scrollLeft=x;}data.xPrev=data.x;data.yPrev=data.y;},kill:function kill(property){var both=property==="scrollTo";if(both||property==="scrollTo_x"){this.skipX=1;}if(both||property==="scrollTo_y"){this.skipY=1;}}};ScrollToPlugin.max=_max;ScrollToPlugin.getOffset=_getOffset;ScrollToPlugin.buildGetter=_buildGetter;_getGSAP()&&gsap2.registerPlugin(ScrollToPlugin);// node_modules/gsap/Observer.js
function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}var gsap3;var _coreInitted3;var _clamp3;var _win3;var _doc3;var _docEl2;var _body2;var _isTouch;var _pointerType;var ScrollTrigger;var _root;var _normalizer;var _eventTypes;var _getGSAP3=function _getGSAP4(){return gsap3||typeof window!=="undefined"&&(gsap3=window.gsap)&&gsap3.registerPlugin&&gsap3;};var _startup=1;var _observers=[];var _scrollers=[];var _proxies=[];var _getTime=Date.now;var _bridge=function _bridge2(name,value){return value;};var _integrate=function _integrate2(){var core=ScrollTrigger.core,data=core.bridge||{},scrollers=core._scrollers,proxies=core._proxies;scrollers.push.apply(scrollers,_scrollers);proxies.push.apply(proxies,_proxies);_scrollers=scrollers;_proxies=proxies;_bridge=function _bridge3(name,value){return data[name](value);};};var _getProxyProp=function _getProxyProp2(element,property){return~_proxies.indexOf(element)&&_proxies[_proxies.indexOf(element)+1][property];};var _isViewport=function _isViewport2(el){return!!~_root.indexOf(el);};var _addListener=function _addListener2(element,type2,func,nonPassive,capture){return element.addEventListener(type2,func,{passive:!nonPassive,capture:!!capture});};var _removeListener=function _removeListener2(element,type2,func,capture){return element.removeEventListener(type2,func,!!capture);};var _scrollLeft="scrollLeft";var _scrollTop="scrollTop";var _onScroll=function _onScroll2(){return _normalizer&&_normalizer.isPressed||_scrollers.cache++;};var _scrollCacheFunc=function _scrollCacheFunc2(f,doNotCache){var cachingFunc=function cachingFunc2(value){if(value||value===0){_startup&&(_win3.history.scrollRestoration="manual");var isNormalizing=_normalizer&&_normalizer.isPressed;value=cachingFunc2.v=Math.round(value)||(_normalizer&&_normalizer.iOS?1:0);f(value);cachingFunc2.cacheID=_scrollers.cache;isNormalizing&&_bridge("ss",value);}else if(doNotCache||_scrollers.cache!==cachingFunc2.cacheID||_bridge("ref")){cachingFunc2.cacheID=_scrollers.cache;cachingFunc2.v=f();}return cachingFunc2.v+cachingFunc2.offset;};cachingFunc.offset=0;return f&&cachingFunc;};var _horizontal={s:_scrollLeft,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:_scrollCacheFunc(function(value){return arguments.length?_win3.scrollTo(value,_vertical.sc()):_win3.pageXOffset||_doc3[_scrollLeft]||_docEl2[_scrollLeft]||_body2[_scrollLeft]||0;})};var _vertical={s:_scrollTop,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:_horizontal,sc:_scrollCacheFunc(function(value){return arguments.length?_win3.scrollTo(_horizontal.sc(),value):_win3.pageYOffset||_doc3[_scrollTop]||_docEl2[_scrollTop]||_body2[_scrollTop]||0;})};var _getTarget=function _getTarget2(t2){return gsap3.utils.toArray(t2)[0]||(typeof t2==="string"&&gsap3.config().nullTargetWarn!==false?console.warn("Element not found:",t2):null);};var _getScrollFunc=function _getScrollFunc2(element,_ref){var s=_ref.s,sc=_ref.sc;var i=_scrollers.indexOf(element),offset=sc===_vertical.sc?1:2;!~i&&(i=_scrollers.push(element)-1);return _scrollers[i+offset]||(_scrollers[i+offset]=_scrollCacheFunc(_getProxyProp(element,s),true)||(_isViewport(element)?sc:_scrollCacheFunc(function(value){return arguments.length?element[s]=value:element[s];})));};var _getVelocityProp=function _getVelocityProp2(value,minTimeRefresh,useDelta){var v1=value,v2=value,t1=_getTime(),t2=t1,min=minTimeRefresh||50,dropToZeroTime=Math.max(500,min*3),update2=function update3(value2,force){var t3=_getTime();if(force||t3-t1>min){v2=v1;v1=value2;t2=t1;t1=t3;}else if(useDelta){v1+=value2;}else{v1=v2+(value2-v2)/(t3-t2)*(t1-t2);}},reset3=function reset4(){v2=v1=useDelta?0:v1;t2=t1=0;},getVelocity=function getVelocity2(latestValue){var tOld=t2,vOld=v2,t3=_getTime();(latestValue||latestValue===0)&&latestValue!==v1&&update2(latestValue);return t1===t2||t3-t2>dropToZeroTime?0:(v1+(useDelta?vOld:-vOld))/((useDelta?t3:t1)-tOld)*1e3;};return{update:update2,reset:reset3,getVelocity:getVelocity};};var _getEvent=function _getEvent2(e,preventDefault){preventDefault&&!e._gsapAllow&&e.preventDefault();return e.changedTouches?e.changedTouches[0]:e;};var _getAbsoluteMax=function _getAbsoluteMax2(a){var max=Math.max.apply(Math,a),min=Math.min.apply(Math,a);return Math.abs(max)>=Math.abs(min)?max:min;};var _setScrollTrigger=function _setScrollTrigger2(){ScrollTrigger=gsap3.core.globals().ScrollTrigger;ScrollTrigger&&ScrollTrigger.core&&_integrate();};var _initCore5=function _initCore6(core){gsap3=core||_getGSAP3();if(gsap3&&typeof document!=="undefined"&&document.body){_win3=window;_doc3=document;_docEl2=_doc3.documentElement;_body2=_doc3.body;_root=[_win3,_doc3,_docEl2,_body2];_clamp3=gsap3.utils.clamp;_pointerType="onpointerenter"in _body2?"pointer":"mouse";_isTouch=Observer.isTouch=_win3.matchMedia&&_win3.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in _win3||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?2:0;_eventTypes=Observer.eventTypes=("ontouchstart"in _docEl2?"touchstart,touchmove,touchcancel,touchend":!("onpointerdown"in _docEl2)?"mousedown,mousemove,mouseup,mouseup":"pointerdown,pointermove,pointercancel,pointerup").split(",");setTimeout(function(){return _startup=0;},500);_setScrollTrigger();_coreInitted3=1;}return _coreInitted3;};_horizontal.op=_vertical;_scrollers.cache=0;var Observer=/* @__PURE__ */function(){function Observer2(vars){this.init(vars);}var _proto=Observer2.prototype;_proto.init=function init5(vars){_coreInitted3||_initCore5(gsap3)||console.warn("Please gsap.registerPlugin(Observer)");ScrollTrigger||_setScrollTrigger();var tolerance=vars.tolerance,dragMinimum=vars.dragMinimum,type2=vars.type,target=vars.target,lineHeight=vars.lineHeight,debounce5=vars.debounce,preventDefault=vars.preventDefault,onStop=vars.onStop,onStopDelay=vars.onStopDelay,ignore=vars.ignore,wheelSpeed=vars.wheelSpeed,event=vars.event,onDragStart=vars.onDragStart,onDragEnd=vars.onDragEnd,onDrag=vars.onDrag,onPress=vars.onPress,onRelease=vars.onRelease,onRight=vars.onRight,onLeft=vars.onLeft,onUp=vars.onUp,onDown=vars.onDown,onChangeX=vars.onChangeX,onChangeY=vars.onChangeY,onChange=vars.onChange,onToggleX=vars.onToggleX,onToggleY=vars.onToggleY,onHover=vars.onHover,onHoverEnd=vars.onHoverEnd,onMove=vars.onMove,ignoreCheck=vars.ignoreCheck,isNormalizer=vars.isNormalizer,onGestureStart=vars.onGestureStart,onGestureEnd=vars.onGestureEnd,onWheel=vars.onWheel,onEnable=vars.onEnable,onDisable=vars.onDisable,onClick=vars.onClick,scrollSpeed=vars.scrollSpeed,capture=vars.capture,allowClicks=vars.allowClicks,lockAxis=vars.lockAxis,onLockAxis=vars.onLockAxis;this.target=target=_getTarget(target)||_docEl2;this.vars=vars;ignore&&(ignore=gsap3.utils.toArray(ignore));tolerance=tolerance||0;dragMinimum=dragMinimum||0;wheelSpeed=wheelSpeed||1;scrollSpeed=scrollSpeed||1;type2=type2||"wheel,touch,pointer";debounce5=debounce5!==false;lineHeight||(lineHeight=parseFloat(_win3.getComputedStyle(_body2).lineHeight)||22);var id,onStopDelayedCall,dragged,moved,wheeled,locked,axis,self2=this,prevDeltaX=0,prevDeltaY=0,scrollFuncX=_getScrollFunc(target,_horizontal),scrollFuncY=_getScrollFunc(target,_vertical),scrollX=scrollFuncX(),scrollY=scrollFuncY(),limitToTouch=~type2.indexOf("touch")&&!~type2.indexOf("pointer")&&_eventTypes[0]==="pointerdown",isViewport=_isViewport(target),ownerDoc=target.ownerDocument||_doc3,deltaX=[0,0,0],deltaY=[0,0,0],onClickTime=0,clickCapture=function clickCapture2(){return onClickTime=_getTime();},_ignoreCheck=function _ignoreCheck2(e,isPointerOrTouch){return(self2.event=e)&&ignore&&~ignore.indexOf(e.target)||isPointerOrTouch&&limitToTouch&&e.pointerType!=="touch"||ignoreCheck&&ignoreCheck(e,isPointerOrTouch);},onStopFunc=function onStopFunc2(){self2._vx.reset();self2._vy.reset();onStopDelayedCall.pause();onStop&&onStop(self2);},update2=function update3(){var dx=self2.deltaX=_getAbsoluteMax(deltaX),dy=self2.deltaY=_getAbsoluteMax(deltaY),changedX=Math.abs(dx)>=tolerance,changedY=Math.abs(dy)>=tolerance;onChange&&(changedX||changedY)&&onChange(self2,dx,dy,deltaX,deltaY);if(changedX){onRight&&self2.deltaX>0&&onRight(self2);onLeft&&self2.deltaX<0&&onLeft(self2);onChangeX&&onChangeX(self2);onToggleX&&self2.deltaX<0!==prevDeltaX<0&&onToggleX(self2);prevDeltaX=self2.deltaX;deltaX[0]=deltaX[1]=deltaX[2]=0;}if(changedY){onDown&&self2.deltaY>0&&onDown(self2);onUp&&self2.deltaY<0&&onUp(self2);onChangeY&&onChangeY(self2);onToggleY&&self2.deltaY<0!==prevDeltaY<0&&onToggleY(self2);prevDeltaY=self2.deltaY;deltaY[0]=deltaY[1]=deltaY[2]=0;}if(moved||dragged){onMove&&onMove(self2);onLockAxis&&locked&&onLockAxis(self2);if(dragged){onDrag(self2);dragged=false;}moved=locked=false;}if(wheeled){onWheel(self2);wheeled=false;}id=0;},onDelta=function onDelta2(x,y,index){deltaX[index]+=x;deltaY[index]+=y;self2._vx.update(x);self2._vy.update(y);debounce5?id||(id=requestAnimationFrame(update2)):update2();},onTouchOrPointerDelta=function onTouchOrPointerDelta2(x,y){if(axis!=="y"){deltaX[2]+=x;self2._vx.update(x,true);}if(axis!=="x"){deltaY[2]+=y;self2._vy.update(y,true);}if(lockAxis&&!axis){self2.axis=axis=Math.abs(x)>Math.abs(y)?"x":"y";locked=true;}debounce5?id||(id=requestAnimationFrame(update2)):update2();},_onDrag=function _onDrag2(e){if(_ignoreCheck(e,1)){return;}e=_getEvent(e,preventDefault);var x=e.clientX,y=e.clientY,dx=x-self2.x,dy=y-self2.y,isDragging=self2.isDragging;self2.x=x;self2.y=y;if(isDragging||Math.abs(self2.startX-x)>=dragMinimum||Math.abs(self2.startY-y)>=dragMinimum){onDrag&&(dragged=true);isDragging||(self2.isDragging=true);onTouchOrPointerDelta(dx,dy);isDragging||onDragStart&&onDragStart(self2);}},_onPress=self2.onPress=function(e){if(_ignoreCheck(e,1)){return;}self2.axis=axis=null;onStopDelayedCall.pause();self2.isPressed=true;e=_getEvent(e);prevDeltaX=prevDeltaY=0;self2.startX=self2.x=e.clientX;self2.startY=self2.y=e.clientY;self2._vx.reset();self2._vy.reset();_addListener(isNormalizer?target:ownerDoc,_eventTypes[1],_onDrag,preventDefault,true);self2.deltaX=self2.deltaY=0;onPress&&onPress(self2);},_onRelease=function _onRelease2(e){if(_ignoreCheck(e,1)){return;}_removeListener(isNormalizer?target:ownerDoc,_eventTypes[1],_onDrag,true);var wasDragging=self2.isDragging&&(Math.abs(self2.x-self2.startX)>3||Math.abs(self2.y-self2.startY)>3),eventData=_getEvent(e);if(!wasDragging){self2._vx.reset();self2._vy.reset();if(preventDefault&&allowClicks){gsap3.delayedCall(0.08,function(){if(_getTime()-onClickTime>300&&!e.defaultPrevented){if(e.target.click){e.target.click();}else if(ownerDoc.createEvent){var syntheticEvent=ownerDoc.createEvent("MouseEvents");syntheticEvent.initMouseEvent("click",true,true,_win3,1,eventData.screenX,eventData.screenY,eventData.clientX,eventData.clientY,false,false,false,false,0,null);e.target.dispatchEvent(syntheticEvent);}}});}}self2.isDragging=self2.isGesturing=self2.isPressed=false;onStop&&!isNormalizer&&onStopDelayedCall.restart(true);onDragEnd&&wasDragging&&onDragEnd(self2);onRelease&&onRelease(self2,wasDragging);},_onGestureStart=function _onGestureStart2(e){return e.touches&&e.touches.length>1&&(self2.isGesturing=true)&&onGestureStart(e,self2.isDragging);},_onGestureEnd=function _onGestureEnd2(){return(self2.isGesturing=false)||onGestureEnd(self2);},onScroll=function onScroll2(e){if(_ignoreCheck(e)){return;}var x=scrollFuncX(),y=scrollFuncY();onDelta((x-scrollX)*scrollSpeed,(y-scrollY)*scrollSpeed,1);scrollX=x;scrollY=y;onStop&&onStopDelayedCall.restart(true);},_onWheel=function _onWheel2(e){if(_ignoreCheck(e)){return;}e=_getEvent(e,preventDefault);onWheel&&(wheeled=true);var multiplier=(e.deltaMode===1?lineHeight:e.deltaMode===2?_win3.innerHeight:1)*wheelSpeed;onDelta(e.deltaX*multiplier,e.deltaY*multiplier,0);onStop&&!isNormalizer&&onStopDelayedCall.restart(true);},_onMove=function _onMove2(e){if(_ignoreCheck(e)){return;}var x=e.clientX,y=e.clientY,dx=x-self2.x,dy=y-self2.y;self2.x=x;self2.y=y;moved=true;(dx||dy)&&onTouchOrPointerDelta(dx,dy);},_onHover=function _onHover2(e){self2.event=e;onHover(self2);},_onHoverEnd=function _onHoverEnd2(e){self2.event=e;onHoverEnd(self2);},_onClick=function _onClick2(e){return _ignoreCheck(e)||_getEvent(e,preventDefault)&&onClick(self2);};onStopDelayedCall=self2._dc=gsap3.delayedCall(onStopDelay||0.25,onStopFunc).pause();self2.deltaX=self2.deltaY=0;self2._vx=_getVelocityProp(0,50,true);self2._vy=_getVelocityProp(0,50,true);self2.scrollX=scrollFuncX;self2.scrollY=scrollFuncY;self2.isDragging=self2.isGesturing=self2.isPressed=false;self2.enable=function(e){if(!self2.isEnabled){_addListener(isViewport?ownerDoc:target,"scroll",_onScroll);type2.indexOf("scroll")>=0&&_addListener(isViewport?ownerDoc:target,"scroll",onScroll,preventDefault,capture);type2.indexOf("wheel")>=0&&_addListener(target,"wheel",_onWheel,preventDefault,capture);if(type2.indexOf("touch")>=0&&_isTouch||type2.indexOf("pointer")>=0){_addListener(target,_eventTypes[0],_onPress,preventDefault,capture);_addListener(ownerDoc,_eventTypes[2],_onRelease);_addListener(ownerDoc,_eventTypes[3],_onRelease);allowClicks&&_addListener(target,"click",clickCapture,false,true);onClick&&_addListener(target,"click",_onClick);onGestureStart&&_addListener(ownerDoc,"gesturestart",_onGestureStart);onGestureEnd&&_addListener(ownerDoc,"gestureend",_onGestureEnd);onHover&&_addListener(target,_pointerType+"enter",_onHover);onHoverEnd&&_addListener(target,_pointerType+"leave",_onHoverEnd);onMove&&_addListener(target,_pointerType+"move",_onMove);}self2.isEnabled=true;e&&e.type&&_onPress(e);onEnable&&onEnable(self2);}return self2;};self2.disable=function(){if(self2.isEnabled){_observers.filter(function(o){return o!==self2&&_isViewport(o.target);}).length||_removeListener(isViewport?ownerDoc:target,"scroll",_onScroll);if(self2.isPressed){self2._vx.reset();self2._vy.reset();_removeListener(isNormalizer?target:ownerDoc,_eventTypes[1],_onDrag,true);}_removeListener(isViewport?ownerDoc:target,"scroll",onScroll,capture);_removeListener(target,"wheel",_onWheel,capture);_removeListener(target,_eventTypes[0],_onPress,capture);_removeListener(ownerDoc,_eventTypes[2],_onRelease);_removeListener(ownerDoc,_eventTypes[3],_onRelease);_removeListener(target,"click",clickCapture,true);_removeListener(target,"click",_onClick);_removeListener(ownerDoc,"gesturestart",_onGestureStart);_removeListener(ownerDoc,"gestureend",_onGestureEnd);_removeListener(target,_pointerType+"enter",_onHover);_removeListener(target,_pointerType+"leave",_onHoverEnd);_removeListener(target,_pointerType+"move",_onMove);self2.isEnabled=self2.isPressed=self2.isDragging=false;onDisable&&onDisable(self2);}};self2.kill=function(){self2.disable();var i=_observers.indexOf(self2);i>=0&&_observers.splice(i,1);_normalizer===self2&&(_normalizer=0);};_observers.push(self2);isNormalizer&&_isViewport(target)&&(_normalizer=self2);self2.enable(event);};_createClass(Observer2,[{key:"velocityX",get:function get7(){return this._vx.getVelocity();}},{key:"velocityY",get:function get7(){return this._vy.getVelocity();}}]);return Observer2;}();Observer.version="3.10.4";Observer.create=function(vars){return new Observer(vars);};Observer.register=_initCore5;Observer.getAll=function(){return _observers.slice();};Observer.getById=function(id){return _observers.filter(function(o){return o.vars.id===id;})[0];};_getGSAP3()&&gsap3.registerPlugin(Observer);// node_modules/gsap/ScrollTrigger.js
var gsap4;var _coreInitted4;var _win4;var _doc4;var _docEl3;var _body3;var _root2;var _resizeDelay;var _toArray2;var _clamp4;var _time2;var _syncInterval;var _refreshing;var _pointerIsDown;var _transformProp2;var _i;var _prevWidth;var _prevHeight;var _autoRefresh;var _sort;var _suppressOverwrites2;var _ignoreResize;var _normalizer2;var _ignoreMobileResize;var _baseScreenHeight;var _baseScreenWidth;var _fixIOSBug;var _limitCallbacks;var _startup2=1;var _getTime2=Date.now;var _time1=_getTime2();var _lastScrollTime=0;var _enabled=0;var _pointerDownHandler=function _pointerDownHandler2(){return _pointerIsDown=1;};var _pointerUpHandler=function _pointerUpHandler2(){return _pointerIsDown=0;};var _passThrough3=function _passThrough4(v){return v;};var _round3=function _round4(value){return Math.round(value*1e5)/1e5||0;};var _windowExists7=function _windowExists8(){return typeof window!=="undefined";};var _getGSAP5=function _getGSAP6(){return gsap4||_windowExists7()&&(gsap4=window.gsap)&&gsap4.registerPlugin&&gsap4;};var _isViewport3=function _isViewport4(e){return!!~_root2.indexOf(e);};var _getBoundsFunc=function _getBoundsFunc2(element){return _getProxyProp(element,"getBoundingClientRect")||(_isViewport3(element)?function(){_winOffsets.width=_win4.innerWidth;_winOffsets.height=_win4.innerHeight;return _winOffsets;}:function(){return _getBounds(element);});};var _getSizeFunc=function _getSizeFunc2(scroller,isViewport,_ref){var d2=_ref.d,d22=_ref.d2,a=_ref.a;return(a=_getProxyProp(scroller,"getBoundingClientRect"))?function(){return a()[d2];}:function(){return(isViewport?_win4["inner"+d22]:scroller["client"+d22])||0;};};var _getOffsetsFunc=function _getOffsetsFunc2(element,isViewport){return!isViewport||~_proxies.indexOf(element)?_getBoundsFunc(element):function(){return _winOffsets;};};var _maxScroll=function _maxScroll2(element,_ref2){var s=_ref2.s,d2=_ref2.d2,d3=_ref2.d,a=_ref2.a;return(s="scroll"+d2)&&(a=_getProxyProp(element,s))?a()-_getBoundsFunc(element)()[d3]:_isViewport3(element)?(_docEl3[s]||_body3[s])-(_win4["inner"+d2]||_docEl3["client"+d2]||_body3["client"+d2]):element[s]-element["offset"+d2];};var _iterateAutoRefresh=function _iterateAutoRefresh2(func,events){for(var i=0;i<_autoRefresh.length;i+=3){(!events||~events.indexOf(_autoRefresh[i+1]))&&func(_autoRefresh[i],_autoRefresh[i+1],_autoRefresh[i+2]);}};var _isString5=function _isString6(value){return typeof value==="string";};var _isFunction5=function _isFunction6(value){return typeof value==="function";};var _isNumber3=function _isNumber4(value){return typeof value==="number";};var _isObject3=function _isObject4(value){return _typeof(value)==="object";};var _callIfFunc=function _callIfFunc2(value){return _isFunction5(value)&&value();};var _combineFunc=function _combineFunc2(f1,f2){return function(){var result1=_callIfFunc(f1),result2=_callIfFunc(f2);return function(){_callIfFunc(result1);_callIfFunc(result2);};};};var _endAnimation=function _endAnimation2(animation,reversed,pause){return animation&&animation.progress(reversed?0:1)&&pause&&animation.pause();};var _callback3=function _callback4(self2,func){if(self2.enabled){var result=func(self2);result&&result.totalTime&&(self2.callbackAnimation=result);}};var _abs=Math.abs;var _left="left";var _top="top";var _right="right";var _bottom="bottom";var _width="width";var _height="height";var _Right="Right";var _Left="Left";var _Top="Top";var _Bottom="Bottom";var _padding="padding";var _margin="margin";var _Width="Width";var _Height="Height";var _px="px";var _getComputedStyle=function _getComputedStyle2(element){return _win4.getComputedStyle(element);};var _makePositionable=function _makePositionable2(element){var position=_getComputedStyle(element).position;element.style.position=position==="absolute"||position==="fixed"?position:"relative";};var _setDefaults3=function _setDefaults4(obj,defaults3){for(var p in defaults3){p in obj||(obj[p]=defaults3[p]);}return obj;};var _getBounds=function _getBounds2(element,withoutTransforms){var tween=withoutTransforms&&_getComputedStyle(element)[_transformProp2]!=="matrix(1, 0, 0, 1, 0, 0)"&&gsap4.to(element,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),bounds=element.getBoundingClientRect();tween&&tween.progress(0).kill();return bounds;};var _getSize=function _getSize2(element,_ref3){var d2=_ref3.d2;return element["offset"+d2]||element["client"+d2]||0;};var _getLabelRatioArray=function _getLabelRatioArray2(timeline2){var a=[],labels=timeline2.labels,duration5=timeline2.duration(),p;for(p in labels){a.push(labels[p]/duration5);}return a;};var _getClosestLabel=function _getClosestLabel2(animation){return function(value){return gsap4.utils.snap(_getLabelRatioArray(animation),value);};};var _snapDirectional=function _snapDirectional2(snapIncrementOrArray){var snap3=gsap4.utils.snap(snapIncrementOrArray),a=Array.isArray(snapIncrementOrArray)&&snapIncrementOrArray.slice(0).sort(function(a2,b){return a2-b;});return a?function(value,direction,threshold){if(threshold===void 0){threshold=1e-3;}var i;if(!direction){return snap3(value);}if(direction>0){value-=threshold;for(i=0;i<a.length;i++){if(a[i]>=value){return a[i];}}return a[i-1];}else{i=a.length;value+=threshold;while(i--){if(a[i]<=value){return a[i];}}}return a[0];}:function(value,direction,threshold){if(threshold===void 0){threshold=1e-3;}var snapped=snap3(value);return!direction||Math.abs(snapped-value)<threshold||snapped-value<0===direction<0?snapped:snap3(direction<0?value-snapIncrementOrArray:value+snapIncrementOrArray);};};var _getLabelAtDirection=function _getLabelAtDirection2(timeline2){return function(value,st){return _snapDirectional(_getLabelRatioArray(timeline2))(value,st.direction);};};var _multiListener=function _multiListener2(func,element,types,callback2){return types.split(",").forEach(function(type2){return func(element,type2,callback2);});};var _addListener3=function _addListener4(element,type2,func,nonPassive,capture){return element.addEventListener(type2,func,{passive:!nonPassive,capture:!!capture});};var _removeListener3=function _removeListener4(element,type2,func,capture){return element.removeEventListener(type2,func,!!capture);};var _wheelListener=function _wheelListener2(func,el,scrollFunc){return scrollFunc&&scrollFunc.wheelHandler&&func(el,"wheel",scrollFunc);};var _markerDefaults={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"};var _defaults2={toggleActions:"play",anticipatePin:0};var _keywords={top:0,left:0,center:0.5,bottom:1,right:1};var _offsetToPx=function _offsetToPx2(value,size){if(_isString5(value)){var eqIndex=value.indexOf("="),relative=~eqIndex?+(value.charAt(eqIndex-1)+1)*parseFloat(value.substr(eqIndex+1)):0;if(~eqIndex){value.indexOf("%")>eqIndex&&(relative*=size/100);value=value.substr(0,eqIndex-1);}value=relative+(value in _keywords?_keywords[value]*size:~value.indexOf("%")?parseFloat(value)*size/100:parseFloat(value)||0);}return value;};var _createMarker=function _createMarker2(type2,name,container,direction,_ref4,offset,matchWidthEl,containerAnimation){var startColor=_ref4.startColor,endColor=_ref4.endColor,fontSize=_ref4.fontSize,indent=_ref4.indent,fontWeight=_ref4.fontWeight;var e=_doc4.createElement("div"),useFixedPosition=_isViewport3(container)||_getProxyProp(container,"pinType")==="fixed",isScroller=type2.indexOf("scroller")!==-1,parent=useFixedPosition?_body3:container,isStart=type2.indexOf("start")!==-1,color=isStart?startColor:endColor,css="border-color:"+color+";font-size:"+fontSize+";color:"+color+";font-weight:"+fontWeight+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";css+="position:"+((isScroller||containerAnimation)&&useFixedPosition?"fixed;":"absolute;");(isScroller||containerAnimation||!useFixedPosition)&&(css+=(direction===_vertical?_right:_bottom)+":"+(offset+parseFloat(indent))+"px;");matchWidthEl&&(css+="box-sizing:border-box;text-align:left;width:"+matchWidthEl.offsetWidth+"px;");e._isStart=isStart;e.setAttribute("class","gsap-marker-"+type2+(name?" marker-"+name:""));e.style.cssText=css;e.innerText=name||name===0?type2+"-"+name:type2;parent.children[0]?parent.insertBefore(e,parent.children[0]):parent.appendChild(e);e._offset=e["offset"+direction.op.d2];_positionMarker(e,0,direction,isStart);return e;};var _positionMarker=function _positionMarker2(marker,start2,direction,flipped){var vars={display:"block"},side=direction[flipped?"os2":"p2"],oppositeSide=direction[flipped?"p2":"os2"];marker._isFlipped=flipped;vars[direction.a+"Percent"]=flipped?-100:0;vars[direction.a]=flipped?"1px":0;vars["border"+side+_Width]=1;vars["border"+oppositeSide+_Width]=0;vars[direction.p]=start2+"px";gsap4.set(marker,vars);};var _triggers=[];var _ids={};var _rafID;var _sync=function _sync2(){return _getTime2()-_lastScrollTime>34&&_updateAll();};var _onScroll3=function _onScroll4(){if(!_normalizer2||!_normalizer2.isPressed||_normalizer2.startX>_body3.clientWidth){_scrollers.cache++;_rafID||(_rafID=requestAnimationFrame(_updateAll));_lastScrollTime||_dispatch("scrollStart");_lastScrollTime=_getTime2();}};var _setBaseDimensions=function _setBaseDimensions2(){_baseScreenWidth=_win4.innerWidth;_baseScreenHeight=_win4.innerHeight;};var _onResize=function _onResize2(){_scrollers.cache++;!_refreshing&&!_ignoreResize&&!_doc4.fullscreenElement&&!_doc4.webkitFullscreenElement&&(!_ignoreMobileResize||_baseScreenWidth!==_win4.innerWidth||Math.abs(_win4.innerHeight-_baseScreenHeight)>_win4.innerHeight*0.25)&&_resizeDelay.restart(true);};var _listeners={};var _emptyArray=[];var _media=[];var _creatingMedia;var _lastMediaTick;var _onMediaChange=function _onMediaChange2(e){var tick=gsap4.ticker.frame,matches=[],i=0,index;if(_lastMediaTick!==tick||_startup2){_revertAll();for(;i<_media.length;i+=4){index=_win4.matchMedia(_media[i]).matches;if(index!==_media[i+3]){_media[i+3]=index;index?matches.push(i):_revertAll(1,_media[i])||_isFunction5(_media[i+2])&&_media[i+2]();}}_revertRecorded();for(i=0;i<matches.length;i++){index=matches[i];_creatingMedia=_media[index];_media[index+2]=_media[index+1](e);}_creatingMedia=0;_coreInitted4&&_refreshAll(0,1);_lastMediaTick=tick;_dispatch("matchMedia");}};var _softRefresh=function _softRefresh2(){return _removeListener3(ScrollTrigger2,"scrollEnd",_softRefresh2)||_refreshAll(true);};var _dispatch=function _dispatch2(type2){return _listeners[type2]&&_listeners[type2].map(function(f){return f();})||_emptyArray;};var _savedStyles=[];var _revertRecorded=function _revertRecorded2(media){for(var i=0;i<_savedStyles.length;i+=5){if(!media||_savedStyles[i+4]===media){_savedStyles[i].style.cssText=_savedStyles[i+1];_savedStyles[i].getBBox&&_savedStyles[i].setAttribute("transform",_savedStyles[i+2]||"");_savedStyles[i+3].uncache=1;}}};var _revertAll=function _revertAll2(kill2,media){var trigger2;for(_i=0;_i<_triggers.length;_i++){trigger2=_triggers[_i];if(!media||trigger2.media===media){if(kill2){trigger2.kill(1);}else{trigger2.revert();}}}media&&_revertRecorded(media);media||_dispatch("revert");};var _clearScrollMemory=function _clearScrollMemory2(){return _scrollers.cache++&&_scrollers.forEach(function(obj){return typeof obj==="function"&&(obj.rec=0);});};var _refreshingAll;var _refreshID=0;var _refreshAll=function _refreshAll2(force,skipRevert){if(_lastScrollTime&&!force){_addListener3(ScrollTrigger2,"scrollEnd",_softRefresh);return;}_refreshingAll=true;var refreshInits=_dispatch("refreshInit");_sort&&ScrollTrigger2.sort();skipRevert||_revertAll();_triggers.slice(0).forEach(function(t2){return t2.refresh();});_triggers.forEach(function(t2){return t2.vars.end==="max"&&t2.setPositions(t2.start,_maxScroll(t2.scroller,t2._dir));});refreshInits.forEach(function(result){return result&&result.render&&result.render(-1);});_clearScrollMemory();_resizeDelay.pause();_refreshID++;_refreshingAll=false;_dispatch("refresh");};var _lastScroll=0;var _direction=1;var _primary;var _updateAll=function _updateAll2(){if(!_refreshingAll){ScrollTrigger2.isUpdating=true;_primary&&_primary.update(0);var l=_triggers.length,time=_getTime2(),recordVelocity=time-_time1>=50,scroll=l&&_triggers[0].scroll();_direction=_lastScroll>scroll?-1:1;_lastScroll=scroll;if(recordVelocity){if(_lastScrollTime&&!_pointerIsDown&&time-_lastScrollTime>200){_lastScrollTime=0;_dispatch("scrollEnd");}_time2=_time1;_time1=time;}if(_direction<0){_i=l;while(_i-->0){_triggers[_i]&&_triggers[_i].update(0,recordVelocity);}_direction=1;}else{for(_i=0;_i<l;_i++){_triggers[_i]&&_triggers[_i].update(0,recordVelocity);}}ScrollTrigger2.isUpdating=false;}_rafID=0;};var _propNamesToCopy=[_left,_top,_bottom,_right,_margin+_Bottom,_margin+_Right,_margin+_Top,_margin+_Left,"display","flexShrink","float","zIndex","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridArea","justifySelf","alignSelf","placeSelf","order"];var _stateProps=_propNamesToCopy.concat([_width,_height,"boxSizing","max"+_Width,"max"+_Height,"position",_margin,_padding,_padding+_Top,_padding+_Right,_padding+_Bottom,_padding+_Left]);var _swapPinOut=function _swapPinOut2(pin2,spacer,state){_setState(state);var cache=pin2._gsap;if(cache.spacerIsNative){_setState(cache.spacerState);}else if(pin2.parentNode===spacer){var parent=spacer.parentNode;if(parent){parent.insertBefore(pin2,spacer);parent.removeChild(spacer);}}};var _swapPinIn=function _swapPinIn2(pin2,spacer,cs,spacerState){if(pin2.parentNode!==spacer){var i=_propNamesToCopy.length,spacerStyle=spacer.style,pinStyle=pin2.style,p;while(i--){p=_propNamesToCopy[i];spacerStyle[p]=cs[p];}spacerStyle.position=cs.position==="absolute"?"absolute":"relative";cs.display==="inline"&&(spacerStyle.display="inline-block");pinStyle[_bottom]=pinStyle[_right]=spacerStyle.flexBasis="auto";spacerStyle.overflow="visible";spacerStyle.boxSizing="border-box";spacerStyle[_width]=_getSize(pin2,_horizontal)+_px;spacerStyle[_height]=_getSize(pin2,_vertical)+_px;spacerStyle[_padding]=pinStyle[_margin]=pinStyle[_top]=pinStyle[_left]="0";_setState(spacerState);pinStyle[_width]=pinStyle["max"+_Width]=cs[_width];pinStyle[_height]=pinStyle["max"+_Height]=cs[_height];pinStyle[_padding]=cs[_padding];pin2.parentNode.insertBefore(spacer,pin2);spacer.appendChild(pin2);}};var _capsExp2=/([A-Z])/g;var _setState=function _setState2(state){if(state){var style=state.t.style,l=state.length,i=0,p,value;(state.t._gsap||gsap4.core.getCache(state.t)).uncache=1;for(;i<l;i+=2){value=state[i+1];p=state[i];if(value){style[p]=value;}else if(style[p]){style.removeProperty(p.replace(_capsExp2,"-$1").toLowerCase());}}}};var _getState=function _getState2(element){var l=_stateProps.length,style=element.style,state=[],i=0;for(;i<l;i++){state.push(_stateProps[i],style[_stateProps[i]]);}state.t=element;return state;};var _copyState=function _copyState2(state,override,omitOffsets){var result=[],l=state.length,i=omitOffsets?8:0,p;for(;i<l;i+=2){p=state[i];result.push(p,p in override?override[p]:state[i+1]);}result.t=state.t;return result;};var _winOffsets={left:0,top:0};var _parsePosition3=function _parsePosition4(value,trigger2,scrollerSize,direction,scroll,marker,markerScroller,self2,scrollerBounds,borderWidth,useFixedPosition,scrollerMax,containerAnimation){_isFunction5(value)&&(value=value(self2));if(_isString5(value)&&value.substr(0,3)==="max"){value=scrollerMax+(value.charAt(4)==="="?_offsetToPx("0"+value.substr(3),scrollerSize):0);}var time=containerAnimation?containerAnimation.time():0,p1,p2,element;containerAnimation&&containerAnimation.seek(0);if(!_isNumber3(value)){_isFunction5(trigger2)&&(trigger2=trigger2(self2));var offsets=value.split(" "),bounds,localOffset,globalOffset,display;element=_getTarget(trigger2)||_body3;bounds=_getBounds(element)||{};if((!bounds||!bounds.left&&!bounds.top)&&_getComputedStyle(element).display==="none"){display=element.style.display;element.style.display="block";bounds=_getBounds(element);display?element.style.display=display:element.style.removeProperty("display");}localOffset=_offsetToPx(offsets[0],bounds[direction.d]);globalOffset=_offsetToPx(offsets[1]||"0",scrollerSize);value=bounds[direction.p]-scrollerBounds[direction.p]-borderWidth+localOffset+scroll-globalOffset;markerScroller&&_positionMarker(markerScroller,globalOffset,direction,scrollerSize-globalOffset<20||markerScroller._isStart&&globalOffset>20);scrollerSize-=scrollerSize-globalOffset;}else if(markerScroller){_positionMarker(markerScroller,scrollerSize,direction,true);}if(marker){var position=value+scrollerSize,isStart=marker._isStart;p1="scroll"+direction.d2;_positionMarker(marker,position,direction,isStart&&position>20||!isStart&&(useFixedPosition?Math.max(_body3[p1],_docEl3[p1]):marker.parentNode[p1])<=position+1);if(useFixedPosition){scrollerBounds=_getBounds(markerScroller);useFixedPosition&&(marker.style[direction.op.p]=scrollerBounds[direction.op.p]-direction.op.m-marker._offset+_px);}}if(containerAnimation&&element){p1=_getBounds(element);containerAnimation.seek(scrollerMax);p2=_getBounds(element);containerAnimation._caScrollDist=p1[direction.p]-p2[direction.p];value=value/containerAnimation._caScrollDist*scrollerMax;}containerAnimation&&containerAnimation.seek(time);return containerAnimation?value:Math.round(value);};var _prefixExp=/(webkit|moz|length|cssText|inset)/i;var _reparent=function _reparent2(element,parent,top,left){if(element.parentNode!==parent){var style=element.style,p,cs;if(parent===_body3){element._stOrig=style.cssText;cs=_getComputedStyle(element);for(p in cs){if(!+p&&!_prefixExp.test(p)&&cs[p]&&typeof style[p]==="string"&&p!=="0"){style[p]=cs[p];}}style.top=top;style.left=left;}else{style.cssText=element._stOrig;}gsap4.core.getCache(element).uncache=1;parent.appendChild(element);}};var _getTweenCreator=function _getTweenCreator2(scroller,direction){var getScroll=_getScrollFunc(scroller,direction),prop="_scroll"+direction.p2,lastScroll1,lastScroll2,getTween=function getTween2(scrollTo2,vars,initialValue,change1,change2){var tween=getTween2.tween,onComplete=vars.onComplete,modifiers={};initialValue=initialValue||getScroll();change2=change1&&change2||0;change1=change1||scrollTo2-initialValue;tween&&tween.kill();lastScroll1=Math.round(initialValue);vars[prop]=scrollTo2;vars.modifiers=modifiers;modifiers[prop]=function(value){value=_round3(getScroll());if(value!==lastScroll1&&value!==lastScroll2&&Math.abs(value-lastScroll1)>2&&Math.abs(value-lastScroll2)>2){tween.kill();getTween2.tween=0;}else{value=initialValue+change1*tween.ratio+change2*tween.ratio*tween.ratio;}lastScroll2=lastScroll1;return lastScroll1=_round3(value);};vars.onComplete=function(){getTween2.tween=0;onComplete&&onComplete.call(tween);};tween=getTween2.tween=gsap4.to(scroller,vars);return tween;};scroller[prop]=getScroll;getScroll.wheelHandler=function(){return getTween.tween&&getTween.tween.kill()&&(getTween.tween=0);};_addListener3(scroller,"wheel",getScroll.wheelHandler);return getTween;};var ScrollTrigger2=/* @__PURE__ */function(){function ScrollTrigger3(vars,animation){_coreInitted4||ScrollTrigger3.register(gsap4)||console.warn("Please gsap.registerPlugin(ScrollTrigger)");this.init(vars,animation);}var _proto=ScrollTrigger3.prototype;_proto.init=function init5(vars,animation){this.progress=this.start=0;this.vars&&this.kill(true,true);if(!_enabled){this.update=this.refresh=this.kill=_passThrough3;return;}vars=_setDefaults3(_isString5(vars)||_isNumber3(vars)||vars.nodeType?{trigger:vars}:vars,_defaults2);var _vars=vars,onUpdate=_vars.onUpdate,toggleClass2=_vars.toggleClass,id=_vars.id,onToggle=_vars.onToggle,onRefresh=_vars.onRefresh,scrub=_vars.scrub,trigger2=_vars.trigger,pin2=_vars.pin,pinSpacing=_vars.pinSpacing,invalidateOnRefresh=_vars.invalidateOnRefresh,anticipatePin=_vars.anticipatePin,onScrubComplete=_vars.onScrubComplete,onSnapComplete=_vars.onSnapComplete,once=_vars.once,snap3=_vars.snap,pinReparent=_vars.pinReparent,pinSpacer=_vars.pinSpacer,containerAnimation=_vars.containerAnimation,fastScrollEnd=_vars.fastScrollEnd,preventOverlaps=_vars.preventOverlaps,direction=vars.horizontal||vars.containerAnimation&&vars.horizontal!==false?_horizontal:_vertical,isToggle=!scrub&&scrub!==0,scroller=_getTarget(vars.scroller||_win4),scrollerCache=gsap4.core.getCache(scroller),isViewport=_isViewport3(scroller),useFixedPosition=("pinType"in vars?vars.pinType:_getProxyProp(scroller,"pinType")||isViewport&&"fixed")==="fixed",callbacks=[vars.onEnter,vars.onLeave,vars.onEnterBack,vars.onLeaveBack],toggleActions=isToggle&&vars.toggleActions.split(" "),markers="markers"in vars?vars.markers:_defaults2.markers,borderWidth=isViewport?0:parseFloat(_getComputedStyle(scroller)["border"+direction.p2+_Width])||0,self2=this,onRefreshInit=vars.onRefreshInit&&function(){return vars.onRefreshInit(self2);},getScrollerSize=_getSizeFunc(scroller,isViewport,direction),getScrollerOffsets=_getOffsetsFunc(scroller,isViewport),lastSnap=0,lastRefresh=0,scrollFunc=_getScrollFunc(scroller,direction),tweenTo,pinCache,snapFunc,scroll1,scroll2,start2,end,markerStart,markerEnd,markerStartTrigger,markerEndTrigger,markerVars,change,pinOriginalState,pinActiveState,pinState,spacer,offset,pinGetter,pinSetter,pinStart,pinChange,spacingStart,spacerState,markerStartSetter,markerEndSetter,cs,snap1,snap22,scrubTween,scrubSmooth,snapDurClamp,snapDelayedCall,prevProgress,prevScroll,prevAnimProgress,caMarkerSetter,customRevertReturn;self2.media=_creatingMedia;self2._dir=direction;anticipatePin*=45;self2.scroller=scroller;self2.scroll=containerAnimation?containerAnimation.time.bind(containerAnimation):scrollFunc;scroll1=scrollFunc();self2.vars=vars;animation=animation||vars.animation;if("refreshPriority"in vars){_sort=1;vars.refreshPriority===-9999&&(_primary=self2);}scrollerCache.tweenScroll=scrollerCache.tweenScroll||{top:_getTweenCreator(scroller,_vertical),left:_getTweenCreator(scroller,_horizontal)};self2.tweenTo=tweenTo=scrollerCache.tweenScroll[direction.p];self2.scrubDuration=function(value){scrubSmooth=_isNumber3(value)&&value;if(!scrubSmooth){scrubTween&&scrubTween.progress(1).kill();scrubTween=0;}else{scrubTween?scrubTween.duration(value):scrubTween=gsap4.to(animation,{ease:"expo",totalProgress:"+=0.001",duration:scrubSmooth,paused:true,onComplete:function onComplete(){return onScrubComplete&&onScrubComplete(self2);}});}};if(animation){animation.vars.lazy=false;animation._initted||animation.vars.immediateRender!==false&&vars.immediateRender!==false&&animation.render(0,true,true);self2.animation=animation.pause();animation.scrollTrigger=self2;self2.scrubDuration(scrub);snap1=0;id||(id=animation.vars.id);}_triggers.push(self2);if(snap3){if(!_isObject3(snap3)||snap3.push){snap3={snapTo:snap3};}"scrollBehavior"in _body3.style&&gsap4.set(isViewport?[_body3,_docEl3]:scroller,{scrollBehavior:"auto"});snapFunc=_isFunction5(snap3.snapTo)?snap3.snapTo:snap3.snapTo==="labels"?_getClosestLabel(animation):snap3.snapTo==="labelsDirectional"?_getLabelAtDirection(animation):snap3.directional!==false?function(value,st){return _snapDirectional(snap3.snapTo)(value,_getTime2()-lastRefresh<500?0:st.direction);}:gsap4.utils.snap(snap3.snapTo);snapDurClamp=snap3.duration||{min:0.1,max:2};snapDurClamp=_isObject3(snapDurClamp)?_clamp4(snapDurClamp.min,snapDurClamp.max):_clamp4(snapDurClamp,snapDurClamp);snapDelayedCall=gsap4.delayedCall(snap3.delay||scrubSmooth/2||0.1,function(){var scroll=scrollFunc(),refreshedRecently=_getTime2()-lastRefresh<500,tween=tweenTo.tween;if((refreshedRecently||Math.abs(self2.getVelocity())<10)&&!tween&&!_pointerIsDown&&lastSnap!==scroll){var progress=(scroll-start2)/change,totalProgress=animation&&!isToggle?animation.totalProgress():progress,velocity=refreshedRecently?0:(totalProgress-snap22)/(_getTime2()-_time2)*1e3||0,change1=gsap4.utils.clamp(-progress,1-progress,_abs(velocity/2)*velocity/0.185),naturalEnd=progress+(snap3.inertia===false?0:change1),endValue=_clamp4(0,1,snapFunc(naturalEnd,self2)),endScroll=Math.round(start2+endValue*change),_snap=snap3,onStart=_snap.onStart,_onInterrupt=_snap.onInterrupt,_onComplete=_snap.onComplete;if(scroll<=end&&scroll>=start2&&endScroll!==scroll){if(tween&&!tween._initted&&tween.data<=_abs(endScroll-scroll)){return;}if(snap3.inertia===false){change1=endValue-progress;}tweenTo(endScroll,{duration:snapDurClamp(_abs(Math.max(_abs(naturalEnd-totalProgress),_abs(endValue-totalProgress))*0.185/velocity/0.05||0)),ease:snap3.ease||"power3",data:_abs(endScroll-scroll),onInterrupt:function onInterrupt(){return snapDelayedCall.restart(true)&&_onInterrupt&&_onInterrupt(self2);},onComplete:function onComplete(){self2.update();lastSnap=scrollFunc();snap1=snap22=animation&&!isToggle?animation.totalProgress():self2.progress;onSnapComplete&&onSnapComplete(self2);_onComplete&&_onComplete(self2);}},scroll,change1*change,endScroll-scroll-change1*change);onStart&&onStart(self2,tweenTo.tween);}}else if(self2.isActive&&lastSnap!==scroll){snapDelayedCall.restart(true);}}).pause();}id&&(_ids[id]=self2);trigger2=self2.trigger=_getTarget(trigger2||pin2);customRevertReturn=trigger2&&trigger2._gsap&&trigger2._gsap.stRevert;customRevertReturn&&(customRevertReturn=customRevertReturn(self2));pin2=pin2===true?trigger2:_getTarget(pin2);_isString5(toggleClass2)&&(toggleClass2={targets:trigger2,className:toggleClass2});if(pin2){pinSpacing===false||pinSpacing===_margin||(pinSpacing=!pinSpacing&&_getComputedStyle(pin2.parentNode).display==="flex"?false:_padding);self2.pin=pin2;vars.force3D!==false&&gsap4.set(pin2,{force3D:true});pinCache=gsap4.core.getCache(pin2);if(!pinCache.spacer){if(pinSpacer){pinSpacer=_getTarget(pinSpacer);pinSpacer&&!pinSpacer.nodeType&&(pinSpacer=pinSpacer.current||pinSpacer.nativeElement);pinCache.spacerIsNative=!!pinSpacer;pinSpacer&&(pinCache.spacerState=_getState(pinSpacer));}pinCache.spacer=spacer=pinSpacer||_doc4.createElement("div");spacer.classList.add("pin-spacer");id&&spacer.classList.add("pin-spacer-"+id);pinCache.pinState=pinOriginalState=_getState(pin2);}else{pinOriginalState=pinCache.pinState;}self2.spacer=spacer=pinCache.spacer;cs=_getComputedStyle(pin2);spacingStart=cs[pinSpacing+direction.os2];pinGetter=gsap4.getProperty(pin2);pinSetter=gsap4.quickSetter(pin2,direction.a,_px);_swapPinIn(pin2,spacer,cs);pinState=_getState(pin2);}if(markers){markerVars=_isObject3(markers)?_setDefaults3(markers,_markerDefaults):_markerDefaults;markerStartTrigger=_createMarker("scroller-start",id,scroller,direction,markerVars,0);markerEndTrigger=_createMarker("scroller-end",id,scroller,direction,markerVars,0,markerStartTrigger);offset=markerStartTrigger["offset"+direction.op.d2];var content=_getTarget(_getProxyProp(scroller,"content")||scroller);markerStart=this.markerStart=_createMarker("start",id,content,direction,markerVars,offset,0,containerAnimation);markerEnd=this.markerEnd=_createMarker("end",id,content,direction,markerVars,offset,0,containerAnimation);containerAnimation&&(caMarkerSetter=gsap4.quickSetter([markerStart,markerEnd],direction.a,_px));if(!useFixedPosition&&!(_proxies.length&&_getProxyProp(scroller,"fixedMarkers")===true)){_makePositionable(isViewport?_body3:scroller);gsap4.set([markerStartTrigger,markerEndTrigger],{force3D:true});markerStartSetter=gsap4.quickSetter(markerStartTrigger,direction.a,_px);markerEndSetter=gsap4.quickSetter(markerEndTrigger,direction.a,_px);}}if(containerAnimation){var oldOnUpdate=containerAnimation.vars.onUpdate,oldParams=containerAnimation.vars.onUpdateParams;containerAnimation.eventCallback("onUpdate",function(){self2.update(0,0,1);oldOnUpdate&&oldOnUpdate.apply(oldParams||[]);});}self2.previous=function(){return _triggers[_triggers.indexOf(self2)-1];};self2.next=function(){return _triggers[_triggers.indexOf(self2)+1];};self2.revert=function(revert){var r2=revert!==false||!self2.enabled,prevRefreshing=_refreshing;if(r2!==self2.isReverted){if(r2){self2.scroll.rec||!_refreshing||!_refreshingAll||(self2.scroll.rec=scrollFunc());prevScroll=Math.max(scrollFunc(),self2.scroll.rec||0);prevProgress=self2.progress;prevAnimProgress=animation&&animation.progress();}markerStart&&[markerStart,markerEnd,markerStartTrigger,markerEndTrigger].forEach(function(m){return m.style.display=r2?"none":"block";});r2&&(_refreshing=1);self2.update(r2);_refreshing=prevRefreshing;pin2&&(r2?_swapPinOut(pin2,spacer,pinOriginalState):(!pinReparent||!self2.isActive)&&_swapPinIn(pin2,spacer,_getComputedStyle(pin2),spacerState));self2.isReverted=r2;}};self2.refresh=function(soft,force){if((_refreshing||!self2.enabled)&&!force){return;}if(pin2&&soft&&_lastScrollTime){_addListener3(ScrollTrigger3,"scrollEnd",_softRefresh);return;}!_refreshingAll&&onRefreshInit&&onRefreshInit(self2);_refreshing=1;lastRefresh=_getTime2();if(tweenTo.tween){tweenTo.tween.kill();tweenTo.tween=0;}scrubTween&&scrubTween.pause();invalidateOnRefresh&&animation&&animation.time(-0.01,true).invalidate();self2.isReverted||self2.revert();var size=getScrollerSize(),scrollerBounds=getScrollerOffsets(),max=containerAnimation?containerAnimation.duration():_maxScroll(scroller,direction),offset2=0,otherPinOffset=0,parsedEnd=vars.end,parsedEndTrigger=vars.endTrigger||trigger2,parsedStart=vars.start||(vars.start===0||!trigger2?0:pin2?"0 0":"0 100%"),pinnedContainer=self2.pinnedContainer=vars.pinnedContainer&&_getTarget(vars.pinnedContainer),triggerIndex=trigger2&&Math.max(0,_triggers.indexOf(self2))||0,i=triggerIndex,cs2,bounds,scroll,isVertical,override,curTrigger,curPin,oppositeScroll,initted,revertedPins;while(i--){curTrigger=_triggers[i];curTrigger.end||curTrigger.refresh(0,1)||(_refreshing=1);curPin=curTrigger.pin;if(curPin&&(curPin===trigger2||curPin===pin2)&&!curTrigger.isReverted){revertedPins||(revertedPins=[]);revertedPins.unshift(curTrigger);curTrigger.revert();}if(curTrigger!==_triggers[i]){triggerIndex--;i--;}}_isFunction5(parsedStart)&&(parsedStart=parsedStart(self2));start2=_parsePosition3(parsedStart,trigger2,size,direction,scrollFunc(),markerStart,markerStartTrigger,self2,scrollerBounds,borderWidth,useFixedPosition,max,containerAnimation)||(pin2?-1e-3:0);_isFunction5(parsedEnd)&&(parsedEnd=parsedEnd(self2));if(_isString5(parsedEnd)&&!parsedEnd.indexOf("+=")){if(~parsedEnd.indexOf(" ")){parsedEnd=(_isString5(parsedStart)?parsedStart.split(" ")[0]:"")+parsedEnd;}else{offset2=_offsetToPx(parsedEnd.substr(2),size);parsedEnd=_isString5(parsedStart)?parsedStart:start2+offset2;parsedEndTrigger=trigger2;}}end=Math.max(start2,_parsePosition3(parsedEnd||(parsedEndTrigger?"100% 0":max),parsedEndTrigger,size,direction,scrollFunc()+offset2,markerEnd,markerEndTrigger,self2,scrollerBounds,borderWidth,useFixedPosition,max,containerAnimation))||-1e-3;change=end-start2||(start2-=0.01)&&1e-3;offset2=0;i=triggerIndex;while(i--){curTrigger=_triggers[i];curPin=curTrigger.pin;if(curPin&&curTrigger.start-curTrigger._pinPush<start2&&!containerAnimation&&curTrigger.end>0){cs2=curTrigger.end-curTrigger.start;if((curPin===trigger2||curPin===pinnedContainer)&&!_isNumber3(parsedStart)){offset2+=cs2*(1-curTrigger.progress);}curPin===pin2&&(otherPinOffset+=cs2);}}start2+=offset2;end+=offset2;self2._pinPush=otherPinOffset;if(markerStart&&offset2){cs2={};cs2[direction.a]="+="+offset2;pinnedContainer&&(cs2[direction.p]="-="+scrollFunc());gsap4.set([markerStart,markerEnd],cs2);}if(pin2){cs2=_getComputedStyle(pin2);isVertical=direction===_vertical;scroll=scrollFunc();pinStart=parseFloat(pinGetter(direction.a))+otherPinOffset;!max&&end>1&&((isViewport?_body3:scroller).style["overflow-"+direction.a]="scroll");_swapPinIn(pin2,spacer,cs2);pinState=_getState(pin2);bounds=_getBounds(pin2,true);oppositeScroll=useFixedPosition&&_getScrollFunc(scroller,isVertical?_horizontal:_vertical)();if(pinSpacing){spacerState=[pinSpacing+direction.os2,change+otherPinOffset+_px];spacerState.t=spacer;i=pinSpacing===_padding?_getSize(pin2,direction)+change+otherPinOffset:0;i&&spacerState.push(direction.d,i+_px);_setState(spacerState);useFixedPosition&&scrollFunc(prevScroll);}if(useFixedPosition){override={top:bounds.top+(isVertical?scroll-start2:oppositeScroll)+_px,left:bounds.left+(isVertical?oppositeScroll:scroll-start2)+_px,boxSizing:"border-box",position:"fixed"};override[_width]=override["max"+_Width]=Math.ceil(bounds.width)+_px;override[_height]=override["max"+_Height]=Math.ceil(bounds.height)+_px;override[_margin]=override[_margin+_Top]=override[_margin+_Right]=override[_margin+_Bottom]=override[_margin+_Left]="0";override[_padding]=cs2[_padding];override[_padding+_Top]=cs2[_padding+_Top];override[_padding+_Right]=cs2[_padding+_Right];override[_padding+_Bottom]=cs2[_padding+_Bottom];override[_padding+_Left]=cs2[_padding+_Left];pinActiveState=_copyState(pinOriginalState,override,pinReparent);}if(animation){initted=animation._initted;_suppressOverwrites2(1);animation.render(animation.duration(),true,true);pinChange=pinGetter(direction.a)-pinStart+change+otherPinOffset;change!==pinChange&&useFixedPosition&&pinActiveState.splice(pinActiveState.length-2,2);animation.render(0,true,true);initted||animation.invalidate();_suppressOverwrites2(0);}else{pinChange=change;}}else if(trigger2&&scrollFunc()&&!containerAnimation){bounds=trigger2.parentNode;while(bounds&&bounds!==_body3){if(bounds._pinOffset){start2-=bounds._pinOffset;end-=bounds._pinOffset;}bounds=bounds.parentNode;}}revertedPins&&revertedPins.forEach(function(t2){return t2.revert(false);});self2.start=start2;self2.end=end;scroll1=scroll2=scrollFunc();if(!containerAnimation){scroll1<prevScroll&&scrollFunc(prevScroll);self2.scroll.rec=0;}self2.revert(false);if(snapDelayedCall){lastSnap=-1;self2.isActive&&scrollFunc(start2+change*prevProgress);snapDelayedCall.restart(true);}_refreshing=0;animation&&isToggle&&(animation._initted||prevAnimProgress)&&animation.progress()!==prevAnimProgress&&animation.progress(prevAnimProgress,true).render(animation.time(),true,true);if(prevProgress!==self2.progress||containerAnimation){animation&&!isToggle&&animation.totalProgress(prevProgress,true);self2.progress=prevProgress;self2.update(0,0,1);}pin2&&pinSpacing&&(spacer._pinOffset=Math.round(self2.progress*pinChange));onRefresh&&onRefresh(self2);};self2.getVelocity=function(){return(scrollFunc()-scroll2)/(_getTime2()-_time2)*1e3||0;};self2.endAnimation=function(){_endAnimation(self2.callbackAnimation);if(animation){scrubTween?scrubTween.progress(1):!animation.paused()?_endAnimation(animation,animation.reversed()):isToggle||_endAnimation(animation,self2.direction<0,1);}};self2.labelToScroll=function(label){return animation&&animation.labels&&(start2||self2.refresh()||start2)+animation.labels[label]/animation.duration()*change||0;};self2.getTrailing=function(name){var i=_triggers.indexOf(self2),a=self2.direction>0?_triggers.slice(0,i).reverse():_triggers.slice(i+1);return(_isString5(name)?a.filter(function(t2){return t2.vars.preventOverlaps===name;}):a).filter(function(t2){return self2.direction>0?t2.end<=start2:t2.start>=end;});};self2.update=function(reset3,recordVelocity,forceFake){if(containerAnimation&&!forceFake&&!reset3){return;}var scroll=self2.scroll(),p=reset3?0:(scroll-start2)/change,clipped=p<0?0:p>1?1:p||0,prevProgress2=self2.progress,isActive,wasActive,toggleState,action,stateChanged,toggled,isAtMax,isTakingAction;if(recordVelocity){scroll2=scroll1;scroll1=containerAnimation?scrollFunc():scroll;if(snap3){snap22=snap1;snap1=animation&&!isToggle?animation.totalProgress():clipped;}}anticipatePin&&!clipped&&pin2&&!_refreshing&&!_startup2&&_lastScrollTime&&start2<scroll+(scroll-scroll2)/(_getTime2()-_time2)*anticipatePin&&(clipped=1e-4);if(clipped!==prevProgress2&&self2.enabled){isActive=self2.isActive=!!clipped&&clipped<1;wasActive=!!prevProgress2&&prevProgress2<1;toggled=isActive!==wasActive;stateChanged=toggled||!!clipped!==!!prevProgress2;self2.direction=clipped>prevProgress2?1:-1;self2.progress=clipped;if(stateChanged&&!_refreshing){toggleState=clipped&&!prevProgress2?0:clipped===1?1:prevProgress2===1?2:3;if(isToggle){action=!toggled&&toggleActions[toggleState+1]!=="none"&&toggleActions[toggleState+1]||toggleActions[toggleState];isTakingAction=animation&&(action==="complete"||action==="reset"||action in animation);}}preventOverlaps&&(toggled||isTakingAction)&&(isTakingAction||scrub||!animation)&&(_isFunction5(preventOverlaps)?preventOverlaps(self2):self2.getTrailing(preventOverlaps).forEach(function(t2){return t2.endAnimation();}));if(!isToggle){if(scrubTween&&!_refreshing&&!_startup2){(containerAnimation||_primary&&_primary!==self2)&&scrubTween.render(scrubTween._dp._time-scrubTween._start);if(scrubTween.resetTo){scrubTween.resetTo("totalProgress",clipped,animation._tTime/animation._tDur);}else{scrubTween.vars.totalProgress=clipped;scrubTween.invalidate().restart();}}else if(animation){animation.totalProgress(clipped,!!_refreshing);}}if(pin2){reset3&&pinSpacing&&(spacer.style[pinSpacing+direction.os2]=spacingStart);if(!useFixedPosition){pinSetter(_round3(pinStart+pinChange*clipped));}else if(stateChanged){isAtMax=!reset3&&clipped>prevProgress2&&end+1>scroll&&scroll+1>=_maxScroll(scroller,direction);if(pinReparent){if(!reset3&&(isActive||isAtMax)){var bounds=_getBounds(pin2,true),_offset=scroll-start2;_reparent(pin2,_body3,bounds.top+(direction===_vertical?_offset:0)+_px,bounds.left+(direction===_vertical?0:_offset)+_px);}else{_reparent(pin2,spacer);}}_setState(isActive||isAtMax?pinActiveState:pinState);pinChange!==change&&clipped<1&&isActive||pinSetter(pinStart+(clipped===1&&!isAtMax?pinChange:0));}}snap3&&!tweenTo.tween&&!_refreshing&&!_startup2&&snapDelayedCall.restart(true);toggleClass2&&(toggled||once&&clipped&&(clipped<1||!_limitCallbacks))&&_toArray2(toggleClass2.targets).forEach(function(el){return el.classList[isActive||once?"add":"remove"](toggleClass2.className);});onUpdate&&!isToggle&&!reset3&&onUpdate(self2);if(stateChanged&&!_refreshing){if(isToggle){if(isTakingAction){if(action==="complete"){animation.pause().totalProgress(1);}else if(action==="reset"){animation.restart(true).pause();}else if(action==="restart"){animation.restart(true);}else{animation[action]();}}onUpdate&&onUpdate(self2);}if(toggled||!_limitCallbacks){onToggle&&toggled&&_callback3(self2,onToggle);callbacks[toggleState]&&_callback3(self2,callbacks[toggleState]);once&&(clipped===1?self2.kill(false,1):callbacks[toggleState]=0);if(!toggled){toggleState=clipped===1?1:3;callbacks[toggleState]&&_callback3(self2,callbacks[toggleState]);}}if(fastScrollEnd&&!isActive&&Math.abs(self2.getVelocity())>(_isNumber3(fastScrollEnd)?fastScrollEnd:2500)){_endAnimation(self2.callbackAnimation);scrubTween?scrubTween.progress(1):_endAnimation(animation,!clipped,1);}}else if(isToggle&&onUpdate&&!_refreshing){onUpdate(self2);}}if(markerEndSetter){var n=containerAnimation?scroll/containerAnimation.duration()*(containerAnimation._caScrollDist||0):scroll;markerStartSetter(n+(markerStartTrigger._isFlipped?1:0));markerEndSetter(n);}caMarkerSetter&&caMarkerSetter(-scroll/containerAnimation.duration()*(containerAnimation._caScrollDist||0));};self2.enable=function(reset3,refresh){if(!self2.enabled){self2.enabled=true;_addListener3(scroller,"resize",_onResize);_addListener3(isViewport?_doc4:scroller,"scroll",_onScroll3);onRefreshInit&&_addListener3(ScrollTrigger3,"refreshInit",onRefreshInit);if(reset3!==false){self2.progress=prevProgress=0;scroll1=scroll2=lastSnap=scrollFunc();}refresh!==false&&self2.refresh();}};self2.getTween=function(snap4){return snap4&&tweenTo?tweenTo.tween:scrubTween;};self2.setPositions=function(newStart,newEnd){if(pin2){pinStart+=newStart-start2;pinChange+=newEnd-newStart-change;}self2.start=start2=newStart;self2.end=end=newEnd;change=newEnd-newStart;self2.update();};self2.disable=function(reset3,allowAnimation){if(self2.enabled){reset3!==false&&self2.revert();self2.enabled=self2.isActive=false;allowAnimation||scrubTween&&scrubTween.pause();prevScroll=0;pinCache&&(pinCache.uncache=1);onRefreshInit&&_removeListener3(ScrollTrigger3,"refreshInit",onRefreshInit);if(snapDelayedCall){snapDelayedCall.pause();tweenTo.tween&&tweenTo.tween.kill()&&(tweenTo.tween=0);}if(!isViewport){var i=_triggers.length;while(i--){if(_triggers[i].scroller===scroller&&_triggers[i]!==self2){return;}}_removeListener3(scroller,"resize",_onResize);_removeListener3(scroller,"scroll",_onScroll3);}}};self2.kill=function(revert,allowAnimation){self2.disable(revert,allowAnimation);scrubTween&&!allowAnimation&&scrubTween.kill();id&&delete _ids[id];var i=_triggers.indexOf(self2);i>=0&&_triggers.splice(i,1);i===_i&&_direction>0&&_i--;i=0;_triggers.forEach(function(t2){return t2.scroller===self2.scroller&&(i=1);});i||(self2.scroll.rec=0);if(animation){animation.scrollTrigger=null;revert&&animation.render(-1);allowAnimation||animation.kill();}markerStart&&[markerStart,markerEnd,markerStartTrigger,markerEndTrigger].forEach(function(m){return m.parentNode&&m.parentNode.removeChild(m);});_primary===self2&&(_primary=0);if(pin2){pinCache&&(pinCache.uncache=1);i=0;_triggers.forEach(function(t2){return t2.pin===pin2&&i++;});i||(pinCache.spacer=0);}vars.onKill&&vars.onKill(self2);};self2.enable(false,false);customRevertReturn&&customRevertReturn(self2);!animation||!animation.add||change?self2.refresh():gsap4.delayedCall(0.01,function(){return start2||end||self2.refresh();})&&(change=0.01)&&(start2=end=0);};ScrollTrigger3.register=function register2(core){if(!_coreInitted4){gsap4=core||_getGSAP5();_windowExists7()&&window.document&&ScrollTrigger3.enable();_coreInitted4=_enabled;}return _coreInitted4;};ScrollTrigger3.defaults=function defaults3(config3){if(config3){for(var p in config3){_defaults2[p]=config3[p];}}return _defaults2;};ScrollTrigger3.disable=function disable(reset3,kill2){_enabled=0;_triggers.forEach(function(trigger2){return trigger2[kill2?"kill":"disable"](reset3);});_removeListener3(_win4,"wheel",_onScroll3);_removeListener3(_doc4,"scroll",_onScroll3);clearInterval(_syncInterval);_removeListener3(_doc4,"touchcancel",_passThrough3);_removeListener3(_body3,"touchstart",_passThrough3);_multiListener(_removeListener3,_doc4,"pointerdown,touchstart,mousedown",_pointerDownHandler);_multiListener(_removeListener3,_doc4,"pointerup,touchend,mouseup",_pointerUpHandler);_resizeDelay.kill();_iterateAutoRefresh(_removeListener3);for(var i=0;i<_scrollers.length;i+=3){_wheelListener(_removeListener3,_scrollers[i],_scrollers[i+1]);_wheelListener(_removeListener3,_scrollers[i],_scrollers[i+2]);}};ScrollTrigger3.enable=function enable(){_win4=window;_doc4=document;_docEl3=_doc4.documentElement;_body3=_doc4.body;if(gsap4){_toArray2=gsap4.utils.toArray;_clamp4=gsap4.utils.clamp;_suppressOverwrites2=gsap4.core.suppressOverwrites||_passThrough3;gsap4.core.globals("ScrollTrigger",ScrollTrigger3);if(_body3){_enabled=1;Observer.register(gsap4);ScrollTrigger3.isTouch=Observer.isTouch;_fixIOSBug=Observer.isTouch&&/(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent);_addListener3(_win4,"wheel",_onScroll3);_root2=[_win4,_doc4,_docEl3,_body3];ScrollTrigger3.matchMedia({"(orientation: portrait)":function orientationPortrait(){_setBaseDimensions();return _setBaseDimensions;}});_addListener3(_doc4,"scroll",_onScroll3);var bodyStyle=_body3.style,border=bodyStyle.borderTopStyle,bounds,i;bodyStyle.borderTopStyle="solid";bounds=_getBounds(_body3);_vertical.m=Math.round(bounds.top+_vertical.sc())||0;_horizontal.m=Math.round(bounds.left+_horizontal.sc())||0;border?bodyStyle.borderTopStyle=border:bodyStyle.removeProperty("border-top-style");_syncInterval=setInterval(_sync,250);gsap4.delayedCall(0.5,function(){return _startup2=0;});_addListener3(_doc4,"touchcancel",_passThrough3);_addListener3(_body3,"touchstart",_passThrough3);_multiListener(_addListener3,_doc4,"pointerdown,touchstart,mousedown",_pointerDownHandler);_multiListener(_addListener3,_doc4,"pointerup,touchend,mouseup",_pointerUpHandler);_transformProp2=gsap4.utils.checkPrefix("transform");_stateProps.push(_transformProp2);_coreInitted4=_getTime2();_resizeDelay=gsap4.delayedCall(0.2,_refreshAll).pause();_autoRefresh=[_doc4,"visibilitychange",function(){var w=_win4.innerWidth,h=_win4.innerHeight;if(_doc4.hidden){_prevWidth=w;_prevHeight=h;}else if(_prevWidth!==w||_prevHeight!==h){_onResize();}},_doc4,"DOMContentLoaded",_refreshAll,_win4,"load",_refreshAll,_win4,"resize",_onResize];_iterateAutoRefresh(_addListener3);_triggers.forEach(function(trigger2){return trigger2.enable(0,1);});for(i=0;i<_scrollers.length;i+=3){_wheelListener(_removeListener3,_scrollers[i],_scrollers[i+1]);_wheelListener(_removeListener3,_scrollers[i],_scrollers[i+2]);}}}};ScrollTrigger3.config=function config3(vars){"limitCallbacks"in vars&&(_limitCallbacks=!!vars.limitCallbacks);var ms=vars.syncInterval;ms&&clearInterval(_syncInterval)||(_syncInterval=ms)&&setInterval(_sync,ms);"ignoreMobileResize"in vars&&(_ignoreMobileResize=ScrollTrigger3.isTouch===1&&vars.ignoreMobileResize);if("autoRefreshEvents"in vars){_iterateAutoRefresh(_removeListener3)||_iterateAutoRefresh(_addListener3,vars.autoRefreshEvents||"none");_ignoreResize=(vars.autoRefreshEvents+"").indexOf("resize")===-1;}};ScrollTrigger3.scrollerProxy=function scrollerProxy(target,vars){var t2=_getTarget(target),i=_scrollers.indexOf(t2),isViewport=_isViewport3(t2);if(~i){_scrollers.splice(i,isViewport?6:2);}if(vars){isViewport?_proxies.unshift(_win4,vars,_body3,vars,_docEl3,vars):_proxies.unshift(t2,vars);}};ScrollTrigger3.matchMedia=function matchMedia(vars){var mq,p,i,func,result;for(p in vars){i=_media.indexOf(p);func=vars[p];_creatingMedia=p;if(p==="all"){func();}else{mq=_win4.matchMedia(p);if(mq){mq.matches&&(result=func());if(~i){_media[i+1]=_combineFunc(_media[i+1],func);_media[i+2]=_combineFunc(_media[i+2],result);}else{i=_media.length;_media.push(p,func,result);mq.addListener?mq.addListener(_onMediaChange):mq.addEventListener("change",_onMediaChange);}_media[i+3]=mq.matches;}}_creatingMedia=0;}return _media;};ScrollTrigger3.clearMatchMedia=function clearMatchMedia(query){query||(_media.length=0);query=_media.indexOf(query);query>=0&&_media.splice(query,4);};ScrollTrigger3.isInViewport=function isInViewport(element,ratio,horizontal){var bounds=(_isString5(element)?_getTarget(element):element).getBoundingClientRect(),offset=bounds[horizontal?_width:_height]*ratio||0;return horizontal?bounds.right-offset>0&&bounds.left+offset<_win4.innerWidth:bounds.bottom-offset>0&&bounds.top+offset<_win4.innerHeight;};ScrollTrigger3.positionInViewport=function positionInViewport(element,referencePoint,horizontal){_isString5(element)&&(element=_getTarget(element));var bounds=element.getBoundingClientRect(),size=bounds[horizontal?_width:_height],offset=referencePoint==null?size/2:referencePoint in _keywords?_keywords[referencePoint]*size:~referencePoint.indexOf("%")?parseFloat(referencePoint)*size/100:parseFloat(referencePoint)||0;return horizontal?(bounds.left+offset)/_win4.innerWidth:(bounds.top+offset)/_win4.innerHeight;};return ScrollTrigger3;}();ScrollTrigger2.version="3.10.4";ScrollTrigger2.saveStyles=function(targets){return targets?_toArray2(targets).forEach(function(target){if(target&&target.style){var i=_savedStyles.indexOf(target);i>=0&&_savedStyles.splice(i,5);_savedStyles.push(target,target.style.cssText,target.getBBox&&target.getAttribute("transform"),gsap4.core.getCache(target),_creatingMedia);}}):_savedStyles;};ScrollTrigger2.revert=function(soft,media){return _revertAll(!soft,media);};ScrollTrigger2.create=function(vars,animation){return new ScrollTrigger2(vars,animation);};ScrollTrigger2.refresh=function(safe){return safe?_onResize():(_coreInitted4||ScrollTrigger2.register())&&_refreshAll(true);};ScrollTrigger2.update=_updateAll;ScrollTrigger2.clearScrollMemory=_clearScrollMemory;ScrollTrigger2.maxScroll=function(element,horizontal){return _maxScroll(element,horizontal?_horizontal:_vertical);};ScrollTrigger2.getScrollFunc=function(element,horizontal){return _getScrollFunc(_getTarget(element),horizontal?_horizontal:_vertical);};ScrollTrigger2.getById=function(id){return _ids[id];};ScrollTrigger2.getAll=function(){return _triggers.filter(function(t2){return t2.vars.id!=="ScrollSmoother";});};ScrollTrigger2.isScrolling=function(){return!!_lastScrollTime;};ScrollTrigger2.snapDirectional=_snapDirectional;ScrollTrigger2.addEventListener=function(type2,callback2){var a=_listeners[type2]||(_listeners[type2]=[]);~a.indexOf(callback2)||a.push(callback2);};ScrollTrigger2.removeEventListener=function(type2,callback2){var a=_listeners[type2],i=a&&a.indexOf(callback2);i>=0&&a.splice(i,1);};ScrollTrigger2.batch=function(targets,vars){var result=[],varsCopy={},interval=vars.interval||0.016,batchMax=vars.batchMax||1e9,proxyCallback=function proxyCallback2(type2,callback2){var elements=[],triggers=[],delay=gsap4.delayedCall(interval,function(){callback2(elements,triggers);elements=[];triggers=[];}).pause();return function(self2){elements.length||delay.restart(true);elements.push(self2.trigger);triggers.push(self2);batchMax<=elements.length&&delay.progress(1);};},p;for(p in vars){varsCopy[p]=p.substr(0,2)==="on"&&_isFunction5(vars[p])&&p!=="onRefreshInit"?proxyCallback(p,vars[p]):vars[p];}if(_isFunction5(batchMax)){batchMax=batchMax();_addListener3(ScrollTrigger2,"refresh",function(){return batchMax=vars.batchMax();});}_toArray2(targets).forEach(function(target){var config3={};for(p in varsCopy){config3[p]=varsCopy[p];}config3.trigger=target;result.push(ScrollTrigger2.create(config3));});return result;};var _clampScrollAndGetDurationMultiplier=function _clampScrollAndGetDurationMultiplier2(scrollFunc,current,end,max){current>max?scrollFunc(max):current<0&&scrollFunc(0);return end>max?(max-current)/(end-current):end<0?current/(current-end):1;};var _allowNativePanning=function _allowNativePanning2(target,direction){if(direction===true){target.style.removeProperty("touch-action");}else{target.style.touchAction=direction===true?"auto":direction?"pan-"+direction+(Observer.isTouch?" pinch-zoom":""):"none";}target===_docEl3&&_allowNativePanning2(_body3,direction);};var _overflow={auto:1,scroll:1};var _nestedScroll=function _nestedScroll2(_ref5){var event=_ref5.event,target=_ref5.target,axis=_ref5.axis;var node=(event.changedTouches?event.changedTouches[0]:event).target,cache=node._gsap||gsap4.core.getCache(node),time=_getTime2(),cs;if(!cache._isScrollT||time-cache._isScrollT>2e3){while(node&&node.scrollHeight<=node.clientHeight){node=node.parentNode;}cache._isScroll=node&&!_isViewport3(node)&&node!==target&&(_overflow[(cs=_getComputedStyle(node)).overflowY]||_overflow[cs.overflowX]);cache._isScrollT=time;}(cache._isScroll||axis==="x")&&(event._gsapAllow=true);};var _inputObserver=function _inputObserver2(target,type2,inputs,nested){return Observer.create({target:target,capture:true,debounce:false,lockAxis:true,type:type2,onWheel:nested=nested&&_nestedScroll,onPress:nested,onDrag:nested,onScroll:nested,onEnable:function onEnable(){return inputs&&_addListener3(_doc4,Observer.eventTypes[0],_captureInputs,false,true);},onDisable:function onDisable(){return _removeListener3(_doc4,Observer.eventTypes[0],_captureInputs,true);}});};var _inputExp=/(input|label|select|textarea)/i;var _inputIsFocused;var _captureInputs=function _captureInputs2(e){var isInput=_inputExp.test(e.target.tagName);if(isInput||_inputIsFocused){e._gsapAllow=true;_inputIsFocused=isInput;}};var _getScrollNormalizer=function _getScrollNormalizer2(vars){_isObject3(vars)||(vars={});vars.preventDefault=vars.isNormalizer=vars.allowClicks=true;vars.type||(vars.type="wheel,touch");vars.debounce=!!vars.debounce;vars.id=vars.id||"normalizer";var _vars2=vars,normalizeScrollX=_vars2.normalizeScrollX,momentum=_vars2.momentum,allowNestedScroll=_vars2.allowNestedScroll,self2,maxY,target=_getTarget(vars.target)||_docEl3,smoother=gsap4.core.globals().ScrollSmoother,content=_fixIOSBug&&(vars.content&&_getTarget(vars.content)||smoother&&smoother.get()&&smoother.get().content()),scrollFuncY=_getScrollFunc(target,_vertical),scrollFuncX=_getScrollFunc(target,_horizontal),scale=1,initialScale=(Observer.isTouch&&_win4.visualViewport?_win4.visualViewport.scale*_win4.visualViewport.width:_win4.outerWidth)/_win4.innerWidth,wheelRefresh=0,resolveMomentumDuration=_isFunction5(momentum)?function(){return momentum(self2);}:function(){return momentum||2.8;},skipTouchMove,lastRefreshID,inputObserver=_inputObserver(target,vars.type,true,allowNestedScroll),resumeTouchMove=function resumeTouchMove2(){return skipTouchMove=false;},scrollClampX=_passThrough3,scrollClampY=_passThrough3,updateClamps=function updateClamps2(){maxY=_maxScroll(target,_vertical);scrollClampY=_clamp4(_fixIOSBug?1:0,maxY);normalizeScrollX&&(scrollClampX=_clamp4(0,_maxScroll(target,_horizontal)));lastRefreshID=_refreshID;},ignoreDrag=function ignoreDrag2(){if(skipTouchMove){requestAnimationFrame(resumeTouchMove);var offset=_round3(self2.deltaY/2),scroll=scrollClampY(scrollFuncY.v-offset);if(content&&scroll!==scrollFuncY.v+scrollFuncY.offset){scrollFuncY.offset=scroll-scrollFuncY.v;content.style.transform="translateY("+-scrollFuncY.offset+"px)";content._gsap&&(content._gsap.y=-scrollFuncY.offset+"px");scrollFuncY.cacheID=_scrollers.cache;_updateAll();}return true;}if(content){content.style.transform="translateY(0px)";scrollFuncY.offset=scrollFuncY.cacheID=0;content._gsap&&(content._gsap.y="0px");}skipTouchMove=true;},tween,startScrollX,startScrollY,onStopDelayedCall,onResize=function onResize2(){updateClamps();if(tween.isActive()&&tween.vars.scrollY>maxY){scrollFuncY()>maxY?tween.progress(1)&&scrollFuncY(maxY):tween.resetTo("scrollY",maxY);}};vars.ignoreCheck=function(e){return _fixIOSBug&&e.type==="touchmove"&&ignoreDrag(e)||scale>1.05&&e.type!=="touchstart"||self2.isGesturing||e.touches&&e.touches.length>1;};vars.onPress=function(){var prevScale=scale;scale=_round3((_win4.visualViewport&&_win4.visualViewport.scale||1)/initialScale);tween.pause();prevScale!==scale&&_allowNativePanning(target,scale>1.01?true:normalizeScrollX?false:"x");skipTouchMove=false;startScrollX=scrollFuncX();startScrollY=scrollFuncY();updateClamps();lastRefreshID=_refreshID;};vars.onRelease=vars.onGestureStart=function(self3,wasDragging){if(content){content.style.transform="translateY(0px)";scrollFuncY.offset=scrollFuncY.cacheID=0;content._gsap&&(content._gsap.y="0px");}if(!wasDragging){onStopDelayedCall.restart(true);}else{_scrollers.cache++;var dur=resolveMomentumDuration(),currentScroll,endScroll;if(normalizeScrollX){currentScroll=scrollFuncX();endScroll=currentScroll+dur*0.05*-self3.velocityX/0.227;dur*=_clampScrollAndGetDurationMultiplier(scrollFuncX,currentScroll,endScroll,_maxScroll(target,_horizontal));tween.vars.scrollX=scrollClampX(endScroll);}currentScroll=scrollFuncY();endScroll=currentScroll+dur*0.05*-self3.velocityY/0.227;dur*=_clampScrollAndGetDurationMultiplier(scrollFuncY,currentScroll,endScroll,_maxScroll(target,_vertical));tween.vars.scrollY=scrollClampY(endScroll);tween.invalidate().duration(dur).play(0.01);if(_fixIOSBug&&tween.vars.scrollY>=maxY||currentScroll>=maxY-1){gsap4.to({},{onUpdate:onResize,duration:dur});}}};vars.onWheel=function(){tween._ts&&tween.pause();if(_getTime2()-wheelRefresh>1e3){lastRefreshID=0;wheelRefresh=_getTime2();}};vars.onChange=function(self3,dx,dy,xArray,yArray){_refreshID!==lastRefreshID&&updateClamps();dx&&normalizeScrollX&&scrollFuncX(scrollClampX(xArray[2]===dx?startScrollX+(self3.startX-self3.x):scrollFuncX()+dx-xArray[1]));dy&&scrollFuncY(scrollClampY(yArray[2]===dy?startScrollY+(self3.startY-self3.y):scrollFuncY()+dy-yArray[1]));_updateAll();};vars.onEnable=function(){_allowNativePanning(target,normalizeScrollX?false:"x");_addListener3(_win4,"resize",onResize);inputObserver.enable();};vars.onDisable=function(){_allowNativePanning(target,true);_removeListener3(_win4,"resize",onResize);inputObserver.kill();};self2=new Observer(vars);self2.iOS=_fixIOSBug;_fixIOSBug&&!scrollFuncY()&&scrollFuncY(1);onStopDelayedCall=self2._dc;tween=gsap4.to(self2,{ease:"power4",paused:true,scrollX:normalizeScrollX?"+=0.1":"+=0",scrollY:"+=0.1",onComplete:onStopDelayedCall.vars.onComplete});return self2;};ScrollTrigger2.sort=function(func){return _triggers.sort(func||function(a,b){return(a.vars.refreshPriority||0)*-1e6+a.start-(b.start+(b.vars.refreshPriority||0)*-1e6);});};ScrollTrigger2.observe=function(vars){return new Observer(vars);};ScrollTrigger2.normalizeScroll=function(vars){if(typeof vars==="undefined"){return _normalizer2;}if(vars===true&&_normalizer2){return _normalizer2.enable();}if(vars===false){return _normalizer2&&_normalizer2.kill();}var normalizer=vars instanceof Observer?vars:_getScrollNormalizer(vars);_normalizer2&&_normalizer2.target===normalizer.target&&_normalizer2.kill();_isViewport3(normalizer.target)&&(_normalizer2=normalizer);return normalizer;};ScrollTrigger2.core={_getVelocityProp:_getVelocityProp,_inputObserver:_inputObserver,_scrollers:_scrollers,_proxies:_proxies,bridge:{ss:function ss(){_lastScrollTime||_dispatch("scrollStart");_lastScrollTime=_getTime2();},ref:function ref(){return _refreshing;}}};_getGSAP5()&&gsap4.registerPlugin(ScrollTrigger2);// node_modules/gsap/utils/matrix.js
var _doc5;var _win5;var _docElement2;var _body4;var _divContainer;var _svgContainer;var _identityMatrix;var _gEl;var _transformProp3="transform";var _transformOriginProp2=_transformProp3+"Origin";var _hasOffsetBug;var _setDoc=function _setDoc2(element){var doc=element.ownerDocument||element;if(!(_transformProp3 in element.style)&&"msTransform"in element.style){_transformProp3="msTransform";_transformOriginProp2=_transformProp3+"Origin";}while(doc.parentNode&&(doc=doc.parentNode)){}_win5=window;_identityMatrix=new Matrix2D();if(doc){_doc5=doc;_docElement2=doc.documentElement;_body4=doc.body;_gEl=_doc5.createElementNS("http://www.w3.org/2000/svg","g");_gEl.style.transform="none";var d1=doc.createElement("div"),d2=doc.createElement("div");_body4.appendChild(d1);d1.appendChild(d2);d1.style.position="static";d1.style[_transformProp3]="translate3d(0,0,1px)";_hasOffsetBug=d2.offsetParent!==d1;_body4.removeChild(d1);}return doc;};var _forceNonZeroScale=function _forceNonZeroScale2(e){var a,cache;while(e&&e!==_body4){cache=e._gsap;cache&&cache.uncache&&cache.get(e,"x");if(cache&&!cache.scaleX&&!cache.scaleY&&cache.renderTransform){cache.scaleX=cache.scaleY=1e-4;cache.renderTransform(1,cache);a?a.push(cache):a=[cache];}e=e.parentNode;}return a;};var _svgTemps=[];var _divTemps=[];var _getDocScrollTop=function _getDocScrollTop2(){return _win5.pageYOffset||_doc5.scrollTop||_docElement2.scrollTop||_body4.scrollTop||0;};var _getDocScrollLeft=function _getDocScrollLeft2(){return _win5.pageXOffset||_doc5.scrollLeft||_docElement2.scrollLeft||_body4.scrollLeft||0;};var _svgOwner=function _svgOwner2(element){return element.ownerSVGElement||((element.tagName+"").toLowerCase()==="svg"?element:null);};var _isFixed=function _isFixed2(element){if(_win5.getComputedStyle(element).position==="fixed"){return true;}element=element.parentNode;if(element&&element.nodeType===1){return _isFixed2(element);}};var _createSibling=function _createSibling2(element,i){if(element.parentNode&&(_doc5||_setDoc(element))){var svg=_svgOwner(element),ns=svg?svg.getAttribute("xmlns")||"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",type2=svg?i?"rect":"g":"div",x=i!==2?0:100,y=i===3?100:0,css="position:absolute;display:block;pointer-events:none;margin:0;padding:0;",e=_doc5.createElementNS?_doc5.createElementNS(ns.replace(/^https/,"http"),type2):_doc5.createElement(type2);if(i){if(!svg){if(!_divContainer){_divContainer=_createSibling2(element);_divContainer.style.cssText=css;}e.style.cssText=css+"width:0.1px;height:0.1px;top:"+y+"px;left:"+x+"px";_divContainer.appendChild(e);}else{_svgContainer||(_svgContainer=_createSibling2(element));e.setAttribute("width",0.01);e.setAttribute("height",0.01);e.setAttribute("transform","translate("+x+","+y+")");_svgContainer.appendChild(e);}}return e;}throw"Need document and parent.";};var _consolidate=function _consolidate2(m){var c=new Matrix2D(),i=0;for(;i<m.numberOfItems;i++){c.multiply(m.getItem(i).matrix);}return c;};var _getCTM=function _getCTM2(svg){var m=svg.getCTM(),transform3;if(!m){transform3=svg.style[_transformProp3];svg.style[_transformProp3]="none";svg.appendChild(_gEl);m=_gEl.getCTM();svg.removeChild(_gEl);transform3?svg.style[_transformProp3]=transform3:svg.style.removeProperty(_transformProp3.replace(/([A-Z])/g,"-$1").toLowerCase());}return m||_identityMatrix.clone();};var _placeSiblings=function _placeSiblings2(element,adjustGOffset){var svg=_svgOwner(element),isRootSVG=element===svg,siblings=svg?_svgTemps:_divTemps,parent=element.parentNode,container,m,b,x,y,cs;if(element===_win5){return element;}siblings.length||siblings.push(_createSibling(element,1),_createSibling(element,2),_createSibling(element,3));container=svg?_svgContainer:_divContainer;if(svg){if(isRootSVG){b=_getCTM(element);x=-b.e/b.a;y=-b.f/b.d;m=_identityMatrix;}else if(element.getBBox){b=element.getBBox();m=element.transform?element.transform.baseVal:{};m=!m.numberOfItems?_identityMatrix:m.numberOfItems>1?_consolidate(m):m.getItem(0).matrix;x=m.a*b.x+m.c*b.y;y=m.b*b.x+m.d*b.y;}else{m=new Matrix2D();x=y=0;}if(adjustGOffset&&element.tagName.toLowerCase()==="g"){x=y=0;}(isRootSVG?svg:parent).appendChild(container);container.setAttribute("transform","matrix("+m.a+","+m.b+","+m.c+","+m.d+","+(m.e+x)+","+(m.f+y)+")");}else{x=y=0;if(_hasOffsetBug){m=element.offsetParent;b=element;while(b&&(b=b.parentNode)&&b!==m&&b.parentNode){if((_win5.getComputedStyle(b)[_transformProp3]+"").length>4){x=b.offsetLeft;y=b.offsetTop;b=0;}}}cs=_win5.getComputedStyle(element);if(cs.position!=="absolute"&&cs.position!=="fixed"){m=element.offsetParent;while(parent&&parent!==m){x+=parent.scrollLeft||0;y+=parent.scrollTop||0;parent=parent.parentNode;}}b=container.style;b.top=element.offsetTop-y+"px";b.left=element.offsetLeft-x+"px";b[_transformProp3]=cs[_transformProp3];b[_transformOriginProp2]=cs[_transformOriginProp2];b.position=cs.position==="fixed"?"fixed":"absolute";element.parentNode.appendChild(container);}return container;};var _setMatrix=function _setMatrix2(m,a,b,c,d2,e,f){m.a=a;m.b=b;m.c=c;m.d=d2;m.e=e;m.f=f;return m;};var Matrix2D=/* @__PURE__ */function(){function Matrix2D2(a,b,c,d2,e,f){if(a===void 0){a=1;}if(b===void 0){b=0;}if(c===void 0){c=0;}if(d2===void 0){d2=1;}if(e===void 0){e=0;}if(f===void 0){f=0;}_setMatrix(this,a,b,c,d2,e,f);}var _proto=Matrix2D2.prototype;_proto.inverse=function inverse(){var a=this.a,b=this.b,c=this.c,d2=this.d,e=this.e,f=this.f,determinant=a*d2-b*c||1e-10;return _setMatrix(this,d2/determinant,-b/determinant,-c/determinant,a/determinant,(c*f-d2*e)/determinant,-(a*f-b*e)/determinant);};_proto.multiply=function multiply(matrix){var a=this.a,b=this.b,c=this.c,d2=this.d,e=this.e,f=this.f,a2=matrix.a,b2=matrix.c,c2=matrix.b,d22=matrix.d,e2=matrix.e,f2=matrix.f;return _setMatrix(this,a2*a+c2*c,a2*b+c2*d2,b2*a+d22*c,b2*b+d22*d2,e+e2*a+f2*c,f+e2*b+f2*d2);};_proto.clone=function clone(){return new Matrix2D2(this.a,this.b,this.c,this.d,this.e,this.f);};_proto.equals=function equals(matrix){var a=this.a,b=this.b,c=this.c,d2=this.d,e=this.e,f=this.f;return a===matrix.a&&b===matrix.b&&c===matrix.c&&d2===matrix.d&&e===matrix.e&&f===matrix.f;};_proto.apply=function apply(point,decoratee){if(decoratee===void 0){decoratee={};}var x=point.x,y=point.y,a=this.a,b=this.b,c=this.c,d2=this.d,e=this.e,f=this.f;decoratee.x=x*a+y*c+e||0;decoratee.y=x*b+y*d2+f||0;return decoratee;};return Matrix2D2;}();function getGlobalMatrix(element,inverse,adjustGOffset,includeScrollInFixed){if(!element||!element.parentNode||(_doc5||_setDoc(element)).documentElement===element){return new Matrix2D();}var zeroScales=_forceNonZeroScale(element),svg=_svgOwner(element),temps=svg?_svgTemps:_divTemps,container=_placeSiblings(element,adjustGOffset),b1=temps[0].getBoundingClientRect(),b2=temps[1].getBoundingClientRect(),b3=temps[2].getBoundingClientRect(),parent=container.parentNode,isFixed=!includeScrollInFixed&&_isFixed(element),m=new Matrix2D((b2.left-b1.left)/100,(b2.top-b1.top)/100,(b3.left-b1.left)/100,(b3.top-b1.top)/100,b1.left+(isFixed?0:_getDocScrollLeft()),b1.top+(isFixed?0:_getDocScrollTop()));parent.removeChild(container);if(zeroScales){b1=zeroScales.length;while(b1--){b2=zeroScales[b1];b2.scaleX=b2.scaleY=0;b2.renderTransform(1,b2);}}return inverse?m.inverse():m;}// node_modules/gsap/Draggable.js
function _assertThisInitialized2(self2){if(self2===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self2;}function _inheritsLoose2(subClass,superClass){subClass.prototype=Object.create(superClass.prototype);subClass.prototype.constructor=subClass;subClass.__proto__=superClass;}var gsap5;var _win6;var _doc6;var _docElement3;var _body5;var _tempDiv2;var _placeholderDiv;var _coreInitted5;var _checkPrefix;var _toArray3;var _supportsPassive;var _isTouchDevice;var _touchEventLookup;var _dragCount;var _isMultiTouching;var _isAndroid;var InertiaPlugin;var _defaultCursor;var _supportsPointer;var _windowExists9=function _windowExists10(){return typeof window!=="undefined";};var _getGSAP7=function _getGSAP8(){return gsap5||_windowExists9()&&(gsap5=window.gsap)&&gsap5.registerPlugin&&gsap5;};var _isFunction7=function _isFunction8(value){return typeof value==="function";};var _isObject5=function _isObject6(value){return _typeof(value)==="object";};var _isUndefined3=function _isUndefined4(value){return typeof value==="undefined";};var _emptyFunc3=function _emptyFunc4(){return false;};var _transformProp4="transform";var _transformOriginProp3="transformOrigin";var _round5=function _round6(value){return Math.round(value*1e4)/1e4;};var _isArray2=Array.isArray;var _createElement3=function _createElement4(type2,ns){var e=_doc6.createElementNS?_doc6.createElementNS((ns||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),type2):_doc6.createElement(type2);return e.style?e:_doc6.createElement(type2);};var _RAD2DEG2=180/Math.PI;var _bigNum3=1e20;var _identityMatrix2=new Matrix2D();var _getTime3=Date.now||function(){return new Date().getTime();};var _renderQueue=[];var _lookup={};var _lookupCount=0;var _clickableTagExp=/^(?:a|input|textarea|button|select)$/i;var _lastDragTime=0;var _temp1={};var _windowProxy={};var _copy=function _copy2(obj,factor){var copy={},p;for(p in obj){copy[p]=factor?obj[p]*factor:obj[p];}return copy;};var _extend=function _extend2(obj,defaults3){for(var p in defaults3){if(!(p in obj)){obj[p]=defaults3[p];}}return obj;};var _setTouchActionForAllDescendants=function _setTouchActionForAllDescendants2(elements,value){var i=elements.length,children;while(i--){value?elements[i].style.touchAction=value:elements[i].style.removeProperty("touch-action");children=elements[i].children;children&&children.length&&_setTouchActionForAllDescendants2(children,value);}};var _renderQueueTick=function _renderQueueTick2(){return _renderQueue.forEach(function(func){return func();});};var _addToRenderQueue=function _addToRenderQueue2(func){_renderQueue.push(func);if(_renderQueue.length===1){gsap5.ticker.add(_renderQueueTick);}};var _renderQueueTimeout=function _renderQueueTimeout2(){return!_renderQueue.length&&gsap5.ticker.remove(_renderQueueTick);};var _removeFromRenderQueue=function _removeFromRenderQueue2(func){var i=_renderQueue.length;while(i--){if(_renderQueue[i]===func){_renderQueue.splice(i,1);}}gsap5.to(_renderQueueTimeout,{overwrite:true,delay:15,duration:0,onComplete:_renderQueueTimeout,data:"_draggable"});};var _setDefaults5=function _setDefaults6(obj,defaults3){for(var p in defaults3){if(!(p in obj)){obj[p]=defaults3[p];}}return obj;};var _addListener5=function _addListener6(element,type2,func,capture){if(element.addEventListener){var touchType=_touchEventLookup[type2];capture=capture||(_supportsPassive?{passive:false}:null);element.addEventListener(touchType||type2,func,capture);touchType&&type2!==touchType&&element.addEventListener(type2,func,capture);}};var _removeListener5=function _removeListener6(element,type2,func){if(element.removeEventListener){var touchType=_touchEventLookup[type2];element.removeEventListener(touchType||type2,func);touchType&&type2!==touchType&&element.removeEventListener(type2,func);}};var _preventDefault=function _preventDefault2(event){event.preventDefault&&event.preventDefault();event.preventManipulation&&event.preventManipulation();};var _hasTouchID=function _hasTouchID2(list,ID){var i=list.length;while(i--){if(list[i].identifier===ID){return true;}}};var _onMultiTouchDocumentEnd=function _onMultiTouchDocumentEnd2(event){_isMultiTouching=event.touches&&_dragCount<event.touches.length;_removeListener5(event.target,"touchend",_onMultiTouchDocumentEnd2);};var _onMultiTouchDocument=function _onMultiTouchDocument2(event){_isMultiTouching=event.touches&&_dragCount<event.touches.length;_addListener5(event.target,"touchend",_onMultiTouchDocumentEnd);};var _getDocScrollTop3=function _getDocScrollTop4(doc){return _win6.pageYOffset||doc.scrollTop||doc.documentElement.scrollTop||doc.body.scrollTop||0;};var _getDocScrollLeft3=function _getDocScrollLeft4(doc){return _win6.pageXOffset||doc.scrollLeft||doc.documentElement.scrollLeft||doc.body.scrollLeft||0;};var _addScrollListener=function _addScrollListener2(e,callback2){_addListener5(e,"scroll",callback2);if(!_isRoot(e.parentNode)){_addScrollListener2(e.parentNode,callback2);}};var _removeScrollListener=function _removeScrollListener2(e,callback2){_removeListener5(e,"scroll",callback2);if(!_isRoot(e.parentNode)){_removeScrollListener2(e.parentNode,callback2);}};var _isRoot=function _isRoot2(e){return!!(!e||e===_docElement3||e.nodeType===9||e===_doc6.body||e===_win6||!e.nodeType||!e.parentNode);};var _getMaxScroll=function _getMaxScroll2(element,axis){var dim=axis==="x"?"Width":"Height",scroll="scroll"+dim,client="client"+dim;return Math.max(0,_isRoot(element)?Math.max(_docElement3[scroll],_body5[scroll])-(_win6["inner"+dim]||_docElement3[client]||_body5[client]):element[scroll]-element[client]);};var _recordMaxScrolls=function _recordMaxScrolls2(e,skipCurrent){var x=_getMaxScroll(e,"x"),y=_getMaxScroll(e,"y");if(_isRoot(e)){e=_windowProxy;}else{_recordMaxScrolls2(e.parentNode,skipCurrent);}e._gsMaxScrollX=x;e._gsMaxScrollY=y;if(!skipCurrent){e._gsScrollX=e.scrollLeft||0;e._gsScrollY=e.scrollTop||0;}};var _setStyle=function _setStyle2(element,property,value){var style=element.style;if(!style){return;}if(_isUndefined3(style[property])){property=_checkPrefix(property,element)||property;}if(value==null){style.removeProperty&&style.removeProperty(property.replace(/([A-Z])/g,"-$1").toLowerCase());}else{style[property]=value;}};var _getComputedStyle3=function _getComputedStyle4(element){return _win6.getComputedStyle(element instanceof Element?element:element.host||(element.parentNode||{}).host||element);};var _tempRect={};var _parseRect=function _parseRect2(e){if(e===_win6){_tempRect.left=_tempRect.top=0;_tempRect.width=_tempRect.right=_docElement3.clientWidth||e.innerWidth||_body5.clientWidth||0;_tempRect.height=_tempRect.bottom=(e.innerHeight||0)-20<_docElement3.clientHeight?_docElement3.clientHeight:e.innerHeight||_body5.clientHeight||0;return _tempRect;}var doc=e.ownerDocument||_doc6,r2=!_isUndefined3(e.pageX)?{left:e.pageX-_getDocScrollLeft3(doc),top:e.pageY-_getDocScrollTop3(doc),right:e.pageX-_getDocScrollLeft3(doc)+1,bottom:e.pageY-_getDocScrollTop3(doc)+1}:!e.nodeType&&!_isUndefined3(e.left)&&!_isUndefined3(e.top)?e:_toArray3(e)[0].getBoundingClientRect();if(_isUndefined3(r2.right)&&!_isUndefined3(r2.width)){r2.right=r2.left+r2.width;r2.bottom=r2.top+r2.height;}else if(_isUndefined3(r2.width)){r2={width:r2.right-r2.left,height:r2.bottom-r2.top,right:r2.right,left:r2.left,bottom:r2.bottom,top:r2.top};}return r2;};var _dispatchEvent=function _dispatchEvent2(target,type2,callbackName){var vars=target.vars,callback2=vars[callbackName],listeners=target._listeners[type2],result;if(_isFunction7(callback2)){result=callback2.apply(vars.callbackScope||target,vars[callbackName+"Params"]||[target.pointerEvent]);}if(listeners&&target.dispatchEvent(type2)===false){result=false;}return result;};var _getBounds3=function _getBounds4(target,context){var e=_toArray3(target)[0],top,left,offset;if(!e.nodeType&&e!==_win6){if(!_isUndefined3(target.left)){offset={x:0,y:0};return{left:target.left-offset.x,top:target.top-offset.y,width:target.width,height:target.height};}left=target.min||target.minX||target.minRotation||0;top=target.min||target.minY||0;return{left:left,top:top,width:(target.max||target.maxX||target.maxRotation||0)-left,height:(target.max||target.maxY||0)-top};}return _getElementBounds(e,context);};var _point1={};var _getElementBounds=function _getElementBounds2(element,context){context=_toArray3(context)[0];var isSVG=element.getBBox&&element.ownerSVGElement,doc=element.ownerDocument||_doc6,left,right,top,bottom,matrix,p1,p2,p3,p4,bbox,width2,height2,cs,contextParent;if(element===_win6){top=_getDocScrollTop3(doc);left=_getDocScrollLeft3(doc);right=left+(doc.documentElement.clientWidth||element.innerWidth||doc.body.clientWidth||0);bottom=top+((element.innerHeight||0)-20<doc.documentElement.clientHeight?doc.documentElement.clientHeight:element.innerHeight||doc.body.clientHeight||0);}else if(context===_win6||_isUndefined3(context)){return element.getBoundingClientRect();}else{left=top=0;if(isSVG){bbox=element.getBBox();width2=bbox.width;height2=bbox.height;}else{if(element.viewBox&&(bbox=element.viewBox.baseVal)){left=bbox.x||0;top=bbox.y||0;width2=bbox.width;height2=bbox.height;}if(!width2){cs=_getComputedStyle3(element);bbox=cs.boxSizing==="border-box";width2=(parseFloat(cs.width)||element.clientWidth||0)+(bbox?0:parseFloat(cs.borderLeftWidth)+parseFloat(cs.borderRightWidth));height2=(parseFloat(cs.height)||element.clientHeight||0)+(bbox?0:parseFloat(cs.borderTopWidth)+parseFloat(cs.borderBottomWidth));}}right=width2;bottom=height2;}if(element===context){return{left:left,top:top,width:right-left,height:bottom-top};}matrix=getGlobalMatrix(context,true).multiply(getGlobalMatrix(element));p1=matrix.apply({x:left,y:top});p2=matrix.apply({x:right,y:top});p3=matrix.apply({x:right,y:bottom});p4=matrix.apply({x:left,y:bottom});left=Math.min(p1.x,p2.x,p3.x,p4.x);top=Math.min(p1.y,p2.y,p3.y,p4.y);contextParent=context.parentNode||{};return{left:left+(contextParent.scrollLeft||0),top:top+(contextParent.scrollTop||0),width:Math.max(p1.x,p2.x,p3.x,p4.x)-left,height:Math.max(p1.y,p2.y,p3.y,p4.y)-top};};var _parseInertia=function _parseInertia2(draggable,snap3,max,min,factor,forceZeroVelocity){var vars={},a,i,l;if(snap3){if(factor!==1&&snap3 instanceof Array){vars.end=a=[];l=snap3.length;if(_isObject5(snap3[0])){for(i=0;i<l;i++){a[i]=_copy(snap3[i],factor);}}else{for(i=0;i<l;i++){a[i]=snap3[i]*factor;}}max+=1.1;min-=1.1;}else if(_isFunction7(snap3)){vars.end=function(value){var result=snap3.call(draggable,value),copy,p;if(factor!==1){if(_isObject5(result)){copy={};for(p in result){copy[p]=result[p]*factor;}result=copy;}else{result*=factor;}}return result;};}else{vars.end=snap3;}}if(max||max===0){vars.max=max;}if(min||min===0){vars.min=min;}if(forceZeroVelocity){vars.velocity=0;}return vars;};var _isClickable=function _isClickable2(element){var data;return!element||!element.getAttribute||element===_body5?false:(data=element.getAttribute("data-clickable"))==="true"||data!=="false"&&(element.onclick||_clickableTagExp.test(element.nodeName+"")||element.getAttribute("contentEditable")==="true")?true:_isClickable2(element.parentNode);};var _setSelectable=function _setSelectable2(elements,selectable){var i=elements.length,e;while(i--){e=elements[i];e.ondragstart=e.onselectstart=selectable?null:_emptyFunc3;gsap5.set(e,{lazy:true,userSelect:selectable?"text":"none"});}};var _isFixed3=function _isFixed4(element){if(_getComputedStyle3(element).position==="fixed"){return true;}element=element.parentNode;if(element&&element.nodeType===1){return _isFixed4(element);}};var _supports3D2;var _addPaddingBR;var ScrollProxy=function ScrollProxy2(element,vars){element=gsap5.utils.toArray(element)[0];vars=vars||{};var content=document.createElement("div"),style=content.style,node=element.firstChild,offsetTop=0,offsetLeft=0,prevTop=element.scrollTop,prevLeft=element.scrollLeft,scrollWidth=element.scrollWidth,scrollHeight=element.scrollHeight,extraPadRight=0,maxLeft=0,maxTop=0,elementWidth,elementHeight,contentHeight,nextNode,transformStart,transformEnd;if(_supports3D2&&vars.force3D!==false){transformStart="translate3d(";transformEnd="px,0px)";}else if(_transformProp4){transformStart="translate(";transformEnd="px)";}this.scrollTop=function(value,force){if(!arguments.length){return-this.top();}this.top(-value,force);};this.scrollLeft=function(value,force){if(!arguments.length){return-this.left();}this.left(-value,force);};this.left=function(value,force){if(!arguments.length){return-(element.scrollLeft+offsetLeft);}var dif=element.scrollLeft-prevLeft,oldOffset=offsetLeft;if((dif>2||dif<-2)&&!force){prevLeft=element.scrollLeft;gsap5.killTweensOf(this,{left:1,scrollLeft:1});this.left(-prevLeft);if(vars.onKill){vars.onKill();}return;}value=-value;if(value<0){offsetLeft=value-0.5|0;value=0;}else if(value>maxLeft){offsetLeft=value-maxLeft|0;value=maxLeft;}else{offsetLeft=0;}if(offsetLeft||oldOffset){if(!this._skip){style[_transformProp4]=transformStart+-offsetLeft+"px,"+-offsetTop+transformEnd;}if(offsetLeft+extraPadRight>=0){style.paddingRight=offsetLeft+extraPadRight+"px";}}element.scrollLeft=value|0;prevLeft=element.scrollLeft;};this.top=function(value,force){if(!arguments.length){return-(element.scrollTop+offsetTop);}var dif=element.scrollTop-prevTop,oldOffset=offsetTop;if((dif>2||dif<-2)&&!force){prevTop=element.scrollTop;gsap5.killTweensOf(this,{top:1,scrollTop:1});this.top(-prevTop);if(vars.onKill){vars.onKill();}return;}value=-value;if(value<0){offsetTop=value-0.5|0;value=0;}else if(value>maxTop){offsetTop=value-maxTop|0;value=maxTop;}else{offsetTop=0;}if(offsetTop||oldOffset){if(!this._skip){style[_transformProp4]=transformStart+-offsetLeft+"px,"+-offsetTop+transformEnd;}}element.scrollTop=value|0;prevTop=element.scrollTop;};this.maxScrollTop=function(){return maxTop;};this.maxScrollLeft=function(){return maxLeft;};this.disable=function(){node=content.firstChild;while(node){nextNode=node.nextSibling;element.appendChild(node);node=nextNode;}if(element===content.parentNode){element.removeChild(content);}};this.enable=function(){node=element.firstChild;if(node===content){return;}while(node){nextNode=node.nextSibling;content.appendChild(node);node=nextNode;}element.appendChild(content);this.calibrate();};this.calibrate=function(force){var widthMatches=element.clientWidth===elementWidth,cs,x,y;prevTop=element.scrollTop;prevLeft=element.scrollLeft;if(widthMatches&&element.clientHeight===elementHeight&&content.offsetHeight===contentHeight&&scrollWidth===element.scrollWidth&&scrollHeight===element.scrollHeight&&!force){return;}if(offsetTop||offsetLeft){x=this.left();y=this.top();this.left(-element.scrollLeft);this.top(-element.scrollTop);}cs=_getComputedStyle3(element);if(!widthMatches||force){style.display="block";style.width="auto";style.paddingRight="0px";extraPadRight=Math.max(0,element.scrollWidth-element.clientWidth);if(extraPadRight){extraPadRight+=parseFloat(cs.paddingLeft)+(_addPaddingBR?parseFloat(cs.paddingRight):0);}}style.display="inline-block";style.position="relative";style.overflow="visible";style.verticalAlign="top";style.boxSizing="content-box";style.width="100%";style.paddingRight=extraPadRight+"px";if(_addPaddingBR){style.paddingBottom=cs.paddingBottom;}elementWidth=element.clientWidth;elementHeight=element.clientHeight;scrollWidth=element.scrollWidth;scrollHeight=element.scrollHeight;maxLeft=element.scrollWidth-elementWidth;maxTop=element.scrollHeight-elementHeight;contentHeight=content.offsetHeight;style.display="block";if(x||y){this.left(x);this.top(y);}};this.content=content;this.element=element;this._skip=false;this.enable();};var _initCore7=function _initCore8(required){if(_windowExists9()&&document.body){var nav=window&&window.navigator;_win6=window;_doc6=document;_docElement3=_doc6.documentElement;_body5=_doc6.body;_tempDiv2=_createElement3("div");_supportsPointer=!!window.PointerEvent;_placeholderDiv=_createElement3("div");_placeholderDiv.style.cssText="visibility:hidden;height:1px;top:-1px;pointer-events:none;position:relative;clear:both;cursor:grab";_defaultCursor=_placeholderDiv.style.cursor==="grab"?"grab":"move";_isAndroid=nav&&nav.userAgent.toLowerCase().indexOf("android")!==-1;_isTouchDevice="ontouchstart"in _docElement3&&"orientation"in _win6||nav&&(nav.MaxTouchPoints>0||nav.msMaxTouchPoints>0);_addPaddingBR=function(){var div=_createElement3("div"),child=_createElement3("div"),childStyle=child.style,parent=_body5,val;childStyle.display="inline-block";childStyle.position="relative";div.style.cssText=child.innerHTML="width:90px;height:40px;padding:10px;overflow:auto;visibility:hidden";div.appendChild(child);parent.appendChild(div);val=child.offsetHeight+18>div.scrollHeight;parent.removeChild(div);return val;}();_touchEventLookup=function(types){var standard=types.split(","),converted=("onpointerdown"in _tempDiv2?"pointerdown,pointermove,pointerup,pointercancel":"onmspointerdown"in _tempDiv2?"MSPointerDown,MSPointerMove,MSPointerUp,MSPointerCancel":types).split(","),obj={},i=4;while(--i>-1){obj[standard[i]]=converted[i];obj[converted[i]]=standard[i];}try{_docElement3.addEventListener("test",null,Object.defineProperty({},"passive",{get:function get7(){_supportsPassive=1;}}));}catch(e){}return obj;}("touchstart,touchmove,touchend,touchcancel");_addListener5(_doc6,"touchcancel",_emptyFunc3);_addListener5(_win6,"touchmove",_emptyFunc3);_body5&&_body5.addEventListener("touchstart",_emptyFunc3);_addListener5(_doc6,"contextmenu",function(){for(var p in _lookup){if(_lookup[p].isPressed){_lookup[p].endDrag();}}});gsap5=_coreInitted5=_getGSAP7();}if(gsap5){InertiaPlugin=gsap5.plugins.inertia;_checkPrefix=gsap5.utils.checkPrefix;_transformProp4=_checkPrefix(_transformProp4);_transformOriginProp3=_checkPrefix(_transformOriginProp3);_toArray3=gsap5.utils.toArray;_supports3D2=!!_checkPrefix("perspective");}else if(required){console.warn("Please gsap.registerPlugin(Draggable)");}};var EventDispatcher=/* @__PURE__ */function(){function EventDispatcher2(target){this._listeners={};this.target=target||this;}var _proto=EventDispatcher2.prototype;_proto.addEventListener=function addEventListener(type2,callback2){var list=this._listeners[type2]||(this._listeners[type2]=[]);if(!~list.indexOf(callback2)){list.push(callback2);}};_proto.removeEventListener=function removeEventListener(type2,callback2){var list=this._listeners[type2],i=list&&list.indexOf(callback2)||-1;i>-1&&list.splice(i,1);};_proto.dispatchEvent=function dispatchEvent(type2){var _this=this;var result;(this._listeners[type2]||[]).forEach(function(callback2){return callback2.call(_this,{type:type2,target:_this.target})===false&&(result=false);});return result;};return EventDispatcher2;}();var Draggable=/* @__PURE__ */function(_EventDispatcher){_inheritsLoose2(Draggable2,_EventDispatcher);function Draggable2(target,vars){var _this2;_this2=_EventDispatcher.call(this)||this;_coreInitted5||_initCore7(1);target=_toArray3(target)[0];if(!InertiaPlugin){InertiaPlugin=gsap5.plugins.inertia;}_this2.vars=vars=_copy(vars||{});_this2.target=target;_this2.x=_this2.y=_this2.rotation=0;_this2.dragResistance=parseFloat(vars.dragResistance)||0;_this2.edgeResistance=isNaN(vars.edgeResistance)?1:parseFloat(vars.edgeResistance)||0;_this2.lockAxis=vars.lockAxis;_this2.autoScroll=vars.autoScroll||0;_this2.lockedAxis=null;_this2.allowEventDefault=!!vars.allowEventDefault;gsap5.getProperty(target,"x");var type2=(vars.type||"x,y").toLowerCase(),xyMode=~type2.indexOf("x")||~type2.indexOf("y"),rotationMode=type2.indexOf("rotation")!==-1,xProp=rotationMode?"rotation":xyMode?"x":"left",yProp=xyMode?"y":"top",allowX=!!(~type2.indexOf("x")||~type2.indexOf("left")||type2==="scroll"),allowY=!!(~type2.indexOf("y")||~type2.indexOf("top")||type2==="scroll"),minimumMovement=vars.minimumMovement||2,self2=_assertThisInitialized2(_this2),triggers=_toArray3(vars.trigger||vars.handle||target),killProps={},dragEndTime=0,checkAutoScrollBounds=false,autoScrollMarginTop=vars.autoScrollMarginTop||40,autoScrollMarginRight=vars.autoScrollMarginRight||40,autoScrollMarginBottom=vars.autoScrollMarginBottom||40,autoScrollMarginLeft=vars.autoScrollMarginLeft||40,isClickable=vars.clickableTest||_isClickable,clickTime=0,gsCache=target._gsap||gsap5.core.getCache(target),isFixed=_isFixed3(target),getPropAsNum=function getPropAsNum2(property,unit){return parseFloat(gsCache.get(target,property,unit));},ownerDoc=target.ownerDocument||_doc6,enabled,scrollProxy,startPointerX,startPointerY,startElementX,startElementY,hasBounds,hasDragCallback,hasMoveCallback,maxX,minX,maxY,minY,touch,touchID,rotationOrigin,dirty,old,snapX,snapY,snapXY,isClicking,touchEventTarget,matrix,interrupted,allowNativeTouchScrolling,touchDragAxis,isDispatching,clickDispatch,trustedClickDispatch,isPreventingDefault,innerMatrix,onContextMenu=function onContextMenu2(e){_preventDefault(e);e.stopImmediatePropagation&&e.stopImmediatePropagation();return false;},render2=function render3(suppressEvents){if(self2.autoScroll&&self2.isDragging&&(checkAutoScrollBounds||dirty)){var e=target,autoScrollFactor=self2.autoScroll*15,parent,isRoot,rect,pointerX,pointerY,changeX,changeY,gap;checkAutoScrollBounds=false;_windowProxy.scrollTop=_win6.pageYOffset!=null?_win6.pageYOffset:ownerDoc.documentElement.scrollTop!=null?ownerDoc.documentElement.scrollTop:ownerDoc.body.scrollTop;_windowProxy.scrollLeft=_win6.pageXOffset!=null?_win6.pageXOffset:ownerDoc.documentElement.scrollLeft!=null?ownerDoc.documentElement.scrollLeft:ownerDoc.body.scrollLeft;pointerX=self2.pointerX-_windowProxy.scrollLeft;pointerY=self2.pointerY-_windowProxy.scrollTop;while(e&&!isRoot){isRoot=_isRoot(e.parentNode);parent=isRoot?_windowProxy:e.parentNode;rect=isRoot?{bottom:Math.max(_docElement3.clientHeight,_win6.innerHeight||0),right:Math.max(_docElement3.clientWidth,_win6.innerWidth||0),left:0,top:0}:parent.getBoundingClientRect();changeX=changeY=0;if(allowY){gap=parent._gsMaxScrollY-parent.scrollTop;if(gap<0){changeY=gap;}else if(pointerY>rect.bottom-autoScrollMarginBottom&&gap){checkAutoScrollBounds=true;changeY=Math.min(gap,autoScrollFactor*(1-Math.max(0,rect.bottom-pointerY)/autoScrollMarginBottom)|0);}else if(pointerY<rect.top+autoScrollMarginTop&&parent.scrollTop){checkAutoScrollBounds=true;changeY=-Math.min(parent.scrollTop,autoScrollFactor*(1-Math.max(0,pointerY-rect.top)/autoScrollMarginTop)|0);}if(changeY){parent.scrollTop+=changeY;}}if(allowX){gap=parent._gsMaxScrollX-parent.scrollLeft;if(gap<0){changeX=gap;}else if(pointerX>rect.right-autoScrollMarginRight&&gap){checkAutoScrollBounds=true;changeX=Math.min(gap,autoScrollFactor*(1-Math.max(0,rect.right-pointerX)/autoScrollMarginRight)|0);}else if(pointerX<rect.left+autoScrollMarginLeft&&parent.scrollLeft){checkAutoScrollBounds=true;changeX=-Math.min(parent.scrollLeft,autoScrollFactor*(1-Math.max(0,pointerX-rect.left)/autoScrollMarginLeft)|0);}if(changeX){parent.scrollLeft+=changeX;}}if(isRoot&&(changeX||changeY)){_win6.scrollTo(parent.scrollLeft,parent.scrollTop);setPointerPosition(self2.pointerX+changeX,self2.pointerY+changeY);}e=parent;}}if(dirty){var x=self2.x,y=self2.y;if(rotationMode){self2.deltaX=x-parseFloat(gsCache.rotation);self2.rotation=x;gsCache.rotation=x+"deg";gsCache.renderTransform(1,gsCache);}else{if(scrollProxy){if(allowY){self2.deltaY=y-scrollProxy.top();scrollProxy.top(y);}if(allowX){self2.deltaX=x-scrollProxy.left();scrollProxy.left(x);}}else if(xyMode){if(allowY){self2.deltaY=y-parseFloat(gsCache.y);gsCache.y=y+"px";}if(allowX){self2.deltaX=x-parseFloat(gsCache.x);gsCache.x=x+"px";}gsCache.renderTransform(1,gsCache);}else{if(allowY){self2.deltaY=y-parseFloat(target.style.top||0);target.style.top=y+"px";}if(allowX){self2.deltaX=x-parseFloat(target.style.left||0);target.style.left=x+"px";}}}if(hasDragCallback&&!suppressEvents&&!isDispatching){isDispatching=true;if(_dispatchEvent(self2,"drag","onDrag")===false){if(allowX){self2.x-=self2.deltaX;}if(allowY){self2.y-=self2.deltaY;}render3(true);}isDispatching=false;}}dirty=false;},syncXY=function syncXY2(skipOnUpdate,skipSnap){var x=self2.x,y=self2.y,snappedValue,cs;if(!target._gsap){gsCache=gsap5.core.getCache(target);}gsCache.uncache&&gsap5.getProperty(target,"x");if(xyMode){self2.x=parseFloat(gsCache.x);self2.y=parseFloat(gsCache.y);}else if(rotationMode){self2.x=self2.rotation=parseFloat(gsCache.rotation);}else if(scrollProxy){self2.y=scrollProxy.top();self2.x=scrollProxy.left();}else{self2.y=parseFloat(target.style.top||(cs=_getComputedStyle3(target))&&cs.top)||0;self2.x=parseFloat(target.style.left||(cs||{}).left)||0;}if((snapX||snapY||snapXY)&&!skipSnap&&(self2.isDragging||self2.isThrowing)){if(snapXY){_temp1.x=self2.x;_temp1.y=self2.y;snappedValue=snapXY(_temp1);if(snappedValue.x!==self2.x){self2.x=snappedValue.x;dirty=true;}if(snappedValue.y!==self2.y){self2.y=snappedValue.y;dirty=true;}}if(snapX){snappedValue=snapX(self2.x);if(snappedValue!==self2.x){self2.x=snappedValue;if(rotationMode){self2.rotation=snappedValue;}dirty=true;}}if(snapY){snappedValue=snapY(self2.y);if(snappedValue!==self2.y){self2.y=snappedValue;}dirty=true;}}dirty&&render2(true);if(!skipOnUpdate){self2.deltaX=self2.x-x;self2.deltaY=self2.y-y;_dispatchEvent(self2,"throwupdate","onThrowUpdate");}},buildSnapFunc=function buildSnapFunc2(snap3,min,max,factor){if(min==null){min=-_bigNum3;}if(max==null){max=_bigNum3;}if(_isFunction7(snap3)){return function(n){var edgeTolerance=!self2.isPressed?1:1-self2.edgeResistance;return snap3.call(self2,n>max?max+(n-max)*edgeTolerance:n<min?min+(n-min)*edgeTolerance:n)*factor;};}if(_isArray2(snap3)){return function(n){var i=snap3.length,closest=0,absDif=_bigNum3,val,dif;while(--i>-1){val=snap3[i];dif=val-n;if(dif<0){dif=-dif;}if(dif<absDif&&val>=min&&val<=max){closest=i;absDif=dif;}}return snap3[closest];};}return isNaN(snap3)?function(n){return n;}:function(){return snap3*factor;};},buildPointSnapFunc=function buildPointSnapFunc2(snap3,minX2,maxX2,minY2,maxY2,radius,factor){radius=radius&&radius<_bigNum3?radius*radius:_bigNum3;if(_isFunction7(snap3)){return function(point){var edgeTolerance=!self2.isPressed?1:1-self2.edgeResistance,x=point.x,y=point.y,result,dx,dy;point.x=x=x>maxX2?maxX2+(x-maxX2)*edgeTolerance:x<minX2?minX2+(x-minX2)*edgeTolerance:x;point.y=y=y>maxY2?maxY2+(y-maxY2)*edgeTolerance:y<minY2?minY2+(y-minY2)*edgeTolerance:y;result=snap3.call(self2,point);if(result!==point){point.x=result.x;point.y=result.y;}if(factor!==1){point.x*=factor;point.y*=factor;}if(radius<_bigNum3){dx=point.x-x;dy=point.y-y;if(dx*dx+dy*dy>radius){point.x=x;point.y=y;}}return point;};}if(_isArray2(snap3)){return function(p){var i=snap3.length,closest=0,minDist=_bigNum3,x,y,point,dist;while(--i>-1){point=snap3[i];x=point.x-p.x;y=point.y-p.y;dist=x*x+y*y;if(dist<minDist){closest=i;minDist=dist;}}return minDist<=radius?snap3[closest]:p;};}return function(n){return n;};},calculateBounds=function calculateBounds2(){var bounds,targetBounds,snap3,snapIsRaw;hasBounds=false;if(scrollProxy){scrollProxy.calibrate();self2.minX=minX=-scrollProxy.maxScrollLeft();self2.minY=minY=-scrollProxy.maxScrollTop();self2.maxX=maxX=self2.maxY=maxY=0;hasBounds=true;}else if(!!vars.bounds){bounds=_getBounds3(vars.bounds,target.parentNode);if(rotationMode){self2.minX=minX=bounds.left;self2.maxX=maxX=bounds.left+bounds.width;self2.minY=minY=self2.maxY=maxY=0;}else if(!_isUndefined3(vars.bounds.maxX)||!_isUndefined3(vars.bounds.maxY)){bounds=vars.bounds;self2.minX=minX=bounds.minX;self2.minY=minY=bounds.minY;self2.maxX=maxX=bounds.maxX;self2.maxY=maxY=bounds.maxY;}else{targetBounds=_getBounds3(target,target.parentNode);self2.minX=minX=Math.round(getPropAsNum(xProp,"px")+bounds.left-targetBounds.left);self2.minY=minY=Math.round(getPropAsNum(yProp,"px")+bounds.top-targetBounds.top);self2.maxX=maxX=Math.round(minX+(bounds.width-targetBounds.width));self2.maxY=maxY=Math.round(minY+(bounds.height-targetBounds.height));}if(minX>maxX){self2.minX=maxX;self2.maxX=maxX=minX;minX=self2.minX;}if(minY>maxY){self2.minY=maxY;self2.maxY=maxY=minY;minY=self2.minY;}if(rotationMode){self2.minRotation=minX;self2.maxRotation=maxX;}hasBounds=true;}if(vars.liveSnap){snap3=vars.liveSnap===true?vars.snap||{}:vars.liveSnap;snapIsRaw=_isArray2(snap3)||_isFunction7(snap3);if(rotationMode){snapX=buildSnapFunc(snapIsRaw?snap3:snap3.rotation,minX,maxX,1);snapY=null;}else{if(snap3.points){snapXY=buildPointSnapFunc(snapIsRaw?snap3:snap3.points,minX,maxX,minY,maxY,snap3.radius,scrollProxy?-1:1);}else{if(allowX){snapX=buildSnapFunc(snapIsRaw?snap3:snap3.x||snap3.left||snap3.scrollLeft,minX,maxX,scrollProxy?-1:1);}if(allowY){snapY=buildSnapFunc(snapIsRaw?snap3:snap3.y||snap3.top||snap3.scrollTop,minY,maxY,scrollProxy?-1:1);}}}}},onThrowComplete=function onThrowComplete2(){self2.isThrowing=false;_dispatchEvent(self2,"throwcomplete","onThrowComplete");},onThrowInterrupt=function onThrowInterrupt2(){self2.isThrowing=false;},animate=function animate2(inertia,forceZeroVelocity){var snap3,snapIsRaw,tween,overshootTolerance;if(inertia&&InertiaPlugin){if(inertia===true){snap3=vars.snap||vars.liveSnap||{};snapIsRaw=_isArray2(snap3)||_isFunction7(snap3);inertia={resistance:(vars.throwResistance||vars.resistance||1e3)/(rotationMode?10:1)};if(rotationMode){inertia.rotation=_parseInertia(self2,snapIsRaw?snap3:snap3.rotation,maxX,minX,1,forceZeroVelocity);}else{if(allowX){inertia[xProp]=_parseInertia(self2,snapIsRaw?snap3:snap3.points||snap3.x||snap3.left,maxX,minX,scrollProxy?-1:1,forceZeroVelocity||self2.lockedAxis==="x");}if(allowY){inertia[yProp]=_parseInertia(self2,snapIsRaw?snap3:snap3.points||snap3.y||snap3.top,maxY,minY,scrollProxy?-1:1,forceZeroVelocity||self2.lockedAxis==="y");}if(snap3.points||_isArray2(snap3)&&_isObject5(snap3[0])){inertia.linkedProps=xProp+","+yProp;inertia.radius=snap3.radius;}}}self2.isThrowing=true;overshootTolerance=!isNaN(vars.overshootTolerance)?vars.overshootTolerance:vars.edgeResistance===1?0:1-self2.edgeResistance+0.2;if(!inertia.duration){inertia.duration={max:Math.max(vars.minDuration||0,"maxDuration"in vars?vars.maxDuration:2),min:!isNaN(vars.minDuration)?vars.minDuration:overshootTolerance===0||_isObject5(inertia)&&inertia.resistance>1e3?0:0.5,overshoot:overshootTolerance};}self2.tween=tween=gsap5.to(scrollProxy||target,{inertia:inertia,data:"_draggable",onComplete:onThrowComplete,onInterrupt:onThrowInterrupt,onUpdate:vars.fastMode?_dispatchEvent:syncXY,onUpdateParams:vars.fastMode?[self2,"onthrowupdate","onThrowUpdate"]:snap3&&snap3.radius?[false,true]:[]});if(!vars.fastMode){if(scrollProxy){scrollProxy._skip=true;}tween.render(1e9,true,true);syncXY(true,true);self2.endX=self2.x;self2.endY=self2.y;if(rotationMode){self2.endRotation=self2.x;}tween.play(0);syncXY(true,true);if(scrollProxy){scrollProxy._skip=false;}}}else if(hasBounds){self2.applyBounds();}},updateMatrix=function updateMatrix2(shiftStart){var start2=matrix,p;matrix=getGlobalMatrix(target.parentNode,true);if(shiftStart&&self2.isPressed&&!matrix.equals(start2||new Matrix2D())){p=start2.inverse().apply({x:startPointerX,y:startPointerY});matrix.apply(p,p);startPointerX=p.x;startPointerY=p.y;}if(matrix.equals(_identityMatrix2)){matrix=null;}},recordStartPositions=function recordStartPositions2(){var edgeTolerance=1-self2.edgeResistance,offsetX=isFixed?_getDocScrollLeft3(ownerDoc):0,offsetY=isFixed?_getDocScrollTop3(ownerDoc):0,parsedOrigin,x,y;updateMatrix(false);_point1.x=self2.pointerX-offsetX;_point1.y=self2.pointerY-offsetY;matrix&&matrix.apply(_point1,_point1);startPointerX=_point1.x;startPointerY=_point1.y;if(dirty){setPointerPosition(self2.pointerX,self2.pointerY);render2(true);}innerMatrix=getGlobalMatrix(target);if(scrollProxy){calculateBounds();startElementY=scrollProxy.top();startElementX=scrollProxy.left();}else{if(isTweening2()){syncXY(true,true);calculateBounds();}else{self2.applyBounds();}if(rotationMode){parsedOrigin=target.ownerSVGElement?[gsCache.xOrigin-target.getBBox().x,gsCache.yOrigin-target.getBBox().y]:(_getComputedStyle3(target)[_transformOriginProp3]||"0 0").split(" ");rotationOrigin=self2.rotationOrigin=getGlobalMatrix(target).apply({x:parseFloat(parsedOrigin[0])||0,y:parseFloat(parsedOrigin[1])||0});syncXY(true,true);x=self2.pointerX-rotationOrigin.x-offsetX;y=rotationOrigin.y-self2.pointerY+offsetY;startElementX=self2.x;startElementY=self2.y=Math.atan2(y,x)*_RAD2DEG2;}else{startElementY=getPropAsNum(yProp,"px");startElementX=getPropAsNum(xProp,"px");}}if(hasBounds&&edgeTolerance){if(startElementX>maxX){startElementX=maxX+(startElementX-maxX)/edgeTolerance;}else if(startElementX<minX){startElementX=minX-(minX-startElementX)/edgeTolerance;}if(!rotationMode){if(startElementY>maxY){startElementY=maxY+(startElementY-maxY)/edgeTolerance;}else if(startElementY<minY){startElementY=minY-(minY-startElementY)/edgeTolerance;}}}self2.startX=startElementX=_round5(startElementX);self2.startY=startElementY=_round5(startElementY);},isTweening2=function isTweening3(){return self2.tween&&self2.tween.isActive();},removePlaceholder=function removePlaceholder2(){if(_placeholderDiv.parentNode&&!isTweening2()&&!self2.isDragging){_placeholderDiv.parentNode.removeChild(_placeholderDiv);}},onPress=function onPress2(e,force){var i;if(!enabled||self2.isPressed||!e||(e.type==="mousedown"||e.type==="pointerdown")&&!force&&_getTime3()-clickTime<30&&_touchEventLookup[self2.pointerEvent.type]){isPreventingDefault&&e&&enabled&&_preventDefault(e);return;}interrupted=isTweening2();self2.pointerEvent=e;if(_touchEventLookup[e.type]){touchEventTarget=~e.type.indexOf("touch")?e.currentTarget||e.target:ownerDoc;_addListener5(touchEventTarget,"touchend",onRelease);_addListener5(touchEventTarget,"touchmove",onMove);_addListener5(touchEventTarget,"touchcancel",onRelease);_addListener5(ownerDoc,"touchstart",_onMultiTouchDocument);}else{touchEventTarget=null;_addListener5(ownerDoc,"mousemove",onMove);}touchDragAxis=null;if(!_supportsPointer||!touchEventTarget){_addListener5(ownerDoc,"mouseup",onRelease);e&&e.target&&_addListener5(e.target,"mouseup",onRelease);}isClicking=isClickable.call(self2,e.target)&&vars.dragClickables===false&&!force;if(isClicking){_addListener5(e.target,"change",onRelease);_dispatchEvent(self2,"pressInit","onPressInit");_dispatchEvent(self2,"press","onPress");_setSelectable(triggers,true);isPreventingDefault=false;return;}allowNativeTouchScrolling=!touchEventTarget||allowX===allowY||self2.vars.allowNativeTouchScrolling===false||self2.vars.allowContextMenu&&e&&(e.ctrlKey||e.which>2)?false:allowX?"y":"x";isPreventingDefault=!allowNativeTouchScrolling&&!self2.allowEventDefault;if(isPreventingDefault){_preventDefault(e);_addListener5(_win6,"touchforcechange",_preventDefault);}if(e.changedTouches){e=touch=e.changedTouches[0];touchID=e.identifier;}else if(e.pointerId){touchID=e.pointerId;}else{touch=touchID=null;}_dragCount++;_addToRenderQueue(render2);startPointerY=self2.pointerY=e.pageY;startPointerX=self2.pointerX=e.pageX;_dispatchEvent(self2,"pressInit","onPressInit");if(allowNativeTouchScrolling||self2.autoScroll){_recordMaxScrolls(target.parentNode);}if(target.parentNode&&self2.autoScroll&&!scrollProxy&&!rotationMode&&target.parentNode._gsMaxScrollX&&!_placeholderDiv.parentNode&&!target.getBBox){_placeholderDiv.style.width=target.parentNode.scrollWidth+"px";target.parentNode.appendChild(_placeholderDiv);}recordStartPositions();self2.tween&&self2.tween.kill();self2.isThrowing=false;gsap5.killTweensOf(scrollProxy||target,killProps,true);scrollProxy&&gsap5.killTweensOf(target,{scrollTo:1},true);self2.tween=self2.lockedAxis=null;if(vars.zIndexBoost||!rotationMode&&!scrollProxy&&vars.zIndexBoost!==false){target.style.zIndex=Draggable2.zIndex++;}self2.isPressed=true;hasDragCallback=!!(vars.onDrag||self2._listeners.drag);hasMoveCallback=!!(vars.onMove||self2._listeners.move);if(vars.cursor!==false||vars.activeCursor){i=triggers.length;while(--i>-1){gsap5.set(triggers[i],{cursor:vars.activeCursor||vars.cursor||(_defaultCursor==="grab"?"grabbing":_defaultCursor)});}}_dispatchEvent(self2,"press","onPress");},onMove=function onMove2(e){var originalEvent=e,touches,pointerX,pointerY,i,dx,dy;if(!enabled||_isMultiTouching||!self2.isPressed||!e){isPreventingDefault&&e&&enabled&&_preventDefault(e);return;}self2.pointerEvent=e;touches=e.changedTouches;if(touches){e=touches[0];if(e!==touch&&e.identifier!==touchID){i=touches.length;while(--i>-1&&(e=touches[i]).identifier!==touchID&&e.target!==target){}if(i<0){return;}}}else if(e.pointerId&&touchID&&e.pointerId!==touchID){return;}if(touchEventTarget&&allowNativeTouchScrolling&&!touchDragAxis){_point1.x=e.pageX-(isFixed?_getDocScrollLeft3(ownerDoc):0);_point1.y=e.pageY-(isFixed?_getDocScrollTop3(ownerDoc):0);matrix&&matrix.apply(_point1,_point1);pointerX=_point1.x;pointerY=_point1.y;dx=Math.abs(pointerX-startPointerX);dy=Math.abs(pointerY-startPointerY);if(dx!==dy&&(dx>minimumMovement||dy>minimumMovement)||_isAndroid&&allowNativeTouchScrolling===touchDragAxis){touchDragAxis=dx>dy&&allowX?"x":"y";if(allowNativeTouchScrolling&&touchDragAxis!==allowNativeTouchScrolling){_addListener5(_win6,"touchforcechange",_preventDefault);}if(self2.vars.lockAxisOnTouchScroll!==false&&allowX&&allowY){self2.lockedAxis=touchDragAxis==="x"?"y":"x";_isFunction7(self2.vars.onLockAxis)&&self2.vars.onLockAxis.call(self2,originalEvent);}if(_isAndroid&&allowNativeTouchScrolling===touchDragAxis){onRelease(originalEvent);return;}}}if(!self2.allowEventDefault&&(!allowNativeTouchScrolling||touchDragAxis&&allowNativeTouchScrolling!==touchDragAxis)&&originalEvent.cancelable!==false){_preventDefault(originalEvent);isPreventingDefault=true;}else if(isPreventingDefault){isPreventingDefault=false;}if(self2.autoScroll){checkAutoScrollBounds=true;}setPointerPosition(e.pageX,e.pageY,hasMoveCallback);},setPointerPosition=function setPointerPosition2(pointerX,pointerY,invokeOnMove){var dragTolerance=1-self2.dragResistance,edgeTolerance=1-self2.edgeResistance,prevPointerX=self2.pointerX,prevPointerY=self2.pointerY,prevStartElementY=startElementY,prevX=self2.x,prevY=self2.y,prevEndX=self2.endX,prevEndY=self2.endY,prevEndRotation=self2.endRotation,prevDirty=dirty,xChange,yChange,x,y,dif,temp;self2.pointerX=pointerX;self2.pointerY=pointerY;if(isFixed){pointerX-=_getDocScrollLeft3(ownerDoc);pointerY-=_getDocScrollTop3(ownerDoc);}if(rotationMode){y=Math.atan2(rotationOrigin.y-pointerY,pointerX-rotationOrigin.x)*_RAD2DEG2;dif=self2.y-y;if(dif>180){startElementY-=360;self2.y=y;}else if(dif<-180){startElementY+=360;self2.y=y;}if(self2.x!==startElementX||Math.abs(startElementY-y)>minimumMovement){self2.y=y;x=startElementX+(startElementY-y)*dragTolerance;}else{x=startElementX;}}else{if(matrix){temp=pointerX*matrix.a+pointerY*matrix.c+matrix.e;pointerY=pointerX*matrix.b+pointerY*matrix.d+matrix.f;pointerX=temp;}yChange=pointerY-startPointerY;xChange=pointerX-startPointerX;if(yChange<minimumMovement&&yChange>-minimumMovement){yChange=0;}if(xChange<minimumMovement&&xChange>-minimumMovement){xChange=0;}if((self2.lockAxis||self2.lockedAxis)&&(xChange||yChange)){temp=self2.lockedAxis;if(!temp){self2.lockedAxis=temp=allowX&&Math.abs(xChange)>Math.abs(yChange)?"y":allowY?"x":null;if(temp&&_isFunction7(self2.vars.onLockAxis)){self2.vars.onLockAxis.call(self2,self2.pointerEvent);}}if(temp==="y"){yChange=0;}else if(temp==="x"){xChange=0;}}x=_round5(startElementX+xChange*dragTolerance);y=_round5(startElementY+yChange*dragTolerance);}if((snapX||snapY||snapXY)&&(self2.x!==x||self2.y!==y&&!rotationMode)){if(snapXY){_temp1.x=x;_temp1.y=y;temp=snapXY(_temp1);x=_round5(temp.x);y=_round5(temp.y);}if(snapX){x=_round5(snapX(x));}if(snapY){y=_round5(snapY(y));}}if(hasBounds){if(x>maxX){x=maxX+Math.round((x-maxX)*edgeTolerance);}else if(x<minX){x=minX+Math.round((x-minX)*edgeTolerance);}if(!rotationMode){if(y>maxY){y=Math.round(maxY+(y-maxY)*edgeTolerance);}else if(y<minY){y=Math.round(minY+(y-minY)*edgeTolerance);}}}if(self2.x!==x||self2.y!==y&&!rotationMode){if(rotationMode){self2.endRotation=self2.x=self2.endX=x;dirty=true;}else{if(allowY){self2.y=self2.endY=y;dirty=true;}if(allowX){self2.x=self2.endX=x;dirty=true;}}if(!invokeOnMove||_dispatchEvent(self2,"move","onMove")!==false){if(!self2.isDragging&&self2.isPressed){self2.isDragging=true;_dispatchEvent(self2,"dragstart","onDragStart");}}else{self2.pointerX=prevPointerX;self2.pointerY=prevPointerY;startElementY=prevStartElementY;self2.x=prevX;self2.y=prevY;self2.endX=prevEndX;self2.endY=prevEndY;self2.endRotation=prevEndRotation;dirty=prevDirty;}}},onRelease=function onRelease2(e,force){if(!enabled||!self2.isPressed||e&&touchID!=null&&!force&&(e.pointerId&&e.pointerId!==touchID&&e.target!==target||e.changedTouches&&!_hasTouchID(e.changedTouches,touchID))){isPreventingDefault&&e&&enabled&&_preventDefault(e);return;}self2.isPressed=false;var originalEvent=e,wasDragging=self2.isDragging,isContextMenuRelease=self2.vars.allowContextMenu&&e&&(e.ctrlKey||e.which>2),placeholderDelayedCall=gsap5.delayedCall(1e-3,removePlaceholder),touches,i,syntheticEvent,eventTarget,syntheticClick;if(touchEventTarget){_removeListener5(touchEventTarget,"touchend",onRelease2);_removeListener5(touchEventTarget,"touchmove",onMove);_removeListener5(touchEventTarget,"touchcancel",onRelease2);_removeListener5(ownerDoc,"touchstart",_onMultiTouchDocument);}else{_removeListener5(ownerDoc,"mousemove",onMove);}_removeListener5(_win6,"touchforcechange",_preventDefault);if(!_supportsPointer||!touchEventTarget){_removeListener5(ownerDoc,"mouseup",onRelease2);e&&e.target&&_removeListener5(e.target,"mouseup",onRelease2);}dirty=false;if(wasDragging){dragEndTime=_lastDragTime=_getTime3();self2.isDragging=false;}if(isClicking&&!isContextMenuRelease){if(e){_removeListener5(e.target,"change",onRelease2);self2.pointerEvent=originalEvent;}_setSelectable(triggers,false);_dispatchEvent(self2,"release","onRelease");_dispatchEvent(self2,"click","onClick");isClicking=false;return;}_removeFromRenderQueue(render2);i=triggers.length;while(--i>-1){_setStyle(triggers[i],"cursor",vars.cursor||(vars.cursor!==false?_defaultCursor:null));}_dragCount--;if(e){touches=e.changedTouches;if(touches){e=touches[0];if(e!==touch&&e.identifier!==touchID){i=touches.length;while(--i>-1&&(e=touches[i]).identifier!==touchID&&e.target!==target){}if(i<0){return;}}}self2.pointerEvent=originalEvent;self2.pointerX=e.pageX;self2.pointerY=e.pageY;}if(isContextMenuRelease&&originalEvent){_preventDefault(originalEvent);isPreventingDefault=true;_dispatchEvent(self2,"release","onRelease");}else if(originalEvent&&!wasDragging){isPreventingDefault=false;if(interrupted&&(vars.snap||vars.bounds)){animate(vars.inertia||vars.throwProps);}_dispatchEvent(self2,"release","onRelease");if((!_isAndroid||originalEvent.type!=="touchmove")&&originalEvent.type.indexOf("cancel")===-1){_dispatchEvent(self2,"click","onClick");if(_getTime3()-clickTime<300){_dispatchEvent(self2,"doubleclick","onDoubleClick");}eventTarget=originalEvent.target||target;clickTime=_getTime3();syntheticClick=function syntheticClick2(){if(clickTime!==clickDispatch&&self2.enabled()&&!self2.isPressed&&!originalEvent.defaultPrevented){if(eventTarget.click){eventTarget.click();}else if(ownerDoc.createEvent){syntheticEvent=ownerDoc.createEvent("MouseEvents");syntheticEvent.initMouseEvent("click",true,true,_win6,1,self2.pointerEvent.screenX,self2.pointerEvent.screenY,self2.pointerX,self2.pointerY,false,false,false,false,0,null);eventTarget.dispatchEvent(syntheticEvent);}}};if(!_isAndroid&&!originalEvent.defaultPrevented){gsap5.delayedCall(0.05,syntheticClick);}}}else{animate(vars.inertia||vars.throwProps);if(!self2.allowEventDefault&&originalEvent&&(vars.dragClickables!==false||!isClickable.call(self2,originalEvent.target))&&wasDragging&&(!allowNativeTouchScrolling||touchDragAxis&&allowNativeTouchScrolling===touchDragAxis)&&originalEvent.cancelable!==false){isPreventingDefault=true;_preventDefault(originalEvent);}else{isPreventingDefault=false;}_dispatchEvent(self2,"release","onRelease");}isTweening2()&&placeholderDelayedCall.duration(self2.tween.duration());wasDragging&&_dispatchEvent(self2,"dragend","onDragEnd");return true;},updateScroll=function updateScroll2(e){if(e&&self2.isDragging&&!scrollProxy){var parent=e.target||target.parentNode,deltaX=parent.scrollLeft-parent._gsScrollX,deltaY=parent.scrollTop-parent._gsScrollY;if(deltaX||deltaY){if(matrix){startPointerX-=deltaX*matrix.a+deltaY*matrix.c;startPointerY-=deltaY*matrix.d+deltaX*matrix.b;}else{startPointerX-=deltaX;startPointerY-=deltaY;}parent._gsScrollX+=deltaX;parent._gsScrollY+=deltaY;setPointerPosition(self2.pointerX,self2.pointerY);}}},onClick=function onClick2(e){var time=_getTime3(),recentlyClicked=time-clickTime<100,recentlyDragged=time-dragEndTime<50,alreadyDispatched=recentlyClicked&&clickDispatch===clickTime,defaultPrevented=self2.pointerEvent&&self2.pointerEvent.defaultPrevented,alreadyDispatchedTrusted=recentlyClicked&&trustedClickDispatch===clickTime,trusted=e.isTrusted||e.isTrusted==null&&recentlyClicked&&alreadyDispatched;if((alreadyDispatched||recentlyDragged&&self2.vars.suppressClickOnDrag!==false)&&e.stopImmediatePropagation){e.stopImmediatePropagation();}if(recentlyClicked&&!(self2.pointerEvent&&self2.pointerEvent.defaultPrevented)&&(!alreadyDispatched||trusted&&!alreadyDispatchedTrusted)){if(trusted&&alreadyDispatched){trustedClickDispatch=clickTime;}clickDispatch=clickTime;return;}if(self2.isPressed||recentlyDragged||recentlyClicked){if(!trusted||!e.detail||!recentlyClicked||defaultPrevented){_preventDefault(e);}}if(!recentlyClicked&&!recentlyDragged){e&&e.target&&(self2.pointerEvent=e);_dispatchEvent(self2,"click","onClick");}},localizePoint=function localizePoint2(p){return matrix?{x:p.x*matrix.a+p.y*matrix.c+matrix.e,y:p.x*matrix.b+p.y*matrix.d+matrix.f}:{x:p.x,y:p.y};};old=Draggable2.get(target);old&&old.kill();_this2.startDrag=function(event,align){var r1,r2,p1,p2;onPress(event||self2.pointerEvent,true);if(align&&!self2.hitTest(event||self2.pointerEvent)){r1=_parseRect(event||self2.pointerEvent);r2=_parseRect(target);p1=localizePoint({x:r1.left+r1.width/2,y:r1.top+r1.height/2});p2=localizePoint({x:r2.left+r2.width/2,y:r2.top+r2.height/2});startPointerX-=p1.x-p2.x;startPointerY-=p1.y-p2.y;}if(!self2.isDragging){self2.isDragging=true;_dispatchEvent(self2,"dragstart","onDragStart");}};_this2.drag=onMove;_this2.endDrag=function(e){return onRelease(e||self2.pointerEvent,true);};_this2.timeSinceDrag=function(){return self2.isDragging?0:(_getTime3()-dragEndTime)/1e3;};_this2.timeSinceClick=function(){return(_getTime3()-clickTime)/1e3;};_this2.hitTest=function(target2,threshold){return Draggable2.hitTest(self2.target,target2,threshold);};_this2.getDirection=function(from3,diagonalThreshold){var mode=from3==="velocity"&&InertiaPlugin?from3:_isObject5(from3)&&!rotationMode?"element":"start",xChange,yChange,ratio,direction,r1,r2;if(mode==="element"){r1=_parseRect(self2.target);r2=_parseRect(from3);}xChange=mode==="start"?self2.x-startElementX:mode==="velocity"?InertiaPlugin.getVelocity(target,xProp):r1.left+r1.width/2-(r2.left+r2.width/2);if(rotationMode){return xChange<0?"counter-clockwise":"clockwise";}else{diagonalThreshold=diagonalThreshold||2;yChange=mode==="start"?self2.y-startElementY:mode==="velocity"?InertiaPlugin.getVelocity(target,yProp):r1.top+r1.height/2-(r2.top+r2.height/2);ratio=Math.abs(xChange/yChange);direction=ratio<1/diagonalThreshold?"":xChange<0?"left":"right";if(ratio<diagonalThreshold){if(direction!==""){direction+="-";}direction+=yChange<0?"up":"down";}}return direction;};_this2.applyBounds=function(newBounds,sticky){var x,y,forceZeroVelocity,e,parent,isRoot;if(newBounds&&vars.bounds!==newBounds){vars.bounds=newBounds;return self2.update(true,sticky);}syncXY(true);calculateBounds();if(hasBounds&&!isTweening2()){x=self2.x;y=self2.y;if(x>maxX){x=maxX;}else if(x<minX){x=minX;}if(y>maxY){y=maxY;}else if(y<minY){y=minY;}if(self2.x!==x||self2.y!==y){forceZeroVelocity=true;self2.x=self2.endX=x;if(rotationMode){self2.endRotation=x;}else{self2.y=self2.endY=y;}dirty=true;render2(true);if(self2.autoScroll&&!self2.isDragging){_recordMaxScrolls(target.parentNode);e=target;_windowProxy.scrollTop=_win6.pageYOffset!=null?_win6.pageYOffset:ownerDoc.documentElement.scrollTop!=null?ownerDoc.documentElement.scrollTop:ownerDoc.body.scrollTop;_windowProxy.scrollLeft=_win6.pageXOffset!=null?_win6.pageXOffset:ownerDoc.documentElement.scrollLeft!=null?ownerDoc.documentElement.scrollLeft:ownerDoc.body.scrollLeft;while(e&&!isRoot){isRoot=_isRoot(e.parentNode);parent=isRoot?_windowProxy:e.parentNode;if(allowY&&parent.scrollTop>parent._gsMaxScrollY){parent.scrollTop=parent._gsMaxScrollY;}if(allowX&&parent.scrollLeft>parent._gsMaxScrollX){parent.scrollLeft=parent._gsMaxScrollX;}e=parent;}}}if(self2.isThrowing&&(forceZeroVelocity||self2.endX>maxX||self2.endX<minX||self2.endY>maxY||self2.endY<minY)){animate(vars.inertia||vars.throwProps,forceZeroVelocity);}}return self2;};_this2.update=function(applyBounds,sticky,ignoreExternalChanges){if(sticky&&self2.isPressed){var m=getGlobalMatrix(target),p=innerMatrix.apply({x:self2.x-startElementX,y:self2.y-startElementY}),m2=getGlobalMatrix(target.parentNode,true);m2.apply({x:m.e-p.x,y:m.f-p.y},p);self2.x-=p.x-m2.e;self2.y-=p.y-m2.f;render2(true);recordStartPositions();}var x=self2.x,y=self2.y;updateMatrix(!sticky);if(applyBounds){self2.applyBounds();}else{dirty&&ignoreExternalChanges&&render2(true);syncXY(true);}if(sticky){setPointerPosition(self2.pointerX,self2.pointerY);dirty&&render2(true);}if(self2.isPressed&&!sticky&&(allowX&&Math.abs(x-self2.x)>0.01||allowY&&Math.abs(y-self2.y)>0.01&&!rotationMode)){recordStartPositions();}if(self2.autoScroll){_recordMaxScrolls(target.parentNode,self2.isDragging);checkAutoScrollBounds=self2.isDragging;render2(true);_removeScrollListener(target,updateScroll);_addScrollListener(target,updateScroll);}return self2;};_this2.enable=function(type3){var setVars={lazy:true},id,i,trigger2;if(vars.cursor!==false){setVars.cursor=vars.cursor||_defaultCursor;}if(gsap5.utils.checkPrefix("touchCallout")){setVars.touchCallout="none";}if(type3!=="soft"){_setTouchActionForAllDescendants(triggers,allowX===allowY?"none":vars.allowNativeTouchScrolling&&target.scrollHeight===target.clientHeight===(target.scrollWidth===target.clientHeight)||vars.allowEventDefault?"manipulation":allowX?"pan-y":"pan-x");i=triggers.length;while(--i>-1){trigger2=triggers[i];_supportsPointer||_addListener5(trigger2,"mousedown",onPress);_addListener5(trigger2,"touchstart",onPress);_addListener5(trigger2,"click",onClick,true);gsap5.set(trigger2,setVars);if(trigger2.getBBox&&trigger2.ownerSVGElement){gsap5.set(trigger2.ownerSVGElement,{touchAction:allowX===allowY?"none":vars.allowNativeTouchScrolling||vars.allowEventDefault?"manipulation":allowX?"pan-y":"pan-x"});}vars.allowContextMenu||_addListener5(trigger2,"contextmenu",onContextMenu);}_setSelectable(triggers,false);}_addScrollListener(target,updateScroll);enabled=true;if(InertiaPlugin&&type3!=="soft"){InertiaPlugin.track(scrollProxy||target,xyMode?"x,y":rotationMode?"rotation":"top,left");}target._gsDragID=id="d"+_lookupCount++;_lookup[id]=self2;if(scrollProxy){scrollProxy.enable();scrollProxy.element._gsDragID=id;}(vars.bounds||rotationMode)&&recordStartPositions();vars.bounds&&self2.applyBounds();return self2;};_this2.disable=function(type3){var dragging=self2.isDragging,i=triggers.length,trigger2;while(--i>-1){_setStyle(triggers[i],"cursor",null);}if(type3!=="soft"){_setTouchActionForAllDescendants(triggers,null);i=triggers.length;while(--i>-1){trigger2=triggers[i];_setStyle(trigger2,"touchCallout",null);_removeListener5(trigger2,"mousedown",onPress);_removeListener5(trigger2,"touchstart",onPress);_removeListener5(trigger2,"click",onClick);_removeListener5(trigger2,"contextmenu",onContextMenu);}_setSelectable(triggers,true);if(touchEventTarget){_removeListener5(touchEventTarget,"touchcancel",onRelease);_removeListener5(touchEventTarget,"touchend",onRelease);_removeListener5(touchEventTarget,"touchmove",onMove);}_removeListener5(ownerDoc,"mouseup",onRelease);_removeListener5(ownerDoc,"mousemove",onMove);}_removeScrollListener(target,updateScroll);enabled=false;InertiaPlugin&&type3!=="soft"&&InertiaPlugin.untrack(scrollProxy||target,xyMode?"x,y":rotationMode?"rotation":"top,left");scrollProxy&&scrollProxy.disable();_removeFromRenderQueue(render2);self2.isDragging=self2.isPressed=isClicking=false;dragging&&_dispatchEvent(self2,"dragend","onDragEnd");return self2;};_this2.enabled=function(value,type3){return arguments.length?value?self2.enable(type3):self2.disable(type3):enabled;};_this2.kill=function(){self2.isThrowing=false;self2.tween&&self2.tween.kill();self2.disable();gsap5.set(triggers,{clearProps:"userSelect"});delete _lookup[target._gsDragID];return self2;};if(~type2.indexOf("scroll")){scrollProxy=_this2.scrollProxy=new ScrollProxy(target,_extend({onKill:function onKill(){self2.isPressed&&onRelease(null);}},vars));target.style.overflowY=allowY&&!_isTouchDevice?"auto":"hidden";target.style.overflowX=allowX&&!_isTouchDevice?"auto":"hidden";target=scrollProxy.content;}if(rotationMode){killProps.rotation=1;}else{if(allowX){killProps[xProp]=1;}if(allowY){killProps[yProp]=1;}}gsCache.force3D="force3D"in vars?vars.force3D:true;_this2.enable();return _this2;}Draggable2.register=function register2(core){gsap5=core;_initCore7();};Draggable2.create=function create(targets,vars){_coreInitted5||_initCore7(true);return _toArray3(targets).map(function(target){return new Draggable2(target,vars);});};Draggable2.get=function get7(target){return _lookup[(_toArray3(target)[0]||{})._gsDragID];};Draggable2.timeSinceDrag=function timeSinceDrag(){return(_getTime3()-_lastDragTime)/1e3;};Draggable2.hitTest=function hitTest(obj1,obj2,threshold){if(obj1===obj2){return false;}var r1=_parseRect(obj1),r2=_parseRect(obj2),top=r1.top,left=r1.left,right=r1.right,bottom=r1.bottom,width2=r1.width,height2=r1.height,isOutside=r2.left>right||r2.right<left||r2.top>bottom||r2.bottom<top,overlap,area,isRatio;if(isOutside||!threshold){return!isOutside;}isRatio=(threshold+"").indexOf("%")!==-1;threshold=parseFloat(threshold)||0;overlap={left:Math.max(left,r2.left),top:Math.max(top,r2.top)};overlap.width=Math.min(right,r2.right)-overlap.left;overlap.height=Math.min(bottom,r2.bottom)-overlap.top;if(overlap.width<0||overlap.height<0){return false;}if(isRatio){threshold*=0.01;area=overlap.width*overlap.height;return area>=width2*height2*threshold||area>=r2.width*r2.height*threshold;}return overlap.width>threshold&&overlap.height>threshold;};return Draggable2;}(EventDispatcher);_setDefaults5(Draggable.prototype,{pointerX:0,pointerY:0,startX:0,startY:0,deltaX:0,deltaY:0,isDragging:false,isPressed:false});Draggable.zIndex=1e3;Draggable.version="3.10.4";_getGSAP7()&&gsap5.registerPlugin(Draggable);// node_modules/tslib/modules/index.js
var import_tslib=__toESM(require_tslib(),1);var _import_tslib$default=import_tslib["default"],__extends=_import_tslib$default.__extends,__assign=_import_tslib$default.__assign,__rest=_import_tslib$default.__rest,__decorate=_import_tslib$default.__decorate,__param=_import_tslib$default.__param,__metadata=_import_tslib$default.__metadata,__awaiter=_import_tslib$default.__awaiter,__generator=_import_tslib$default.__generator,__exportStar=_import_tslib$default.__exportStar,__createBinding=_import_tslib$default.__createBinding,__values=_import_tslib$default.__values,__read=_import_tslib$default.__read,__spread=_import_tslib$default.__spread,__spreadArrays=_import_tslib$default.__spreadArrays,__await=_import_tslib$default.__await,__asyncGenerator=_import_tslib$default.__asyncGenerator,__asyncDelegator=_import_tslib$default.__asyncDelegator,__asyncValues=_import_tslib$default.__asyncValues,__makeTemplateObject=_import_tslib$default.__makeTemplateObject,__importStar=_import_tslib$default.__importStar,__importDefault=_import_tslib$default.__importDefault,__classPrivateFieldGet=_import_tslib$default.__classPrivateFieldGet,__classPrivateFieldSet=_import_tslib$default.__classPrivateFieldSet;// node_modules/smooth-scrollbar/polyfills.js
var import_map=__toESM(require_map());var import_set=__toESM(require_set());var import_weak_map=__toESM(require_weak_map());var import_from=__toESM(require_from());var import_assign=__toESM(require_assign());// node_modules/lodash-es/_baseClamp.js
function baseClamp(number,lower,upper){if(number===number){if(upper!==void 0){number=number<=upper?number:upper;}if(lower!==void 0){number=number>=lower?number:lower;}}return number;}var baseClamp_default=baseClamp;// node_modules/lodash-es/_trimmedEndIndex.js
var reWhitespace=/\s/;function trimmedEndIndex(string){var index=string.length;while(index--&&reWhitespace.test(string.charAt(index))){}return index;}var trimmedEndIndex_default=trimmedEndIndex;// node_modules/lodash-es/_baseTrim.js
var reTrimStart=/^\s+/;function baseTrim(string){return string?string.slice(0,trimmedEndIndex_default(string)+1).replace(reTrimStart,""):string;}var baseTrim_default=baseTrim;// node_modules/lodash-es/isObject.js
function isObject(value){var type2=_typeof(value);return value!=null&&(type2=="object"||type2=="function");}var isObject_default=isObject;// node_modules/lodash-es/_freeGlobal.js
var freeGlobal=(typeof global==="undefined"?"undefined":_typeof(global))=="object"&&global&&global.Object===Object&&global;var freeGlobal_default=freeGlobal;// node_modules/lodash-es/_root.js
var freeSelf=(typeof self==="undefined"?"undefined":_typeof(self))=="object"&&self&&self.Object===Object&&self;var root=freeGlobal_default||freeSelf||Function("return this")();var root_default=root;// node_modules/lodash-es/_Symbol.js
var Symbol2=root_default.Symbol;var Symbol_default=Symbol2;// node_modules/lodash-es/_getRawTag.js
var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;var nativeObjectToString=objectProto.toString;var symToStringTag=Symbol_default?Symbol_default.toStringTag:void 0;function getRawTag(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{value[symToStringTag]=void 0;var unmasked=true;}catch(e){}var result=nativeObjectToString.call(value);if(unmasked){if(isOwn){value[symToStringTag]=tag;}else{delete value[symToStringTag];}}return result;}var getRawTag_default=getRawTag;// node_modules/lodash-es/_objectToString.js
var objectProto2=Object.prototype;var nativeObjectToString2=objectProto2.toString;function objectToString(value){return nativeObjectToString2.call(value);}var objectToString_default=objectToString;// node_modules/lodash-es/_baseGetTag.js
var nullTag="[object Null]";var undefinedTag="[object Undefined]";var symToStringTag2=Symbol_default?Symbol_default.toStringTag:void 0;function baseGetTag(value){if(value==null){return value===void 0?undefinedTag:nullTag;}return symToStringTag2&&symToStringTag2 in Object(value)?getRawTag_default(value):objectToString_default(value);}var baseGetTag_default=baseGetTag;// node_modules/lodash-es/isObjectLike.js
function isObjectLike(value){return value!=null&&_typeof(value)=="object";}var isObjectLike_default=isObjectLike;// node_modules/lodash-es/isSymbol.js
var symbolTag="[object Symbol]";function isSymbol(value){return _typeof(value)=="symbol"||isObjectLike_default(value)&&baseGetTag_default(value)==symbolTag;}var isSymbol_default=isSymbol;// node_modules/lodash-es/toNumber.js
var NAN=0/0;var reIsBadHex=/^[-+]0x[0-9a-f]+$/i;var reIsBinary=/^0b[01]+$/i;var reIsOctal=/^0o[0-7]+$/i;var freeParseInt=parseInt;function toNumber(value){if(typeof value=="number"){return value;}if(isSymbol_default(value)){return NAN;}if(isObject_default(value)){var other=typeof value.valueOf=="function"?value.valueOf():value;value=isObject_default(other)?other+"":other;}if(typeof value!="string"){return value===0?value:+value;}value=baseTrim_default(value);var isBinary=reIsBinary.test(value);return isBinary||reIsOctal.test(value)?freeParseInt(value.slice(2),isBinary?2:8):reIsBadHex.test(value)?NAN:+value;}var toNumber_default=toNumber;// node_modules/lodash-es/clamp.js
function clamp3(number,lower,upper){if(upper===void 0){upper=lower;lower=void 0;}if(upper!==void 0){upper=toNumber_default(upper);upper=upper===upper?upper:0;}if(lower!==void 0){lower=toNumber_default(lower);lower=lower===lower?lower:0;}return baseClamp_default(toNumber_default(number),lower,upper);}var clamp_default=clamp3;// node_modules/smooth-scrollbar/decorators/range.js
function range(min,max){if(min===void 0){min=-Infinity;}if(max===void 0){max=Infinity;}return function(proto,key){var alias="_"+key;Object.defineProperty(proto,key,{get:function get(){return this[alias];},set:function set(val){Object.defineProperty(this,alias,{value:clamp_default(val,min,max),enumerable:false,writable:true,configurable:true});},enumerable:true,configurable:true});};}// node_modules/smooth-scrollbar/decorators/boolean.js
function _boolean(proto,key){var alias="_"+key;Object.defineProperty(proto,key,{get:function get(){return this[alias];},set:function set(val){Object.defineProperty(this,alias,{value:!!val,enumerable:false,writable:true,configurable:true});},enumerable:true,configurable:true});}// node_modules/lodash-es/now.js
var now=function now(){return root_default.Date.now();};var now_default=now;// node_modules/lodash-es/debounce.js
var FUNC_ERROR_TEXT="Expected a function";var nativeMax=Math.max;var nativeMin=Math.min;function debounce(func,wait,options){var lastArgs,lastThis,maxWait,result,timerId,lastCallTime,lastInvokeTime=0,leading=false,maxing=false,trailing=true;if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT);}wait=toNumber_default(wait)||0;if(isObject_default(options)){leading=!!options.leading;maxing="maxWait"in options;maxWait=maxing?nativeMax(toNumber_default(options.maxWait)||0,wait):maxWait;trailing="trailing"in options?!!options.trailing:trailing;}function invokeFunc(time){var args=lastArgs,thisArg=lastThis;lastArgs=lastThis=void 0;lastInvokeTime=time;result=func.apply(thisArg,args);return result;}function leadingEdge(time){lastInvokeTime=time;timerId=setTimeout(timerExpired,wait);return leading?invokeFunc(time):result;}function remainingWait(time){var timeSinceLastCall=time-lastCallTime,timeSinceLastInvoke=time-lastInvokeTime,timeWaiting=wait-timeSinceLastCall;return maxing?nativeMin(timeWaiting,maxWait-timeSinceLastInvoke):timeWaiting;}function shouldInvoke(time){var timeSinceLastCall=time-lastCallTime,timeSinceLastInvoke=time-lastInvokeTime;return lastCallTime===void 0||timeSinceLastCall>=wait||timeSinceLastCall<0||maxing&&timeSinceLastInvoke>=maxWait;}function timerExpired(){var time=now_default();if(shouldInvoke(time)){return trailingEdge(time);}timerId=setTimeout(timerExpired,remainingWait(time));}function trailingEdge(time){timerId=void 0;if(trailing&&lastArgs){return invokeFunc(time);}lastArgs=lastThis=void 0;return result;}function cancel(){if(timerId!==void 0){clearTimeout(timerId);}lastInvokeTime=0;lastArgs=lastCallTime=lastThis=timerId=void 0;}function flush(){return timerId===void 0?result:trailingEdge(now_default());}function debounced(){var time=now_default(),isInvoking=shouldInvoke(time);lastArgs=arguments;lastThis=this;lastCallTime=time;if(isInvoking){if(timerId===void 0){return leadingEdge(lastCallTime);}if(maxing){clearTimeout(timerId);timerId=setTimeout(timerExpired,wait);return invokeFunc(lastCallTime);}}if(timerId===void 0){timerId=setTimeout(timerExpired,wait);}return result;}debounced.cancel=cancel;debounced.flush=flush;return debounced;}var debounce_default=debounce;// node_modules/smooth-scrollbar/decorators/debounce.js
function debounce2(){var options=[];for(var _i2=0;_i2<arguments.length;_i2++){options[_i2]=arguments[_i2];}return function(_proto,key,descriptor){var fn=descriptor.value;return{get:function get(){if(!this.hasOwnProperty(key)){Object.defineProperty(this,key,{value:debounce_default.apply(void 0,__spreadArrays([fn],options))});}return this[key];}};};}// node_modules/smooth-scrollbar/options.js
var Options=function(){function Options2(config3){var _this=this;if(config3===void 0){config3={};}this.damping=0.1;this.thumbMinSize=20;this.renderByPixels=true;this.alwaysShowTracks=false;this.continuousScrolling=true;this.delegateTo=null;this.plugins={};Object.keys(config3).forEach(function(prop){_this[prop]=config3[prop];});}Object.defineProperty(Options2.prototype,"wheelEventTarget",{get:function get(){return this.delegateTo;},set:function set(el){console.warn("[smooth-scrollbar]: `options.wheelEventTarget` is deprecated and will be removed in the future, use `options.delegateTo` instead.");this.delegateTo=el;},enumerable:true,configurable:true});__decorate([range(0,1)],Options2.prototype,"damping",void 0);__decorate([range(0,Infinity)],Options2.prototype,"thumbMinSize",void 0);__decorate([_boolean],Options2.prototype,"renderByPixels",void 0);__decorate([_boolean],Options2.prototype,"alwaysShowTracks",void 0);__decorate([_boolean],Options2.prototype,"continuousScrolling",void 0);return Options2;}();// node_modules/smooth-scrollbar/utils/event-hub.js
var eventListenerOptions;var eventMap=/* @__PURE__ */new WeakMap();function getOptions(){if(eventListenerOptions!==void 0){return eventListenerOptions;}var supportPassiveEvent=false;try{var noop2=function noop2(){};var options=Object.defineProperty({},"passive",{get:function get(){supportPassiveEvent=true;}});window.addEventListener("testPassive",noop2,options);window.removeEventListener("testPassive",noop2,options);}catch(e){}eventListenerOptions=supportPassiveEvent?{passive:false}:false;return eventListenerOptions;}function eventScope(scrollbar){var configs=eventMap.get(scrollbar)||[];eventMap.set(scrollbar,configs);return function addEvent(elem,events,fn){function handler(event){if(event.defaultPrevented){return;}fn(event);}events.split(/\s+/g).forEach(function(eventName){configs.push({elem:elem,eventName:eventName,handler:handler});elem.addEventListener(eventName,handler,getOptions());});};}function clearEventsOn(scrollbar){var configs=eventMap.get(scrollbar);if(!configs){return;}configs.forEach(function(_a){var elem=_a.elem,eventName=_a.eventName,handler=_a.handler;elem.removeEventListener(eventName,handler,getOptions());});eventMap["delete"](scrollbar);}// node_modules/smooth-scrollbar/utils/get-pointer-data.js
function getPointerData(evt){return evt.touches?evt.touches[evt.touches.length-1]:evt;}// node_modules/smooth-scrollbar/utils/get-position.js
function getPosition(evt){var data=getPointerData(evt);return{x:data.clientX,y:data.clientY};}// node_modules/smooth-scrollbar/utils/is-one-of.js
function isOneOf(a,b){if(b===void 0){b=[];}return b.some(function(v){return a===v;});}// node_modules/smooth-scrollbar/utils/set-style.js
var VENDOR_PREFIX=["webkit","moz","ms","o"];var RE=new RegExp("^-(?!(?:"+VENDOR_PREFIX.join("|")+")-)");function autoPrefix(styles){var res={};Object.keys(styles).forEach(function(prop){if(!RE.test(prop)){res[prop]=styles[prop];return;}var val=styles[prop];prop=prop.replace(/^-/,"");res[prop]=val;VENDOR_PREFIX.forEach(function(prefix){res["-"+prefix+"-"+prop]=val;});});return res;}function setStyle(elem,styles){styles=autoPrefix(styles);Object.keys(styles).forEach(function(prop){var cssProp=prop.replace(/^-/,"").replace(/-([a-z])/g,function(_,$1){return $1.toUpperCase();});elem.style[cssProp]=styles[prop];});}// node_modules/smooth-scrollbar/utils/touch-record.js
var Tracker=function(){function Tracker2(touch){this.velocityMultiplier=/Android/.test(navigator.userAgent)?window.devicePixelRatio:1;this.updateTime=Date.now();this.delta={x:0,y:0};this.velocity={x:0,y:0};this.lastPosition={x:0,y:0};this.lastPosition=getPosition(touch);}Tracker2.prototype.update=function(touch){var _a=this,velocity=_a.velocity,updateTime=_a.updateTime,lastPosition=_a.lastPosition;var now2=Date.now();var position=getPosition(touch);var delta={x:-(position.x-lastPosition.x),y:-(position.y-lastPosition.y)};var duration5=now2-updateTime||16.7;var vx=delta.x/duration5*16.7;var vy=delta.y/duration5*16.7;velocity.x=vx*this.velocityMultiplier;velocity.y=vy*this.velocityMultiplier;this.delta=delta;this.updateTime=now2;this.lastPosition=position;};return Tracker2;}();var TouchRecord=function(){function TouchRecord2(){this._touchList={};}Object.defineProperty(TouchRecord2.prototype,"_primitiveValue",{get:function get(){return{x:0,y:0};},enumerable:true,configurable:true});TouchRecord2.prototype.isActive=function(){return this._activeTouchID!==void 0;};TouchRecord2.prototype.getDelta=function(){var tracker=this._getActiveTracker();if(!tracker){return this._primitiveValue;}return __assign({},tracker.delta);};TouchRecord2.prototype.getVelocity=function(){var tracker=this._getActiveTracker();if(!tracker){return this._primitiveValue;}return __assign({},tracker.velocity);};TouchRecord2.prototype.getEasingDistance=function(damping){var deAcceleration=1-damping;var distance={x:0,y:0};var vel=this.getVelocity();Object.keys(vel).forEach(function(dir){var v=Math.abs(vel[dir])<=10?0:vel[dir];while(v!==0){distance[dir]+=v;v=v*deAcceleration|0;}});return distance;};TouchRecord2.prototype.track=function(evt){var _this=this;var targetTouches=evt.targetTouches;Array.from(targetTouches).forEach(function(touch){_this._add(touch);});return this._touchList;};TouchRecord2.prototype.update=function(evt){var _this=this;var touches=evt.touches,changedTouches=evt.changedTouches;Array.from(touches).forEach(function(touch){_this._renew(touch);});this._setActiveID(changedTouches);return this._touchList;};TouchRecord2.prototype.release=function(evt){var _this=this;delete this._activeTouchID;Array.from(evt.changedTouches).forEach(function(touch){_this._delete(touch);});};TouchRecord2.prototype._add=function(touch){if(this._has(touch)){this._delete(touch);}var tracker=new Tracker(touch);this._touchList[touch.identifier]=tracker;};TouchRecord2.prototype._renew=function(touch){if(!this._has(touch)){return;}var tracker=this._touchList[touch.identifier];tracker.update(touch);};TouchRecord2.prototype._delete=function(touch){delete this._touchList[touch.identifier];};TouchRecord2.prototype._has=function(touch){return this._touchList.hasOwnProperty(touch.identifier);};TouchRecord2.prototype._setActiveID=function(touches){this._activeTouchID=touches[touches.length-1].identifier;};TouchRecord2.prototype._getActiveTracker=function(){var _a=this,_touchList=_a._touchList,_activeTouchID=_a._activeTouchID;return _touchList[_activeTouchID];};return TouchRecord2;}();// node_modules/smooth-scrollbar/track/direction.js
var TrackDirection;(function(TrackDirection2){TrackDirection2["X"]="x";TrackDirection2["Y"]="y";})(TrackDirection||(TrackDirection={}));// node_modules/smooth-scrollbar/track/thumb.js
var ScrollbarThumb=function(){function ScrollbarThumb2(_direction2,_minSize){if(_minSize===void 0){_minSize=0;}this._direction=_direction2;this._minSize=_minSize;this.element=document.createElement("div");this.displaySize=0;this.realSize=0;this.offset=0;this.element.className="scrollbar-thumb scrollbar-thumb-"+_direction2;}ScrollbarThumb2.prototype.attachTo=function(trackEl){trackEl.appendChild(this.element);};ScrollbarThumb2.prototype.update=function(scrollOffset,containerSize,pageSize){this.realSize=Math.min(containerSize/pageSize,1)*containerSize;this.displaySize=Math.max(this.realSize,this._minSize);this.offset=scrollOffset/pageSize*(containerSize+(this.realSize-this.displaySize));setStyle(this.element,this._getStyle());};ScrollbarThumb2.prototype._getStyle=function(){switch(this._direction){case TrackDirection.X:return{width:this.displaySize+"px","-transform":"translate3d("+this.offset+"px, 0, 0)"};case TrackDirection.Y:return{height:this.displaySize+"px","-transform":"translate3d(0, "+this.offset+"px, 0)"};default:return null;}};return ScrollbarThumb2;}();// node_modules/smooth-scrollbar/track/track.js
var ScrollbarTrack=function(){function ScrollbarTrack2(direction,thumbMinSize){if(thumbMinSize===void 0){thumbMinSize=0;}this.element=document.createElement("div");this._isShown=false;this.element.className="scrollbar-track scrollbar-track-"+direction;this.thumb=new ScrollbarThumb(direction,thumbMinSize);this.thumb.attachTo(this.element);}ScrollbarTrack2.prototype.attachTo=function(scrollbarContainer){scrollbarContainer.appendChild(this.element);};ScrollbarTrack2.prototype.show=function(){if(this._isShown){return;}this._isShown=true;this.element.classList.add("show");};ScrollbarTrack2.prototype.hide=function(){if(!this._isShown){return;}this._isShown=false;this.element.classList.remove("show");};ScrollbarTrack2.prototype.update=function(scrollOffset,containerSize,pageSize){setStyle(this.element,{display:pageSize<=containerSize?"none":"block"});this.thumb.update(scrollOffset,containerSize,pageSize);};return ScrollbarTrack2;}();// node_modules/smooth-scrollbar/track/index.js
var TrackController=function(){function TrackController2(_scrollbar){this._scrollbar=_scrollbar;var thumbMinSize=_scrollbar.options.thumbMinSize;this.xAxis=new ScrollbarTrack(TrackDirection.X,thumbMinSize);this.yAxis=new ScrollbarTrack(TrackDirection.Y,thumbMinSize);this.xAxis.attachTo(_scrollbar.containerEl);this.yAxis.attachTo(_scrollbar.containerEl);if(_scrollbar.options.alwaysShowTracks){this.xAxis.show();this.yAxis.show();}}TrackController2.prototype.update=function(){var _a=this._scrollbar,size=_a.size,offset=_a.offset;this.xAxis.update(offset.x,size.container.width,size.content.width);this.yAxis.update(offset.y,size.container.height,size.content.height);};TrackController2.prototype.autoHideOnIdle=function(){if(this._scrollbar.options.alwaysShowTracks){return;}this.xAxis.hide();this.yAxis.hide();};__decorate([debounce2(300)],TrackController2.prototype,"autoHideOnIdle",null);return TrackController2;}();// node_modules/smooth-scrollbar/geometry/get-size.js
function getSize(scrollbar){var containerEl=scrollbar.containerEl,contentEl=scrollbar.contentEl;var containerStyles=getComputedStyle(containerEl);var paddings=["paddingTop","paddingBottom","paddingLeft","paddingRight"].map(function(prop){return containerStyles[prop]?parseFloat(containerStyles[prop]):0;});var verticalPadding=paddings[0]+paddings[1];var horizontalPadding=paddings[2]+paddings[3];return{container:{width:containerEl.clientWidth,height:containerEl.clientHeight},content:{width:contentEl.offsetWidth-contentEl.clientWidth+contentEl.scrollWidth+horizontalPadding,height:contentEl.offsetHeight-contentEl.clientHeight+contentEl.scrollHeight+verticalPadding}};}// node_modules/smooth-scrollbar/geometry/is-visible.js
function isVisible(scrollbar,elem){var bounding=scrollbar.bounding;var targetBounding=elem.getBoundingClientRect();var top=Math.max(bounding.top,targetBounding.top);var left=Math.max(bounding.left,targetBounding.left);var right=Math.min(bounding.right,targetBounding.right);var bottom=Math.min(bounding.bottom,targetBounding.bottom);return top<bottom&&left<right;}// node_modules/smooth-scrollbar/geometry/update.js
function update(scrollbar){var newSize=scrollbar.getSize();var limit={x:Math.max(newSize.content.width-newSize.container.width,0),y:Math.max(newSize.content.height-newSize.container.height,0)};var containerBounding=scrollbar.containerEl.getBoundingClientRect();var bounding={top:Math.max(containerBounding.top,0),right:Math.min(containerBounding.right,window.innerWidth),bottom:Math.min(containerBounding.bottom,window.innerHeight),left:Math.max(containerBounding.left,0)};scrollbar.size=newSize;scrollbar.limit=limit;scrollbar.bounding=bounding;scrollbar.track.update();scrollbar.setPosition();}// node_modules/smooth-scrollbar/scrolling/set-position.js
function setPosition(scrollbar,x,y){var options=scrollbar.options,offset=scrollbar.offset,limit=scrollbar.limit,track=scrollbar.track,contentEl=scrollbar.contentEl;if(options.renderByPixels){x=Math.round(x);y=Math.round(y);}x=clamp_default(x,0,limit.x);y=clamp_default(y,0,limit.y);if(x!==offset.x)track.xAxis.show();if(y!==offset.y)track.yAxis.show();if(!options.alwaysShowTracks){track.autoHideOnIdle();}if(x===offset.x&&y===offset.y){return null;}offset.x=x;offset.y=y;setStyle(contentEl,{"-transform":"translate3d("+-x+"px, "+-y+"px, 0)"});track.update();return{offset:__assign({},offset),limit:__assign({},limit)};}// node_modules/smooth-scrollbar/scrolling/scroll-to.js
var animationIDStorage=/* @__PURE__ */new WeakMap();function scrollTo(scrollbar,x,y,duration5,_a){if(duration5===void 0){duration5=0;}var _b=_a===void 0?{}:_a,_c=_b.easing,easing=_c===void 0?defaultEasing:_c,callback2=_b.callback;var options=scrollbar.options,offset=scrollbar.offset,limit=scrollbar.limit;if(options.renderByPixels){x=Math.round(x);y=Math.round(y);}var startX=offset.x;var startY=offset.y;var disX=clamp_default(x,0,limit.x)-startX;var disY=clamp_default(y,0,limit.y)-startY;var start2=Date.now();function scroll(){var elapse=Date.now()-start2;var progress=duration5?easing(Math.min(elapse/duration5,1)):1;scrollbar.setPosition(startX+disX*progress,startY+disY*progress);if(elapse>=duration5){if(typeof callback2==="function"){callback2.call(scrollbar);}}else{var animationID=requestAnimationFrame(scroll);animationIDStorage.set(scrollbar,animationID);}}cancelAnimationFrame(animationIDStorage.get(scrollbar));scroll();}function defaultEasing(t2){return Math.pow(t2-1,3)+1;}// node_modules/smooth-scrollbar/scrolling/scroll-into-view.js
function scrollIntoView(scrollbar,elem,_a){var _b=_a===void 0?{}:_a,_c=_b.alignToTop,alignToTop=_c===void 0?true:_c,_d=_b.onlyScrollIfNeeded,onlyScrollIfNeeded=_d===void 0?false:_d,_e=_b.offsetTop,offsetTop=_e===void 0?0:_e,_f=_b.offsetLeft,offsetLeft=_f===void 0?0:_f,_g=_b.offsetBottom,offsetBottom=_g===void 0?0:_g;var containerEl=scrollbar.containerEl,bounding=scrollbar.bounding,offset=scrollbar.offset,limit=scrollbar.limit;if(!elem||!containerEl.contains(elem))return;var targetBounding=elem.getBoundingClientRect();if(onlyScrollIfNeeded&&scrollbar.isVisible(elem))return;var delta=alignToTop?targetBounding.top-bounding.top-offsetTop:targetBounding.bottom-bounding.bottom+offsetBottom;scrollbar.setMomentum(targetBounding.left-bounding.left-offsetLeft,clamp_default(delta,-offset.y,limit.y-offset.y));}// node_modules/smooth-scrollbar/plugin.js
var ScrollbarPlugin=function(){function ScrollbarPlugin2(scrollbar,options){var _newTarget=this.constructor;this.scrollbar=scrollbar;this.name=_newTarget.pluginName;this.options=__assign(__assign({},_newTarget.defaultOptions),options);}ScrollbarPlugin2.prototype.onInit=function(){};ScrollbarPlugin2.prototype.onDestroy=function(){};ScrollbarPlugin2.prototype.onUpdate=function(){};ScrollbarPlugin2.prototype.onRender=function(_remainMomentum){};ScrollbarPlugin2.prototype.transformDelta=function(delta,_evt){return __assign({},delta);};ScrollbarPlugin2.pluginName="";ScrollbarPlugin2.defaultOptions={};return ScrollbarPlugin2;}();var globalPlugins={order:/* @__PURE__ */new Set(),constructors:{}};function addPlugins(){var Plugins=[];for(var _i2=0;_i2<arguments.length;_i2++){Plugins[_i2]=arguments[_i2];}Plugins.forEach(function(P){var pluginName=P.pluginName;if(!pluginName){throw new TypeError("plugin name is required");}globalPlugins.order.add(pluginName);globalPlugins.constructors[pluginName]=P;});}function initPlugins(scrollbar,options){return Array.from(globalPlugins.order).filter(function(pluginName){return options[pluginName]!==false;}).map(function(pluginName){var Plugin2=globalPlugins.constructors[pluginName];var instance=new Plugin2(scrollbar,options[pluginName]);options[pluginName]=instance.options;return instance;});}// node_modules/smooth-scrollbar/events/index.js
var events_exports={};__export(events_exports,{keyboardHandler:function keyboardHandler(){return _keyboardHandler;},mouseHandler:function mouseHandler(){return _mouseHandler;},resizeHandler:function resizeHandler(){return _resizeHandler;},selectHandler:function selectHandler(){return _selectHandler;},touchHandler:function touchHandler(){return _touchHandler;},wheelHandler:function wheelHandler(){return _wheelHandler;}});// node_modules/smooth-scrollbar/events/keyboard.js
var KEY_CODE;(function(KEY_CODE2){KEY_CODE2[KEY_CODE2["TAB"]=9]="TAB";KEY_CODE2[KEY_CODE2["SPACE"]=32]="SPACE";KEY_CODE2[KEY_CODE2["PAGE_UP"]=33]="PAGE_UP";KEY_CODE2[KEY_CODE2["PAGE_DOWN"]=34]="PAGE_DOWN";KEY_CODE2[KEY_CODE2["END"]=35]="END";KEY_CODE2[KEY_CODE2["HOME"]=36]="HOME";KEY_CODE2[KEY_CODE2["LEFT"]=37]="LEFT";KEY_CODE2[KEY_CODE2["UP"]=38]="UP";KEY_CODE2[KEY_CODE2["RIGHT"]=39]="RIGHT";KEY_CODE2[KEY_CODE2["DOWN"]=40]="DOWN";})(KEY_CODE||(KEY_CODE={}));function _keyboardHandler(scrollbar){var addEvent=eventScope(scrollbar);var container=scrollbar.containerEl;addEvent(container,"keydown",function(evt){var activeElement=document.activeElement;if(activeElement!==container&&!container.contains(activeElement)){return;}if(isEditable(activeElement)){return;}var delta=getKeyDelta(scrollbar,evt.keyCode||evt.which);if(!delta){return;}var x=delta[0],y=delta[1];scrollbar.addTransformableMomentum(x,y,evt,function(willScroll){if(willScroll){evt.preventDefault();}else{scrollbar.containerEl.blur();if(scrollbar.parent){scrollbar.parent.containerEl.focus();}}});});}function getKeyDelta(scrollbar,keyCode){var size=scrollbar.size,limit=scrollbar.limit,offset=scrollbar.offset;switch(keyCode){case KEY_CODE.TAB:return handleTabKey(scrollbar);case KEY_CODE.SPACE:return[0,200];case KEY_CODE.PAGE_UP:return[0,-size.container.height+40];case KEY_CODE.PAGE_DOWN:return[0,size.container.height-40];case KEY_CODE.END:return[0,limit.y-offset.y];case KEY_CODE.HOME:return[0,-offset.y];case KEY_CODE.LEFT:return[-40,0];case KEY_CODE.UP:return[0,-40];case KEY_CODE.RIGHT:return[40,0];case KEY_CODE.DOWN:return[0,40];default:return null;}}function handleTabKey(scrollbar){requestAnimationFrame(function(){scrollbar.scrollIntoView(document.activeElement,{offsetTop:scrollbar.size.container.height/2,onlyScrollIfNeeded:true});});}function isEditable(elem){if(elem.tagName==="INPUT"||elem.tagName==="SELECT"||elem.tagName==="TEXTAREA"||elem.isContentEditable){return!elem.disabled;}return false;}// node_modules/smooth-scrollbar/events/mouse.js
var Direction;(function(Direction2){Direction2[Direction2["X"]=0]="X";Direction2[Direction2["Y"]=1]="Y";})(Direction||(Direction={}));function _mouseHandler(scrollbar){var addEvent=eventScope(scrollbar);var container=scrollbar.containerEl;var _a=scrollbar.track,xAxis=_a.xAxis,yAxis=_a.yAxis;function calcMomentum2(direction,clickPosition){var size=scrollbar.size,limit=scrollbar.limit,offset=scrollbar.offset;if(direction===Direction.X){var totalWidth=size.container.width+(xAxis.thumb.realSize-xAxis.thumb.displaySize);return clamp_default(clickPosition/totalWidth*size.content.width,0,limit.x)-offset.x;}if(direction===Direction.Y){var totalHeight=size.container.height+(yAxis.thumb.realSize-yAxis.thumb.displaySize);return clamp_default(clickPosition/totalHeight*size.content.height,0,limit.y)-offset.y;}return 0;}function getTrackDirection(elem){if(isOneOf(elem,[xAxis.element,xAxis.thumb.element])){return Direction.X;}if(isOneOf(elem,[yAxis.element,yAxis.thumb.element])){return Direction.Y;}return void 0;}var isMouseDown;var isMouseMoving;var startOffsetToThumb;var trackDirection;var containerRect;addEvent(container,"click",function(evt){if(isMouseMoving||!isOneOf(evt.target,[xAxis.element,yAxis.element])){return;}var track=evt.target;var direction=getTrackDirection(track);var rect=track.getBoundingClientRect();var clickPos=getPosition(evt);if(direction===Direction.X){var offsetOnTrack=clickPos.x-rect.left-xAxis.thumb.displaySize/2;scrollbar.setMomentum(calcMomentum2(direction,offsetOnTrack),0);}if(direction===Direction.Y){var offsetOnTrack=clickPos.y-rect.top-yAxis.thumb.displaySize/2;scrollbar.setMomentum(0,calcMomentum2(direction,offsetOnTrack));}});addEvent(container,"mousedown",function(evt){if(!isOneOf(evt.target,[xAxis.thumb.element,yAxis.thumb.element])){return;}isMouseDown=true;var thumb=evt.target;var cursorPos=getPosition(evt);var thumbRect=thumb.getBoundingClientRect();trackDirection=getTrackDirection(thumb);startOffsetToThumb={x:cursorPos.x-thumbRect.left,y:cursorPos.y-thumbRect.top};containerRect=container.getBoundingClientRect();setStyle(scrollbar.containerEl,{"-user-select":"none"});});addEvent(window,"mousemove",function(evt){if(!isMouseDown)return;isMouseMoving=true;var cursorPos=getPosition(evt);if(trackDirection===Direction.X){var offsetOnTrack=cursorPos.x-startOffsetToThumb.x-containerRect.left;scrollbar.setMomentum(calcMomentum2(trackDirection,offsetOnTrack),0);}if(trackDirection===Direction.Y){var offsetOnTrack=cursorPos.y-startOffsetToThumb.y-containerRect.top;scrollbar.setMomentum(0,calcMomentum2(trackDirection,offsetOnTrack));}});addEvent(window,"mouseup blur",function(){isMouseDown=isMouseMoving=false;setStyle(scrollbar.containerEl,{"-user-select":""});});}// node_modules/smooth-scrollbar/events/resize.js
function _resizeHandler(scrollbar){var addEvent=eventScope(scrollbar);addEvent(window,"resize",debounce_default(scrollbar.update.bind(scrollbar),300));}// node_modules/smooth-scrollbar/events/select.js
function _selectHandler(scrollbar){var addEvent=eventScope(scrollbar);var containerEl=scrollbar.containerEl,contentEl=scrollbar.contentEl;var isSelected=false;var animationID;function scroll(_a){var x=_a.x,y=_a.y;if(!x&&!y)return;var offset=scrollbar.offset,limit=scrollbar.limit;scrollbar.setMomentum(clamp_default(offset.x+x,0,limit.x)-offset.x,clamp_default(offset.y+y,0,limit.y)-offset.y);animationID=requestAnimationFrame(function(){scroll({x:x,y:y});});}addEvent(window,"mousemove",function(evt){if(!isSelected)return;cancelAnimationFrame(animationID);var dir=calcMomentum(scrollbar,evt);scroll(dir);});addEvent(contentEl,"selectstart",function(evt){evt.stopPropagation();cancelAnimationFrame(animationID);isSelected=true;});addEvent(window,"mouseup blur",function(){cancelAnimationFrame(animationID);isSelected=false;});addEvent(containerEl,"scroll",function(evt){evt.preventDefault();containerEl.scrollTop=containerEl.scrollLeft=0;});}function calcMomentum(scrollbar,evt){var _a=scrollbar.bounding,top=_a.top,right=_a.right,bottom=_a.bottom,left=_a.left;var _b=getPosition(evt),x=_b.x,y=_b.y;var res={x:0,y:0};var padding=20;if(x===0&&y===0)return res;if(x>right-padding){res.x=x-right+padding;}else if(x<left+padding){res.x=x-left-padding;}if(y>bottom-padding){res.y=y-bottom+padding;}else if(y<top+padding){res.y=y-top-padding;}res.x*=2;res.y*=2;return res;}// node_modules/smooth-scrollbar/events/touch.js
var activeScrollbar;function _touchHandler(scrollbar){var target=scrollbar.options.delegateTo||scrollbar.containerEl;var touchRecord=new TouchRecord();var addEvent=eventScope(scrollbar);var damping;var pointerCount=0;addEvent(target,"touchstart",function(evt){touchRecord.track(evt);scrollbar.setMomentum(0,0);if(pointerCount===0){damping=scrollbar.options.damping;scrollbar.options.damping=Math.max(damping,0.5);}pointerCount++;});addEvent(target,"touchmove",function(evt){if(activeScrollbar&&activeScrollbar!==scrollbar)return;touchRecord.update(evt);var _a=touchRecord.getDelta(),x=_a.x,y=_a.y;scrollbar.addTransformableMomentum(x,y,evt,function(willScroll){if(willScroll&&evt.cancelable){evt.preventDefault();activeScrollbar=scrollbar;}});});addEvent(target,"touchcancel touchend",function(evt){var delta=touchRecord.getEasingDistance(damping);scrollbar.addTransformableMomentum(delta.x,delta.y,evt);pointerCount--;if(pointerCount===0){scrollbar.options.damping=damping;}touchRecord.release(evt);activeScrollbar=null;});}// node_modules/smooth-scrollbar/events/wheel.js
function _wheelHandler(scrollbar){var addEvent=eventScope(scrollbar);var target=scrollbar.options.delegateTo||scrollbar.containerEl;var eventName="onwheel"in window||document.implementation.hasFeature("Events.wheel","3.0")?"wheel":"mousewheel";addEvent(target,eventName,function(evt){var _a=normalizeDelta(evt),x=_a.x,y=_a.y;scrollbar.addTransformableMomentum(x,y,evt,function(willScroll){if(willScroll){evt.preventDefault();}});});}var DELTA_SCALE={STANDARD:1,OTHERS:-3};var DELTA_MODE=[1,28,500];var getDeltaMode=function getDeltaMode(mode){return DELTA_MODE[mode]||DELTA_MODE[0];};function normalizeDelta(evt){if("deltaX"in evt){var mode=getDeltaMode(evt.deltaMode);return{x:evt.deltaX/DELTA_SCALE.STANDARD*mode,y:evt.deltaY/DELTA_SCALE.STANDARD*mode};}if("wheelDeltaX"in evt){return{x:evt.wheelDeltaX/DELTA_SCALE.OTHERS,y:evt.wheelDeltaY/DELTA_SCALE.OTHERS};}return{x:0,y:evt.wheelDelta/DELTA_SCALE.OTHERS};}// node_modules/smooth-scrollbar/scrollbar.js
var scrollbarMap=/* @__PURE__ */new Map();var Scrollbar=function(){function Scrollbar2(containerEl,options){var _this=this;this.offset={x:0,y:0};this.limit={x:Infinity,y:Infinity};this.bounding={top:0,right:0,bottom:0,left:0};this._plugins=[];this._momentum={x:0,y:0};this._listeners=/* @__PURE__ */new Set();this.containerEl=containerEl;var contentEl=this.contentEl=document.createElement("div");this.options=new Options(options);containerEl.setAttribute("data-scrollbar","true");containerEl.setAttribute("tabindex","-1");setStyle(containerEl,{overflow:"hidden",outline:"none"});if(window.navigator.msPointerEnabled){containerEl.style.msTouchAction="none";}contentEl.className="scroll-content";Array.from(containerEl.childNodes).forEach(function(node){contentEl.appendChild(node);});containerEl.appendChild(contentEl);this.track=new TrackController(this);this.size=this.getSize();this._plugins=initPlugins(this,this.options.plugins);var scrollLeft=containerEl.scrollLeft,scrollTop=containerEl.scrollTop;containerEl.scrollLeft=containerEl.scrollTop=0;this.setPosition(scrollLeft,scrollTop,{withoutCallbacks:true});var ResizeObserver=window.ResizeObserver;if(typeof ResizeObserver==="function"){this._observer=new ResizeObserver(function(){_this.update();});this._observer.observe(contentEl);}scrollbarMap.set(containerEl,this);requestAnimationFrame(function(){_this._init();});}Object.defineProperty(Scrollbar2.prototype,"parent",{get:function get(){var elem=this.containerEl.parentElement;while(elem){var parentScrollbar=scrollbarMap.get(elem);if(parentScrollbar){return parentScrollbar;}elem=elem.parentElement;}return null;},enumerable:true,configurable:true});Object.defineProperty(Scrollbar2.prototype,"scrollTop",{get:function get(){return this.offset.y;},set:function set(y){this.setPosition(this.scrollLeft,y);},enumerable:true,configurable:true});Object.defineProperty(Scrollbar2.prototype,"scrollLeft",{get:function get(){return this.offset.x;},set:function set(x){this.setPosition(x,this.scrollTop);},enumerable:true,configurable:true});Scrollbar2.prototype.getSize=function(){return getSize(this);};Scrollbar2.prototype.update=function(){update(this);this._plugins.forEach(function(plugin){plugin.onUpdate();});};Scrollbar2.prototype.isVisible=function(elem){return isVisible(this,elem);};Scrollbar2.prototype.setPosition=function(x,y,options){var _this=this;if(x===void 0){x=this.offset.x;}if(y===void 0){y=this.offset.y;}if(options===void 0){options={};}var status=setPosition(this,x,y);if(!status||options.withoutCallbacks){return;}this._listeners.forEach(function(fn){fn.call(_this,status);});};Scrollbar2.prototype.scrollTo=function(x,y,duration5,options){if(x===void 0){x=this.offset.x;}if(y===void 0){y=this.offset.y;}if(duration5===void 0){duration5=0;}if(options===void 0){options={};}scrollTo(this,x,y,duration5,options);};Scrollbar2.prototype.scrollIntoView=function(elem,options){if(options===void 0){options={};}scrollIntoView(this,elem,options);};Scrollbar2.prototype.addListener=function(fn){if(typeof fn!=="function"){throw new TypeError("[smooth-scrollbar] scrolling listener should be a function");}this._listeners.add(fn);};Scrollbar2.prototype.removeListener=function(fn){this._listeners["delete"](fn);};Scrollbar2.prototype.addTransformableMomentum=function(x,y,fromEvent,callback2){this._updateDebounced();var finalDelta=this._plugins.reduce(function(delta,plugin){return plugin.transformDelta(delta,fromEvent)||delta;},{x:x,y:y});var willScroll=!this._shouldPropagateMomentum(finalDelta.x,finalDelta.y);if(willScroll){this.addMomentum(finalDelta.x,finalDelta.y);}if(callback2){callback2.call(this,willScroll);}};Scrollbar2.prototype.addMomentum=function(x,y){this.setMomentum(this._momentum.x+x,this._momentum.y+y);};Scrollbar2.prototype.setMomentum=function(x,y){if(this.limit.x===0){x=0;}if(this.limit.y===0){y=0;}if(this.options.renderByPixels){x=Math.round(x);y=Math.round(y);}this._momentum.x=x;this._momentum.y=y;};Scrollbar2.prototype.updatePluginOptions=function(pluginName,options){this._plugins.forEach(function(plugin){if(plugin.name===pluginName){Object.assign(plugin.options,options);}});};Scrollbar2.prototype.destroy=function(){var _a=this,containerEl=_a.containerEl,contentEl=_a.contentEl;clearEventsOn(this);this._listeners.clear();this.setMomentum(0,0);cancelAnimationFrame(this._renderID);if(this._observer){this._observer.disconnect();}scrollbarMap["delete"](this.containerEl);var childNodes=Array.from(contentEl.childNodes);while(containerEl.firstChild){containerEl.removeChild(containerEl.firstChild);}childNodes.forEach(function(el){containerEl.appendChild(el);});setStyle(containerEl,{overflow:""});containerEl.scrollTop=this.scrollTop;containerEl.scrollLeft=this.scrollLeft;this._plugins.forEach(function(plugin){plugin.onDestroy();});this._plugins.length=0;};Scrollbar2.prototype._init=function(){var _this=this;this.update();Object.keys(events_exports).forEach(function(prop){events_exports[prop](_this);});this._plugins.forEach(function(plugin){plugin.onInit();});this._render();};Scrollbar2.prototype._updateDebounced=function(){this.update();};Scrollbar2.prototype._shouldPropagateMomentum=function(deltaX,deltaY){if(deltaX===void 0){deltaX=0;}if(deltaY===void 0){deltaY=0;}var _a=this,options=_a.options,offset=_a.offset,limit=_a.limit;if(!options.continuousScrolling)return false;if(limit.x===0&&limit.y===0){this._updateDebounced();}var destX=clamp_default(deltaX+offset.x,0,limit.x);var destY=clamp_default(deltaY+offset.y,0,limit.y);var res=true;res=res&&destX===offset.x;res=res&&destY===offset.y;res=res&&(offset.x===limit.x||offset.x===0||offset.y===limit.y||offset.y===0);return res;};Scrollbar2.prototype._render=function(){var _momentum=this._momentum;if(_momentum.x||_momentum.y){var nextX=this._nextTick("x");var nextY=this._nextTick("y");_momentum.x=nextX.momentum;_momentum.y=nextY.momentum;this.setPosition(nextX.position,nextY.position);}var remain=__assign({},this._momentum);this._plugins.forEach(function(plugin){plugin.onRender(remain);});this._renderID=requestAnimationFrame(this._render.bind(this));};Scrollbar2.prototype._nextTick=function(direction){var _a=this,options=_a.options,offset=_a.offset,_momentum=_a._momentum;var current=offset[direction];var remain=_momentum[direction];if(Math.abs(remain)<=0.1){return{momentum:0,position:current+remain};}var nextMomentum=remain*(1-options.damping);if(options.renderByPixels){nextMomentum|=0;}return{momentum:nextMomentum,position:current+remain-nextMomentum};};__decorate([debounce2(100,{leading:true})],Scrollbar2.prototype,"_updateDebounced",null);return Scrollbar2;}();// node_modules/smooth-scrollbar/style.js
var TRACK_BG="rgba(222, 222, 222, .75)";var THUMB_BG="rgba(0, 0, 0, .5)";var SCROLLBAR_STYLE="\n[data-scrollbar] {\n  display: block;\n  position: relative;\n}\n\n.scroll-content {\n  display: flow-root;\n  -webkit-transform: translate3d(0, 0, 0);\n          transform: translate3d(0, 0, 0);\n}\n\n.scrollbar-track {\n  position: absolute;\n  opacity: 0;\n  z-index: 1;\n  background: "+TRACK_BG+";\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  -webkit-transition: opacity 0.5s 0.5s ease-out;\n          transition: opacity 0.5s 0.5s ease-out;\n}\n.scrollbar-track.show,\n.scrollbar-track:hover {\n  opacity: 1;\n  -webkit-transition-delay: 0s;\n          transition-delay: 0s;\n}\n\n.scrollbar-track-x {\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  height: 8px;\n}\n.scrollbar-track-y {\n  top: 0;\n  right: 0;\n  width: 8px;\n  height: 100%;\n}\n.scrollbar-thumb {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 8px;\n  height: 8px;\n  background: "+THUMB_BG+";\n  border-radius: 4px;\n}\n";var STYLE_ID="smooth-scrollbar-style";var isStyleAttached=false;function attachStyle(){if(isStyleAttached||typeof window==="undefined"){return;}var styleEl=document.createElement("style");styleEl.id=STYLE_ID;styleEl.textContent=SCROLLBAR_STYLE;if(document.head){document.head.appendChild(styleEl);}isStyleAttached=true;}function detachStyle(){if(!isStyleAttached||typeof window==="undefined"){return;}var styleEl=document.getElementById(STYLE_ID);if(!styleEl||!styleEl.parentNode){return;}styleEl.parentNode.removeChild(styleEl);isStyleAttached=false;}// node_modules/smooth-scrollbar/index.js
var SmoothScrollbar=function(_super){__extends(SmoothScrollbar2,_super);function SmoothScrollbar2(){return _super!==null&&_super.apply(this,arguments)||this;}SmoothScrollbar2.init=function(elem,options){if(!elem||elem.nodeType!==1){throw new TypeError("expect element to be DOM Element, but got "+elem);}attachStyle();if(scrollbarMap.has(elem)){return scrollbarMap.get(elem);}return new Scrollbar(elem,options);};SmoothScrollbar2.initAll=function(options){return Array.from(document.querySelectorAll("[data-scrollbar]"),function(elem){return SmoothScrollbar2.init(elem,options);});};SmoothScrollbar2.has=function(elem){return scrollbarMap.has(elem);};SmoothScrollbar2.get=function(elem){return scrollbarMap.get(elem);};SmoothScrollbar2.getAll=function(){return Array.from(scrollbarMap.values());};SmoothScrollbar2.destroy=function(elem){var scrollbar=scrollbarMap.get(elem);if(scrollbar){scrollbar.destroy();}};SmoothScrollbar2.destroyAll=function(){scrollbarMap.forEach(function(scrollbar){scrollbar.destroy();});};SmoothScrollbar2.use=function(){var Plugins=[];for(var _i2=0;_i2<arguments.length;_i2++){Plugins[_i2]=arguments[_i2];}return addPlugins.apply(void 0,Plugins);};SmoothScrollbar2.attachStyle=function(){return attachStyle();};SmoothScrollbar2.detachStyle=function(){return detachStyle();};SmoothScrollbar2.version="8.7.4";SmoothScrollbar2.ScrollbarPlugin=ScrollbarPlugin;return SmoothScrollbar2;}(Scrollbar);var smooth_scrollbar_default=SmoothScrollbar;// node_modules/video.js/dist/video.es.js
var import_window6=__toESM(require_window());var import_document=__toESM(require_document());// node_modules/@babel/runtime/helpers/esm/extends.js
function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};return _extends.apply(this,arguments);}// node_modules/video.js/dist/video.es.js
var import_keycode=__toESM(require_keycode());// node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js
function _assertThisInitialized3(self2){if(self2===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self2;}// node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js
function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf2(o2,p2){o2.__proto__=p2;return o2;};return _setPrototypeOf(o,p);}// node_modules/@babel/runtime/helpers/esm/inheritsLoose.js
function _inheritsLoose3(subClass,superClass){subClass.prototype=Object.create(superClass.prototype);subClass.prototype.constructor=subClass;_setPrototypeOf(subClass,superClass);}// node_modules/video.js/dist/video.es.js
var import_tuple=__toESM(require_tuple());var import_xhr=__toESM(require_lib());var import_videojs_vtt=__toESM(require_browser_index());// node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js
function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}// node_modules/@babel/runtime/helpers/esm/construct.js
function _construct(Parent,args,Class){if(_isNativeReflectConstruct()){_construct=Reflect.construct;}else{_construct=function _construct2(Parent2,args2,Class2){var a=[null];a.push.apply(a,args2);var Constructor=Function.bind.apply(Parent2,a);var instance=new Constructor();if(Class2)_setPrototypeOf(instance,Class2.prototype);return instance;};}return _construct.apply(null,arguments);}// node_modules/@babel/runtime/helpers/esm/inherits.js
function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});Object.defineProperty(subClass,"prototype",{writable:false});if(superClass)_setPrototypeOf(subClass,superClass);}// node_modules/@videojs/vhs-utils/es/resolve-url.js
var import_url_toolkit=__toESM(require_url_toolkit());var import_window=__toESM(require_window());var DEFAULT_LOCATION="http://example.com";var resolveUrl=function resolveUrl2(baseUrl,relativeUrl){if(/^[a-z]+:/i.test(relativeUrl)){return relativeUrl;}if(/^data:/.test(baseUrl)){baseUrl=import_window["default"].location&&import_window["default"].location.href||"";}var nativeURL=typeof import_window["default"].URL==="function";var protocolLess=/^\/\//.test(baseUrl);var removeLocation=!import_window["default"].location&&!/\/\//i.test(baseUrl);if(nativeURL){baseUrl=new import_window["default"].URL(baseUrl,import_window["default"].location||DEFAULT_LOCATION);}else if(!/\/\//i.test(baseUrl)){baseUrl=import_url_toolkit["default"].buildAbsoluteURL(import_window["default"].location&&import_window["default"].location.href||"",baseUrl);}if(nativeURL){var newUrl=new URL(relativeUrl,baseUrl);if(removeLocation){return newUrl.href.slice(DEFAULT_LOCATION.length);}else if(protocolLess){return newUrl.href.slice(newUrl.protocol.length);}return newUrl.href;}return import_url_toolkit["default"].buildAbsoluteURL(baseUrl,relativeUrl);};var resolve_url_default=resolveUrl;// node_modules/@videojs/vhs-utils/es/stream.js
var Stream=/* @__PURE__ */function(){function Stream2(){this.listeners={};}var _proto=Stream2.prototype;_proto.on=function on3(type2,listener){if(!this.listeners[type2]){this.listeners[type2]=[];}this.listeners[type2].push(listener);};_proto.off=function off2(type2,listener){if(!this.listeners[type2]){return false;}var index=this.listeners[type2].indexOf(listener);this.listeners[type2]=this.listeners[type2].slice(0);this.listeners[type2].splice(index,1);return index>-1;};_proto.trigger=function trigger2(type2){var callbacks=this.listeners[type2];if(!callbacks){return;}if(arguments.length===2){var length=callbacks.length;for(var i=0;i<length;++i){callbacks[i].call(this,arguments[1]);}}else{var args=Array.prototype.slice.call(arguments,1);var _length=callbacks.length;for(var _i2=0;_i2<_length;++_i2){callbacks[_i2].apply(this,args);}}};_proto.dispose=function dispose(){this.listeners={};};_proto.pipe=function pipe3(destination){this.on("data",function(data){destination.push(data);});};return Stream2;}();// node_modules/@videojs/vhs-utils/es/decode-b64-to-uint8-array.js
var import_window2=__toESM(require_window());var atob=function atob2(s){return import_window2["default"].atob?import_window2["default"].atob(s):Buffer.from(s,"base64").toString("binary");};function decodeB64ToUint8Array(b64Text){var decodedString=atob(b64Text);var array=new Uint8Array(decodedString.length);for(var i=0;i<decodedString.length;i++){array[i]=decodedString.charCodeAt(i);}return array;}// node_modules/m3u8-parser/dist/m3u8-parser.es.js
var LineStream=/* @__PURE__ */function(_Stream){_inheritsLoose3(LineStream2,_Stream);function LineStream2(){var _this;_this=_Stream.call(this)||this;_this.buffer="";return _this;}var _proto=LineStream2.prototype;_proto.push=function push(data){var nextNewline;this.buffer+=data;nextNewline=this.buffer.indexOf("\n");for(;nextNewline>-1;nextNewline=this.buffer.indexOf("\n")){this.trigger("data",this.buffer.substring(0,nextNewline));this.buffer=this.buffer.substring(nextNewline+1);}};return LineStream2;}(Stream);var TAB=String.fromCharCode(9);var parseByterange=function parseByterange2(byterangeString){var match=/([0-9.]*)?@?([0-9.]*)?/.exec(byterangeString||"");var result={};if(match[1]){result.length=parseInt(match[1],10);}if(match[2]){result.offset=parseInt(match[2],10);}return result;};var attributeSeparator=function attributeSeparator2(){var key="[^=]*";var value='"[^"]*"|[^,]*';var keyvalue="(?:"+key+")=(?:"+value+")";return new RegExp("(?:^|,)("+keyvalue+")");};var parseAttributes=function parseAttributes2(attributes){var attrs=attributes.split(attributeSeparator());var result={};var i=attrs.length;var attr;while(i--){if(attrs[i]===""){continue;}attr=/([^=]*)=(.*)/.exec(attrs[i]).slice(1);attr[0]=attr[0].replace(/^\s+|\s+$/g,"");attr[1]=attr[1].replace(/^\s+|\s+$/g,"");attr[1]=attr[1].replace(/^['"](.*)['"]$/g,"$1");result[attr[0]]=attr[1];}return result;};var ParseStream=/* @__PURE__ */function(_Stream){_inheritsLoose3(ParseStream2,_Stream);function ParseStream2(){var _this;_this=_Stream.call(this)||this;_this.customParsers=[];_this.tagMappers=[];return _this;}var _proto=ParseStream2.prototype;_proto.push=function push(line){var _this2=this;var match;var event;line=line.trim();if(line.length===0){return;}if(line[0]!=="#"){this.trigger("data",{type:"uri",uri:line});return;}var newLines=this.tagMappers.reduce(function(acc,mapper){var mappedLine=mapper(line);if(mappedLine===line){return acc;}return acc.concat([mappedLine]);},[line]);newLines.forEach(function(newLine){for(var i=0;i<_this2.customParsers.length;i++){if(_this2.customParsers[i].call(_this2,newLine)){return;}}if(newLine.indexOf("#EXT")!==0){_this2.trigger("data",{type:"comment",text:newLine.slice(1)});return;}newLine=newLine.replace("\r","");match=/^#EXTM3U/.exec(newLine);if(match){_this2.trigger("data",{type:"tag",tagType:"m3u"});return;}match=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(newLine);if(match){event={type:"tag",tagType:"inf"};if(match[1]){event.duration=parseFloat(match[1]);}if(match[2]){event.title=match[2];}_this2.trigger("data",event);return;}match=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(newLine);if(match){event={type:"tag",tagType:"targetduration"};if(match[1]){event.duration=parseInt(match[1],10);}_this2.trigger("data",event);return;}match=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(newLine);if(match){event={type:"tag",tagType:"version"};if(match[1]){event.version=parseInt(match[1],10);}_this2.trigger("data",event);return;}match=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(newLine);if(match){event={type:"tag",tagType:"media-sequence"};if(match[1]){event.number=parseInt(match[1],10);}_this2.trigger("data",event);return;}match=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(newLine);if(match){event={type:"tag",tagType:"discontinuity-sequence"};if(match[1]){event.number=parseInt(match[1],10);}_this2.trigger("data",event);return;}match=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(newLine);if(match){event={type:"tag",tagType:"playlist-type"};if(match[1]){event.playlistType=match[1];}_this2.trigger("data",event);return;}match=/^#EXT-X-BYTERANGE:?(.*)?$/.exec(newLine);if(match){event=_extends(parseByterange(match[1]),{type:"tag",tagType:"byterange"});_this2.trigger("data",event);return;}match=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(newLine);if(match){event={type:"tag",tagType:"allow-cache"};if(match[1]){event.allowed=!/NO/.test(match[1]);}_this2.trigger("data",event);return;}match=/^#EXT-X-MAP:?(.*)$/.exec(newLine);if(match){event={type:"tag",tagType:"map"};if(match[1]){var attributes=parseAttributes(match[1]);if(attributes.URI){event.uri=attributes.URI;}if(attributes.BYTERANGE){event.byterange=parseByterange(attributes.BYTERANGE);}}_this2.trigger("data",event);return;}match=/^#EXT-X-STREAM-INF:?(.*)$/.exec(newLine);if(match){event={type:"tag",tagType:"stream-inf"};if(match[1]){event.attributes=parseAttributes(match[1]);if(event.attributes.RESOLUTION){var split=event.attributes.RESOLUTION.split("x");var resolution={};if(split[0]){resolution.width=parseInt(split[0],10);}if(split[1]){resolution.height=parseInt(split[1],10);}event.attributes.RESOLUTION=resolution;}if(event.attributes.BANDWIDTH){event.attributes.BANDWIDTH=parseInt(event.attributes.BANDWIDTH,10);}if(event.attributes["PROGRAM-ID"]){event.attributes["PROGRAM-ID"]=parseInt(event.attributes["PROGRAM-ID"],10);}}_this2.trigger("data",event);return;}match=/^#EXT-X-MEDIA:?(.*)$/.exec(newLine);if(match){event={type:"tag",tagType:"media"};if(match[1]){event.attributes=parseAttributes(match[1]);}_this2.trigger("data",event);return;}match=/^#EXT-X-ENDLIST/.exec(newLine);if(match){_this2.trigger("data",{type:"tag",tagType:"endlist"});return;}match=/^#EXT-X-DISCONTINUITY/.exec(newLine);if(match){_this2.trigger("data",{type:"tag",tagType:"discontinuity"});return;}match=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(newLine);if(match){event={type:"tag",tagType:"program-date-time"};if(match[1]){event.dateTimeString=match[1];event.dateTimeObject=new Date(match[1]);}_this2.trigger("data",event);return;}match=/^#EXT-X-KEY:?(.*)$/.exec(newLine);if(match){event={type:"tag",tagType:"key"};if(match[1]){event.attributes=parseAttributes(match[1]);if(event.attributes.IV){if(event.attributes.IV.substring(0,2).toLowerCase()==="0x"){event.attributes.IV=event.attributes.IV.substring(2);}event.attributes.IV=event.attributes.IV.match(/.{8}/g);event.attributes.IV[0]=parseInt(event.attributes.IV[0],16);event.attributes.IV[1]=parseInt(event.attributes.IV[1],16);event.attributes.IV[2]=parseInt(event.attributes.IV[2],16);event.attributes.IV[3]=parseInt(event.attributes.IV[3],16);event.attributes.IV=new Uint32Array(event.attributes.IV);}}_this2.trigger("data",event);return;}match=/^#EXT-X-START:?(.*)$/.exec(newLine);if(match){event={type:"tag",tagType:"start"};if(match[1]){event.attributes=parseAttributes(match[1]);event.attributes["TIME-OFFSET"]=parseFloat(event.attributes["TIME-OFFSET"]);event.attributes.PRECISE=/YES/.test(event.attributes.PRECISE);}_this2.trigger("data",event);return;}match=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(newLine);if(match){event={type:"tag",tagType:"cue-out-cont"};if(match[1]){event.data=match[1];}else{event.data="";}_this2.trigger("data",event);return;}match=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(newLine);if(match){event={type:"tag",tagType:"cue-out"};if(match[1]){event.data=match[1];}else{event.data="";}_this2.trigger("data",event);return;}match=/^#EXT-X-CUE-IN:?(.*)?$/.exec(newLine);if(match){event={type:"tag",tagType:"cue-in"};if(match[1]){event.data=match[1];}else{event.data="";}_this2.trigger("data",event);return;}match=/^#EXT-X-SKIP:(.*)$/.exec(newLine);if(match&&match[1]){event={type:"tag",tagType:"skip"};event.attributes=parseAttributes(match[1]);if(event.attributes.hasOwnProperty("SKIPPED-SEGMENTS")){event.attributes["SKIPPED-SEGMENTS"]=parseInt(event.attributes["SKIPPED-SEGMENTS"],10);}if(event.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")){event.attributes["RECENTLY-REMOVED-DATERANGES"]=event.attributes["RECENTLY-REMOVED-DATERANGES"].split(TAB);}_this2.trigger("data",event);return;}match=/^#EXT-X-PART:(.*)$/.exec(newLine);if(match&&match[1]){event={type:"tag",tagType:"part"};event.attributes=parseAttributes(match[1]);["DURATION"].forEach(function(key){if(event.attributes.hasOwnProperty(key)){event.attributes[key]=parseFloat(event.attributes[key]);}});["INDEPENDENT","GAP"].forEach(function(key){if(event.attributes.hasOwnProperty(key)){event.attributes[key]=/YES/.test(event.attributes[key]);}});if(event.attributes.hasOwnProperty("BYTERANGE")){event.attributes.byterange=parseByterange(event.attributes.BYTERANGE);}_this2.trigger("data",event);return;}match=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(newLine);if(match&&match[1]){event={type:"tag",tagType:"server-control"};event.attributes=parseAttributes(match[1]);["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(key){if(event.attributes.hasOwnProperty(key)){event.attributes[key]=parseFloat(event.attributes[key]);}});["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(key){if(event.attributes.hasOwnProperty(key)){event.attributes[key]=/YES/.test(event.attributes[key]);}});_this2.trigger("data",event);return;}match=/^#EXT-X-PART-INF:(.*)$/.exec(newLine);if(match&&match[1]){event={type:"tag",tagType:"part-inf"};event.attributes=parseAttributes(match[1]);["PART-TARGET"].forEach(function(key){if(event.attributes.hasOwnProperty(key)){event.attributes[key]=parseFloat(event.attributes[key]);}});_this2.trigger("data",event);return;}match=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(newLine);if(match&&match[1]){event={type:"tag",tagType:"preload-hint"};event.attributes=parseAttributes(match[1]);["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(key){if(event.attributes.hasOwnProperty(key)){event.attributes[key]=parseInt(event.attributes[key],10);var subkey=key==="BYTERANGE-LENGTH"?"length":"offset";event.attributes.byterange=event.attributes.byterange||{};event.attributes.byterange[subkey]=event.attributes[key];delete event.attributes[key];}});_this2.trigger("data",event);return;}match=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(newLine);if(match&&match[1]){event={type:"tag",tagType:"rendition-report"};event.attributes=parseAttributes(match[1]);["LAST-MSN","LAST-PART"].forEach(function(key){if(event.attributes.hasOwnProperty(key)){event.attributes[key]=parseInt(event.attributes[key],10);}});_this2.trigger("data",event);return;}_this2.trigger("data",{type:"tag",data:newLine.slice(4)});});};_proto.addParser=function addParser(_ref){var _this3=this;var expression=_ref.expression,customType=_ref.customType,dataParser=_ref.dataParser,segment=_ref.segment;if(typeof dataParser!=="function"){dataParser=function dataParser2(line){return line;};}this.customParsers.push(function(line){var match=expression.exec(line);if(match){_this3.trigger("data",{type:"custom",data:dataParser(line),customType:customType,segment:segment});return true;}});};_proto.addTagMapper=function addTagMapper(_ref2){var expression=_ref2.expression,map=_ref2.map;var mapFn=function mapFn2(line){if(expression.test(line)){return map(line);}return line;};this.tagMappers.push(mapFn);};return ParseStream2;}(Stream);var camelCase=function camelCase2(str){return str.toLowerCase().replace(/-(\w)/g,function(a){return a[1].toUpperCase();});};var camelCaseKeys=function camelCaseKeys2(attributes){var result={};Object.keys(attributes).forEach(function(key){result[camelCase(key)]=attributes[key];});return result;};var setHoldBack=function setHoldBack2(manifest){var serverControl=manifest.serverControl,targetDuration=manifest.targetDuration,partTargetDuration=manifest.partTargetDuration;if(!serverControl){return;}var tag="#EXT-X-SERVER-CONTROL";var hb="holdBack";var phb="partHoldBack";var minTargetDuration=targetDuration&&targetDuration*3;var minPartDuration=partTargetDuration&&partTargetDuration*2;if(targetDuration&&!serverControl.hasOwnProperty(hb)){serverControl[hb]=minTargetDuration;this.trigger("info",{message:tag+" defaulting HOLD-BACK to targetDuration * 3 ("+minTargetDuration+")."});}if(minTargetDuration&&serverControl[hb]<minTargetDuration){this.trigger("warn",{message:tag+" clamping HOLD-BACK ("+serverControl[hb]+") to targetDuration * 3 ("+minTargetDuration+")"});serverControl[hb]=minTargetDuration;}if(partTargetDuration&&!serverControl.hasOwnProperty(phb)){serverControl[phb]=partTargetDuration*3;this.trigger("info",{message:tag+" defaulting PART-HOLD-BACK to partTargetDuration * 3 ("+serverControl[phb]+")."});}if(partTargetDuration&&serverControl[phb]<minPartDuration){this.trigger("warn",{message:tag+" clamping PART-HOLD-BACK ("+serverControl[phb]+") to partTargetDuration * 2 ("+minPartDuration+")."});serverControl[phb]=minPartDuration;}};var Parser=/* @__PURE__ */function(_Stream){_inheritsLoose3(Parser2,_Stream);function Parser2(){var _this;_this=_Stream.call(this)||this;_this.lineStream=new LineStream();_this.parseStream=new ParseStream();_this.lineStream.pipe(_this.parseStream);var self2=_assertThisInitialized3(_this);var uris=[];var currentUri={};var currentMap;var _key;var hasParts=false;var noop2=function noop3(){};var defaultMediaGroups={"AUDIO":{},"VIDEO":{},"CLOSED-CAPTIONS":{},"SUBTITLES":{}};var widevineUuid="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed";var currentTimeline=0;_this.manifest={allowCache:true,discontinuityStarts:[],segments:[]};var lastByterangeEnd=0;var lastPartByterangeEnd=0;_this.on("end",function(){if(currentUri.uri||!currentUri.parts&&!currentUri.preloadHints){return;}if(!currentUri.map&&currentMap){currentUri.map=currentMap;}if(!currentUri.key&&_key){currentUri.key=_key;}if(!currentUri.timeline&&typeof currentTimeline==="number"){currentUri.timeline=currentTimeline;}_this.manifest.preloadSegment=currentUri;});_this.parseStream.on("data",function(entry){var mediaGroup;var rendition;({tag:function tag(){(({version:function version2(){if(entry.version){this.manifest.version=entry.version;}},"allow-cache":function allowCache(){this.manifest.allowCache=entry.allowed;if(!("allowed"in entry)){this.trigger("info",{message:"defaulting allowCache to YES"});this.manifest.allowCache=true;}},byterange:function byterange(){var byterange2={};if("length"in entry){currentUri.byterange=byterange2;byterange2.length=entry.length;if(!("offset"in entry)){entry.offset=lastByterangeEnd;}}if("offset"in entry){currentUri.byterange=byterange2;byterange2.offset=entry.offset;}lastByterangeEnd=byterange2.offset+byterange2.length;},endlist:function endlist(){this.manifest.endList=true;},inf:function inf(){if(!("mediaSequence"in this.manifest)){this.manifest.mediaSequence=0;this.trigger("info",{message:"defaulting media sequence to zero"});}if(!("discontinuitySequence"in this.manifest)){this.manifest.discontinuitySequence=0;this.trigger("info",{message:"defaulting discontinuity sequence to zero"});}if(entry.duration>0){currentUri.duration=entry.duration;}if(entry.duration===0){currentUri.duration=0.01;this.trigger("info",{message:"updating zero segment duration to a small value"});}this.manifest.segments=uris;},key:function key(){if(!entry.attributes){this.trigger("warn",{message:"ignoring key declaration without attribute list"});return;}if(entry.attributes.METHOD==="NONE"){_key=null;return;}if(!entry.attributes.URI){this.trigger("warn",{message:"ignoring key declaration without URI"});return;}if(entry.attributes.KEYFORMAT==="com.apple.streamingkeydelivery"){this.manifest.contentProtection=this.manifest.contentProtection||{};this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:entry.attributes};return;}if(entry.attributes.KEYFORMAT==="com.microsoft.playready"){this.manifest.contentProtection=this.manifest.contentProtection||{};this.manifest.contentProtection["com.microsoft.playready"]={uri:entry.attributes.URI};return;}if(entry.attributes.KEYFORMAT===widevineUuid){var VALID_METHODS=["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"];if(VALID_METHODS.indexOf(entry.attributes.METHOD)===-1){this.trigger("warn",{message:"invalid key method provided for Widevine"});return;}if(entry.attributes.METHOD==="SAMPLE-AES-CENC"){this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"});}if(entry.attributes.URI.substring(0,23)!=="data:text/plain;base64,"){this.trigger("warn",{message:"invalid key URI provided for Widevine"});return;}if(!(entry.attributes.KEYID&&entry.attributes.KEYID.substring(0,2)==="0x")){this.trigger("warn",{message:"invalid key ID provided for Widevine"});return;}this.manifest.contentProtection=this.manifest.contentProtection||{};this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:entry.attributes.KEYFORMAT,keyId:entry.attributes.KEYID.substring(2)},pssh:decodeB64ToUint8Array(entry.attributes.URI.split(",")[1])};return;}if(!entry.attributes.METHOD){this.trigger("warn",{message:"defaulting key method to AES-128"});}_key={method:entry.attributes.METHOD||"AES-128",uri:entry.attributes.URI};if(typeof entry.attributes.IV!=="undefined"){_key.iv=entry.attributes.IV;}},"media-sequence":function mediaSequence(){if(!isFinite(entry.number)){this.trigger("warn",{message:"ignoring invalid media sequence: "+entry.number});return;}this.manifest.mediaSequence=entry.number;},"discontinuity-sequence":function discontinuitySequence(){if(!isFinite(entry.number)){this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+entry.number});return;}this.manifest.discontinuitySequence=entry.number;currentTimeline=entry.number;},"playlist-type":function playlistType(){if(!/VOD|EVENT/.test(entry.playlistType)){this.trigger("warn",{message:"ignoring unknown playlist type: "+entry.playlist});return;}this.manifest.playlistType=entry.playlistType;},map:function map(){currentMap={};if(entry.uri){currentMap.uri=entry.uri;}if(entry.byterange){currentMap.byterange=entry.byterange;}if(_key){currentMap.key=_key;}},"stream-inf":function streamInf(){this.manifest.playlists=uris;this.manifest.mediaGroups=this.manifest.mediaGroups||defaultMediaGroups;if(!entry.attributes){this.trigger("warn",{message:"ignoring empty stream-inf attributes"});return;}if(!currentUri.attributes){currentUri.attributes={};}_extends(currentUri.attributes,entry.attributes);},media:function media(){this.manifest.mediaGroups=this.manifest.mediaGroups||defaultMediaGroups;if(!(entry.attributes&&entry.attributes.TYPE&&entry.attributes["GROUP-ID"]&&entry.attributes.NAME)){this.trigger("warn",{message:"ignoring incomplete or missing media group"});return;}var mediaGroupType=this.manifest.mediaGroups[entry.attributes.TYPE];mediaGroupType[entry.attributes["GROUP-ID"]]=mediaGroupType[entry.attributes["GROUP-ID"]]||{};mediaGroup=mediaGroupType[entry.attributes["GROUP-ID"]];rendition={"default":/yes/i.test(entry.attributes.DEFAULT)};if(rendition["default"]){rendition.autoselect=true;}else{rendition.autoselect=/yes/i.test(entry.attributes.AUTOSELECT);}if(entry.attributes.LANGUAGE){rendition.language=entry.attributes.LANGUAGE;}if(entry.attributes.URI){rendition.uri=entry.attributes.URI;}if(entry.attributes["INSTREAM-ID"]){rendition.instreamId=entry.attributes["INSTREAM-ID"];}if(entry.attributes.CHARACTERISTICS){rendition.characteristics=entry.attributes.CHARACTERISTICS;}if(entry.attributes.FORCED){rendition.forced=/yes/i.test(entry.attributes.FORCED);}mediaGroup[entry.attributes.NAME]=rendition;},discontinuity:function discontinuity(){currentTimeline+=1;currentUri.discontinuity=true;this.manifest.discontinuityStarts.push(uris.length);},"program-date-time":function programDateTime(){if(typeof this.manifest.dateTimeString==="undefined"){this.manifest.dateTimeString=entry.dateTimeString;this.manifest.dateTimeObject=entry.dateTimeObject;}currentUri.dateTimeString=entry.dateTimeString;currentUri.dateTimeObject=entry.dateTimeObject;},targetduration:function targetduration(){if(!isFinite(entry.duration)||entry.duration<0){this.trigger("warn",{message:"ignoring invalid target duration: "+entry.duration});return;}this.manifest.targetDuration=entry.duration;setHoldBack.call(this,this.manifest);},start:function start2(){if(!entry.attributes||isNaN(entry.attributes["TIME-OFFSET"])){this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"});return;}this.manifest.start={timeOffset:entry.attributes["TIME-OFFSET"],precise:entry.attributes.PRECISE};},"cue-out":function cueOut(){currentUri.cueOut=entry.data;},"cue-out-cont":function cueOutCont(){currentUri.cueOutCont=entry.data;},"cue-in":function cueIn(){currentUri.cueIn=entry.data;},"skip":function skip(){this.manifest.skip=camelCaseKeys(entry.attributes);this.warnOnMissingAttributes_("#EXT-X-SKIP",entry.attributes,["SKIPPED-SEGMENTS"]);},"part":function part(){var _this2=this;hasParts=true;var segmentIndex=this.manifest.segments.length;var part2=camelCaseKeys(entry.attributes);currentUri.parts=currentUri.parts||[];currentUri.parts.push(part2);if(part2.byterange){if(!part2.byterange.hasOwnProperty("offset")){part2.byterange.offset=lastPartByterangeEnd;}lastPartByterangeEnd=part2.byterange.offset+part2.byterange.length;}var partIndex=currentUri.parts.length-1;this.warnOnMissingAttributes_("#EXT-X-PART #"+partIndex+" for segment #"+segmentIndex,entry.attributes,["URI","DURATION"]);if(this.manifest.renditionReports){this.manifest.renditionReports.forEach(function(r2,i){if(!r2.hasOwnProperty("lastPart")){_this2.trigger("warn",{message:"#EXT-X-RENDITION-REPORT #"+i+" lacks required attribute(s): LAST-PART"});}});}},"server-control":function serverControl(){var attrs=this.manifest.serverControl=camelCaseKeys(entry.attributes);if(!attrs.hasOwnProperty("canBlockReload")){attrs.canBlockReload=false;this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"});}setHoldBack.call(this,this.manifest);if(attrs.canSkipDateranges&&!attrs.hasOwnProperty("canSkipUntil")){this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"});}},"preload-hint":function preloadHint(){var segmentIndex=this.manifest.segments.length;var hint=camelCaseKeys(entry.attributes);var isPart=hint.type&&hint.type==="PART";currentUri.preloadHints=currentUri.preloadHints||[];currentUri.preloadHints.push(hint);if(hint.byterange){if(!hint.byterange.hasOwnProperty("offset")){hint.byterange.offset=isPart?lastPartByterangeEnd:0;if(isPart){lastPartByterangeEnd=hint.byterange.offset+hint.byterange.length;}}}var index=currentUri.preloadHints.length-1;this.warnOnMissingAttributes_("#EXT-X-PRELOAD-HINT #"+index+" for segment #"+segmentIndex,entry.attributes,["TYPE","URI"]);if(!hint.type){return;}for(var i=0;i<currentUri.preloadHints.length-1;i++){var otherHint=currentUri.preloadHints[i];if(!otherHint.type){continue;}if(otherHint.type===hint.type){this.trigger("warn",{message:"#EXT-X-PRELOAD-HINT #"+index+" for segment #"+segmentIndex+" has the same TYPE "+hint.type+" as preload hint #"+i});}}},"rendition-report":function renditionReport(){var report=camelCaseKeys(entry.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[];this.manifest.renditionReports.push(report);var index=this.manifest.renditionReports.length-1;var required=["LAST-MSN","URI"];if(hasParts){required.push("LAST-PART");}this.warnOnMissingAttributes_("#EXT-X-RENDITION-REPORT #"+index,entry.attributes,required);},"part-inf":function partInf(){this.manifest.partInf=camelCaseKeys(entry.attributes);this.warnOnMissingAttributes_("#EXT-X-PART-INF",entry.attributes,["PART-TARGET"]);if(this.manifest.partInf.partTarget){this.manifest.partTargetDuration=this.manifest.partInf.partTarget;}setHoldBack.call(this,this.manifest);}})[entry.tagType]||noop2).call(self2);},uri:function uri(){currentUri.uri=entry.uri;uris.push(currentUri);if(this.manifest.targetDuration&&!("duration"in currentUri)){this.trigger("warn",{message:"defaulting segment duration to the target duration"});currentUri.duration=this.manifest.targetDuration;}if(_key){currentUri.key=_key;}currentUri.timeline=currentTimeline;if(currentMap){currentUri.map=currentMap;}lastPartByterangeEnd=0;currentUri={};},comment:function comment(){},custom:function custom(){if(entry.segment){currentUri.custom=currentUri.custom||{};currentUri.custom[entry.customType]=entry.data;}else{this.manifest.custom=this.manifest.custom||{};this.manifest.custom[entry.customType]=entry.data;}}})[entry.type].call(self2);});return _this;}var _proto=Parser2.prototype;_proto.warnOnMissingAttributes_=function warnOnMissingAttributes_(identifier,attributes,required){var missing=[];required.forEach(function(key){if(!attributes.hasOwnProperty(key)){missing.push(key);}});if(missing.length){this.trigger("warn",{message:identifier+" lacks required attribute(s): "+missing.join(", ")});}};_proto.push=function push(chunk){this.lineStream.push(chunk);};_proto.end=function end(){this.lineStream.push("\n");this.trigger("end");};_proto.addParser=function addParser(options){this.parseStream.addParser(options);};_proto.addTagMapper=function addTagMapper(options){this.parseStream.addTagMapper(options);};return Parser2;}(Stream);// node_modules/@videojs/vhs-utils/es/codecs.js
var import_window3=__toESM(require_window());var regexs={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/};var mediaTypes=["video","audio","text"];var upperMediaTypes=["Video","Audio","Text"];var translateLegacyCodec=function translateLegacyCodec2(codec){if(!codec){return codec;}return codec.replace(/avc1\.(\d+)\.(\d+)/i,function(orig,profile,avcLevel){var profileHex=("00"+Number(profile).toString(16)).slice(-2);var avcLevelHex=("00"+Number(avcLevel).toString(16)).slice(-2);return"avc1."+profileHex+"00"+avcLevelHex;});};var parseCodecs=function parseCodecs2(codecString){if(codecString===void 0){codecString="";}var codecs=codecString.split(",");var result=[];codecs.forEach(function(codec){codec=codec.trim();var codecType;mediaTypes.forEach(function(name){var match=regexs[name].exec(codec.toLowerCase());if(!match||match.length<=1){return;}codecType=name;var type2=codec.substring(0,match[1].length);var details=codec.replace(type2,"");result.push({type:type2,details:details,mediaType:name});});if(!codecType){result.push({type:codec,details:"",mediaType:"unknown"});}});return result;};var codecsFromDefault=function codecsFromDefault2(master,audioGroupId){if(!master.mediaGroups.AUDIO||!audioGroupId){return null;}var audioGroup=master.mediaGroups.AUDIO[audioGroupId];if(!audioGroup){return null;}for(var name in audioGroup){var audioType=audioGroup[name];if(audioType["default"]&&audioType.playlists){return parseCodecs(audioType.playlists[0].attributes.CODECS);}}return null;};var isAudioCodec=function isAudioCodec2(codec){if(codec===void 0){codec="";}return regexs.audio.test(codec.trim().toLowerCase());};var isTextCodec=function isTextCodec2(codec){if(codec===void 0){codec="";}return regexs.text.test(codec.trim().toLowerCase());};var getMimeForCodec=function getMimeForCodec2(codecString){if(!codecString||typeof codecString!=="string"){return;}var codecs=codecString.toLowerCase().split(",").map(function(c){return translateLegacyCodec(c.trim());});var type2="video";if(codecs.length===1&&isAudioCodec(codecs[0])){type2="audio";}else if(codecs.length===1&&isTextCodec(codecs[0])){type2="application";}var container="mp4";if(codecs.every(function(c){return regexs.mp4.test(c);})){container="mp4";}else if(codecs.every(function(c){return regexs.webm.test(c);})){container="webm";}else if(codecs.every(function(c){return regexs.ogg.test(c);})){container="ogg";}return type2+"/"+container+';codecs="'+codecString+'"';};var browserSupportsCodec=function browserSupportsCodec2(codecString){if(codecString===void 0){codecString="";}return import_window3["default"].MediaSource&&import_window3["default"].MediaSource.isTypeSupported&&import_window3["default"].MediaSource.isTypeSupported(getMimeForCodec(codecString))||false;};var muxerSupportsCodec=function muxerSupportsCodec2(codecString){if(codecString===void 0){codecString="";}return codecString.toLowerCase().split(",").every(function(codec){codec=codec.trim();for(var i=0;i<upperMediaTypes.length;i++){var type2=upperMediaTypes[i];if(regexs["muxer"+type2].test(codec)){return true;}}return false;});};var DEFAULT_AUDIO_CODEC="mp4a.40.2";var DEFAULT_VIDEO_CODEC="avc1.4d400d";// node_modules/@videojs/vhs-utils/es/media-types.js
var MPEGURL_REGEX=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i;var DASH_REGEX=/^application\/dash\+xml/i;var simpleTypeFromSourceType=function simpleTypeFromSourceType2(type2){if(MPEGURL_REGEX.test(type2)){return"hls";}if(DASH_REGEX.test(type2)){return"dash";}if(type2==="application/vnd.videojs.vhs+json"){return"vhs-json";}return null;};// node_modules/@videojs/vhs-utils/es/byte-helpers.js
var import_window4=__toESM(require_window());var countBits=function countBits2(x){return x.toString(2).length;};var countBytes=function countBytes2(x){return Math.ceil(countBits(x)/8);};var isArrayBufferView=function isArrayBufferView2(obj){if(ArrayBuffer.isView==="function"){return ArrayBuffer.isView(obj);}return obj&&obj.buffer instanceof ArrayBuffer;};var isTypedArray=function isTypedArray2(obj){return isArrayBufferView(obj);};var toUint8=function toUint82(bytes){if(bytes instanceof Uint8Array){return bytes;}if(!Array.isArray(bytes)&&!isTypedArray(bytes)&&!(bytes instanceof ArrayBuffer)){if(typeof bytes!=="number"||typeof bytes==="number"&&bytes!==bytes){bytes=0;}else{bytes=[bytes];}}return new Uint8Array(bytes&&bytes.buffer||bytes,bytes&&bytes.byteOffset||0,bytes&&bytes.byteLength||0);};var BigInt=import_window4["default"].BigInt||Number;var BYTE_TABLE=[BigInt("0x1"),BigInt("0x100"),BigInt("0x10000"),BigInt("0x1000000"),BigInt("0x100000000"),BigInt("0x10000000000"),BigInt("0x1000000000000"),BigInt("0x100000000000000"),BigInt("0x10000000000000000")];var ENDIANNESS=function(){var a=new Uint16Array([65484]);var b=new Uint8Array(a.buffer,a.byteOffset,a.byteLength);if(b[0]===255){return"big";}if(b[0]===204){return"little";}return"unknown";}();var bytesToNumber=function bytesToNumber2(bytes,_temp){var _ref=_temp===void 0?{}:_temp,_ref$signed=_ref.signed,signed=_ref$signed===void 0?false:_ref$signed,_ref$le=_ref.le,le=_ref$le===void 0?false:_ref$le;bytes=toUint8(bytes);var fn=le?"reduce":"reduceRight";var obj=bytes[fn]?bytes[fn]:Array.prototype[fn];var number=obj.call(bytes,function(total,_byte,i){var exponent=le?i:Math.abs(i+1-bytes.length);return total+BigInt(_byte)*BYTE_TABLE[exponent];},BigInt(0));if(signed){var max=BYTE_TABLE[bytes.length]/BigInt(2)-BigInt(1);number=BigInt(number);if(number>max){number-=max;number-=max;number-=BigInt(2);}}return Number(number);};var numberToBytes=function numberToBytes2(number,_temp2){var _ref2=_temp2===void 0?{}:_temp2,_ref2$le=_ref2.le,le=_ref2$le===void 0?false:_ref2$le;if(typeof number!=="bigint"&&typeof number!=="number"||typeof number==="number"&&number!==number){number=0;}number=BigInt(number);var byteCount=countBytes(number);var bytes=new Uint8Array(new ArrayBuffer(byteCount));for(var i=0;i<byteCount;i++){var byteIndex=le?i:Math.abs(i+1-bytes.length);bytes[byteIndex]=Number(number/BYTE_TABLE[i]&BigInt(255));if(number<0){bytes[byteIndex]=Math.abs(~bytes[byteIndex]);bytes[byteIndex]-=i===0?1:2;}}return bytes;};var bytesToString=function bytesToString2(bytes){if(!bytes){return"";}bytes=Array.prototype.slice.call(bytes);var string=String.fromCharCode.apply(null,toUint8(bytes));try{return decodeURIComponent(escape(string));}catch(e){}return string;};var stringToBytes=function stringToBytes2(string,stringIsBytes){if(typeof string!=="string"&&string&&typeof string.toString==="function"){string=string.toString();}if(typeof string!=="string"){return new Uint8Array();}if(!stringIsBytes){string=unescape(encodeURIComponent(string));}var view=new Uint8Array(string.length);for(var i=0;i<string.length;i++){view[i]=string.charCodeAt(i);}return view;};var concatTypedArrays=function concatTypedArrays2(){for(var _len=arguments.length,buffers=new Array(_len),_key=0;_key<_len;_key++){buffers[_key]=arguments[_key];}buffers=buffers.filter(function(b){return b&&(b.byteLength||b.length)&&typeof b!=="string";});if(buffers.length<=1){return toUint8(buffers[0]);}var totalLen=buffers.reduce(function(total,buf,i){return total+(buf.byteLength||buf.length);},0);var tempBuffer=new Uint8Array(totalLen);var offset=0;buffers.forEach(function(buf){buf=toUint8(buf);tempBuffer.set(buf,offset);offset+=buf.byteLength;});return tempBuffer;};var bytesMatch=function bytesMatch2(a,b,_temp3){var _ref3=_temp3===void 0?{}:_temp3,_ref3$offset=_ref3.offset,offset=_ref3$offset===void 0?0:_ref3$offset,_ref3$mask=_ref3.mask,mask=_ref3$mask===void 0?[]:_ref3$mask;a=toUint8(a);b=toUint8(b);var fn=b.every?b.every:Array.prototype.every;return b.length&&a.length-offset>=b.length&&fn.call(b,function(bByte,i){var aByte=mask[i]?mask[i]&a[offset+i]:a[offset+i];return bByte===aByte;});};// node_modules/mpd-parser/dist/mpd-parser.es.js
var import_window5=__toESM(require_window());// node_modules/@videojs/vhs-utils/es/media-groups.js
var forEachMediaGroup=function forEachMediaGroup2(master,groups,callback2){groups.forEach(function(mediaType){for(var groupKey in master.mediaGroups[mediaType]){for(var labelKey in master.mediaGroups[mediaType][groupKey]){var mediaProperties=master.mediaGroups[mediaType][groupKey][labelKey];callback2(mediaProperties,mediaType,groupKey,labelKey);}}});};// node_modules/mpd-parser/dist/mpd-parser.es.js
var import_xmldom=__toESM(require_lib2());var isObject2=function isObject3(obj){return!!obj&&_typeof(obj)==="object";};var merge=function merge2(){for(var _len=arguments.length,objects=new Array(_len),_key=0;_key<_len;_key++){objects[_key]=arguments[_key];}return objects.reduce(function(result,source){if(_typeof(source)!=="object"){return result;}Object.keys(source).forEach(function(key){if(Array.isArray(result[key])&&Array.isArray(source[key])){result[key]=result[key].concat(source[key]);}else if(isObject2(result[key])&&isObject2(source[key])){result[key]=merge2(result[key],source[key]);}else{result[key]=source[key];}});return result;},{});};var values=function values2(o){return Object.keys(o).map(function(k){return o[k];});};var range2=function range3(start2,end){var result=[];for(var i=start2;i<end;i++){result.push(i);}return result;};var flatten=function flatten2(lists){return lists.reduce(function(x,y){return x.concat(y);},[]);};var from=function from2(list){if(!list.length){return[];}var result=[];for(var i=0;i<list.length;i++){result.push(list[i]);}return result;};var findIndexes=function findIndexes2(l,key){return l.reduce(function(a,e,i){if(e[key]){a.push(i);}return a;},[]);};var findIndex=function findIndex2(list,matchingFunction){for(var i=0;i<list.length;i++){if(matchingFunction(list[i])){return i;}}return-1;};var union=function union2(lists,keyFunction){return values(lists.reduce(function(acc,list){list.forEach(function(el){acc[keyFunction(el)]=el;});return acc;},{}));};var errors={INVALID_NUMBER_OF_PERIOD:"INVALID_NUMBER_OF_PERIOD",DASH_EMPTY_MANIFEST:"DASH_EMPTY_MANIFEST",DASH_INVALID_XML:"DASH_INVALID_XML",NO_BASE_URL:"NO_BASE_URL",MISSING_SEGMENT_INFORMATION:"MISSING_SEGMENT_INFORMATION",SEGMENT_TIME_UNSPECIFIED:"SEGMENT_TIME_UNSPECIFIED",UNSUPPORTED_UTC_TIMING_SCHEME:"UNSUPPORTED_UTC_TIMING_SCHEME"};var urlTypeToSegment=function urlTypeToSegment2(_ref){var _ref$baseUrl=_ref.baseUrl,baseUrl=_ref$baseUrl===void 0?"":_ref$baseUrl,_ref$source=_ref.source,source=_ref$source===void 0?"":_ref$source,_ref$range=_ref.range,range4=_ref$range===void 0?"":_ref$range,_ref$indexRange=_ref.indexRange,indexRange=_ref$indexRange===void 0?"":_ref$indexRange;var segment={uri:source,resolvedUri:resolve_url_default(baseUrl||"",source)};if(range4||indexRange){var rangeStr=range4?range4:indexRange;var ranges=rangeStr.split("-");var startRange=import_window5["default"].BigInt?import_window5["default"].BigInt(ranges[0]):parseInt(ranges[0],10);var endRange=import_window5["default"].BigInt?import_window5["default"].BigInt(ranges[1]):parseInt(ranges[1],10);if(startRange<Number.MAX_SAFE_INTEGER&&typeof startRange==="bigint"){startRange=Number(startRange);}if(endRange<Number.MAX_SAFE_INTEGER&&typeof endRange==="bigint"){endRange=Number(endRange);}var length;if(typeof endRange==="bigint"||typeof startRange==="bigint"){length=import_window5["default"].BigInt(endRange)-import_window5["default"].BigInt(startRange)+import_window5["default"].BigInt(1);}else{length=endRange-startRange+1;}if(typeof length==="bigint"&&length<Number.MAX_SAFE_INTEGER){length=Number(length);}segment.byterange={length:length,offset:startRange};}return segment;};var byteRangeToString=function byteRangeToString2(byterange){var endRange;if(typeof byterange.offset==="bigint"||typeof byterange.length==="bigint"){endRange=import_window5["default"].BigInt(byterange.offset)+import_window5["default"].BigInt(byterange.length)-import_window5["default"].BigInt(1);}else{endRange=byterange.offset+byterange.length-1;}return byterange.offset+"-"+endRange;};var parseEndNumber=function parseEndNumber2(endNumber){if(endNumber&&typeof endNumber!=="number"){endNumber=parseInt(endNumber,10);}if(isNaN(endNumber)){return null;}return endNumber;};var segmentRange={"static":function _static(attributes){var duration5=attributes.duration,_attributes$timescale=attributes.timescale,timescale2=_attributes$timescale===void 0?1:_attributes$timescale,sourceDuration=attributes.sourceDuration,periodDuration=attributes.periodDuration;var endNumber=parseEndNumber(attributes.endNumber);var segmentDuration=duration5/timescale2;if(typeof endNumber==="number"){return{start:0,end:endNumber};}if(typeof periodDuration==="number"){return{start:0,end:periodDuration/segmentDuration};}return{start:0,end:sourceDuration/segmentDuration};},dynamic:function dynamic(attributes){var NOW=attributes.NOW,clientOffset=attributes.clientOffset,availabilityStartTime2=attributes.availabilityStartTime,_attributes$timescale2=attributes.timescale,timescale2=_attributes$timescale2===void 0?1:_attributes$timescale2,duration5=attributes.duration,_attributes$periodSta=attributes.periodStart,periodStart=_attributes$periodSta===void 0?0:_attributes$periodSta,_attributes$minimumUp=attributes.minimumUpdatePeriod,minimumUpdatePeriod2=_attributes$minimumUp===void 0?0:_attributes$minimumUp,_attributes$timeShift=attributes.timeShiftBufferDepth,timeShiftBufferDepth2=_attributes$timeShift===void 0?Infinity:_attributes$timeShift;var endNumber=parseEndNumber(attributes.endNumber);var now2=(NOW+clientOffset)/1e3;var periodStartWC=availabilityStartTime2+periodStart;var periodEndWC=now2+minimumUpdatePeriod2;var periodDuration=periodEndWC-periodStartWC;var segmentCount=Math.ceil(periodDuration*timescale2/duration5);var availableStart=Math.floor((now2-periodStartWC-timeShiftBufferDepth2)*timescale2/duration5);var availableEnd=Math.floor((now2-periodStartWC)*timescale2/duration5);return{start:Math.max(0,availableStart),end:typeof endNumber==="number"?endNumber:Math.min(segmentCount,availableEnd)};}};var toSegments=function toSegments2(attributes){return function(number){var duration5=attributes.duration,_attributes$timescale3=attributes.timescale,timescale2=_attributes$timescale3===void 0?1:_attributes$timescale3,periodStart=attributes.periodStart,_attributes$startNumb=attributes.startNumber,startNumber2=_attributes$startNumb===void 0?1:_attributes$startNumb;return{number:startNumber2+number,duration:duration5/timescale2,timeline:periodStart,time:number*duration5};};};var parseByDuration=function parseByDuration2(attributes){var type2=attributes.type,duration5=attributes.duration,_attributes$timescale4=attributes.timescale,timescale2=_attributes$timescale4===void 0?1:_attributes$timescale4,periodDuration=attributes.periodDuration,sourceDuration=attributes.sourceDuration;var _segmentRange$type=segmentRange[type2](attributes),start2=_segmentRange$type.start,end=_segmentRange$type.end;var segments=range2(start2,end).map(toSegments(attributes));if(type2==="static"){var index=segments.length-1;var sectionDuration=typeof periodDuration==="number"?periodDuration:sourceDuration;segments[index].duration=sectionDuration-duration5/timescale2*index;}return segments;};var segmentsFromBase=function segmentsFromBase2(attributes){var baseUrl=attributes.baseUrl,_attributes$initializ=attributes.initialization,initialization=_attributes$initializ===void 0?{}:_attributes$initializ,sourceDuration=attributes.sourceDuration,_attributes$indexRang=attributes.indexRange,indexRange=_attributes$indexRang===void 0?"":_attributes$indexRang,periodStart=attributes.periodStart,presentationTime=attributes.presentationTime,_attributes$number=attributes.number,number=_attributes$number===void 0?0:_attributes$number,duration5=attributes.duration;if(!baseUrl){throw new Error(errors.NO_BASE_URL);}var initSegment=urlTypeToSegment({baseUrl:baseUrl,source:initialization.sourceURL,range:initialization.range});var segment=urlTypeToSegment({baseUrl:baseUrl,source:baseUrl,indexRange:indexRange});segment.map=initSegment;if(duration5){var segmentTimeInfo=parseByDuration(attributes);if(segmentTimeInfo.length){segment.duration=segmentTimeInfo[0].duration;segment.timeline=segmentTimeInfo[0].timeline;}}else if(sourceDuration){segment.duration=sourceDuration;segment.timeline=periodStart;}segment.presentationTime=presentationTime||periodStart;segment.number=number;return[segment];};var addSidxSegmentsToPlaylist$1=function addSidxSegmentsToPlaylist(playlist,sidx,baseUrl){var initSegment=playlist.sidx.map?playlist.sidx.map:null;var sourceDuration=playlist.sidx.duration;var timeline2=playlist.timeline||0;var sidxByteRange=playlist.sidx.byterange;var sidxEnd=sidxByteRange.offset+sidxByteRange.length;var timescale2=sidx.timescale;var mediaReferences=sidx.references.filter(function(r2){return r2.referenceType!==1;});var segments=[];var type2=playlist.endList?"static":"dynamic";var periodStart=playlist.sidx.timeline;var presentationTime=periodStart;var number=playlist.mediaSequence||0;var startIndex;if(typeof sidx.firstOffset==="bigint"){startIndex=import_window5["default"].BigInt(sidxEnd)+sidx.firstOffset;}else{startIndex=sidxEnd+sidx.firstOffset;}for(var i=0;i<mediaReferences.length;i++){var reference=sidx.references[i];var size=reference.referencedSize;var duration5=reference.subsegmentDuration;var endIndex=void 0;if(typeof startIndex==="bigint"){endIndex=startIndex+import_window5["default"].BigInt(size)-import_window5["default"].BigInt(1);}else{endIndex=startIndex+size-1;}var indexRange=startIndex+"-"+endIndex;var attributes={baseUrl:baseUrl,timescale:timescale2,timeline:timeline2,periodStart:periodStart,presentationTime:presentationTime,number:number,duration:duration5,sourceDuration:sourceDuration,indexRange:indexRange,type:type2};var segment=segmentsFromBase(attributes)[0];if(initSegment){segment.map=initSegment;}segments.push(segment);if(typeof startIndex==="bigint"){startIndex+=import_window5["default"].BigInt(size);}else{startIndex+=size;}presentationTime+=duration5/timescale2;number++;}playlist.segments=segments;return playlist;};var SUPPORTED_MEDIA_TYPES=["AUDIO","SUBTITLES"];var TIME_FUDGE=1/60;var getUniqueTimelineStarts=function getUniqueTimelineStarts2(timelineStarts){return union(timelineStarts,function(_ref){var timeline2=_ref.timeline;return timeline2;}).sort(function(a,b){return a.timeline>b.timeline?1:-1;});};var findPlaylistWithName=function findPlaylistWithName2(playlists,name){for(var i=0;i<playlists.length;i++){if(playlists[i].attributes.NAME===name){return playlists[i];}}return null;};var getMediaGroupPlaylists=function getMediaGroupPlaylists2(manifest){var mediaGroupPlaylists=[];forEachMediaGroup(manifest,SUPPORTED_MEDIA_TYPES,function(properties,type2,group,label){mediaGroupPlaylists=mediaGroupPlaylists.concat(properties.playlists||[]);});return mediaGroupPlaylists;};var updateMediaSequenceForPlaylist=function updateMediaSequenceForPlaylist2(_ref2){var playlist=_ref2.playlist,mediaSequence=_ref2.mediaSequence;playlist.mediaSequence=mediaSequence;playlist.segments.forEach(function(segment,index){segment.number=playlist.mediaSequence+index;});};var updateSequenceNumbers=function updateSequenceNumbers2(_ref3){var oldPlaylists=_ref3.oldPlaylists,newPlaylists=_ref3.newPlaylists,timelineStarts=_ref3.timelineStarts;newPlaylists.forEach(function(playlist){playlist.discontinuitySequence=findIndex(timelineStarts,function(_ref4){var timeline2=_ref4.timeline;return timeline2===playlist.timeline;});var oldPlaylist=findPlaylistWithName(oldPlaylists,playlist.attributes.NAME);if(!oldPlaylist){return;}if(playlist.sidx){return;}var firstNewSegment=playlist.segments[0];var oldMatchingSegmentIndex=findIndex(oldPlaylist.segments,function(oldSegment){return Math.abs(oldSegment.presentationTime-firstNewSegment.presentationTime)<TIME_FUDGE;});if(oldMatchingSegmentIndex===-1){updateMediaSequenceForPlaylist({playlist:playlist,mediaSequence:oldPlaylist.mediaSequence+oldPlaylist.segments.length});playlist.segments[0].discontinuity=true;playlist.discontinuityStarts.unshift(0);if(!oldPlaylist.segments.length&&playlist.timeline>oldPlaylist.timeline||oldPlaylist.segments.length&&playlist.timeline>oldPlaylist.segments[oldPlaylist.segments.length-1].timeline){playlist.discontinuitySequence--;}return;}var oldMatchingSegment=oldPlaylist.segments[oldMatchingSegmentIndex];if(oldMatchingSegment.discontinuity&&!firstNewSegment.discontinuity){firstNewSegment.discontinuity=true;playlist.discontinuityStarts.unshift(0);playlist.discontinuitySequence--;}updateMediaSequenceForPlaylist({playlist:playlist,mediaSequence:oldPlaylist.segments[oldMatchingSegmentIndex].number});});};var positionManifestOnTimeline=function positionManifestOnTimeline2(_ref5){var oldManifest=_ref5.oldManifest,newManifest=_ref5.newManifest;var oldPlaylists=oldManifest.playlists.concat(getMediaGroupPlaylists(oldManifest));var newPlaylists=newManifest.playlists.concat(getMediaGroupPlaylists(newManifest));newManifest.timelineStarts=getUniqueTimelineStarts([oldManifest.timelineStarts,newManifest.timelineStarts]);updateSequenceNumbers({oldPlaylists:oldPlaylists,newPlaylists:newPlaylists,timelineStarts:newManifest.timelineStarts});return newManifest;};var generateSidxKey=function generateSidxKey2(sidx){return sidx&&sidx.uri+"-"+byteRangeToString(sidx.byterange);};var mergeDiscontiguousPlaylists=function mergeDiscontiguousPlaylists2(playlists){var mergedPlaylists=values(playlists.reduce(function(acc,playlist){var name=playlist.attributes.id+(playlist.attributes.lang||"");if(!acc[name]){acc[name]=playlist;acc[name].attributes.timelineStarts=[];}else{if(playlist.segments){var _acc$name$segments;if(playlist.segments[0]){playlist.segments[0].discontinuity=true;}(_acc$name$segments=acc[name].segments).push.apply(_acc$name$segments,playlist.segments);}if(playlist.attributes.contentProtection){acc[name].attributes.contentProtection=playlist.attributes.contentProtection;}}acc[name].attributes.timelineStarts.push({start:playlist.attributes.periodStart,timeline:playlist.attributes.periodStart});return acc;},{}));return mergedPlaylists.map(function(playlist){playlist.discontinuityStarts=findIndexes(playlist.segments||[],"discontinuity");return playlist;});};var addSidxSegmentsToPlaylist2=function addSidxSegmentsToPlaylist3(playlist,sidxMapping){var sidxKey=generateSidxKey(playlist.sidx);var sidxMatch=sidxKey&&sidxMapping[sidxKey]&&sidxMapping[sidxKey].sidx;if(sidxMatch){addSidxSegmentsToPlaylist$1(playlist,sidxMatch,playlist.sidx.resolvedUri);}return playlist;};var addSidxSegmentsToPlaylists=function addSidxSegmentsToPlaylists2(playlists,sidxMapping){if(sidxMapping===void 0){sidxMapping={};}if(!Object.keys(sidxMapping).length){return playlists;}for(var i in playlists){playlists[i]=addSidxSegmentsToPlaylist2(playlists[i],sidxMapping);}return playlists;};var formatAudioPlaylist=function formatAudioPlaylist2(_ref,isAudioOnly3){var _attributes;var attributes=_ref.attributes,segments=_ref.segments,sidx=_ref.sidx,mediaSequence=_ref.mediaSequence,discontinuitySequence=_ref.discontinuitySequence,discontinuityStarts=_ref.discontinuityStarts;var playlist={attributes:(_attributes={NAME:attributes.id,BANDWIDTH:attributes.bandwidth,CODECS:attributes.codecs},_attributes["PROGRAM-ID"]=1,_attributes),uri:"",endList:attributes.type==="static",timeline:attributes.periodStart,resolvedUri:"",targetDuration:attributes.duration,discontinuitySequence:discontinuitySequence,discontinuityStarts:discontinuityStarts,timelineStarts:attributes.timelineStarts,mediaSequence:mediaSequence,segments:segments};if(attributes.contentProtection){playlist.contentProtection=attributes.contentProtection;}if(sidx){playlist.sidx=sidx;}if(isAudioOnly3){playlist.attributes.AUDIO="audio";playlist.attributes.SUBTITLES="subs";}return playlist;};var formatVttPlaylist=function formatVttPlaylist2(_ref2){var _m3u8Attributes;var attributes=_ref2.attributes,segments=_ref2.segments,mediaSequence=_ref2.mediaSequence,discontinuityStarts=_ref2.discontinuityStarts,discontinuitySequence=_ref2.discontinuitySequence;if(typeof segments==="undefined"){segments=[{uri:attributes.baseUrl,timeline:attributes.periodStart,resolvedUri:attributes.baseUrl||"",duration:attributes.sourceDuration,number:0}];attributes.duration=attributes.sourceDuration;}var m3u8Attributes=(_m3u8Attributes={NAME:attributes.id,BANDWIDTH:attributes.bandwidth},_m3u8Attributes["PROGRAM-ID"]=1,_m3u8Attributes);if(attributes.codecs){m3u8Attributes.CODECS=attributes.codecs;}return{attributes:m3u8Attributes,uri:"",endList:attributes.type==="static",timeline:attributes.periodStart,resolvedUri:attributes.baseUrl||"",targetDuration:attributes.duration,timelineStarts:attributes.timelineStarts,discontinuityStarts:discontinuityStarts,discontinuitySequence:discontinuitySequence,mediaSequence:mediaSequence,segments:segments};};var organizeAudioPlaylists=function organizeAudioPlaylists2(playlists,sidxMapping,isAudioOnly3){if(sidxMapping===void 0){sidxMapping={};}if(isAudioOnly3===void 0){isAudioOnly3=false;}var mainPlaylist;var formattedPlaylists=playlists.reduce(function(a,playlist){var role=playlist.attributes.role&&playlist.attributes.role.value||"";var language=playlist.attributes.lang||"";var label=playlist.attributes.label||"main";if(language&&!playlist.attributes.label){var roleLabel=role?" ("+role+")":"";label=""+playlist.attributes.lang+roleLabel;}if(!a[label]){a[label]={language:language,autoselect:true,"default":role==="main",playlists:[],uri:""};}var formatted=addSidxSegmentsToPlaylist2(formatAudioPlaylist(playlist,isAudioOnly3),sidxMapping);a[label].playlists.push(formatted);if(typeof mainPlaylist==="undefined"&&role==="main"){mainPlaylist=playlist;mainPlaylist["default"]=true;}return a;},{});if(!mainPlaylist){var firstLabel=Object.keys(formattedPlaylists)[0];formattedPlaylists[firstLabel]["default"]=true;}return formattedPlaylists;};var organizeVttPlaylists=function organizeVttPlaylists2(playlists,sidxMapping){if(sidxMapping===void 0){sidxMapping={};}return playlists.reduce(function(a,playlist){var label=playlist.attributes.lang||"text";if(!a[label]){a[label]={language:label,"default":false,autoselect:false,playlists:[],uri:""};}a[label].playlists.push(addSidxSegmentsToPlaylist2(formatVttPlaylist(playlist),sidxMapping));return a;},{});};var organizeCaptionServices=function organizeCaptionServices2(captionServices){return captionServices.reduce(function(svcObj,svc){if(!svc){return svcObj;}svc.forEach(function(service){var channel=service.channel,language=service.language;svcObj[language]={autoselect:false,"default":false,instreamId:channel,language:language};if(service.hasOwnProperty("aspectRatio")){svcObj[language].aspectRatio=service.aspectRatio;}if(service.hasOwnProperty("easyReader")){svcObj[language].easyReader=service.easyReader;}if(service.hasOwnProperty("3D")){svcObj[language]["3D"]=service["3D"];}});return svcObj;},{});};var formatVideoPlaylist=function formatVideoPlaylist2(_ref3){var _attributes2;var attributes=_ref3.attributes,segments=_ref3.segments,sidx=_ref3.sidx,discontinuityStarts=_ref3.discontinuityStarts;var playlist={attributes:(_attributes2={NAME:attributes.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:attributes.width,height:attributes.height},CODECS:attributes.codecs,BANDWIDTH:attributes.bandwidth},_attributes2["PROGRAM-ID"]=1,_attributes2),uri:"",endList:attributes.type==="static",timeline:attributes.periodStart,resolvedUri:"",targetDuration:attributes.duration,discontinuityStarts:discontinuityStarts,timelineStarts:attributes.timelineStarts,segments:segments};if(attributes.contentProtection){playlist.contentProtection=attributes.contentProtection;}if(sidx){playlist.sidx=sidx;}return playlist;};var videoOnly=function videoOnly2(_ref4){var attributes=_ref4.attributes;return attributes.mimeType==="video/mp4"||attributes.mimeType==="video/webm"||attributes.contentType==="video";};var audioOnly=function audioOnly2(_ref5){var attributes=_ref5.attributes;return attributes.mimeType==="audio/mp4"||attributes.mimeType==="audio/webm"||attributes.contentType==="audio";};var vttOnly=function vttOnly2(_ref6){var attributes=_ref6.attributes;return attributes.mimeType==="text/vtt"||attributes.contentType==="text";};var addMediaSequenceValues=function addMediaSequenceValues2(playlists,timelineStarts){playlists.forEach(function(playlist){playlist.mediaSequence=0;playlist.discontinuitySequence=findIndex(timelineStarts,function(_ref7){var timeline2=_ref7.timeline;return timeline2===playlist.timeline;});if(!playlist.segments){return;}playlist.segments.forEach(function(segment,index){segment.number=index;});});};var flattenMediaGroupPlaylists=function flattenMediaGroupPlaylists2(mediaGroupObject){if(!mediaGroupObject){return[];}return Object.keys(mediaGroupObject).reduce(function(acc,label){var labelContents=mediaGroupObject[label];return acc.concat(labelContents.playlists);},[]);};var toM3u8=function toM3u82(_ref8){var _mediaGroups;var dashPlaylists=_ref8.dashPlaylists,locations=_ref8.locations,_ref8$sidxMapping=_ref8.sidxMapping,sidxMapping=_ref8$sidxMapping===void 0?{}:_ref8$sidxMapping,previousManifest=_ref8.previousManifest;if(!dashPlaylists.length){return{};}var _dashPlaylists$0$attr=dashPlaylists[0].attributes,duration5=_dashPlaylists$0$attr.sourceDuration,type2=_dashPlaylists$0$attr.type,suggestedPresentationDelay2=_dashPlaylists$0$attr.suggestedPresentationDelay,minimumUpdatePeriod2=_dashPlaylists$0$attr.minimumUpdatePeriod;var videoPlaylists=mergeDiscontiguousPlaylists(dashPlaylists.filter(videoOnly)).map(formatVideoPlaylist);var audioPlaylists=mergeDiscontiguousPlaylists(dashPlaylists.filter(audioOnly));var vttPlaylists=mergeDiscontiguousPlaylists(dashPlaylists.filter(vttOnly));var captions=dashPlaylists.map(function(playlist){return playlist.attributes.captionServices;}).filter(Boolean);var manifest={allowCache:true,discontinuityStarts:[],segments:[],endList:true,mediaGroups:(_mediaGroups={AUDIO:{},VIDEO:{}},_mediaGroups["CLOSED-CAPTIONS"]={},_mediaGroups.SUBTITLES={},_mediaGroups),uri:"",duration:duration5,playlists:addSidxSegmentsToPlaylists(videoPlaylists,sidxMapping)};if(minimumUpdatePeriod2>=0){manifest.minimumUpdatePeriod=minimumUpdatePeriod2*1e3;}if(locations){manifest.locations=locations;}if(type2==="dynamic"){manifest.suggestedPresentationDelay=suggestedPresentationDelay2;}var isAudioOnly3=manifest.playlists.length===0;var organizedAudioGroup=audioPlaylists.length?organizeAudioPlaylists(audioPlaylists,sidxMapping,isAudioOnly3):null;var organizedVttGroup=vttPlaylists.length?organizeVttPlaylists(vttPlaylists,sidxMapping):null;var formattedPlaylists=videoPlaylists.concat(flattenMediaGroupPlaylists(organizedAudioGroup),flattenMediaGroupPlaylists(organizedVttGroup));var playlistTimelineStarts=formattedPlaylists.map(function(_ref9){var timelineStarts=_ref9.timelineStarts;return timelineStarts;});manifest.timelineStarts=getUniqueTimelineStarts(playlistTimelineStarts);addMediaSequenceValues(formattedPlaylists,manifest.timelineStarts);if(organizedAudioGroup){manifest.mediaGroups.AUDIO.audio=organizedAudioGroup;}if(organizedVttGroup){manifest.mediaGroups.SUBTITLES.subs=organizedVttGroup;}if(captions.length){manifest.mediaGroups["CLOSED-CAPTIONS"].cc=organizeCaptionServices(captions);}if(previousManifest){return positionManifestOnTimeline({oldManifest:previousManifest,newManifest:manifest});}return manifest;};var getLiveRValue=function getLiveRValue2(attributes,time,duration5){var NOW=attributes.NOW,clientOffset=attributes.clientOffset,availabilityStartTime2=attributes.availabilityStartTime,_attributes$timescale=attributes.timescale,timescale2=_attributes$timescale===void 0?1:_attributes$timescale,_attributes$periodSta=attributes.periodStart,periodStart=_attributes$periodSta===void 0?0:_attributes$periodSta,_attributes$minimumUp=attributes.minimumUpdatePeriod,minimumUpdatePeriod2=_attributes$minimumUp===void 0?0:_attributes$minimumUp;var now2=(NOW+clientOffset)/1e3;var periodStartWC=availabilityStartTime2+periodStart;var periodEndWC=now2+minimumUpdatePeriod2;var periodDuration=periodEndWC-periodStartWC;return Math.ceil((periodDuration*timescale2-time)/duration5);};var parseByTimeline=function parseByTimeline2(attributes,segmentTimeline){var type2=attributes.type,_attributes$minimumUp2=attributes.minimumUpdatePeriod,minimumUpdatePeriod2=_attributes$minimumUp2===void 0?0:_attributes$minimumUp2,_attributes$media=attributes.media,media=_attributes$media===void 0?"":_attributes$media,sourceDuration=attributes.sourceDuration,_attributes$timescale2=attributes.timescale,timescale2=_attributes$timescale2===void 0?1:_attributes$timescale2,_attributes$startNumb=attributes.startNumber,startNumber2=_attributes$startNumb===void 0?1:_attributes$startNumb,timeline2=attributes.periodStart;var segments=[];var time=-1;for(var sIndex=0;sIndex<segmentTimeline.length;sIndex++){var S=segmentTimeline[sIndex];var duration5=S.d;var repeat=S.r||0;var segmentTime=S.t||0;if(time<0){time=segmentTime;}if(segmentTime&&segmentTime>time){time=segmentTime;}var count=void 0;if(repeat<0){var nextS=sIndex+1;if(nextS===segmentTimeline.length){if(type2==="dynamic"&&minimumUpdatePeriod2>0&&media.indexOf("$Number$")>0){count=getLiveRValue(attributes,time,duration5);}else{count=(sourceDuration*timescale2-time)/duration5;}}else{count=(segmentTimeline[nextS].t-time)/duration5;}}else{count=repeat+1;}var end=startNumber2+segments.length+count;var number=startNumber2+segments.length;while(number<end){segments.push({number:number,duration:duration5/timescale2,time:time,timeline:timeline2});time+=duration5;number++;}}return segments;};var identifierPattern=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g;var identifierReplacement=function identifierReplacement2(values3){return function(match,identifier,format,width2){if(match==="$$"){return"$";}if(typeof values3[identifier]==="undefined"){return match;}var value=""+values3[identifier];if(identifier==="RepresentationID"){return value;}if(!format){width2=1;}else{width2=parseInt(width2,10);}if(value.length>=width2){return value;}return""+new Array(width2-value.length+1).join("0")+value;};};var constructTemplateUrl=function constructTemplateUrl2(url,values3){return url.replace(identifierPattern,identifierReplacement(values3));};var parseTemplateInfo=function parseTemplateInfo2(attributes,segmentTimeline){if(!attributes.duration&&!segmentTimeline){return[{number:attributes.startNumber||1,duration:attributes.sourceDuration,time:0,timeline:attributes.periodStart}];}if(attributes.duration){return parseByDuration(attributes);}return parseByTimeline(attributes,segmentTimeline);};var segmentsFromTemplate=function segmentsFromTemplate2(attributes,segmentTimeline){var templateValues={RepresentationID:attributes.id,Bandwidth:attributes.bandwidth||0};var _attributes$initializ=attributes.initialization,initialization=_attributes$initializ===void 0?{sourceURL:"",range:""}:_attributes$initializ;var mapSegment=urlTypeToSegment({baseUrl:attributes.baseUrl,source:constructTemplateUrl(initialization.sourceURL,templateValues),range:initialization.range});var segments=parseTemplateInfo(attributes,segmentTimeline);return segments.map(function(segment){templateValues.Number=segment.number;templateValues.Time=segment.time;var uri=constructTemplateUrl(attributes.media||"",templateValues);var timescale2=attributes.timescale||1;var presentationTimeOffset2=attributes.presentationTimeOffset||0;var presentationTime=attributes.periodStart+(segment.time-presentationTimeOffset2)/timescale2;var map={uri:uri,timeline:segment.timeline,duration:segment.duration,resolvedUri:resolve_url_default(attributes.baseUrl||"",uri),map:mapSegment,number:segment.number,presentationTime:presentationTime};return map;});};var SegmentURLToSegmentObject=function SegmentURLToSegmentObject2(attributes,segmentUrl){var baseUrl=attributes.baseUrl,_attributes$initializ=attributes.initialization,initialization=_attributes$initializ===void 0?{}:_attributes$initializ;var initSegment=urlTypeToSegment({baseUrl:baseUrl,source:initialization.sourceURL,range:initialization.range});var segment=urlTypeToSegment({baseUrl:baseUrl,source:segmentUrl.media,range:segmentUrl.mediaRange});segment.map=initSegment;return segment;};var segmentsFromList=function segmentsFromList2(attributes,segmentTimeline){var duration5=attributes.duration,_attributes$segmentUr=attributes.segmentUrls,segmentUrls=_attributes$segmentUr===void 0?[]:_attributes$segmentUr,periodStart=attributes.periodStart;if(!duration5&&!segmentTimeline||duration5&&segmentTimeline){throw new Error(errors.SEGMENT_TIME_UNSPECIFIED);}var segmentUrlMap=segmentUrls.map(function(segmentUrlObject){return SegmentURLToSegmentObject(attributes,segmentUrlObject);});var segmentTimeInfo;if(duration5){segmentTimeInfo=parseByDuration(attributes);}if(segmentTimeline){segmentTimeInfo=parseByTimeline(attributes,segmentTimeline);}var segments=segmentTimeInfo.map(function(segmentTime,index){if(segmentUrlMap[index]){var segment=segmentUrlMap[index];var timescale2=attributes.timescale||1;var presentationTimeOffset2=attributes.presentationTimeOffset||0;segment.timeline=segmentTime.timeline;segment.duration=segmentTime.duration;segment.number=segmentTime.number;segment.presentationTime=periodStart+(segmentTime.time-presentationTimeOffset2)/timescale2;return segment;}}).filter(function(segment){return segment;});return segments;};var generateSegments=function generateSegments2(_ref){var attributes=_ref.attributes,segmentInfo=_ref.segmentInfo;var segmentAttributes;var segmentsFn;if(segmentInfo.template){segmentsFn=segmentsFromTemplate;segmentAttributes=merge(attributes,segmentInfo.template);}else if(segmentInfo.base){segmentsFn=segmentsFromBase;segmentAttributes=merge(attributes,segmentInfo.base);}else if(segmentInfo.list){segmentsFn=segmentsFromList;segmentAttributes=merge(attributes,segmentInfo.list);}var segmentsInfo={attributes:attributes};if(!segmentsFn){return segmentsInfo;}var segments=segmentsFn(segmentAttributes,segmentInfo.segmentTimeline);if(segmentAttributes.duration){var _segmentAttributes=segmentAttributes,duration5=_segmentAttributes.duration,_segmentAttributes$ti=_segmentAttributes.timescale,timescale2=_segmentAttributes$ti===void 0?1:_segmentAttributes$ti;segmentAttributes.duration=duration5/timescale2;}else if(segments.length){segmentAttributes.duration=segments.reduce(function(max,segment){return Math.max(max,Math.ceil(segment.duration));},0);}else{segmentAttributes.duration=0;}segmentsInfo.attributes=segmentAttributes;segmentsInfo.segments=segments;if(segmentInfo.base&&segmentAttributes.indexRange){segmentsInfo.sidx=segments[0];segmentsInfo.segments=[];}return segmentsInfo;};var toPlaylists=function toPlaylists2(representations){return representations.map(generateSegments);};var findChildren=function findChildren2(element,name){return from(element.childNodes).filter(function(_ref){var tagName=_ref.tagName;return tagName===name;});};var getContent=function getContent2(element){return element.textContent.trim();};var parseDuration=function parseDuration2(str){var SECONDS_IN_YEAR=365*24*60*60;var SECONDS_IN_MONTH=30*24*60*60;var SECONDS_IN_DAY=24*60*60;var SECONDS_IN_HOUR=60*60;var SECONDS_IN_MIN=60;var durationRegex=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/;var match=durationRegex.exec(str);if(!match){return 0;}var _match$slice=match.slice(1),year=_match$slice[0],month=_match$slice[1],day=_match$slice[2],hour=_match$slice[3],minute=_match$slice[4],second=_match$slice[5];return parseFloat(year||0)*SECONDS_IN_YEAR+parseFloat(month||0)*SECONDS_IN_MONTH+parseFloat(day||0)*SECONDS_IN_DAY+parseFloat(hour||0)*SECONDS_IN_HOUR+parseFloat(minute||0)*SECONDS_IN_MIN+parseFloat(second||0);};var parseDate=function parseDate2(str){var dateRegex=/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/;if(dateRegex.test(str)){str+="Z";}return Date.parse(str);};var parsers={mediaPresentationDuration:function mediaPresentationDuration(value){return parseDuration(value);},availabilityStartTime:function availabilityStartTime(value){return parseDate(value)/1e3;},minimumUpdatePeriod:function minimumUpdatePeriod(value){return parseDuration(value);},suggestedPresentationDelay:function suggestedPresentationDelay(value){return parseDuration(value);},type:function type(value){return value;},timeShiftBufferDepth:function timeShiftBufferDepth(value){return parseDuration(value);},start:function start(value){return parseDuration(value);},width:function width(value){return parseInt(value,10);},height:function height(value){return parseInt(value,10);},bandwidth:function bandwidth(value){return parseInt(value,10);},startNumber:function startNumber(value){return parseInt(value,10);},timescale:function timescale(value){return parseInt(value,10);},presentationTimeOffset:function presentationTimeOffset(value){return parseInt(value,10);},duration:function duration(value){var parsedValue=parseInt(value,10);if(isNaN(parsedValue)){return parseDuration(value);}return parsedValue;},d:function d(value){return parseInt(value,10);},t:function t(value){return parseInt(value,10);},r:function r(value){return parseInt(value,10);},DEFAULT:function DEFAULT(value){return value;}};var parseAttributes3=function parseAttributes4(el){if(!(el&&el.attributes)){return{};}return from(el.attributes).reduce(function(a,e){var parseFn=parsers[e.name]||parsers.DEFAULT;a[e.name]=parseFn(e.value);return a;},{});};var keySystemsMap={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"};var buildBaseUrls=function buildBaseUrls2(referenceUrls,baseUrlElements){if(!baseUrlElements.length){return referenceUrls;}return flatten(referenceUrls.map(function(reference){return baseUrlElements.map(function(baseUrlElement){return resolve_url_default(reference,getContent(baseUrlElement));});}));};var getSegmentInformation=function getSegmentInformation2(adaptationSet){var segmentTemplate=findChildren(adaptationSet,"SegmentTemplate")[0];var segmentList=findChildren(adaptationSet,"SegmentList")[0];var segmentUrls=segmentList&&findChildren(segmentList,"SegmentURL").map(function(s){return merge({tag:"SegmentURL"},parseAttributes3(s));});var segmentBase=findChildren(adaptationSet,"SegmentBase")[0];var segmentTimelineParentNode=segmentList||segmentTemplate;var segmentTimeline=segmentTimelineParentNode&&findChildren(segmentTimelineParentNode,"SegmentTimeline")[0];var segmentInitializationParentNode=segmentList||segmentBase||segmentTemplate;var segmentInitialization=segmentInitializationParentNode&&findChildren(segmentInitializationParentNode,"Initialization")[0];var template=segmentTemplate&&parseAttributes3(segmentTemplate);if(template&&segmentInitialization){template.initialization=segmentInitialization&&parseAttributes3(segmentInitialization);}else if(template&&template.initialization){template.initialization={sourceURL:template.initialization};}var segmentInfo={template:template,segmentTimeline:segmentTimeline&&findChildren(segmentTimeline,"S").map(function(s){return parseAttributes3(s);}),list:segmentList&&merge(parseAttributes3(segmentList),{segmentUrls:segmentUrls,initialization:parseAttributes3(segmentInitialization)}),base:segmentBase&&merge(parseAttributes3(segmentBase),{initialization:parseAttributes3(segmentInitialization)})};Object.keys(segmentInfo).forEach(function(key){if(!segmentInfo[key]){delete segmentInfo[key];}});return segmentInfo;};var inheritBaseUrls=function inheritBaseUrls2(adaptationSetAttributes,adaptationSetBaseUrls,adaptationSetSegmentInfo){return function(representation){var repBaseUrlElements=findChildren(representation,"BaseURL");var repBaseUrls=buildBaseUrls(adaptationSetBaseUrls,repBaseUrlElements);var attributes=merge(adaptationSetAttributes,parseAttributes3(representation));var representationSegmentInfo=getSegmentInformation(representation);return repBaseUrls.map(function(baseUrl){return{segmentInfo:merge(adaptationSetSegmentInfo,representationSegmentInfo),attributes:merge(attributes,{baseUrl:baseUrl})};});};};var generateKeySystemInformation=function generateKeySystemInformation2(contentProtectionNodes){return contentProtectionNodes.reduce(function(acc,node){var attributes=parseAttributes3(node);if(attributes.schemeIdUri){attributes.schemeIdUri=attributes.schemeIdUri.toLowerCase();}var keySystem=keySystemsMap[attributes.schemeIdUri];if(keySystem){acc[keySystem]={attributes:attributes};var psshNode=findChildren(node,"cenc:pssh")[0];if(psshNode){var pssh=getContent(psshNode);acc[keySystem].pssh=pssh&&decodeB64ToUint8Array(pssh);}}return acc;},{});};var parseCaptionServiceMetadata=function parseCaptionServiceMetadata2(service){if(service.schemeIdUri==="urn:scte:dash:cc:cea-608:2015"){var values3=typeof service.value!=="string"?[]:service.value.split(";");return values3.map(function(value){var channel;var language;language=value;if(/^CC\d=/.test(value)){var _value$split=value.split("=");channel=_value$split[0];language=_value$split[1];}else if(/^CC\d$/.test(value)){channel=value;}return{channel:channel,language:language};});}else if(service.schemeIdUri==="urn:scte:dash:cc:cea-708:2015"){var _values=typeof service.value!=="string"?[]:service.value.split(";");return _values.map(function(value){var flags={"channel":void 0,"language":void 0,"aspectRatio":1,"easyReader":0,"3D":0};if(/=/.test(value)){var _value$split2=value.split("="),channel=_value$split2[0],_value$split2$=_value$split2[1],opts=_value$split2$===void 0?"":_value$split2$;flags.channel=channel;flags.language=value;opts.split(",").forEach(function(opt){var _opt$split=opt.split(":"),name=_opt$split[0],val=_opt$split[1];if(name==="lang"){flags.language=val;}else if(name==="er"){flags.easyReader=Number(val);}else if(name==="war"){flags.aspectRatio=Number(val);}else if(name==="3D"){flags["3D"]=Number(val);}});}else{flags.language=value;}if(flags.channel){flags.channel="SERVICE"+flags.channel;}return flags;});}};var toRepresentations=function toRepresentations2(periodAttributes,periodBaseUrls,periodSegmentInfo){return function(adaptationSet){var adaptationSetAttributes=parseAttributes3(adaptationSet);var adaptationSetBaseUrls=buildBaseUrls(periodBaseUrls,findChildren(adaptationSet,"BaseURL"));var role=findChildren(adaptationSet,"Role")[0];var roleAttributes={role:parseAttributes3(role)};var attrs=merge(periodAttributes,adaptationSetAttributes,roleAttributes);var accessibility=findChildren(adaptationSet,"Accessibility")[0];var captionServices=parseCaptionServiceMetadata(parseAttributes3(accessibility));if(captionServices){attrs=merge(attrs,{captionServices:captionServices});}var label=findChildren(adaptationSet,"Label")[0];if(label&&label.childNodes.length){var labelVal=label.childNodes[0].nodeValue.trim();attrs=merge(attrs,{label:labelVal});}var contentProtection=generateKeySystemInformation(findChildren(adaptationSet,"ContentProtection"));if(Object.keys(contentProtection).length){attrs=merge(attrs,{contentProtection:contentProtection});}var segmentInfo=getSegmentInformation(adaptationSet);var representations=findChildren(adaptationSet,"Representation");var adaptationSetSegmentInfo=merge(periodSegmentInfo,segmentInfo);return flatten(representations.map(inheritBaseUrls(attrs,adaptationSetBaseUrls,adaptationSetSegmentInfo)));};};var toAdaptationSets=function toAdaptationSets2(mpdAttributes,mpdBaseUrls){return function(period,index){var periodBaseUrls=buildBaseUrls(mpdBaseUrls,findChildren(period.node,"BaseURL"));var periodAttributes=merge(mpdAttributes,{periodStart:period.attributes.start});if(typeof period.attributes.duration==="number"){periodAttributes.periodDuration=period.attributes.duration;}var adaptationSets=findChildren(period.node,"AdaptationSet");var periodSegmentInfo=getSegmentInformation(period.node);return flatten(adaptationSets.map(toRepresentations(periodAttributes,periodBaseUrls,periodSegmentInfo)));};};var getPeriodStart=function getPeriodStart2(_ref){var attributes=_ref.attributes,priorPeriodAttributes=_ref.priorPeriodAttributes,mpdType=_ref.mpdType;if(typeof attributes.start==="number"){return attributes.start;}if(priorPeriodAttributes&&typeof priorPeriodAttributes.start==="number"&&typeof priorPeriodAttributes.duration==="number"){return priorPeriodAttributes.start+priorPeriodAttributes.duration;}if(!priorPeriodAttributes&&mpdType==="static"){return 0;}return null;};var inheritAttributes=function inheritAttributes2(mpd,options){if(options===void 0){options={};}var _options=options,_options$manifestUri=_options.manifestUri,manifestUri=_options$manifestUri===void 0?"":_options$manifestUri,_options$NOW=_options.NOW,NOW=_options$NOW===void 0?Date.now():_options$NOW,_options$clientOffset=_options.clientOffset,clientOffset=_options$clientOffset===void 0?0:_options$clientOffset;var periodNodes=findChildren(mpd,"Period");if(!periodNodes.length){throw new Error(errors.INVALID_NUMBER_OF_PERIOD);}var locations=findChildren(mpd,"Location");var mpdAttributes=parseAttributes3(mpd);var mpdBaseUrls=buildBaseUrls([manifestUri],findChildren(mpd,"BaseURL"));mpdAttributes.type=mpdAttributes.type||"static";mpdAttributes.sourceDuration=mpdAttributes.mediaPresentationDuration||0;mpdAttributes.NOW=NOW;mpdAttributes.clientOffset=clientOffset;if(locations.length){mpdAttributes.locations=locations.map(getContent);}var periods=[];periodNodes.forEach(function(node,index){var attributes=parseAttributes3(node);var priorPeriod=periods[index-1];attributes.start=getPeriodStart({attributes:attributes,priorPeriodAttributes:priorPeriod?priorPeriod.attributes:null,mpdType:mpdAttributes.type});periods.push({node:node,attributes:attributes});});return{locations:mpdAttributes.locations,representationInfo:flatten(periods.map(toAdaptationSets(mpdAttributes,mpdBaseUrls)))};};var stringToMpdXml=function stringToMpdXml2(manifestString){if(manifestString===""){throw new Error(errors.DASH_EMPTY_MANIFEST);}var parser6=new import_xmldom.DOMParser();var xml;var mpd;try{xml=parser6.parseFromString(manifestString,"application/xml");mpd=xml&&xml.documentElement.tagName==="MPD"?xml.documentElement:null;}catch(e){}if(!mpd||mpd&&mpd.getElementsByTagName("parsererror").length>0){throw new Error(errors.DASH_INVALID_XML);}return mpd;};var parseUTCTimingScheme=function parseUTCTimingScheme2(mpd){var UTCTimingNode=findChildren(mpd,"UTCTiming")[0];if(!UTCTimingNode){return null;}var attributes=parseAttributes3(UTCTimingNode);switch(attributes.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":attributes.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":attributes.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":attributes.method="DIRECT";attributes.value=Date.parse(attributes.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(errors.UNSUPPORTED_UTC_TIMING_SCHEME);}return attributes;};var parse=function parse2(manifestString,options){if(options===void 0){options={};}var parsedManifestInfo=inheritAttributes(stringToMpdXml(manifestString),options);var playlists=toPlaylists(parsedManifestInfo.representationInfo);return toM3u8({dashPlaylists:playlists,locations:parsedManifestInfo.locations,sidxMapping:options.sidxMapping,previousManifest:options.previousManifest});};var parseUTCTiming=function parseUTCTiming2(manifestString){return parseUTCTimingScheme(stringToMpdXml(manifestString));};// node_modules/video.js/dist/video.es.js
var import_parse_sidx=__toESM(require_parse_sidx());// node_modules/@videojs/vhs-utils/es/id3-helpers.js
var ID3=toUint8([73,68,51]);var getId3Size=function getId3Size2(bytes,offset){if(offset===void 0){offset=0;}bytes=toUint8(bytes);var flags=bytes[offset+5];var returnSize=bytes[offset+6]<<21|bytes[offset+7]<<14|bytes[offset+8]<<7|bytes[offset+9];var footerPresent=(flags&16)>>4;if(footerPresent){return returnSize+20;}return returnSize+10;};var getId3Offset=function getId3Offset2(bytes,offset){if(offset===void 0){offset=0;}bytes=toUint8(bytes);if(bytes.length-offset<10||!bytesMatch(bytes,ID3,{offset:offset})){return offset;}offset+=getId3Size(bytes,offset);return getId3Offset2(bytes,offset);};// node_modules/@videojs/vhs-utils/es/opus-helpers.js
var OPUS_HEAD=new Uint8Array([79,112,117,115,72,101,97,100]);// node_modules/@videojs/vhs-utils/es/mp4-helpers.js
var normalizePath=function normalizePath2(path){if(typeof path==="string"){return stringToBytes(path);}if(typeof path==="number"){return path;}return path;};var normalizePaths=function normalizePaths2(paths){if(!Array.isArray(paths)){return[normalizePath(paths)];}return paths.map(function(p){return normalizePath(p);});};var DESCRIPTORS;var parseDescriptors=function parseDescriptors2(bytes){bytes=toUint8(bytes);var results=[];var i=0;while(bytes.length>i){var tag=bytes[i];var size=0;var headerSize=0;headerSize++;var _byte2=bytes[headerSize];headerSize++;while(_byte2&128){size=(_byte2&127)<<7;_byte2=bytes[headerSize];headerSize++;}size+=_byte2&127;for(var z=0;z<DESCRIPTORS.length;z++){var _DESCRIPTORS$z=DESCRIPTORS[z],id=_DESCRIPTORS$z.id,parser6=_DESCRIPTORS$z.parser;if(tag===id){results.push(parser6(bytes.subarray(headerSize,headerSize+size)));break;}}i+=size+headerSize;}return results;};DESCRIPTORS=[{id:3,parser:function parser(bytes){var desc={tag:3,id:bytes[0]<<8|bytes[1],flags:bytes[2],size:3,dependsOnEsId:0,ocrEsId:0,descriptors:[],url:""};if(desc.flags&128){desc.dependsOnEsId=bytes[desc.size]<<8|bytes[desc.size+1];desc.size+=2;}if(desc.flags&64){var len=bytes[desc.size];desc.url=bytesToString(bytes.subarray(desc.size+1,desc.size+1+len));desc.size+=len;}if(desc.flags&32){desc.ocrEsId=bytes[desc.size]<<8|bytes[desc.size+1];desc.size+=2;}desc.descriptors=parseDescriptors(bytes.subarray(desc.size))||[];return desc;}},{id:4,parser:function parser2(bytes){var desc={tag:4,oti:bytes[0],streamType:bytes[1],bufferSize:bytes[2]<<16|bytes[3]<<8|bytes[4],maxBitrate:bytes[5]<<24|bytes[6]<<16|bytes[7]<<8|bytes[8],avgBitrate:bytes[9]<<24|bytes[10]<<16|bytes[11]<<8|bytes[12],descriptors:parseDescriptors(bytes.subarray(13))};return desc;}},{id:5,parser:function parser3(bytes){return{tag:5,bytes:bytes};}},{id:6,parser:function parser4(bytes){return{tag:6,bytes:bytes};}}];var findBox=function findBox2(bytes,paths,complete){if(complete===void 0){complete=false;}paths=normalizePaths(paths);bytes=toUint8(bytes);var results=[];if(!paths.length){return results;}var i=0;while(i<bytes.length){var size=(bytes[i]<<24|bytes[i+1]<<16|bytes[i+2]<<8|bytes[i+3])>>>0;var type2=bytes.subarray(i+4,i+8);if(size===0){break;}var end=i+size;if(end>bytes.length){if(complete){break;}end=bytes.length;}var data=bytes.subarray(i+8,end);if(bytesMatch(type2,paths[0])){if(paths.length===1){results.push(data);}else{results.push.apply(results,findBox2(data,paths.slice(1),complete));}}i=end;}return results;};// node_modules/@videojs/vhs-utils/es/ebml-helpers.js
var EBML_TAGS={EBML:toUint8([26,69,223,163]),DocType:toUint8([66,130]),Segment:toUint8([24,83,128,103]),SegmentInfo:toUint8([21,73,169,102]),Tracks:toUint8([22,84,174,107]),Track:toUint8([174]),TrackNumber:toUint8([215]),DefaultDuration:toUint8([35,227,131]),TrackEntry:toUint8([174]),TrackType:toUint8([131]),FlagDefault:toUint8([136]),CodecID:toUint8([134]),CodecPrivate:toUint8([99,162]),VideoTrack:toUint8([224]),AudioTrack:toUint8([225]),Cluster:toUint8([31,67,182,117]),Timestamp:toUint8([231]),TimestampScale:toUint8([42,215,177]),BlockGroup:toUint8([160]),BlockDuration:toUint8([155]),Block:toUint8([161]),SimpleBlock:toUint8([163])};var LENGTH_TABLE=[128,64,32,16,8,4,2,1];var getLength=function getLength2(_byte3){var len=1;for(var i=0;i<LENGTH_TABLE.length;i++){if(_byte3&LENGTH_TABLE[i]){break;}len++;}return len;};var getvint=function getvint2(bytes,offset,removeLength,signed){if(removeLength===void 0){removeLength=true;}if(signed===void 0){signed=false;}var length=getLength(bytes[offset]);var valueBytes=bytes.subarray(offset,offset+length);if(removeLength){valueBytes=Array.prototype.slice.call(bytes,offset,offset+length);valueBytes[0]^=LENGTH_TABLE[length-1];}return{length:length,value:bytesToNumber(valueBytes,{signed:signed}),bytes:valueBytes};};var normalizePath3=function normalizePath4(path){if(typeof path==="string"){return path.match(/.{1,2}/g).map(function(p){return normalizePath4(p);});}if(typeof path==="number"){return numberToBytes(path);}return path;};var normalizePaths3=function normalizePaths4(paths){if(!Array.isArray(paths)){return[normalizePath3(paths)];}return paths.map(function(p){return normalizePath3(p);});};var getInfinityDataSize=function getInfinityDataSize2(id,bytes,offset){if(offset>=bytes.length){return bytes.length;}var innerid=getvint(bytes,offset,false);if(bytesMatch(id.bytes,innerid.bytes)){return offset;}var dataHeader=getvint(bytes,offset+innerid.length);return getInfinityDataSize2(id,bytes,offset+dataHeader.length+dataHeader.value+innerid.length);};var findEbml=function findEbml2(bytes,paths){paths=normalizePaths3(paths);bytes=toUint8(bytes);var results=[];if(!paths.length){return results;}var i=0;while(i<bytes.length){var id=getvint(bytes,i,false);var dataHeader=getvint(bytes,i+id.length);var dataStart=i+id.length+dataHeader.length;if(dataHeader.value===127){dataHeader.value=getInfinityDataSize(id,bytes,dataStart);if(dataHeader.value!==bytes.length){dataHeader.value-=dataStart;}}var dataEnd=dataStart+dataHeader.value>bytes.length?bytes.length:dataStart+dataHeader.value;var data=bytes.subarray(dataStart,dataEnd);if(bytesMatch(paths[0],id.bytes)){if(paths.length===1){results.push(data);}else{results=results.concat(findEbml2(data,paths.slice(1)));}}var totalLength=id.length+dataHeader.length+data.length;i+=totalLength;}return results;};// node_modules/@videojs/vhs-utils/es/nal-helpers.js
var NAL_TYPE_ONE=toUint8([0,0,0,1]);var NAL_TYPE_TWO=toUint8([0,0,1]);var EMULATION_PREVENTION=toUint8([0,0,3]);var discardEmulationPreventionBytes=function discardEmulationPreventionBytes2(bytes){var positions=[];var i=1;while(i<bytes.length-2){if(bytesMatch(bytes.subarray(i,i+3),EMULATION_PREVENTION)){positions.push(i+2);i++;}i++;}if(positions.length===0){return bytes;}var newLength=bytes.length-positions.length;var newData=new Uint8Array(newLength);var sourceIndex=0;for(i=0;i<newLength;sourceIndex++,i++){if(sourceIndex===positions[0]){sourceIndex++;positions.shift();}newData[i]=bytes[sourceIndex];}return newData;};var findNal=function findNal2(bytes,dataType,types,nalLimit){if(nalLimit===void 0){nalLimit=Infinity;}bytes=toUint8(bytes);types=[].concat(types);var i=0;var nalStart;var nalsFound=0;while(i<bytes.length&&(nalsFound<nalLimit||nalStart)){var nalOffset=void 0;if(bytesMatch(bytes.subarray(i),NAL_TYPE_ONE)){nalOffset=4;}else if(bytesMatch(bytes.subarray(i),NAL_TYPE_TWO)){nalOffset=3;}if(!nalOffset){i++;continue;}nalsFound++;if(nalStart){return discardEmulationPreventionBytes(bytes.subarray(nalStart,i));}var nalType=void 0;if(dataType==="h264"){nalType=bytes[i+nalOffset]&31;}else if(dataType==="h265"){nalType=bytes[i+nalOffset]>>1&63;}if(types.indexOf(nalType)!==-1){nalStart=i+nalOffset;}i+=nalOffset+(dataType==="h264"?1:2);}return bytes.subarray(0,0);};var findH264Nal=function findH264Nal2(bytes,type2,nalLimit){return findNal(bytes,"h264",type2,nalLimit);};var findH265Nal=function findH265Nal2(bytes,type2,nalLimit){return findNal(bytes,"h265",type2,nalLimit);};// node_modules/@videojs/vhs-utils/es/containers.js
var CONSTANTS={"webm":toUint8([119,101,98,109]),"matroska":toUint8([109,97,116,114,111,115,107,97]),"flac":toUint8([102,76,97,67]),"ogg":toUint8([79,103,103,83]),"ac3":toUint8([11,119]),"riff":toUint8([82,73,70,70]),"avi":toUint8([65,86,73]),"wav":toUint8([87,65,86,69]),"3gp":toUint8([102,116,121,112,51,103]),"mp4":toUint8([102,116,121,112]),"fmp4":toUint8([115,116,121,112]),"mov":toUint8([102,116,121,112,113,116]),"moov":toUint8([109,111,111,118]),"moof":toUint8([109,111,111,102])};var _isLikely={aac:function aac(bytes){var offset=getId3Offset(bytes);return bytesMatch(bytes,[255,16],{offset:offset,mask:[255,22]});},mp3:function mp3(bytes){var offset=getId3Offset(bytes);return bytesMatch(bytes,[255,2],{offset:offset,mask:[255,6]});},webm:function webm(bytes){var docType=findEbml(bytes,[EBML_TAGS.EBML,EBML_TAGS.DocType])[0];return bytesMatch(docType,CONSTANTS.webm);},mkv:function mkv(bytes){var docType=findEbml(bytes,[EBML_TAGS.EBML,EBML_TAGS.DocType])[0];return bytesMatch(docType,CONSTANTS.matroska);},mp4:function mp4(bytes){if(_isLikely["3gp"](bytes)||_isLikely.mov(bytes)){return false;}if(bytesMatch(bytes,CONSTANTS.mp4,{offset:4})||bytesMatch(bytes,CONSTANTS.fmp4,{offset:4})){return true;}if(bytesMatch(bytes,CONSTANTS.moof,{offset:4})||bytesMatch(bytes,CONSTANTS.moov,{offset:4})){return true;}},mov:function mov(bytes){return bytesMatch(bytes,CONSTANTS.mov,{offset:4});},"3gp":function gp(bytes){return bytesMatch(bytes,CONSTANTS["3gp"],{offset:4});},ac3:function ac3(bytes){var offset=getId3Offset(bytes);return bytesMatch(bytes,CONSTANTS.ac3,{offset:offset});},ts:function ts(bytes){if(bytes.length<189&&bytes.length>=1){return bytes[0]===71;}var i=0;while(i+188<bytes.length&&i<188){if(bytes[i]===71&&bytes[i+188]===71){return true;}i+=1;}return false;},flac:function flac(bytes){var offset=getId3Offset(bytes);return bytesMatch(bytes,CONSTANTS.flac,{offset:offset});},ogg:function ogg(bytes){return bytesMatch(bytes,CONSTANTS.ogg);},avi:function avi(bytes){return bytesMatch(bytes,CONSTANTS.riff)&&bytesMatch(bytes,CONSTANTS.avi,{offset:8});},wav:function wav(bytes){return bytesMatch(bytes,CONSTANTS.riff)&&bytesMatch(bytes,CONSTANTS.wav,{offset:8});},"h264":function h264(bytes){return findH264Nal(bytes,7,3).length;},"h265":function h265(bytes){return findH265Nal(bytes,[32,33],3).length;}};var isLikelyTypes=Object.keys(_isLikely).filter(function(t2){return t2!=="ts"&&t2!=="h264"&&t2!=="h265";}).concat(["ts","h264","h265"]);isLikelyTypes.forEach(function(type2){var isLikelyFn=_isLikely[type2];_isLikely[type2]=function(bytes){return isLikelyFn(toUint8(bytes));};});var isLikely=_isLikely;var detectContainerForBytes=function detectContainerForBytes2(bytes){bytes=toUint8(bytes);for(var i=0;i<isLikelyTypes.length;i++){var type2=isLikelyTypes[i];if(isLikely[type2](bytes)){return type2;}}return"";};var isLikelyFmp4MediaSegment=function isLikelyFmp4MediaSegment2(bytes){return findBox(bytes,["moof"]).length>0;};// node_modules/video.js/dist/video.es.js
var import_clock=__toESM(require_clock());var version$5="7.19.2";var hooks_={};var hooks=function hooks2(type2,fn){hooks_[type2]=hooks_[type2]||[];if(fn){hooks_[type2]=hooks_[type2].concat(fn);}return hooks_[type2];};var hook=function hook2(type2,fn){hooks(type2,fn);};var removeHook=function removeHook2(type2,fn){var index=hooks(type2).indexOf(fn);if(index<=-1){return false;}hooks_[type2]=hooks_[type2].slice();hooks_[type2].splice(index,1);return true;};var hookOnce=function hookOnce2(type2,fn){hooks(type2,[].concat(fn).map(function(original){var wrapper=function wrapper2(){removeHook(type2,wrapper2);return original.apply(void 0,arguments);};return wrapper;}));};var FullscreenApi={prefixed:true};var apiMap=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]];var specApi=apiMap[0];var browserApi;for(i=0;i<apiMap.length;i++){if(apiMap[i][1]in import_document["default"]){browserApi=apiMap[i];break;}}var i;if(browserApi){for(_i2=0;_i2<browserApi.length;_i2++){FullscreenApi[specApi[_i2]]=browserApi[_i2];}FullscreenApi.prefixed=browserApi[0]!==specApi[0];}var _i2;var history=[];var LogByTypeFactory=function LogByTypeFactory2(name,log2){return function(type2,level,args){var lvl=log2.levels[level];var lvlRegExp=new RegExp("^("+lvl+")$");if(type2!=="log"){args.unshift(type2.toUpperCase()+":");}args.unshift(name+":");if(history){history.push([].concat(args));var splice=history.length-1e3;history.splice(0,splice>0?splice:0);}if(!import_window6["default"].console){return;}var fn=import_window6["default"].console[type2];if(!fn&&type2==="debug"){fn=import_window6["default"].console.info||import_window6["default"].console.log;}if(!fn||!lvl||!lvlRegExp.test(type2)){return;}fn[Array.isArray(args)?"apply":"call"](import_window6["default"].console,args);};};function createLogger$1(name){var level="info";var logByType;var log2=function log3(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}logByType("log",level,args);};logByType=LogByTypeFactory(name,log2);log2.createLogger=function(subname){return createLogger$1(name+": "+subname);};log2.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:level};log2.level=function(lvl){if(typeof lvl==="string"){if(!log2.levels.hasOwnProperty(lvl)){throw new Error('"'+lvl+'" in not a valid log level');}level=lvl;}return level;};log2.history=function(){return history?[].concat(history):[];};log2.history.filter=function(fname){return(history||[]).filter(function(historyItem){return new RegExp(".*"+fname+".*").test(historyItem[0]);});};log2.history.clear=function(){if(history){history.length=0;}};log2.history.disable=function(){if(history!==null){history.length=0;history=null;}};log2.history.enable=function(){if(history===null){history=[];}};log2.error=function(){for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2];}return logByType("error",level,args);};log2.warn=function(){for(var _len3=arguments.length,args=new Array(_len3),_key3=0;_key3<_len3;_key3++){args[_key3]=arguments[_key3];}return logByType("warn",level,args);};log2.debug=function(){for(var _len4=arguments.length,args=new Array(_len4),_key4=0;_key4<_len4;_key4++){args[_key4]=arguments[_key4];}return logByType("debug",level,args);};return log2;}var log$1=createLogger$1("VIDEOJS");var createLogger=log$1.createLogger;var toString=Object.prototype.toString;var keys=function keys2(object){return isObject4(object)?Object.keys(object):[];};function each(object,fn){keys(object).forEach(function(key){return fn(object[key],key);});}function reduce(object,fn,initial){if(initial===void 0){initial=0;}return keys(object).reduce(function(accum,key){return fn(accum,object[key],key);},initial);}function assign(target){for(var _len=arguments.length,sources=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){sources[_key-1]=arguments[_key];}if(Object.assign){return _extends.apply(void 0,[target].concat(sources));}sources.forEach(function(source){if(!source){return;}each(source,function(value,key){target[key]=value;});});return target;}function isObject4(value){return!!value&&_typeof(value)==="object";}function isPlain(value){return isObject4(value)&&toString.call(value)==="[object Object]"&&value.constructor===Object;}function computedStyle(el,prop){if(!el||!prop){return"";}if(typeof import_window6["default"].getComputedStyle==="function"){var computedStyleValue;try{computedStyleValue=import_window6["default"].getComputedStyle(el);}catch(e){return"";}return computedStyleValue?computedStyleValue.getPropertyValue(prop)||computedStyleValue[prop]:"";}return"";}var USER_AGENT=import_window6["default"].navigator&&import_window6["default"].navigator.userAgent||"";var webkitVersionMap=/AppleWebKit\/([\d.]+)/i.exec(USER_AGENT);var appleWebkitVersion=webkitVersionMap?parseFloat(webkitVersionMap.pop()):null;var IS_IPOD=/iPod/i.test(USER_AGENT);var IOS_VERSION=function(){var match=USER_AGENT.match(/OS (\d+)_/i);if(match&&match[1]){return match[1];}return null;}();var IS_ANDROID=/Android/i.test(USER_AGENT);var ANDROID_VERSION=function(){var match=USER_AGENT.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!match){return null;}var major=match[1]&&parseFloat(match[1]);var minor=match[2]&&parseFloat(match[2]);if(major&&minor){return parseFloat(match[1]+"."+match[2]);}else if(major){return major;}return null;}();var IS_NATIVE_ANDROID=IS_ANDROID&&ANDROID_VERSION<5&&appleWebkitVersion<537;var IS_FIREFOX=/Firefox/i.test(USER_AGENT);var IS_EDGE=/Edg/i.test(USER_AGENT);var IS_CHROME=!IS_EDGE&&(/Chrome/i.test(USER_AGENT)||/CriOS/i.test(USER_AGENT));var CHROME_VERSION=function(){var match=USER_AGENT.match(/(Chrome|CriOS)\/(\d+)/);if(match&&match[2]){return parseFloat(match[2]);}return null;}();var IE_VERSION=function(){var result=/MSIE\s(\d+)\.\d/.exec(USER_AGENT);var version2=result&&parseFloat(result[1]);if(!version2&&/Trident\/7.0/i.test(USER_AGENT)&&/rv:11.0/.test(USER_AGENT)){version2=11;}return version2;}();var IS_SAFARI=/Safari/i.test(USER_AGENT)&&!IS_CHROME&&!IS_ANDROID&&!IS_EDGE;var IS_WINDOWS=/Windows/i.test(USER_AGENT);var TOUCH_ENABLED=Boolean(isReal()&&("ontouchstart"in import_window6["default"]||import_window6["default"].navigator.maxTouchPoints||import_window6["default"].DocumentTouch&&import_window6["default"].document instanceof import_window6["default"].DocumentTouch));var IS_IPAD=/iPad/i.test(USER_AGENT)||IS_SAFARI&&TOUCH_ENABLED&&!/iPhone/i.test(USER_AGENT);var IS_IPHONE=/iPhone/i.test(USER_AGENT)&&!IS_IPAD;var IS_IOS=IS_IPHONE||IS_IPAD||IS_IPOD;var IS_ANY_SAFARI=(IS_SAFARI||IS_IOS)&&!IS_CHROME;var browser=/* @__PURE__ */Object.freeze({__proto__:null,IS_IPOD:IS_IPOD,IOS_VERSION:IOS_VERSION,IS_ANDROID:IS_ANDROID,ANDROID_VERSION:ANDROID_VERSION,IS_NATIVE_ANDROID:IS_NATIVE_ANDROID,IS_FIREFOX:IS_FIREFOX,IS_EDGE:IS_EDGE,IS_CHROME:IS_CHROME,CHROME_VERSION:CHROME_VERSION,IE_VERSION:IE_VERSION,IS_SAFARI:IS_SAFARI,IS_WINDOWS:IS_WINDOWS,TOUCH_ENABLED:TOUCH_ENABLED,IS_IPAD:IS_IPAD,IS_IPHONE:IS_IPHONE,IS_IOS:IS_IOS,IS_ANY_SAFARI:IS_ANY_SAFARI});function isNonBlankString(str){return typeof str==="string"&&Boolean(str.trim());}function throwIfWhitespace(str){if(str.indexOf(" ")>=0){throw new Error("class has illegal whitespace characters");}}function classRegExp(className){return new RegExp("(^|\\s)"+className+"($|\\s)");}function isReal(){return import_document["default"]===import_window6["default"].document;}function isEl(value){return isObject4(value)&&value.nodeType===1;}function isInFrame(){try{return import_window6["default"].parent!==import_window6["default"].self;}catch(x){return true;}}function createQuerier(method){return function(selector3,context){if(!isNonBlankString(selector3)){return import_document["default"][method](null);}if(isNonBlankString(context)){context=import_document["default"].querySelector(context);}var ctx=isEl(context)?context:import_document["default"];return ctx[method]&&ctx[method](selector3);};}function createEl(tagName,properties,attributes,content){if(tagName===void 0){tagName="div";}if(properties===void 0){properties={};}if(attributes===void 0){attributes={};}var el=import_document["default"].createElement(tagName);Object.getOwnPropertyNames(properties).forEach(function(propName){var val=properties[propName];if(propName.indexOf("aria-")!==-1||propName==="role"||propName==="type"){log$1.warn("Setting attributes in the second argument of createEl()\nhas been deprecated. Use the third argument instead.\n"+("createEl(type, properties, attributes). Attempting to set "+propName+" to "+val+"."));el.setAttribute(propName,val);}else if(propName==="textContent"){textContent(el,val);}else if(el[propName]!==val||propName==="tabIndex"){el[propName]=val;}});Object.getOwnPropertyNames(attributes).forEach(function(attrName){el.setAttribute(attrName,attributes[attrName]);});if(content){appendContent(el,content);}return el;}function textContent(el,text){if(typeof el.textContent==="undefined"){el.innerText=text;}else{el.textContent=text;}return el;}function prependTo(child,parent){if(parent.firstChild){parent.insertBefore(child,parent.firstChild);}else{parent.appendChild(child);}}function hasClass(element,classToCheck){throwIfWhitespace(classToCheck);if(element.classList){return element.classList.contains(classToCheck);}return classRegExp(classToCheck).test(element.className);}function addClass(element,classToAdd){if(element.classList){element.classList.add(classToAdd);}else if(!hasClass(element,classToAdd)){element.className=(element.className+" "+classToAdd).trim();}return element;}function removeClass(element,classToRemove){if(!element){log$1.warn("removeClass was called with an element that doesn't exist");return null;}if(element.classList){element.classList.remove(classToRemove);}else{throwIfWhitespace(classToRemove);element.className=element.className.split(/\s+/).filter(function(c){return c!==classToRemove;}).join(" ");}return element;}function toggleClass(element,classToToggle,predicate){var has=hasClass(element,classToToggle);if(typeof predicate==="function"){predicate=predicate(element,classToToggle);}if(typeof predicate!=="boolean"){predicate=!has;}if(predicate===has){return;}if(predicate){addClass(element,classToToggle);}else{removeClass(element,classToToggle);}return element;}function setAttributes(el,attributes){Object.getOwnPropertyNames(attributes).forEach(function(attrName){var attrValue=attributes[attrName];if(attrValue===null||typeof attrValue==="undefined"||attrValue===false){el.removeAttribute(attrName);}else{el.setAttribute(attrName,attrValue===true?"":attrValue);}});}function getAttributes(tag){var obj={};var knownBooleans=",autoplay,controls,playsinline,loop,muted,default,defaultMuted,";if(tag&&tag.attributes&&tag.attributes.length>0){var attrs=tag.attributes;for(var i=attrs.length-1;i>=0;i--){var attrName=attrs[i].name;var attrVal=attrs[i].value;if(typeof tag[attrName]==="boolean"||knownBooleans.indexOf(","+attrName+",")!==-1){attrVal=attrVal!==null?true:false;}obj[attrName]=attrVal;}}return obj;}function getAttribute(el,attribute){return el.getAttribute(attribute);}function setAttribute(el,attribute,value){el.setAttribute(attribute,value);}function removeAttribute(el,attribute){el.removeAttribute(attribute);}function blockTextSelection(){import_document["default"].body.focus();import_document["default"].onselectstart=function(){return false;};}function unblockTextSelection(){import_document["default"].onselectstart=function(){return true;};}function getBoundingClientRect(el){if(el&&el.getBoundingClientRect&&el.parentNode){var rect=el.getBoundingClientRect();var result={};["bottom","height","left","right","top","width"].forEach(function(k){if(rect[k]!==void 0){result[k]=rect[k];}});if(!result.height){result.height=parseFloat(computedStyle(el,"height"));}if(!result.width){result.width=parseFloat(computedStyle(el,"width"));}return result;}}function findPosition(el){if(!el||el&&!el.offsetParent){return{left:0,top:0,width:0,height:0};}var width2=el.offsetWidth;var height2=el.offsetHeight;var left=0;var top=0;while(el.offsetParent&&el!==import_document["default"][FullscreenApi.fullscreenElement]){left+=el.offsetLeft;top+=el.offsetTop;el=el.offsetParent;}return{left:left,top:top,width:width2,height:height2};}function getPointerPosition(el,event){var translated={x:0,y:0};if(IS_IOS){var item=el;while(item&&item.nodeName.toLowerCase()!=="html"){var transform3=computedStyle(item,"transform");if(/^matrix/.test(transform3)){var values3=transform3.slice(7,-1).split(/,\s/).map(Number);translated.x+=values3[4];translated.y+=values3[5];}else if(/^matrix3d/.test(transform3)){var _values=transform3.slice(9,-1).split(/,\s/).map(Number);translated.x+=_values[12];translated.y+=_values[13];}item=item.parentNode;}}var position={};var boxTarget=findPosition(event.target);var box=findPosition(el);var boxW=box.width;var boxH=box.height;var offsetY=event.offsetY-(box.top-boxTarget.top);var offsetX=event.offsetX-(box.left-boxTarget.left);if(event.changedTouches){offsetX=event.changedTouches[0].pageX-box.left;offsetY=event.changedTouches[0].pageY+box.top;if(IS_IOS){offsetX-=translated.x;offsetY-=translated.y;}}position.y=1-Math.max(0,Math.min(1,offsetY/boxH));position.x=Math.max(0,Math.min(1,offsetX/boxW));return position;}function isTextNode(value){return isObject4(value)&&value.nodeType===3;}function emptyEl(el){while(el.firstChild){el.removeChild(el.firstChild);}return el;}function normalizeContent(content){if(typeof content==="function"){content=content();}return(Array.isArray(content)?content:[content]).map(function(value){if(typeof value==="function"){value=value();}if(isEl(value)||isTextNode(value)){return value;}if(typeof value==="string"&&/\S/.test(value)){return import_document["default"].createTextNode(value);}}).filter(function(value){return value;});}function appendContent(el,content){normalizeContent(content).forEach(function(node){return el.appendChild(node);});return el;}function insertContent(el,content){return appendContent(emptyEl(el),content);}function isSingleLeftClick(event){if(event.button===void 0&&event.buttons===void 0){return true;}if(event.button===0&&event.buttons===void 0){return true;}if(event.type==="mouseup"&&event.button===0&&event.buttons===0){return true;}if(event.button!==0||event.buttons!==1){return false;}return true;}var $=createQuerier("querySelector");var $$=createQuerier("querySelectorAll");var Dom=/* @__PURE__ */Object.freeze({__proto__:null,isReal:isReal,isEl:isEl,isInFrame:isInFrame,createEl:createEl,textContent:textContent,prependTo:prependTo,hasClass:hasClass,addClass:addClass,removeClass:removeClass,toggleClass:toggleClass,setAttributes:setAttributes,getAttributes:getAttributes,getAttribute:getAttribute,setAttribute:setAttribute,removeAttribute:removeAttribute,blockTextSelection:blockTextSelection,unblockTextSelection:unblockTextSelection,getBoundingClientRect:getBoundingClientRect,findPosition:findPosition,getPointerPosition:getPointerPosition,isTextNode:isTextNode,emptyEl:emptyEl,normalizeContent:normalizeContent,appendContent:appendContent,insertContent:insertContent,isSingleLeftClick:isSingleLeftClick,$:$,$$:$$});var _windowLoaded=false;var videojs$1;var autoSetup=function autoSetup2(){if(videojs$1.options.autoSetup===false){return;}var vids=Array.prototype.slice.call(import_document["default"].getElementsByTagName("video"));var audios=Array.prototype.slice.call(import_document["default"].getElementsByTagName("audio"));var divs=Array.prototype.slice.call(import_document["default"].getElementsByTagName("video-js"));var mediaEls=vids.concat(audios,divs);if(mediaEls&&mediaEls.length>0){for(var i=0,e=mediaEls.length;i<e;i++){var mediaEl=mediaEls[i];if(mediaEl&&mediaEl.getAttribute){if(mediaEl.player===void 0){var options=mediaEl.getAttribute("data-setup");if(options!==null){videojs$1(mediaEl);}}}else{autoSetupTimeout(1);break;}}}else if(!_windowLoaded){autoSetupTimeout(1);}};function autoSetupTimeout(wait,vjs){if(!isReal()){return;}if(vjs){videojs$1=vjs;}import_window6["default"].setTimeout(autoSetup,wait);}function setWindowLoaded(){_windowLoaded=true;import_window6["default"].removeEventListener("load",setWindowLoaded);}if(isReal()){if(import_document["default"].readyState==="complete"){setWindowLoaded();}else{import_window6["default"].addEventListener("load",setWindowLoaded);}}var createStyleElement=function createStyleElement2(className){var style=import_document["default"].createElement("style");style.className=className;return style;};var setTextContent=function setTextContent2(el,content){if(el.styleSheet){el.styleSheet.cssText=content;}else{el.textContent=content;}};var _initialGuid=3;var _guid=_initialGuid;function newGUID(){return _guid++;}var FakeWeakMap;if(!import_window6["default"].WeakMap){FakeWeakMap=/* @__PURE__ */function(){function FakeWeakMap2(){this.vdata="vdata"+Math.floor(import_window6["default"].performance&&import_window6["default"].performance.now()||Date.now());this.data={};}var _proto=FakeWeakMap2.prototype;_proto.set=function set4(key,value){var access=key[this.vdata]||newGUID();if(!key[this.vdata]){key[this.vdata]=access;}this.data[access]=value;return this;};_proto.get=function get7(key){var access=key[this.vdata];if(access){return this.data[access];}log$1("We have no data for this element",key);return void 0;};_proto.has=function has(key){var access=key[this.vdata];return access in this.data;};_proto["delete"]=function _delete(key){var access=key[this.vdata];if(access){delete this.data[access];delete key[this.vdata];}};return FakeWeakMap2;}();}var DomData=import_window6["default"].WeakMap?/* @__PURE__ */new WeakMap():new FakeWeakMap();function _cleanUpEvents(elem,type2){if(!DomData.has(elem)){return;}var data=DomData.get(elem);if(data.handlers[type2].length===0){delete data.handlers[type2];if(elem.removeEventListener){elem.removeEventListener(type2,data.dispatcher,false);}else if(elem.detachEvent){elem.detachEvent("on"+type2,data.dispatcher);}}if(Object.getOwnPropertyNames(data.handlers).length<=0){delete data.handlers;delete data.dispatcher;delete data.disabled;}if(Object.getOwnPropertyNames(data).length===0){DomData["delete"](elem);}}function _handleMultipleEvents(fn,elem,types,callback2){types.forEach(function(type2){fn(elem,type2,callback2);});}function fixEvent(event){if(event.fixed_){return event;}function returnTrue(){return true;}function returnFalse(){return false;}if(!event||!event.isPropagationStopped||!event.isImmediatePropagationStopped){var old=event||import_window6["default"].event;event={};for(var key in old){if(key!=="layerX"&&key!=="layerY"&&key!=="keyLocation"&&key!=="webkitMovementX"&&key!=="webkitMovementY"){if(!(key==="returnValue"&&old.preventDefault)){event[key]=old[key];}}}if(!event.target){event.target=event.srcElement||import_document["default"];}if(!event.relatedTarget){event.relatedTarget=event.fromElement===event.target?event.toElement:event.fromElement;}event.preventDefault=function(){if(old.preventDefault){old.preventDefault();}event.returnValue=false;old.returnValue=false;event.defaultPrevented=true;};event.defaultPrevented=false;event.stopPropagation=function(){if(old.stopPropagation){old.stopPropagation();}event.cancelBubble=true;old.cancelBubble=true;event.isPropagationStopped=returnTrue;};event.isPropagationStopped=returnFalse;event.stopImmediatePropagation=function(){if(old.stopImmediatePropagation){old.stopImmediatePropagation();}event.isImmediatePropagationStopped=returnTrue;event.stopPropagation();};event.isImmediatePropagationStopped=returnFalse;if(event.clientX!==null&&event.clientX!==void 0){var doc=import_document["default"].documentElement;var body=import_document["default"].body;event.pageX=event.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0);event.pageY=event.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0);}event.which=event.charCode||event.keyCode;if(event.button!==null&&event.button!==void 0){event.button=event.button&1?0:event.button&4?1:event.button&2?2:0;}}event.fixed_=true;return event;}var _supportsPassive2;var supportsPassive=function supportsPassive2(){if(typeof _supportsPassive2!=="boolean"){_supportsPassive2=false;try{var opts=Object.defineProperty({},"passive",{get:function get7(){_supportsPassive2=true;}});import_window6["default"].addEventListener("test",null,opts);import_window6["default"].removeEventListener("test",null,opts);}catch(e){}}return _supportsPassive2;};var passiveEvents=["touchstart","touchmove"];function on(elem,type2,fn){if(Array.isArray(type2)){return _handleMultipleEvents(on,elem,type2,fn);}if(!DomData.has(elem)){DomData.set(elem,{});}var data=DomData.get(elem);if(!data.handlers){data.handlers={};}if(!data.handlers[type2]){data.handlers[type2]=[];}if(!fn.guid){fn.guid=newGUID();}data.handlers[type2].push(fn);if(!data.dispatcher){data.disabled=false;data.dispatcher=function(event,hash){if(data.disabled){return;}event=fixEvent(event);var handlers=data.handlers[event.type];if(handlers){var handlersCopy=handlers.slice(0);for(var m=0,n=handlersCopy.length;m<n;m++){if(event.isImmediatePropagationStopped()){break;}else{try{handlersCopy[m].call(elem,event,hash);}catch(e){log$1.error(e);}}}}};}if(data.handlers[type2].length===1){if(elem.addEventListener){var options=false;if(supportsPassive()&&passiveEvents.indexOf(type2)>-1){options={passive:true};}elem.addEventListener(type2,data.dispatcher,options);}else if(elem.attachEvent){elem.attachEvent("on"+type2,data.dispatcher);}}}function off(elem,type2,fn){if(!DomData.has(elem)){return;}var data=DomData.get(elem);if(!data.handlers){return;}if(Array.isArray(type2)){return _handleMultipleEvents(off,elem,type2,fn);}var removeType=function removeType2(el,t3){data.handlers[t3]=[];_cleanUpEvents(el,t3);};if(type2===void 0){for(var t2 in data.handlers){if(Object.prototype.hasOwnProperty.call(data.handlers||{},t2)){removeType(elem,t2);}}return;}var handlers=data.handlers[type2];if(!handlers){return;}if(!fn){removeType(elem,type2);return;}if(fn.guid){for(var n=0;n<handlers.length;n++){if(handlers[n].guid===fn.guid){handlers.splice(n--,1);}}}_cleanUpEvents(elem,type2);}function trigger(elem,event,hash){var elemData=DomData.has(elem)?DomData.get(elem):{};var parent=elem.parentNode||elem.ownerDocument;if(typeof event==="string"){event={type:event,target:elem};}else if(!event.target){event.target=elem;}event=fixEvent(event);if(elemData.dispatcher){elemData.dispatcher.call(elem,event,hash);}if(parent&&!event.isPropagationStopped()&&event.bubbles===true){trigger.call(null,parent,event,hash);}else if(!parent&&!event.defaultPrevented&&event.target&&event.target[event.type]){if(!DomData.has(event.target)){DomData.set(event.target,{});}var targetData=DomData.get(event.target);if(event.target[event.type]){targetData.disabled=true;if(typeof event.target[event.type]==="function"){event.target[event.type]();}targetData.disabled=false;}}return!event.defaultPrevented;}function one(elem,type2,fn){if(Array.isArray(type2)){return _handleMultipleEvents(one,elem,type2,fn);}var func=function func2(){off(elem,type2,func2);fn.apply(this,arguments);};func.guid=fn.guid=fn.guid||newGUID();on(elem,type2,func);}function any(elem,type2,fn){var func=function func2(){off(elem,type2,func2);fn.apply(this,arguments);};func.guid=fn.guid=fn.guid||newGUID();on(elem,type2,func);}var Events=/* @__PURE__ */Object.freeze({__proto__:null,fixEvent:fixEvent,on:on,off:off,trigger:trigger,one:one,any:any});var UPDATE_REFRESH_INTERVAL=30;var bind=function bind2(context,fn,uid){if(!fn.guid){fn.guid=newGUID();}var bound=fn.bind(context);bound.guid=uid?uid+"_"+fn.guid:fn.guid;return bound;};var throttle=function throttle2(fn,wait){var last=import_window6["default"].performance.now();var throttled=function throttled2(){var now2=import_window6["default"].performance.now();if(now2-last>=wait){fn.apply(void 0,arguments);last=now2;}};return throttled;};var debounce3=function debounce4(func,wait,immediate,context){if(context===void 0){context=import_window6["default"];}var timeout;var cancel=function cancel2(){context.clearTimeout(timeout);timeout=null;};var debounced=function debounced2(){var self2=this;var args=arguments;var _later=function later(){timeout=null;_later=null;if(!immediate){func.apply(self2,args);}};if(!timeout&&immediate){func.apply(self2,args);}context.clearTimeout(timeout);timeout=context.setTimeout(_later,wait);};debounced.cancel=cancel;return debounced;};var EventTarget$2=function EventTarget(){};EventTarget$2.prototype.allowedEvents_={};EventTarget$2.prototype.on=function(type2,fn){var ael=this.addEventListener;this.addEventListener=function(){};on(this,type2,fn);this.addEventListener=ael;};EventTarget$2.prototype.addEventListener=EventTarget$2.prototype.on;EventTarget$2.prototype.off=function(type2,fn){off(this,type2,fn);};EventTarget$2.prototype.removeEventListener=EventTarget$2.prototype.off;EventTarget$2.prototype.one=function(type2,fn){var ael=this.addEventListener;this.addEventListener=function(){};one(this,type2,fn);this.addEventListener=ael;};EventTarget$2.prototype.any=function(type2,fn){var ael=this.addEventListener;this.addEventListener=function(){};any(this,type2,fn);this.addEventListener=ael;};EventTarget$2.prototype.trigger=function(event){var type2=event.type||event;if(typeof event==="string"){event={type:type2};}event=fixEvent(event);if(this.allowedEvents_[type2]&&this["on"+type2]){this["on"+type2](event);}trigger(this,event);};EventTarget$2.prototype.dispatchEvent=EventTarget$2.prototype.trigger;var EVENT_MAP;EventTarget$2.prototype.queueTrigger=function(event){var _this=this;if(!EVENT_MAP){EVENT_MAP=/* @__PURE__ */new Map();}var type2=event.type||event;var map=EVENT_MAP.get(this);if(!map){map=/* @__PURE__ */new Map();EVENT_MAP.set(this,map);}var oldTimeout=map.get(type2);map["delete"](type2);import_window6["default"].clearTimeout(oldTimeout);var timeout=import_window6["default"].setTimeout(function(){if(map.size===0){map=null;EVENT_MAP["delete"](_this);}_this.trigger(event);},0);map.set(type2,timeout);};var objName=function objName2(obj){if(typeof obj.name==="function"){return obj.name();}if(typeof obj.name==="string"){return obj.name;}if(obj.name_){return obj.name_;}if(obj.constructor&&obj.constructor.name){return obj.constructor.name;}return _typeof(obj);};var isEvented=function isEvented2(object){return object instanceof EventTarget$2||!!object.eventBusEl_&&["on","one","off","trigger"].every(function(k){return typeof object[k]==="function";});};var addEventedCallback=function addEventedCallback2(target,callback2){if(isEvented(target)){callback2();}else{if(!target.eventedCallbacks){target.eventedCallbacks=[];}target.eventedCallbacks.push(callback2);}};var isValidEventType=function isValidEventType2(type2){return typeof type2==="string"&&/\S/.test(type2)||Array.isArray(type2)&&!!type2.length;};var validateTarget=function validateTarget2(target,obj,fnName){if(!target||!target.nodeName&&!isEvented(target)){throw new Error("Invalid target for "+objName(obj)+"#"+fnName+"; must be a DOM node or evented object.");}};var validateEventType=function validateEventType2(type2,obj,fnName){if(!isValidEventType(type2)){throw new Error("Invalid event type for "+objName(obj)+"#"+fnName+"; must be a non-empty string or array.");}};var validateListener=function validateListener2(listener,obj,fnName){if(typeof listener!=="function"){throw new Error("Invalid listener for "+objName(obj)+"#"+fnName+"; must be a function.");}};var normalizeListenArgs=function normalizeListenArgs2(self2,args,fnName){var isTargetingSelf=args.length<3||args[0]===self2||args[0]===self2.eventBusEl_;var target;var type2;var listener;if(isTargetingSelf){target=self2.eventBusEl_;if(args.length>=3){args.shift();}type2=args[0];listener=args[1];}else{target=args[0];type2=args[1];listener=args[2];}validateTarget(target,self2,fnName);validateEventType(type2,self2,fnName);validateListener(listener,self2,fnName);listener=bind(self2,listener);return{isTargetingSelf:isTargetingSelf,target:target,type:type2,listener:listener};};var listen=function listen2(target,method,type2,listener){validateTarget(target,target,method);if(target.nodeName){Events[method](target,type2,listener);}else{target[method](type2,listener);}};var EventedMixin={on:function on2(){var _this=this;for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}var _normalizeListenArgs=normalizeListenArgs(this,args,"on"),isTargetingSelf=_normalizeListenArgs.isTargetingSelf,target=_normalizeListenArgs.target,type2=_normalizeListenArgs.type,listener=_normalizeListenArgs.listener;listen(target,"on",type2,listener);if(!isTargetingSelf){var removeListenerOnDispose=function removeListenerOnDispose2(){return _this.off(target,type2,listener);};removeListenerOnDispose.guid=listener.guid;var removeRemoverOnTargetDispose=function removeRemoverOnTargetDispose2(){return _this.off("dispose",removeListenerOnDispose);};removeRemoverOnTargetDispose.guid=listener.guid;listen(this,"on","dispose",removeListenerOnDispose);listen(target,"on","dispose",removeRemoverOnTargetDispose);}},one:function one2(){var _this2=this;for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2];}var _normalizeListenArgs2=normalizeListenArgs(this,args,"one"),isTargetingSelf=_normalizeListenArgs2.isTargetingSelf,target=_normalizeListenArgs2.target,type2=_normalizeListenArgs2.type,listener=_normalizeListenArgs2.listener;if(isTargetingSelf){listen(target,"one",type2,listener);}else{var wrapper=function wrapper2(){_this2.off(target,type2,wrapper2);for(var _len3=arguments.length,largs=new Array(_len3),_key3=0;_key3<_len3;_key3++){largs[_key3]=arguments[_key3];}listener.apply(null,largs);};wrapper.guid=listener.guid;listen(target,"one",type2,wrapper);}},any:function any2(){var _this3=this;for(var _len4=arguments.length,args=new Array(_len4),_key4=0;_key4<_len4;_key4++){args[_key4]=arguments[_key4];}var _normalizeListenArgs3=normalizeListenArgs(this,args,"any"),isTargetingSelf=_normalizeListenArgs3.isTargetingSelf,target=_normalizeListenArgs3.target,type2=_normalizeListenArgs3.type,listener=_normalizeListenArgs3.listener;if(isTargetingSelf){listen(target,"any",type2,listener);}else{var wrapper=function wrapper2(){_this3.off(target,type2,wrapper2);for(var _len5=arguments.length,largs=new Array(_len5),_key5=0;_key5<_len5;_key5++){largs[_key5]=arguments[_key5];}listener.apply(null,largs);};wrapper.guid=listener.guid;listen(target,"any",type2,wrapper);}},off:function off$1(targetOrType,typeOrListener,listener){if(!targetOrType||isValidEventType(targetOrType)){off(this.eventBusEl_,targetOrType,typeOrListener);}else{var target=targetOrType;var type2=typeOrListener;validateTarget(target,this,"off");validateEventType(type2,this,"off");validateListener(listener,this,"off");listener=bind(this,listener);this.off("dispose",listener);if(target.nodeName){off(target,type2,listener);off(target,"dispose",listener);}else if(isEvented(target)){target.off(type2,listener);target.off("dispose",listener);}}},trigger:function trigger$1(event,hash){validateTarget(this.eventBusEl_,this,"trigger");var type2=event&&typeof event!=="string"?event.type:event;if(!isValidEventType(type2)){var error="Invalid event type for "+objName(this)+"#trigger; must be a non-empty string or object with a type key that has a non-empty value.";if(event){(this.log||log$1).error(error);}else{throw new Error(error);}}return trigger(this.eventBusEl_,event,hash);}};function evented(target,options){if(options===void 0){options={};}var _options=options,eventBusKey=_options.eventBusKey;if(eventBusKey){if(!target[eventBusKey].nodeName){throw new Error('The eventBusKey "'+eventBusKey+'" does not refer to an element.');}target.eventBusEl_=target[eventBusKey];}else{target.eventBusEl_=createEl("span",{className:"vjs-event-bus"});}assign(target,EventedMixin);if(target.eventedCallbacks){target.eventedCallbacks.forEach(function(callback2){callback2();});}target.on("dispose",function(){target.off();[target,target.el_,target.eventBusEl_].forEach(function(val){if(val&&DomData.has(val)){DomData["delete"](val);}});import_window6["default"].setTimeout(function(){target.eventBusEl_=null;},0);});return target;}var StatefulMixin={state:{},setState:function setState(stateUpdates){var _this=this;if(typeof stateUpdates==="function"){stateUpdates=stateUpdates();}var changes;each(stateUpdates,function(value,key){if(_this.state[key]!==value){changes=changes||{};changes[key]={from:_this.state[key],to:value};}_this.state[key]=value;});if(changes&&isEvented(this)){this.trigger({changes:changes,type:"statechanged"});}return changes;}};function stateful(target,defaultState){assign(target,StatefulMixin);target.state=assign({},target.state,defaultState);if(typeof target.handleStateChanged==="function"&&isEvented(target)){target.on("statechanged",target.handleStateChanged);}return target;}var toLowerCase=function toLowerCase2(string){if(typeof string!=="string"){return string;}return string.replace(/./,function(w){return w.toLowerCase();});};var toTitleCase$1=function toTitleCase(string){if(typeof string!=="string"){return string;}return string.replace(/./,function(w){return w.toUpperCase();});};var titleCaseEquals=function titleCaseEquals2(str1,str2){return toTitleCase$1(str1)===toTitleCase$1(str2);};function mergeOptions$3(){var result={};for(var _len=arguments.length,sources=new Array(_len),_key=0;_key<_len;_key++){sources[_key]=arguments[_key];}sources.forEach(function(source){if(!source){return;}each(source,function(value,key){if(!isPlain(value)){result[key]=value;return;}if(!isPlain(result[key])){result[key]={};}result[key]=mergeOptions$3(result[key],value);});});return result;}var MapSham=/* @__PURE__ */function(){function MapSham2(){this.map_={};}var _proto=MapSham2.prototype;_proto.has=function has(key){return key in this.map_;};_proto["delete"]=function _delete(key){var has=this.has(key);delete this.map_[key];return has;};_proto.set=function set4(key,value){this.map_[key]=value;return this;};_proto.forEach=function forEach(callback2,thisArg){for(var key in this.map_){callback2.call(thisArg,this.map_[key],key,this);}};return MapSham2;}();var Map$1=import_window6["default"].Map?import_window6["default"].Map:MapSham;var SetSham=/* @__PURE__ */function(){function SetSham2(){this.set_={};}var _proto=SetSham2.prototype;_proto.has=function has(key){return key in this.set_;};_proto["delete"]=function _delete(key){var has=this.has(key);delete this.set_[key];return has;};_proto.add=function add(key){this.set_[key]=1;return this;};_proto.forEach=function forEach(callback2,thisArg){for(var key in this.set_){callback2.call(thisArg,key,key,this);}};return SetSham2;}();var Set$1=import_window6["default"].Set?import_window6["default"].Set:SetSham;var Component$1=/* @__PURE__ */function(){function Component2(player2,options,ready){var _this=this;if(!player2&&this.play){this.player_=player2=this;}else{this.player_=player2;}this.isDisposed_=false;this.parentComponent_=null;this.options_=mergeOptions$3({},this.options_);options=this.options_=mergeOptions$3(this.options_,options);this.id_=options.id||options.el&&options.el.id;if(!this.id_){var id=player2&&player2.id&&player2.id()||"no_player";this.id_=id+"_component_"+newGUID();}this.name_=options.name||null;if(options.el){this.el_=options.el;}else if(options.createEl!==false){this.el_=this.createEl();}if(options.className&&this.el_){options.className.split(" ").forEach(function(c){return _this.addClass(c);});}if(options.evented!==false){evented(this,{eventBusKey:this.el_?"el_":null});this.handleLanguagechange=this.handleLanguagechange.bind(this);this.on(this.player_,"languagechange",this.handleLanguagechange);}stateful(this,this.constructor.defaultState);this.children_=[];this.childIndex_={};this.childNameIndex_={};this.setTimeoutIds_=new Set$1();this.setIntervalIds_=new Set$1();this.rafIds_=new Set$1();this.namedRafs_=new Map$1();this.clearingTimersOnDispose_=false;if(options.initChildren!==false){this.initChildren();}this.ready(ready);if(options.reportTouchActivity!==false){this.enableTouchActivity();}}var _proto=Component2.prototype;_proto.dispose=function dispose(){if(this.isDisposed_){return;}if(this.readyQueue_){this.readyQueue_.length=0;}this.trigger({type:"dispose",bubbles:false});this.isDisposed_=true;if(this.children_){for(var i=this.children_.length-1;i>=0;i--){if(this.children_[i].dispose){this.children_[i].dispose();}}}this.children_=null;this.childIndex_=null;this.childNameIndex_=null;this.parentComponent_=null;if(this.el_){if(this.el_.parentNode){this.el_.parentNode.removeChild(this.el_);}this.el_=null;}this.player_=null;};_proto.isDisposed=function isDisposed(){return Boolean(this.isDisposed_);};_proto.player=function player2(){return this.player_;};_proto.options=function options(obj){if(!obj){return this.options_;}this.options_=mergeOptions$3(this.options_,obj);return this.options_;};_proto.el=function el(){return this.el_;};_proto.createEl=function createEl$1(tagName,properties,attributes){return createEl(tagName,properties,attributes);};_proto.localize=function localize(string,tokens,defaultValue){if(defaultValue===void 0){defaultValue=string;}var code=this.player_.language&&this.player_.language();var languages=this.player_.languages&&this.player_.languages();var language=languages&&languages[code];var primaryCode=code&&code.split("-")[0];var primaryLang=languages&&languages[primaryCode];var localizedString=defaultValue;if(language&&language[string]){localizedString=language[string];}else if(primaryLang&&primaryLang[string]){localizedString=primaryLang[string];}if(tokens){localizedString=localizedString.replace(/\{(\d+)\}/g,function(match,index){var value=tokens[index-1];var ret=value;if(typeof value==="undefined"){ret=match;}return ret;});}return localizedString;};_proto.handleLanguagechange=function handleLanguagechange(){};_proto.contentEl=function contentEl(){return this.contentEl_||this.el_;};_proto.id=function id(){return this.id_;};_proto.name=function name(){return this.name_;};_proto.children=function children(){return this.children_;};_proto.getChildById=function getChildById(id){return this.childIndex_[id];};_proto.getChild=function getChild(name){if(!name){return;}return this.childNameIndex_[name];};_proto.getDescendant=function getDescendant(){for(var _len=arguments.length,names=new Array(_len),_key=0;_key<_len;_key++){names[_key]=arguments[_key];}names=names.reduce(function(acc,n){return acc.concat(n);},[]);var currentChild=this;for(var i=0;i<names.length;i++){currentChild=currentChild.getChild(names[i]);if(!currentChild||!currentChild.getChild){return;}}return currentChild;};_proto.addChild=function addChild(child,options,index){if(options===void 0){options={};}if(index===void 0){index=this.children_.length;}var component;var componentName;if(typeof child==="string"){componentName=toTitleCase$1(child);var componentClassName=options.componentClass||componentName;options.name=componentName;var ComponentClass=Component2.getComponent(componentClassName);if(!ComponentClass){throw new Error("Component "+componentClassName+" does not exist");}if(typeof ComponentClass!=="function"){return null;}component=new ComponentClass(this.player_||this,options);}else{component=child;}if(component.parentComponent_){component.parentComponent_.removeChild(component);}this.children_.splice(index,0,component);component.parentComponent_=this;if(typeof component.id==="function"){this.childIndex_[component.id()]=component;}componentName=componentName||component.name&&toTitleCase$1(component.name());if(componentName){this.childNameIndex_[componentName]=component;this.childNameIndex_[toLowerCase(componentName)]=component;}if(typeof component.el==="function"&&component.el()){var refNode=null;if(this.children_[index+1]){if(this.children_[index+1].el_){refNode=this.children_[index+1].el_;}else if(isEl(this.children_[index+1])){refNode=this.children_[index+1];}}this.contentEl().insertBefore(component.el(),refNode);}return component;};_proto.removeChild=function removeChild(component){if(typeof component==="string"){component=this.getChild(component);}if(!component||!this.children_){return;}var childFound=false;for(var i=this.children_.length-1;i>=0;i--){if(this.children_[i]===component){childFound=true;this.children_.splice(i,1);break;}}if(!childFound){return;}component.parentComponent_=null;this.childIndex_[component.id()]=null;this.childNameIndex_[toTitleCase$1(component.name())]=null;this.childNameIndex_[toLowerCase(component.name())]=null;var compEl=component.el();if(compEl&&compEl.parentNode===this.contentEl()){this.contentEl().removeChild(component.el());}};_proto.initChildren=function initChildren(){var _this2=this;var children=this.options_.children;if(children){var parentOptions=this.options_;var handleAdd=function handleAdd2(child){var name=child.name;var opts=child.opts;if(parentOptions[name]!==void 0){opts=parentOptions[name];}if(opts===false){return;}if(opts===true){opts={};}opts.playerOptions=_this2.options_.playerOptions;var newChild=_this2.addChild(name,opts);if(newChild){_this2[name]=newChild;}};var workingChildren;var Tech2=Component2.getComponent("Tech");if(Array.isArray(children)){workingChildren=children;}else{workingChildren=Object.keys(children);}workingChildren.concat(Object.keys(this.options_).filter(function(child){return!workingChildren.some(function(wchild){if(typeof wchild==="string"){return child===wchild;}return child===wchild.name;});})).map(function(child){var name;var opts;if(typeof child==="string"){name=child;opts=children[name]||_this2.options_[name]||{};}else{name=child.name;opts=child;}return{name:name,opts:opts};}).filter(function(child){var c=Component2.getComponent(child.opts.componentClass||toTitleCase$1(child.name));return c&&!Tech2.isTech(c);}).forEach(handleAdd);}};_proto.buildCSSClass=function buildCSSClass(){return"";};_proto.ready=function ready(fn,sync){if(sync===void 0){sync=false;}if(!fn){return;}if(!this.isReady_){this.readyQueue_=this.readyQueue_||[];this.readyQueue_.push(fn);return;}if(sync){fn.call(this);}else{this.setTimeout(fn,1);}};_proto.triggerReady=function triggerReady(){this.isReady_=true;this.setTimeout(function(){var readyQueue=this.readyQueue_;this.readyQueue_=[];if(readyQueue&&readyQueue.length>0){readyQueue.forEach(function(fn){fn.call(this);},this);}this.trigger("ready");},1);};_proto.$=function $$1(selector3,context){return $(selector3,context||this.contentEl());};_proto.$$=function $$$1(selector3,context){return $$(selector3,context||this.contentEl());};_proto.hasClass=function hasClass$1(classToCheck){return hasClass(this.el_,classToCheck);};_proto.addClass=function addClass$1(classToAdd){addClass(this.el_,classToAdd);};_proto.removeClass=function removeClass$1(classToRemove){removeClass(this.el_,classToRemove);};_proto.toggleClass=function toggleClass$1(classToToggle,predicate){toggleClass(this.el_,classToToggle,predicate);};_proto.show=function show(){this.removeClass("vjs-hidden");};_proto.hide=function hide(){this.addClass("vjs-hidden");};_proto.lockShowing=function lockShowing(){this.addClass("vjs-lock-showing");};_proto.unlockShowing=function unlockShowing(){this.removeClass("vjs-lock-showing");};_proto.getAttribute=function getAttribute$1(attribute){return getAttribute(this.el_,attribute);};_proto.setAttribute=function setAttribute$1(attribute,value){setAttribute(this.el_,attribute,value);};_proto.removeAttribute=function removeAttribute$1(attribute){removeAttribute(this.el_,attribute);};_proto.width=function width2(num,skipListeners){return this.dimension("width",num,skipListeners);};_proto.height=function height2(num,skipListeners){return this.dimension("height",num,skipListeners);};_proto.dimensions=function dimensions(width2,height2){this.width(width2,true);this.height(height2);};_proto.dimension=function dimension(widthOrHeight,num,skipListeners){if(num!==void 0){if(num===null||num!==num){num=0;}if((""+num).indexOf("%")!==-1||(""+num).indexOf("px")!==-1){this.el_.style[widthOrHeight]=num;}else if(num==="auto"){this.el_.style[widthOrHeight]="";}else{this.el_.style[widthOrHeight]=num+"px";}if(!skipListeners){this.trigger("componentresize");}return;}if(!this.el_){return 0;}var val=this.el_.style[widthOrHeight];var pxIndex=val.indexOf("px");if(pxIndex!==-1){return parseInt(val.slice(0,pxIndex),10);}return parseInt(this.el_["offset"+toTitleCase$1(widthOrHeight)],10);};_proto.currentDimension=function currentDimension(widthOrHeight){var computedWidthOrHeight=0;if(widthOrHeight!=="width"&&widthOrHeight!=="height"){throw new Error("currentDimension only accepts width or height value");}computedWidthOrHeight=computedStyle(this.el_,widthOrHeight);computedWidthOrHeight=parseFloat(computedWidthOrHeight);if(computedWidthOrHeight===0||isNaN(computedWidthOrHeight)){var rule="offset"+toTitleCase$1(widthOrHeight);computedWidthOrHeight=this.el_[rule];}return computedWidthOrHeight;};_proto.currentDimensions=function currentDimensions(){return{width:this.currentDimension("width"),height:this.currentDimension("height")};};_proto.currentWidth=function currentWidth(){return this.currentDimension("width");};_proto.currentHeight=function currentHeight(){return this.currentDimension("height");};_proto.focus=function focus(){this.el_.focus();};_proto.blur=function blur(){this.el_.blur();};_proto.handleKeyDown=function handleKeyDown(event){if(this.player_){if(!import_keycode["default"].isEventKey(event,"Tab")){event.stopPropagation();}this.player_.handleKeyDown(event);}};_proto.handleKeyPress=function handleKeyPress(event){this.handleKeyDown(event);};_proto.emitTapEvents=function emitTapEvents(){var touchStart=0;var firstTouch=null;var tapMovementThreshold=10;var touchTimeThreshold=200;var couldBeTap;this.on("touchstart",function(event){if(event.touches.length===1){firstTouch={pageX:event.touches[0].pageX,pageY:event.touches[0].pageY};touchStart=import_window6["default"].performance.now();couldBeTap=true;}});this.on("touchmove",function(event){if(event.touches.length>1){couldBeTap=false;}else if(firstTouch){var xdiff=event.touches[0].pageX-firstTouch.pageX;var ydiff=event.touches[0].pageY-firstTouch.pageY;var touchDistance=Math.sqrt(xdiff*xdiff+ydiff*ydiff);if(touchDistance>tapMovementThreshold){couldBeTap=false;}}});var noTap=function noTap2(){couldBeTap=false;};this.on("touchleave",noTap);this.on("touchcancel",noTap);this.on("touchend",function(event){firstTouch=null;if(couldBeTap===true){var touchTime=import_window6["default"].performance.now()-touchStart;if(touchTime<touchTimeThreshold){event.preventDefault();this.trigger("tap");}}});};_proto.enableTouchActivity=function enableTouchActivity(){if(!this.player()||!this.player().reportUserActivity){return;}var report=bind(this.player(),this.player().reportUserActivity);var touchHolding;this.on("touchstart",function(){report();this.clearInterval(touchHolding);touchHolding=this.setInterval(report,250);});var touchEnd=function touchEnd2(event){report();this.clearInterval(touchHolding);};this.on("touchmove",report);this.on("touchend",touchEnd);this.on("touchcancel",touchEnd);};_proto.setTimeout=function setTimeout2(fn,timeout){var _this3=this;var timeoutId;fn=bind(this,fn);this.clearTimersOnDispose_();timeoutId=import_window6["default"].setTimeout(function(){if(_this3.setTimeoutIds_.has(timeoutId)){_this3.setTimeoutIds_["delete"](timeoutId);}fn();},timeout);this.setTimeoutIds_.add(timeoutId);return timeoutId;};_proto.clearTimeout=function clearTimeout2(timeoutId){if(this.setTimeoutIds_.has(timeoutId)){this.setTimeoutIds_["delete"](timeoutId);import_window6["default"].clearTimeout(timeoutId);}return timeoutId;};_proto.setInterval=function setInterval2(fn,interval){fn=bind(this,fn);this.clearTimersOnDispose_();var intervalId=import_window6["default"].setInterval(fn,interval);this.setIntervalIds_.add(intervalId);return intervalId;};_proto.clearInterval=function clearInterval2(intervalId){if(this.setIntervalIds_.has(intervalId)){this.setIntervalIds_["delete"](intervalId);import_window6["default"].clearInterval(intervalId);}return intervalId;};_proto.requestAnimationFrame=function requestAnimationFrame2(fn){var _this4=this;if(!this.supportsRaf_){return this.setTimeout(fn,1e3/60);}this.clearTimersOnDispose_();var id;fn=bind(this,fn);id=import_window6["default"].requestAnimationFrame(function(){if(_this4.rafIds_.has(id)){_this4.rafIds_["delete"](id);}fn();});this.rafIds_.add(id);return id;};_proto.requestNamedAnimationFrame=function requestNamedAnimationFrame(name,fn){var _this5=this;if(this.namedRafs_.has(name)){return;}this.clearTimersOnDispose_();fn=bind(this,fn);var id=this.requestAnimationFrame(function(){fn();if(_this5.namedRafs_.has(name)){_this5.namedRafs_["delete"](name);}});this.namedRafs_.set(name,id);return name;};_proto.cancelNamedAnimationFrame=function cancelNamedAnimationFrame(name){if(!this.namedRafs_.has(name)){return;}this.cancelAnimationFrame(this.namedRafs_.get(name));this.namedRafs_["delete"](name);};_proto.cancelAnimationFrame=function cancelAnimationFrame2(id){if(!this.supportsRaf_){return this.clearTimeout(id);}if(this.rafIds_.has(id)){this.rafIds_["delete"](id);import_window6["default"].cancelAnimationFrame(id);}return id;};_proto.clearTimersOnDispose_=function clearTimersOnDispose_(){var _this6=this;if(this.clearingTimersOnDispose_){return;}this.clearingTimersOnDispose_=true;this.one("dispose",function(){[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(function(_ref){var idName=_ref[0],cancelName=_ref[1];_this6[idName].forEach(function(val,key){return _this6[cancelName](key);});});_this6.clearingTimersOnDispose_=false;});};Component2.registerComponent=function registerComponent(name,ComponentToRegister){if(typeof name!=="string"||!name){throw new Error('Illegal component name, "'+name+'"; must be a non-empty string.');}var Tech2=Component2.getComponent("Tech");var isTech=Tech2&&Tech2.isTech(ComponentToRegister);var isComp=Component2===ComponentToRegister||Component2.prototype.isPrototypeOf(ComponentToRegister.prototype);if(isTech||!isComp){var reason;if(isTech){reason="techs must be registered using Tech.registerTech()";}else{reason="must be a Component subclass";}throw new Error('Illegal component, "'+name+'"; '+reason+".");}name=toTitleCase$1(name);if(!Component2.components_){Component2.components_={};}var Player2=Component2.getComponent("Player");if(name==="Player"&&Player2&&Player2.players){var players=Player2.players;var playerNames=Object.keys(players);if(players&&playerNames.length>0&&playerNames.map(function(pname){return players[pname];}).every(Boolean)){throw new Error("Can not register Player component after player has been created.");}}Component2.components_[name]=ComponentToRegister;Component2.components_[toLowerCase(name)]=ComponentToRegister;return ComponentToRegister;};Component2.getComponent=function getComponent(name){if(!name||!Component2.components_){return;}return Component2.components_[name];};return Component2;}();Component$1.prototype.supportsRaf_=typeof import_window6["default"].requestAnimationFrame==="function"&&typeof import_window6["default"].cancelAnimationFrame==="function";Component$1.registerComponent("Component",Component$1);function rangeCheck(fnName,index,maxIndex){if(typeof index!=="number"||index<0||index>maxIndex){throw new Error("Failed to execute '"+fnName+"' on 'TimeRanges': The index provided ("+index+") is non-numeric or out of bounds (0-"+maxIndex+").");}}function getRange(fnName,valueIndex,ranges,rangeIndex){rangeCheck(fnName,rangeIndex,ranges.length-1);return ranges[rangeIndex][valueIndex];}function createTimeRangesObj(ranges){var timeRangesObj;if(ranges===void 0||ranges.length===0){timeRangesObj={length:0,start:function start2(){throw new Error("This TimeRanges object is empty");},end:function end(){throw new Error("This TimeRanges object is empty");}};}else{timeRangesObj={length:ranges.length,start:getRange.bind(null,"start",0,ranges),end:getRange.bind(null,"end",1,ranges)};}if(import_window6["default"].Symbol&&import_window6["default"].Symbol.iterator){timeRangesObj[import_window6["default"].Symbol.iterator]=function(){return(ranges||[]).values();};}return timeRangesObj;}function createTimeRanges(start2,end){if(Array.isArray(start2)){return createTimeRangesObj(start2);}else if(start2===void 0||end===void 0){return createTimeRangesObj();}return createTimeRangesObj([[start2,end]]);}function bufferedPercent(buffered,duration5){var bufferedDuration=0;var start2;var end;if(!duration5){return 0;}if(!buffered||!buffered.length){buffered=createTimeRanges(0,0);}for(var i=0;i<buffered.length;i++){start2=buffered.start(i);end=buffered.end(i);if(end>duration5){end=duration5;}bufferedDuration+=end-start2;}return bufferedDuration/duration5;}function MediaError(value){if(value instanceof MediaError){return value;}if(typeof value==="number"){this.code=value;}else if(typeof value==="string"){this.message=value;}else if(isObject4(value)){if(typeof value.code==="number"){this.code=value.code;}assign(this,value);}if(!this.message){this.message=MediaError.defaultMessages[this.code]||"";}}MediaError.prototype.code=0;MediaError.prototype.message="";MediaError.prototype.status=null;MediaError.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"];MediaError.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(errNum=0;errNum<MediaError.errorTypes.length;errNum++){MediaError[MediaError.errorTypes[errNum]]=errNum;MediaError.prototype[MediaError.errorTypes[errNum]]=errNum;}var errNum;function isPromise(value){return value!==void 0&&value!==null&&typeof value.then==="function";}function silencePromise(value){if(isPromise(value)){value.then(null,function(e){});}}var trackToJson_=function trackToJson_2(track){var ret=["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(acc,prop,i){if(track[prop]){acc[prop]=track[prop];}return acc;},{cues:track.cues&&Array.prototype.map.call(track.cues,function(cue){return{startTime:cue.startTime,endTime:cue.endTime,text:cue.text,id:cue.id};})});return ret;};var textTracksToJson=function textTracksToJson2(tech){var trackEls=tech.$$("track");var trackObjs=Array.prototype.map.call(trackEls,function(t2){return t2.track;});var tracks=Array.prototype.map.call(trackEls,function(trackEl){var json=trackToJson_(trackEl.track);if(trackEl.src){json.src=trackEl.src;}return json;});return tracks.concat(Array.prototype.filter.call(tech.textTracks(),function(track){return trackObjs.indexOf(track)===-1;}).map(trackToJson_));};var jsonToTextTracks=function jsonToTextTracks2(json,tech){json.forEach(function(track){var addedTrack=tech.addRemoteTextTrack(track).track;if(!track.src&&track.cues){track.cues.forEach(function(cue){return addedTrack.addCue(cue);});}});return tech.textTracks();};var textTrackConverter={textTracksToJson:textTracksToJson,jsonToTextTracks:jsonToTextTracks,trackToJson_:trackToJson_};var MODAL_CLASS_NAME="vjs-modal-dialog";var ModalDialog=/* @__PURE__ */function(_Component){_inheritsLoose3(ModalDialog2,_Component);function ModalDialog2(player2,options){var _this;_this=_Component.call(this,player2,options)||this;_this.handleKeyDown_=function(e){return _this.handleKeyDown(e);};_this.close_=function(e){return _this.close(e);};_this.opened_=_this.hasBeenOpened_=_this.hasBeenFilled_=false;_this.closeable(!_this.options_.uncloseable);_this.content(_this.options_.content);_this.contentEl_=createEl("div",{className:MODAL_CLASS_NAME+"-content"},{role:"document"});_this.descEl_=createEl("p",{className:MODAL_CLASS_NAME+"-description vjs-control-text",id:_this.el().getAttribute("aria-describedby")});textContent(_this.descEl_,_this.description());_this.el_.appendChild(_this.descEl_);_this.el_.appendChild(_this.contentEl_);return _this;}var _proto=ModalDialog2.prototype;_proto.createEl=function createEl2(){return _Component.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),"role":"dialog"});};_proto.dispose=function dispose(){this.contentEl_=null;this.descEl_=null;this.previouslyActiveEl_=null;_Component.prototype.dispose.call(this);};_proto.buildCSSClass=function buildCSSClass(){return MODAL_CLASS_NAME+" vjs-hidden "+_Component.prototype.buildCSSClass.call(this);};_proto.label=function label(){return this.localize(this.options_.label||"Modal Window");};_proto.description=function description(){var desc=this.options_.description||this.localize("This is a modal window.");if(this.closeable()){desc+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.");}return desc;};_proto.open=function open(){if(!this.opened_){var player2=this.player();this.trigger("beforemodalopen");this.opened_=true;if(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_){this.fill();}this.wasPlaying_=!player2.paused();if(this.options_.pauseOnOpen&&this.wasPlaying_){player2.pause();}this.on("keydown",this.handleKeyDown_);this.hadControls_=player2.controls();player2.controls(false);this.show();this.conditionalFocus_();this.el().setAttribute("aria-hidden","false");this.trigger("modalopen");this.hasBeenOpened_=true;}};_proto.opened=function opened(value){if(typeof value==="boolean"){this[value?"open":"close"]();}return this.opened_;};_proto.close=function close(){if(!this.opened_){return;}var player2=this.player();this.trigger("beforemodalclose");this.opened_=false;if(this.wasPlaying_&&this.options_.pauseOnOpen){player2.play();}this.off("keydown",this.handleKeyDown_);if(this.hadControls_){player2.controls(true);}this.hide();this.el().setAttribute("aria-hidden","true");this.trigger("modalclose");this.conditionalBlur_();if(this.options_.temporary){this.dispose();}};_proto.closeable=function closeable(value){if(typeof value==="boolean"){var closeable2=this.closeable_=!!value;var close=this.getChild("closeButton");if(closeable2&&!close){var temp=this.contentEl_;this.contentEl_=this.el_;close=this.addChild("closeButton",{controlText:"Close Modal Dialog"});this.contentEl_=temp;this.on(close,"close",this.close_);}if(!closeable2&&close){this.off(close,"close",this.close_);this.removeChild(close);close.dispose();}}return this.closeable_;};_proto.fill=function fill(){this.fillWith(this.content());};_proto.fillWith=function fillWith(content){var contentEl=this.contentEl();var parentEl=contentEl.parentNode;var nextSiblingEl=contentEl.nextSibling;this.trigger("beforemodalfill");this.hasBeenFilled_=true;parentEl.removeChild(contentEl);this.empty();insertContent(contentEl,content);this.trigger("modalfill");if(nextSiblingEl){parentEl.insertBefore(contentEl,nextSiblingEl);}else{parentEl.appendChild(contentEl);}var closeButton=this.getChild("closeButton");if(closeButton){parentEl.appendChild(closeButton.el_);}};_proto.empty=function empty(){this.trigger("beforemodalempty");emptyEl(this.contentEl());this.trigger("modalempty");};_proto.content=function content(value){if(typeof value!=="undefined"){this.content_=value;}return this.content_;};_proto.conditionalFocus_=function conditionalFocus_(){var activeEl=import_document["default"].activeElement;var playerEl=this.player_.el_;this.previouslyActiveEl_=null;if(playerEl.contains(activeEl)||playerEl===activeEl){this.previouslyActiveEl_=activeEl;this.focus();}};_proto.conditionalBlur_=function conditionalBlur_(){if(this.previouslyActiveEl_){this.previouslyActiveEl_.focus();this.previouslyActiveEl_=null;}};_proto.handleKeyDown=function handleKeyDown(event){event.stopPropagation();if(import_keycode["default"].isEventKey(event,"Escape")&&this.closeable()){event.preventDefault();this.close();return;}if(!import_keycode["default"].isEventKey(event,"Tab")){return;}var focusableEls=this.focusableEls_();var activeEl=this.el_.querySelector(":focus");var focusIndex;for(var i=0;i<focusableEls.length;i++){if(activeEl===focusableEls[i]){focusIndex=i;break;}}if(import_document["default"].activeElement===this.el_){focusIndex=0;}if(event.shiftKey&&focusIndex===0){focusableEls[focusableEls.length-1].focus();event.preventDefault();}else if(!event.shiftKey&&focusIndex===focusableEls.length-1){focusableEls[0].focus();event.preventDefault();}};_proto.focusableEls_=function focusableEls_(){var allChildren=this.el_.querySelectorAll("*");return Array.prototype.filter.call(allChildren,function(child){return(child instanceof import_window6["default"].HTMLAnchorElement||child instanceof import_window6["default"].HTMLAreaElement)&&child.hasAttribute("href")||(child instanceof import_window6["default"].HTMLInputElement||child instanceof import_window6["default"].HTMLSelectElement||child instanceof import_window6["default"].HTMLTextAreaElement||child instanceof import_window6["default"].HTMLButtonElement)&&!child.hasAttribute("disabled")||child instanceof import_window6["default"].HTMLIFrameElement||child instanceof import_window6["default"].HTMLObjectElement||child instanceof import_window6["default"].HTMLEmbedElement||child.hasAttribute("tabindex")&&child.getAttribute("tabindex")!==-1||child.hasAttribute("contenteditable");});};return ModalDialog2;}(Component$1);ModalDialog.prototype.options_={pauseOnOpen:true,temporary:true};Component$1.registerComponent("ModalDialog",ModalDialog);var TrackList=/* @__PURE__ */function(_EventTarget){_inheritsLoose3(TrackList2,_EventTarget);function TrackList2(tracks){var _this;if(tracks===void 0){tracks=[];}_this=_EventTarget.call(this)||this;_this.tracks_=[];Object.defineProperty(_assertThisInitialized3(_this),"length",{get:function get7(){return this.tracks_.length;}});for(var i=0;i<tracks.length;i++){_this.addTrack(tracks[i]);}return _this;}var _proto=TrackList2.prototype;_proto.addTrack=function addTrack(track){var _this2=this;var index=this.tracks_.length;if(!(""+index in this)){Object.defineProperty(this,index,{get:function get7(){return this.tracks_[index];}});}if(this.tracks_.indexOf(track)===-1){this.tracks_.push(track);this.trigger({track:track,type:"addtrack",target:this});}track.labelchange_=function(){_this2.trigger({track:track,type:"labelchange",target:_this2});};if(isEvented(track)){track.addEventListener("labelchange",track.labelchange_);}};_proto.removeTrack=function removeTrack(rtrack){var track;for(var i=0,l=this.length;i<l;i++){if(this[i]===rtrack){track=this[i];if(track.off){track.off();}this.tracks_.splice(i,1);break;}}if(!track){return;}this.trigger({track:track,type:"removetrack",target:this});};_proto.getTrackById=function getTrackById(id){var result=null;for(var i=0,l=this.length;i<l;i++){var track=this[i];if(track.id===id){result=track;break;}}return result;};return TrackList2;}(EventTarget$2);TrackList.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"};for(event in TrackList.prototype.allowedEvents_){TrackList.prototype["on"+event]=null;}var event;var disableOthers$1=function disableOthers(list,track){for(var i=0;i<list.length;i++){if(!Object.keys(list[i]).length||track.id===list[i].id){continue;}list[i].enabled=false;}};var AudioTrackList=/* @__PURE__ */function(_TrackList){_inheritsLoose3(AudioTrackList2,_TrackList);function AudioTrackList2(tracks){var _this;if(tracks===void 0){tracks=[];}for(var i=tracks.length-1;i>=0;i--){if(tracks[i].enabled){disableOthers$1(tracks,tracks[i]);break;}}_this=_TrackList.call(this,tracks)||this;_this.changing_=false;return _this;}var _proto=AudioTrackList2.prototype;_proto.addTrack=function addTrack(track){var _this2=this;if(track.enabled){disableOthers$1(this,track);}_TrackList.prototype.addTrack.call(this,track);if(!track.addEventListener){return;}track.enabledChange_=function(){if(_this2.changing_){return;}_this2.changing_=true;disableOthers$1(_this2,track);_this2.changing_=false;_this2.trigger("change");};track.addEventListener("enabledchange",track.enabledChange_);};_proto.removeTrack=function removeTrack(rtrack){_TrackList.prototype.removeTrack.call(this,rtrack);if(rtrack.removeEventListener&&rtrack.enabledChange_){rtrack.removeEventListener("enabledchange",rtrack.enabledChange_);rtrack.enabledChange_=null;}};return AudioTrackList2;}(TrackList);var disableOthers2=function disableOthers3(list,track){for(var i=0;i<list.length;i++){if(!Object.keys(list[i]).length||track.id===list[i].id){continue;}list[i].selected=false;}};var VideoTrackList=/* @__PURE__ */function(_TrackList){_inheritsLoose3(VideoTrackList2,_TrackList);function VideoTrackList2(tracks){var _this;if(tracks===void 0){tracks=[];}for(var i=tracks.length-1;i>=0;i--){if(tracks[i].selected){disableOthers2(tracks,tracks[i]);break;}}_this=_TrackList.call(this,tracks)||this;_this.changing_=false;Object.defineProperty(_assertThisInitialized3(_this),"selectedIndex",{get:function get7(){for(var _i2=0;_i2<this.length;_i2++){if(this[_i2].selected){return _i2;}}return-1;},set:function set4(){}});return _this;}var _proto=VideoTrackList2.prototype;_proto.addTrack=function addTrack(track){var _this2=this;if(track.selected){disableOthers2(this,track);}_TrackList.prototype.addTrack.call(this,track);if(!track.addEventListener){return;}track.selectedChange_=function(){if(_this2.changing_){return;}_this2.changing_=true;disableOthers2(_this2,track);_this2.changing_=false;_this2.trigger("change");};track.addEventListener("selectedchange",track.selectedChange_);};_proto.removeTrack=function removeTrack(rtrack){_TrackList.prototype.removeTrack.call(this,rtrack);if(rtrack.removeEventListener&&rtrack.selectedChange_){rtrack.removeEventListener("selectedchange",rtrack.selectedChange_);rtrack.selectedChange_=null;}};return VideoTrackList2;}(TrackList);var TextTrackList=/* @__PURE__ */function(_TrackList){_inheritsLoose3(TextTrackList2,_TrackList);function TextTrackList2(){return _TrackList.apply(this,arguments)||this;}var _proto=TextTrackList2.prototype;_proto.addTrack=function addTrack(track){var _this=this;_TrackList.prototype.addTrack.call(this,track);if(!this.queueChange_){this.queueChange_=function(){return _this.queueTrigger("change");};}if(!this.triggerSelectedlanguagechange){this.triggerSelectedlanguagechange_=function(){return _this.trigger("selectedlanguagechange");};}track.addEventListener("modechange",this.queueChange_);var nonLanguageTextTrackKind=["metadata","chapters"];if(nonLanguageTextTrackKind.indexOf(track.kind)===-1){track.addEventListener("modechange",this.triggerSelectedlanguagechange_);}};_proto.removeTrack=function removeTrack(rtrack){_TrackList.prototype.removeTrack.call(this,rtrack);if(rtrack.removeEventListener){if(this.queueChange_){rtrack.removeEventListener("modechange",this.queueChange_);}if(this.selectedlanguagechange_){rtrack.removeEventListener("modechange",this.triggerSelectedlanguagechange_);}}};return TextTrackList2;}(TrackList);var HtmlTrackElementList=/* @__PURE__ */function(){function HtmlTrackElementList2(trackElements){if(trackElements===void 0){trackElements=[];}this.trackElements_=[];Object.defineProperty(this,"length",{get:function get7(){return this.trackElements_.length;}});for(var i=0,length=trackElements.length;i<length;i++){this.addTrackElement_(trackElements[i]);}}var _proto=HtmlTrackElementList2.prototype;_proto.addTrackElement_=function addTrackElement_(trackElement){var index=this.trackElements_.length;if(!(""+index in this)){Object.defineProperty(this,index,{get:function get7(){return this.trackElements_[index];}});}if(this.trackElements_.indexOf(trackElement)===-1){this.trackElements_.push(trackElement);}};_proto.getTrackElementByTrack_=function getTrackElementByTrack_(track){var trackElement_;for(var i=0,length=this.trackElements_.length;i<length;i++){if(track===this.trackElements_[i].track){trackElement_=this.trackElements_[i];break;}}return trackElement_;};_proto.removeTrackElement_=function removeTrackElement_(trackElement){for(var i=0,length=this.trackElements_.length;i<length;i++){if(trackElement===this.trackElements_[i]){if(this.trackElements_[i].track&&typeof this.trackElements_[i].track.off==="function"){this.trackElements_[i].track.off();}if(typeof this.trackElements_[i].off==="function"){this.trackElements_[i].off();}this.trackElements_.splice(i,1);break;}}};return HtmlTrackElementList2;}();var TextTrackCueList=/* @__PURE__ */function(){function TextTrackCueList2(cues){TextTrackCueList2.prototype.setCues_.call(this,cues);Object.defineProperty(this,"length",{get:function get7(){return this.length_;}});}var _proto=TextTrackCueList2.prototype;_proto.setCues_=function setCues_(cues){var oldLength=this.length||0;var i=0;var l=cues.length;this.cues_=cues;this.length_=cues.length;var defineProp=function defineProp2(index){if(!(""+index in this)){Object.defineProperty(this,""+index,{get:function get7(){return this.cues_[index];}});}};if(oldLength<l){i=oldLength;for(;i<l;i++){defineProp.call(this,i);}}};_proto.getCueById=function getCueById(id){var result=null;for(var i=0,l=this.length;i<l;i++){var cue=this[i];if(cue.id===id){result=cue;break;}}return result;};return TextTrackCueList2;}();var VideoTrackKind={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"};var AudioTrackKind={"alternative":"alternative","descriptions":"descriptions","main":"main","main-desc":"main-desc","translation":"translation","commentary":"commentary"};var TextTrackKind={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"};var TextTrackMode={disabled:"disabled",hidden:"hidden",showing:"showing"};var Track=/* @__PURE__ */function(_EventTarget){_inheritsLoose3(Track2,_EventTarget);function Track2(options){var _this;if(options===void 0){options={};}_this=_EventTarget.call(this)||this;var trackProps={id:options.id||"vjs_track_"+newGUID(),kind:options.kind||"",language:options.language||""};var label=options.label||"";var _loop=function _loop2(key2){Object.defineProperty(_assertThisInitialized3(_this),key2,{get:function get7(){return trackProps[key2];},set:function set4(){}});};for(var key in trackProps){_loop(key);}Object.defineProperty(_assertThisInitialized3(_this),"label",{get:function get7(){return label;},set:function set4(newLabel){if(newLabel!==label){label=newLabel;this.trigger("labelchange");}}});return _this;}return Track2;}(EventTarget$2);var parseUrl=function parseUrl2(url){var props=["protocol","hostname","port","pathname","search","hash","host"];var a=import_document["default"].createElement("a");a.href=url;var details={};for(var i=0;i<props.length;i++){details[props[i]]=a[props[i]];}if(details.protocol==="http:"){details.host=details.host.replace(/:80$/,"");}if(details.protocol==="https:"){details.host=details.host.replace(/:443$/,"");}if(!details.protocol){details.protocol=import_window6["default"].location.protocol;}if(!details.host){details.host=import_window6["default"].location.host;}return details;};var getAbsoluteURL=function getAbsoluteURL2(url){if(!url.match(/^https?:\/\//)){var a=import_document["default"].createElement("a");a.href=url;url=a.href;}return url;};var getFileExtension=function getFileExtension2(path){if(typeof path==="string"){var splitPathRe=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/;var pathParts=splitPathRe.exec(path);if(pathParts){return pathParts.pop().toLowerCase();}}return"";};var isCrossOrigin=function isCrossOrigin2(url,winLoc){if(winLoc===void 0){winLoc=import_window6["default"].location;}var urlInfo=parseUrl(url);var srcProtocol=urlInfo.protocol===":"?winLoc.protocol:urlInfo.protocol;var crossOrigin=srcProtocol+urlInfo.host!==winLoc.protocol+winLoc.host;return crossOrigin;};var Url=/* @__PURE__ */Object.freeze({__proto__:null,parseUrl:parseUrl,getAbsoluteURL:getAbsoluteURL,getFileExtension:getFileExtension,isCrossOrigin:isCrossOrigin});var parseCues=function parseCues2(srcContent,track){var parser6=new import_window6["default"].WebVTT.Parser(import_window6["default"],import_window6["default"].vttjs,import_window6["default"].WebVTT.StringDecoder());var errors2=[];parser6.oncue=function(cue){track.addCue(cue);};parser6.onparsingerror=function(error){errors2.push(error);};parser6.onflush=function(){track.trigger({type:"loadeddata",target:track});};parser6.parse(srcContent);if(errors2.length>0){if(import_window6["default"].console&&import_window6["default"].console.groupCollapsed){import_window6["default"].console.groupCollapsed("Text Track parsing errors for "+track.src);}errors2.forEach(function(error){return log$1.error(error);});if(import_window6["default"].console&&import_window6["default"].console.groupEnd){import_window6["default"].console.groupEnd();}}parser6.flush();};var loadTrack=function loadTrack2(src,track){var opts={uri:src};var crossOrigin=isCrossOrigin(src);if(crossOrigin){opts.cors=crossOrigin;}var withCredentials=track.tech_.crossOrigin()==="use-credentials";if(withCredentials){opts.withCredentials=withCredentials;}(0,import_xhr["default"])(opts,bind(this,function(err,response,responseBody){if(err){return log$1.error(err,response);}track.loaded_=true;if(typeof import_window6["default"].WebVTT!=="function"){if(track.tech_){track.tech_.any(["vttjsloaded","vttjserror"],function(event){if(event.type==="vttjserror"){log$1.error("vttjs failed to load, stopping trying to process "+track.src);return;}return parseCues(responseBody,track);});}}else{parseCues(responseBody,track);}}));};var TextTrack=/* @__PURE__ */function(_Track){_inheritsLoose3(TextTrack2,_Track);function TextTrack2(options){var _this;if(options===void 0){options={};}if(!options.tech){throw new Error("A tech was not provided.");}var settings=mergeOptions$3(options,{kind:TextTrackKind[options.kind]||"subtitles",language:options.language||options.srclang||""});var mode=TextTrackMode[settings.mode]||"disabled";var default_=settings["default"];if(settings.kind==="metadata"||settings.kind==="chapters"){mode="hidden";}_this=_Track.call(this,settings)||this;_this.tech_=settings.tech;_this.cues_=[];_this.activeCues_=[];_this.preload_=_this.tech_.preloadTextTracks!==false;var cues=new TextTrackCueList(_this.cues_);var activeCues=new TextTrackCueList(_this.activeCues_);var changed=false;_this.timeupdateHandler=bind(_assertThisInitialized3(_this),function(){if(this.tech_.isDisposed()){return;}if(!this.tech_.isReady_){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler);return;}this.activeCues=this.activeCues;if(changed){this.trigger("cuechange");changed=false;}this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler);});var disposeHandler=function disposeHandler2(){_this.stopTracking();};_this.tech_.one("dispose",disposeHandler);if(mode!=="disabled"){_this.startTracking();}Object.defineProperties(_assertThisInitialized3(_this),{"default":{get:function get7(){return default_;},set:function set4(){}},mode:{get:function get7(){return mode;},set:function set4(newMode){if(!TextTrackMode[newMode]){return;}if(mode===newMode){return;}mode=newMode;if(!this.preload_&&mode!=="disabled"&&this.cues.length===0){loadTrack(this.src,this);}this.stopTracking();if(mode!=="disabled"){this.startTracking();}this.trigger("modechange");}},cues:{get:function get7(){if(!this.loaded_){return null;}return cues;},set:function set4(){}},activeCues:{get:function get7(){if(!this.loaded_){return null;}if(this.cues.length===0){return activeCues;}var ct=this.tech_.currentTime();var active=[];for(var i=0,l=this.cues.length;i<l;i++){var cue=this.cues[i];if(cue.startTime<=ct&&cue.endTime>=ct){active.push(cue);}else if(cue.startTime===cue.endTime&&cue.startTime<=ct&&cue.startTime+0.5>=ct){active.push(cue);}}changed=false;if(active.length!==this.activeCues_.length){changed=true;}else{for(var _i2=0;_i2<active.length;_i2++){if(this.activeCues_.indexOf(active[_i2])===-1){changed=true;}}}this.activeCues_=active;activeCues.setCues_(this.activeCues_);return activeCues;},set:function set4(){}}});if(settings.src){_this.src=settings.src;if(!_this.preload_){_this.loaded_=true;}if(_this.preload_||settings.kind!=="subtitles"&&settings.kind!=="captions"){loadTrack(_this.src,_assertThisInitialized3(_this));}}else{_this.loaded_=true;}return _this;}var _proto=TextTrack2.prototype;_proto.startTracking=function startTracking(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler);};_proto.stopTracking=function stopTracking(){if(this.rvf_){this.tech_.cancelVideoFrameCallback(this.rvf_);this.rvf_=void 0;}};_proto.addCue=function addCue(originalCue){var cue=originalCue;if(import_window6["default"].vttjs&&!(originalCue instanceof import_window6["default"].vttjs.VTTCue)){cue=new import_window6["default"].vttjs.VTTCue(originalCue.startTime,originalCue.endTime,originalCue.text);for(var prop in originalCue){if(!(prop in cue)){cue[prop]=originalCue[prop];}}cue.id=originalCue.id;cue.originalCue_=originalCue;}var tracks=this.tech_.textTracks();for(var i=0;i<tracks.length;i++){if(tracks[i]!==this){tracks[i].removeCue(cue);}}this.cues_.push(cue);this.cues.setCues_(this.cues_);};_proto.removeCue=function removeCue(_removeCue){var i=this.cues_.length;while(i--){var cue=this.cues_[i];if(cue===_removeCue||cue.originalCue_&&cue.originalCue_===_removeCue){this.cues_.splice(i,1);this.cues.setCues_(this.cues_);break;}}};return TextTrack2;}(Track);TextTrack.prototype.allowedEvents_={cuechange:"cuechange"};var AudioTrack=/* @__PURE__ */function(_Track){_inheritsLoose3(AudioTrack2,_Track);function AudioTrack2(options){var _this;if(options===void 0){options={};}var settings=mergeOptions$3(options,{kind:AudioTrackKind[options.kind]||""});_this=_Track.call(this,settings)||this;var enabled=false;Object.defineProperty(_assertThisInitialized3(_this),"enabled",{get:function get7(){return enabled;},set:function set4(newEnabled){if(typeof newEnabled!=="boolean"||newEnabled===enabled){return;}enabled=newEnabled;this.trigger("enabledchange");}});if(settings.enabled){_this.enabled=settings.enabled;}_this.loaded_=true;return _this;}return AudioTrack2;}(Track);var VideoTrack=/* @__PURE__ */function(_Track){_inheritsLoose3(VideoTrack2,_Track);function VideoTrack2(options){var _this;if(options===void 0){options={};}var settings=mergeOptions$3(options,{kind:VideoTrackKind[options.kind]||""});_this=_Track.call(this,settings)||this;var selected=false;Object.defineProperty(_assertThisInitialized3(_this),"selected",{get:function get7(){return selected;},set:function set4(newSelected){if(typeof newSelected!=="boolean"||newSelected===selected){return;}selected=newSelected;this.trigger("selectedchange");}});if(settings.selected){_this.selected=settings.selected;}return _this;}return VideoTrack2;}(Track);var NONE=0;var LOADING=1;var LOADED=2;var ERROR=3;var HTMLTrackElement=/* @__PURE__ */function(_EventTarget){_inheritsLoose3(HTMLTrackElement2,_EventTarget);function HTMLTrackElement2(options){var _this;if(options===void 0){options={};}_this=_EventTarget.call(this)||this;var readyState;var track=new TextTrack(options);_this.kind=track.kind;_this.src=track.src;_this.srclang=track.language;_this.label=track.label;_this["default"]=track["default"];Object.defineProperties(_assertThisInitialized3(_this),{readyState:{get:function get7(){return readyState;}},track:{get:function get7(){return track;}}});readyState=NONE;track.addEventListener("loadeddata",function(){readyState=LOADED;_this.trigger({type:"load",target:_assertThisInitialized3(_this)});});return _this;}return HTMLTrackElement2;}(EventTarget$2);HTMLTrackElement.prototype.allowedEvents_={load:"load"};HTMLTrackElement.NONE=NONE;HTMLTrackElement.LOADING=LOADING;HTMLTrackElement.LOADED=LOADED;HTMLTrackElement.ERROR=ERROR;var NORMAL={audio:{ListClass:AudioTrackList,TrackClass:AudioTrack,capitalName:"Audio"},video:{ListClass:VideoTrackList,TrackClass:VideoTrack,capitalName:"Video"},text:{ListClass:TextTrackList,TrackClass:TextTrack,capitalName:"Text"}};Object.keys(NORMAL).forEach(function(type2){NORMAL[type2].getterName=type2+"Tracks";NORMAL[type2].privateName=type2+"Tracks_";});var REMOTE={remoteText:{ListClass:TextTrackList,TrackClass:TextTrack,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:HtmlTrackElementList,TrackClass:HTMLTrackElement,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}};var ALL=_extends({},NORMAL,REMOTE);REMOTE.names=Object.keys(REMOTE);NORMAL.names=Object.keys(NORMAL);ALL.names=[].concat(REMOTE.names).concat(NORMAL.names);function createTrackHelper(self2,kind,label,language,options){if(options===void 0){options={};}var tracks=self2.textTracks();options.kind=kind;if(label){options.label=label;}if(language){options.language=language;}options.tech=self2;var track=new ALL.text.TrackClass(options);tracks.addTrack(track);return track;}var Tech=/* @__PURE__ */function(_Component){_inheritsLoose3(Tech2,_Component);function Tech2(options,ready){var _this;if(options===void 0){options={};}if(ready===void 0){ready=function ready2(){};}options.reportTouchActivity=false;_this=_Component.call(this,null,options,ready)||this;_this.onDurationChange_=function(e){return _this.onDurationChange(e);};_this.trackProgress_=function(e){return _this.trackProgress(e);};_this.trackCurrentTime_=function(e){return _this.trackCurrentTime(e);};_this.stopTrackingCurrentTime_=function(e){return _this.stopTrackingCurrentTime(e);};_this.disposeSourceHandler_=function(e){return _this.disposeSourceHandler(e);};_this.queuedHanders_=/* @__PURE__ */new Set();_this.hasStarted_=false;_this.on("playing",function(){this.hasStarted_=true;});_this.on("loadstart",function(){this.hasStarted_=false;});ALL.names.forEach(function(name){var props=ALL[name];if(options&&options[props.getterName]){_this[props.privateName]=options[props.getterName];}});if(!_this.featuresProgressEvents){_this.manualProgressOn();}if(!_this.featuresTimeupdateEvents){_this.manualTimeUpdatesOn();}["Text","Audio","Video"].forEach(function(track){if(options["native"+track+"Tracks"]===false){_this["featuresNative"+track+"Tracks"]=false;}});if(options.nativeCaptions===false||options.nativeTextTracks===false){_this.featuresNativeTextTracks=false;}else if(options.nativeCaptions===true||options.nativeTextTracks===true){_this.featuresNativeTextTracks=true;}if(!_this.featuresNativeTextTracks){_this.emulateTextTracks();}_this.preloadTextTracks=options.preloadTextTracks!==false;_this.autoRemoteTextTracks_=new ALL.text.ListClass();_this.initTrackListeners();if(!options.nativeControlsForTouch){_this.emitTapEvents();}if(_this.constructor){_this.name_=_this.constructor.name||"Unknown Tech";}return _this;}var _proto=Tech2.prototype;_proto.triggerSourceset=function triggerSourceset(src){var _this2=this;if(!this.isReady_){this.one("ready",function(){return _this2.setTimeout(function(){return _this2.triggerSourceset(src);},1);});}this.trigger({src:src,type:"sourceset"});};_proto.manualProgressOn=function manualProgressOn(){this.on("durationchange",this.onDurationChange_);this.manualProgress=true;this.one("ready",this.trackProgress_);};_proto.manualProgressOff=function manualProgressOff(){this.manualProgress=false;this.stopTrackingProgress();this.off("durationchange",this.onDurationChange_);};_proto.trackProgress=function trackProgress(event){this.stopTrackingProgress();this.progressInterval=this.setInterval(bind(this,function(){var numBufferedPercent=this.bufferedPercent();if(this.bufferedPercent_!==numBufferedPercent){this.trigger("progress");}this.bufferedPercent_=numBufferedPercent;if(numBufferedPercent===1){this.stopTrackingProgress();}}),500);};_proto.onDurationChange=function onDurationChange(event){this.duration_=this.duration();};_proto.buffered=function buffered(){return createTimeRanges(0,0);};_proto.bufferedPercent=function bufferedPercent$1(){return bufferedPercent(this.buffered(),this.duration_);};_proto.stopTrackingProgress=function stopTrackingProgress(){this.clearInterval(this.progressInterval);};_proto.manualTimeUpdatesOn=function manualTimeUpdatesOn(){this.manualTimeUpdates=true;this.on("play",this.trackCurrentTime_);this.on("pause",this.stopTrackingCurrentTime_);};_proto.manualTimeUpdatesOff=function manualTimeUpdatesOff(){this.manualTimeUpdates=false;this.stopTrackingCurrentTime();this.off("play",this.trackCurrentTime_);this.off("pause",this.stopTrackingCurrentTime_);};_proto.trackCurrentTime=function trackCurrentTime(){if(this.currentTimeInterval){this.stopTrackingCurrentTime();}this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:true});},250);};_proto.stopTrackingCurrentTime=function stopTrackingCurrentTime(){this.clearInterval(this.currentTimeInterval);this.trigger({type:"timeupdate",target:this,manuallyTriggered:true});};_proto.dispose=function dispose(){this.clearTracks(NORMAL.names);if(this.manualProgress){this.manualProgressOff();}if(this.manualTimeUpdates){this.manualTimeUpdatesOff();}_Component.prototype.dispose.call(this);};_proto.clearTracks=function clearTracks(types){var _this3=this;types=[].concat(types);types.forEach(function(type2){var list=_this3[type2+"Tracks"]()||[];var i=list.length;while(i--){var track=list[i];if(type2==="text"){_this3.removeRemoteTextTrack(track);}list.removeTrack(track);}});};_proto.cleanupAutoTextTracks=function cleanupAutoTextTracks(){var list=this.autoRemoteTextTracks_||[];var i=list.length;while(i--){var track=list[i];this.removeRemoteTextTrack(track);}};_proto.reset=function reset3(){};_proto.crossOrigin=function crossOrigin(){};_proto.setCrossOrigin=function setCrossOrigin(){};_proto.error=function error(err){if(err!==void 0){this.error_=new MediaError(err);this.trigger("error");}return this.error_;};_proto.played=function played(){if(this.hasStarted_){return createTimeRanges(0,0);}return createTimeRanges();};_proto.play=function play(){};_proto.setScrubbing=function setScrubbing(){};_proto.scrubbing=function scrubbing(){};_proto.setCurrentTime=function setCurrentTime(){if(this.manualTimeUpdates){this.trigger({type:"timeupdate",target:this,manuallyTriggered:true});}};_proto.initTrackListeners=function initTrackListeners(){var _this4=this;NORMAL.names.forEach(function(name){var props=NORMAL[name];var trackListChanges=function trackListChanges2(){_this4.trigger(name+"trackchange");};var tracks=_this4[props.getterName]();tracks.addEventListener("removetrack",trackListChanges);tracks.addEventListener("addtrack",trackListChanges);_this4.on("dispose",function(){tracks.removeEventListener("removetrack",trackListChanges);tracks.removeEventListener("addtrack",trackListChanges);});});};_proto.addWebVttScript_=function addWebVttScript_(){var _this5=this;if(import_window6["default"].WebVTT){return;}if(import_document["default"].body.contains(this.el())){if(!this.options_["vtt.js"]&&isPlain(import_videojs_vtt["default"])&&Object.keys(import_videojs_vtt["default"]).length>0){this.trigger("vttjsloaded");return;}var script=import_document["default"].createElement("script");script.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js";script.onload=function(){_this5.trigger("vttjsloaded");};script.onerror=function(){_this5.trigger("vttjserror");};this.on("dispose",function(){script.onload=null;script.onerror=null;});import_window6["default"].WebVTT=true;this.el().parentNode.appendChild(script);}else{this.ready(this.addWebVttScript_);}};_proto.emulateTextTracks=function emulateTextTracks(){var _this6=this;var tracks=this.textTracks();var remoteTracks=this.remoteTextTracks();var handleAddTrack=function handleAddTrack2(e){return tracks.addTrack(e.track);};var handleRemoveTrack=function handleRemoveTrack2(e){return tracks.removeTrack(e.track);};remoteTracks.on("addtrack",handleAddTrack);remoteTracks.on("removetrack",handleRemoveTrack);this.addWebVttScript_();var updateDisplay=function updateDisplay2(){return _this6.trigger("texttrackchange");};var textTracksChanges=function textTracksChanges2(){updateDisplay();for(var i=0;i<tracks.length;i++){var track=tracks[i];track.removeEventListener("cuechange",updateDisplay);if(track.mode==="showing"){track.addEventListener("cuechange",updateDisplay);}}};textTracksChanges();tracks.addEventListener("change",textTracksChanges);tracks.addEventListener("addtrack",textTracksChanges);tracks.addEventListener("removetrack",textTracksChanges);this.on("dispose",function(){remoteTracks.off("addtrack",handleAddTrack);remoteTracks.off("removetrack",handleRemoveTrack);tracks.removeEventListener("change",textTracksChanges);tracks.removeEventListener("addtrack",textTracksChanges);tracks.removeEventListener("removetrack",textTracksChanges);for(var i=0;i<tracks.length;i++){var track=tracks[i];track.removeEventListener("cuechange",updateDisplay);}});};_proto.addTextTrack=function addTextTrack(kind,label,language){if(!kind){throw new Error("TextTrack kind is required but was not provided");}return createTrackHelper(this,kind,label,language);};_proto.createRemoteTextTrack=function createRemoteTextTrack(options){var track=mergeOptions$3(options,{tech:this});return new REMOTE.remoteTextEl.TrackClass(track);};_proto.addRemoteTextTrack=function addRemoteTextTrack(options,manualCleanup){var _this7=this;if(options===void 0){options={};}var htmlTrackElement=this.createRemoteTextTrack(options);if(manualCleanup!==true&&manualCleanup!==false){log$1.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js');manualCleanup=true;}this.remoteTextTrackEls().addTrackElement_(htmlTrackElement);this.remoteTextTracks().addTrack(htmlTrackElement.track);if(manualCleanup!==true){this.ready(function(){return _this7.autoRemoteTextTracks_.addTrack(htmlTrackElement.track);});}return htmlTrackElement;};_proto.removeRemoteTextTrack=function removeRemoteTextTrack(track){var trackElement=this.remoteTextTrackEls().getTrackElementByTrack_(track);this.remoteTextTrackEls().removeTrackElement_(trackElement);this.remoteTextTracks().removeTrack(track);this.autoRemoteTextTracks_.removeTrack(track);};_proto.getVideoPlaybackQuality=function getVideoPlaybackQuality(){return{};};_proto.requestPictureInPicture=function requestPictureInPicture(){var PromiseClass=this.options_.Promise||import_window6["default"].Promise;if(PromiseClass){return PromiseClass.reject();}};_proto.disablePictureInPicture=function disablePictureInPicture(){return true;};_proto.setDisablePictureInPicture=function setDisablePictureInPicture(){};_proto.requestVideoFrameCallback=function requestVideoFrameCallback(cb){var _this8=this;var id=newGUID();if(this.paused()){this.queuedHanders_.add(id);this.one("playing",function(){if(_this8.queuedHanders_.has(id)){_this8.queuedHanders_["delete"](id);cb();}});}else{this.requestNamedAnimationFrame(id,cb);}return id;};_proto.cancelVideoFrameCallback=function cancelVideoFrameCallback(id){if(this.queuedHanders_.has(id)){this.queuedHanders_["delete"](id);}else{this.cancelNamedAnimationFrame(id);}};_proto.setPoster=function setPoster(){};_proto.playsinline=function playsinline(){};_proto.setPlaysinline=function setPlaysinline(){};_proto.overrideNativeAudioTracks=function overrideNativeAudioTracks(){};_proto.overrideNativeVideoTracks=function overrideNativeVideoTracks(){};_proto.canPlayType=function canPlayType3(){return"";};Tech2.canPlayType=function canPlayType3(){return"";};Tech2.canPlaySource=function canPlaySource(srcObj,options){return Tech2.canPlayType(srcObj.type);};Tech2.isTech=function isTech(component){return component.prototype instanceof Tech2||component instanceof Tech2||component===Tech2;};Tech2.registerTech=function registerTech(name,tech){if(!Tech2.techs_){Tech2.techs_={};}if(!Tech2.isTech(tech)){throw new Error("Tech "+name+" must be a Tech");}if(!Tech2.canPlayType){throw new Error("Techs must have a static canPlayType method on them");}if(!Tech2.canPlaySource){throw new Error("Techs must have a static canPlaySource method on them");}name=toTitleCase$1(name);Tech2.techs_[name]=tech;Tech2.techs_[toLowerCase(name)]=tech;if(name!=="Tech"){Tech2.defaultTechOrder_.push(name);}return tech;};Tech2.getTech=function getTech(name){if(!name){return;}if(Tech2.techs_&&Tech2.techs_[name]){return Tech2.techs_[name];}name=toTitleCase$1(name);if(import_window6["default"]&&import_window6["default"].videojs&&import_window6["default"].videojs[name]){log$1.warn("The "+name+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)");return import_window6["default"].videojs[name];}};return Tech2;}(Component$1);ALL.names.forEach(function(name){var props=ALL[name];Tech.prototype[props.getterName]=function(){this[props.privateName]=this[props.privateName]||new props.ListClass();return this[props.privateName];};});Tech.prototype.featuresVolumeControl=true;Tech.prototype.featuresMuteControl=true;Tech.prototype.featuresFullscreenResize=false;Tech.prototype.featuresPlaybackRate=false;Tech.prototype.featuresProgressEvents=false;Tech.prototype.featuresSourceset=false;Tech.prototype.featuresTimeupdateEvents=false;Tech.prototype.featuresNativeTextTracks=false;Tech.prototype.featuresVideoFrameCallback=false;Tech.withSourceHandlers=function(_Tech){_Tech.registerSourceHandler=function(handler,index){var handlers=_Tech.sourceHandlers;if(!handlers){handlers=_Tech.sourceHandlers=[];}if(index===void 0){index=handlers.length;}handlers.splice(index,0,handler);};_Tech.canPlayType=function(type2){var handlers=_Tech.sourceHandlers||[];var can;for(var i=0;i<handlers.length;i++){can=handlers[i].canPlayType(type2);if(can){return can;}}return"";};_Tech.selectSourceHandler=function(source,options){var handlers=_Tech.sourceHandlers||[];var can;for(var i=0;i<handlers.length;i++){can=handlers[i].canHandleSource(source,options);if(can){return handlers[i];}}return null;};_Tech.canPlaySource=function(srcObj,options){var sh=_Tech.selectSourceHandler(srcObj,options);if(sh){return sh.canHandleSource(srcObj,options);}return"";};var deferrable=["seekable","seeking","duration"];deferrable.forEach(function(fnName){var originalFn=this[fnName];if(typeof originalFn!=="function"){return;}this[fnName]=function(){if(this.sourceHandler_&&this.sourceHandler_[fnName]){return this.sourceHandler_[fnName].apply(this.sourceHandler_,arguments);}return originalFn.apply(this,arguments);};},_Tech.prototype);_Tech.prototype.setSource=function(source){var sh=_Tech.selectSourceHandler(source,this.options_);if(!sh){if(_Tech.nativeSourceHandler){sh=_Tech.nativeSourceHandler;}else{log$1.error("No source handler found for the current source.");}}this.disposeSourceHandler();this.off("dispose",this.disposeSourceHandler_);if(sh!==_Tech.nativeSourceHandler){this.currentSource_=source;}this.sourceHandler_=sh.handleSource(source,this,this.options_);this.one("dispose",this.disposeSourceHandler_);};_Tech.prototype.disposeSourceHandler=function(){if(this.currentSource_){this.clearTracks(["audio","video"]);this.currentSource_=null;}this.cleanupAutoTextTracks();if(this.sourceHandler_){if(this.sourceHandler_.dispose){this.sourceHandler_.dispose();}this.sourceHandler_=null;}};};Component$1.registerComponent("Tech",Tech);Tech.registerTech("Tech",Tech);Tech.defaultTechOrder_=[];var middlewares={};var middlewareInstances={};var TERMINATOR={};function use(type2,middleware){middlewares[type2]=middlewares[type2]||[];middlewares[type2].push(middleware);}function setSource(player2,src,next){player2.setTimeout(function(){return setSourceHelper(src,middlewares[src.type],next,player2);},1);}function setTech(middleware,tech){middleware.forEach(function(mw){return mw.setTech&&mw.setTech(tech);});}function get(middleware,tech,method){return middleware.reduceRight(middlewareIterator(method),tech[method]());}function set(middleware,tech,method,arg){return tech[method](middleware.reduce(middlewareIterator(method),arg));}function mediate(middleware,tech,method,arg){if(arg===void 0){arg=null;}var callMethod="call"+toTitleCase$1(method);var middlewareValue=middleware.reduce(middlewareIterator(callMethod),arg);var terminated=middlewareValue===TERMINATOR;var returnValue=terminated?null:tech[method](middlewareValue);executeRight(middleware,method,returnValue,terminated);return returnValue;}var allowedGetters={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1};var allowedSetters={setCurrentTime:1,setMuted:1,setVolume:1};var allowedMediators={play:1,pause:1};function middlewareIterator(method){return function(value,mw){if(value===TERMINATOR){return TERMINATOR;}if(mw[method]){return mw[method](value);}return value;};}function executeRight(mws,method,value,terminated){for(var i=mws.length-1;i>=0;i--){var mw=mws[i];if(mw[method]){mw[method](terminated,value);}}}function clearCacheForPlayer(player2){middlewareInstances[player2.id()]=null;}function getOrCreateFactory(player2,mwFactory){var mws=middlewareInstances[player2.id()];var mw=null;if(mws===void 0||mws===null){mw=mwFactory(player2);middlewareInstances[player2.id()]=[[mwFactory,mw]];return mw;}for(var i=0;i<mws.length;i++){var _mws$i=mws[i],mwf=_mws$i[0],mwi=_mws$i[1];if(mwf!==mwFactory){continue;}mw=mwi;}if(mw===null){mw=mwFactory(player2);mws.push([mwFactory,mw]);}return mw;}function setSourceHelper(src,middleware,next,player2,acc,lastRun){if(src===void 0){src={};}if(middleware===void 0){middleware=[];}if(acc===void 0){acc=[];}if(lastRun===void 0){lastRun=false;}var _middleware=middleware,mwFactory=_middleware[0],mwrest=_middleware.slice(1);if(typeof mwFactory==="string"){setSourceHelper(src,middlewares[mwFactory],next,player2,acc,lastRun);}else if(mwFactory){var mw=getOrCreateFactory(player2,mwFactory);if(!mw.setSource){acc.push(mw);return setSourceHelper(src,mwrest,next,player2,acc,lastRun);}mw.setSource(assign({},src),function(err,_src){if(err){return setSourceHelper(src,mwrest,next,player2,acc,lastRun);}acc.push(mw);setSourceHelper(_src,src.type===_src.type?mwrest:middlewares[_src.type],next,player2,acc,lastRun);});}else if(mwrest.length){setSourceHelper(src,mwrest,next,player2,acc,lastRun);}else if(lastRun){next(src,acc);}else{setSourceHelper(src,middlewares["*"],next,player2,acc,true);}}var MimetypesKind={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"};var getMimetype=function getMimetype2(src){if(src===void 0){src="";}var ext=getFileExtension(src);var mimetype=MimetypesKind[ext.toLowerCase()];return mimetype||"";};var findMimetype=function findMimetype2(player2,src){if(!src){return"";}if(player2.cache_.source.src===src&&player2.cache_.source.type){return player2.cache_.source.type;}var matchingSources=player2.cache_.sources.filter(function(s2){return s2.src===src;});if(matchingSources.length){return matchingSources[0].type;}var sources=player2.$$("source");for(var i=0;i<sources.length;i++){var s=sources[i];if(s.type&&s.src&&s.src===src){return s.type;}}return getMimetype(src);};var filterSource=function filterSource2(src){if(Array.isArray(src)){var newsrc=[];src.forEach(function(srcobj){srcobj=filterSource2(srcobj);if(Array.isArray(srcobj)){newsrc=newsrc.concat(srcobj);}else if(isObject4(srcobj)){newsrc.push(srcobj);}});src=newsrc;}else if(typeof src==="string"&&src.trim()){src=[fixSource({src:src})];}else if(isObject4(src)&&typeof src.src==="string"&&src.src&&src.src.trim()){src=[fixSource(src)];}else{src=[];}return src;};function fixSource(src){if(!src.type){var mimetype=getMimetype(src.src);if(mimetype){src.type=mimetype;}}return src;}var MediaLoader=/* @__PURE__ */function(_Component){_inheritsLoose3(MediaLoader2,_Component);function MediaLoader2(player2,options,ready){var _this;var options_=mergeOptions$3({createEl:false},options);_this=_Component.call(this,player2,options_,ready)||this;if(!options.playerOptions.sources||options.playerOptions.sources.length===0){for(var i=0,j=options.playerOptions.techOrder;i<j.length;i++){var techName=toTitleCase$1(j[i]);var tech=Tech.getTech(techName);if(!techName){tech=Component$1.getComponent(techName);}if(tech&&tech.isSupported()){player2.loadTech_(techName);break;}}}else{player2.src(options.playerOptions.sources);}return _this;}return MediaLoader2;}(Component$1);Component$1.registerComponent("MediaLoader",MediaLoader);var ClickableComponent=/* @__PURE__ */function(_Component){_inheritsLoose3(ClickableComponent2,_Component);function ClickableComponent2(player2,options){var _this;_this=_Component.call(this,player2,options)||this;if(_this.options_.controlText){_this.controlText(_this.options_.controlText);}_this.handleMouseOver_=function(e){return _this.handleMouseOver(e);};_this.handleMouseOut_=function(e){return _this.handleMouseOut(e);};_this.handleClick_=function(e){return _this.handleClick(e);};_this.handleKeyDown_=function(e){return _this.handleKeyDown(e);};_this.emitTapEvents();_this.enable();return _this;}var _proto=ClickableComponent2.prototype;_proto.createEl=function createEl$1(tag,props,attributes){if(tag===void 0){tag="div";}if(props===void 0){props={};}if(attributes===void 0){attributes={};}props=assign({className:this.buildCSSClass(),tabIndex:0},props);if(tag==="button"){log$1.error("Creating a ClickableComponent with an HTML element of "+tag+" is not supported; use a Button instead.");}attributes=assign({role:"button"},attributes);this.tabIndex_=props.tabIndex;var el=createEl(tag,props,attributes);el.appendChild(createEl("span",{className:"vjs-icon-placeholder"},{"aria-hidden":true}));this.createControlTextEl(el);return el;};_proto.dispose=function dispose(){this.controlTextEl_=null;_Component.prototype.dispose.call(this);};_proto.createControlTextEl=function createControlTextEl(el){this.controlTextEl_=createEl("span",{className:"vjs-control-text"},{"aria-live":"polite"});if(el){el.appendChild(this.controlTextEl_);}this.controlText(this.controlText_,el);return this.controlTextEl_;};_proto.controlText=function controlText(text,el){if(el===void 0){el=this.el();}if(text===void 0){return this.controlText_||"Need Text";}var localizedText=this.localize(text);this.controlText_=text;textContent(this.controlTextEl_,localizedText);if(!this.nonIconControl&&!this.player_.options_.noUITitleAttributes){el.setAttribute("title",localizedText);}};_proto.buildCSSClass=function buildCSSClass(){return"vjs-control vjs-button "+_Component.prototype.buildCSSClass.call(this);};_proto.enable=function enable(){if(!this.enabled_){this.enabled_=true;this.removeClass("vjs-disabled");this.el_.setAttribute("aria-disabled","false");if(typeof this.tabIndex_!=="undefined"){this.el_.setAttribute("tabIndex",this.tabIndex_);}this.on(["tap","click"],this.handleClick_);this.on("keydown",this.handleKeyDown_);}};_proto.disable=function disable(){this.enabled_=false;this.addClass("vjs-disabled");this.el_.setAttribute("aria-disabled","true");if(typeof this.tabIndex_!=="undefined"){this.el_.removeAttribute("tabIndex");}this.off("mouseover",this.handleMouseOver_);this.off("mouseout",this.handleMouseOut_);this.off(["tap","click"],this.handleClick_);this.off("keydown",this.handleKeyDown_);};_proto.handleLanguagechange=function handleLanguagechange(){this.controlText(this.controlText_);};_proto.handleClick=function handleClick(event){if(this.options_.clickHandler){this.options_.clickHandler.call(this,arguments);}};_proto.handleKeyDown=function handleKeyDown(event){if(import_keycode["default"].isEventKey(event,"Space")||import_keycode["default"].isEventKey(event,"Enter")){event.preventDefault();event.stopPropagation();this.trigger("click");}else{_Component.prototype.handleKeyDown.call(this,event);}};return ClickableComponent2;}(Component$1);Component$1.registerComponent("ClickableComponent",ClickableComponent);var PosterImage=/* @__PURE__ */function(_ClickableComponent){_inheritsLoose3(PosterImage2,_ClickableComponent);function PosterImage2(player2,options){var _this;_this=_ClickableComponent.call(this,player2,options)||this;_this.update();_this.update_=function(e){return _this.update(e);};player2.on("posterchange",_this.update_);return _this;}var _proto=PosterImage2.prototype;_proto.dispose=function dispose(){this.player().off("posterchange",this.update_);_ClickableComponent.prototype.dispose.call(this);};_proto.createEl=function createEl$1(){var el=createEl("div",{className:"vjs-poster",tabIndex:-1});return el;};_proto.update=function update2(event){var url=this.player().poster();this.setSrc(url);if(url){this.show();}else{this.hide();}};_proto.setSrc=function setSrc(url){var backgroundImage="";if(url){backgroundImage='url("'+url+'")';}this.el_.style.backgroundImage=backgroundImage;};_proto.handleClick=function handleClick(event){if(!this.player_.controls()){return;}var sourceIsEncrypted=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;if(this.player_.tech(true)&&!((IE_VERSION||IS_EDGE)&&sourceIsEncrypted)){this.player_.tech(true).focus();}if(this.player_.paused()){silencePromise(this.player_.play());}else{this.player_.pause();}};return PosterImage2;}(ClickableComponent);Component$1.registerComponent("PosterImage",PosterImage);var darkGray="#222";var lightGray="#ccc";var fontMap={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function constructColor(color,opacity){var hex;if(color.length===4){hex=color[1]+color[1]+color[2]+color[2]+color[3]+color[3];}else if(color.length===7){hex=color.slice(1);}else{throw new Error("Invalid color code provided, "+color+"; must be formatted as e.g. #f0e or #f604e2.");}return"rgba("+parseInt(hex.slice(0,2),16)+","+parseInt(hex.slice(2,4),16)+","+parseInt(hex.slice(4,6),16)+","+opacity+")";}function tryUpdateStyle(el,style,rule){try{el.style[style]=rule;}catch(e){return;}}var TextTrackDisplay=/* @__PURE__ */function(_Component){_inheritsLoose3(TextTrackDisplay2,_Component);function TextTrackDisplay2(player2,options,ready){var _this;_this=_Component.call(this,player2,options,ready)||this;var updateDisplayHandler=function updateDisplayHandler2(e){return _this.updateDisplay(e);};player2.on("loadstart",function(e){return _this.toggleDisplay(e);});player2.on("texttrackchange",updateDisplayHandler);player2.on("loadedmetadata",function(e){return _this.preselectTrack(e);});player2.ready(bind(_assertThisInitialized3(_this),function(){if(player2.tech_&&player2.tech_.featuresNativeTextTracks){this.hide();return;}player2.on("fullscreenchange",updateDisplayHandler);player2.on("playerresize",updateDisplayHandler);import_window6["default"].addEventListener("orientationchange",updateDisplayHandler);player2.on("dispose",function(){return import_window6["default"].removeEventListener("orientationchange",updateDisplayHandler);});var tracks=this.options_.playerOptions.tracks||[];for(var i=0;i<tracks.length;i++){this.player_.addRemoteTextTrack(tracks[i],true);}this.preselectTrack();}));return _this;}var _proto=TextTrackDisplay2.prototype;_proto.preselectTrack=function preselectTrack(){var modes={captions:1,subtitles:1};var trackList=this.player_.textTracks();var userPref=this.player_.cache_.selectedLanguage;var firstDesc;var firstCaptions;var preferredTrack;for(var i=0;i<trackList.length;i++){var track=trackList[i];if(userPref&&userPref.enabled&&userPref.language&&userPref.language===track.language&&track.kind in modes){if(track.kind===userPref.kind){preferredTrack=track;}else if(!preferredTrack){preferredTrack=track;}}else if(userPref&&!userPref.enabled){preferredTrack=null;firstDesc=null;firstCaptions=null;}else if(track["default"]){if(track.kind==="descriptions"&&!firstDesc){firstDesc=track;}else if(track.kind in modes&&!firstCaptions){firstCaptions=track;}}}if(preferredTrack){preferredTrack.mode="showing";}else if(firstCaptions){firstCaptions.mode="showing";}else if(firstDesc){firstDesc.mode="showing";}};_proto.toggleDisplay=function toggleDisplay(){if(this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks){this.hide();}else{this.show();}};_proto.createEl=function createEl2(){return _Component.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"translate":"yes","aria-live":"off","aria-atomic":"true"});};_proto.clearDisplay=function clearDisplay(){if(typeof import_window6["default"].WebVTT==="function"){import_window6["default"].WebVTT.processCues(import_window6["default"],[],this.el_);}};_proto.updateDisplay=function updateDisplay(){var tracks=this.player_.textTracks();var allowMultipleShowingTracks=this.options_.allowMultipleShowingTracks;this.clearDisplay();if(allowMultipleShowingTracks){var showingTracks=[];for(var _i2=0;_i2<tracks.length;++_i2){var track=tracks[_i2];if(track.mode!=="showing"){continue;}showingTracks.push(track);}this.updateForTrack(showingTracks);return;}var descriptionsTrack=null;var captionsSubtitlesTrack=null;var i=tracks.length;while(i--){var _track=tracks[i];if(_track.mode==="showing"){if(_track.kind==="descriptions"){descriptionsTrack=_track;}else{captionsSubtitlesTrack=_track;}}}if(captionsSubtitlesTrack){if(this.getAttribute("aria-live")!=="off"){this.setAttribute("aria-live","off");}this.updateForTrack(captionsSubtitlesTrack);}else if(descriptionsTrack){if(this.getAttribute("aria-live")!=="assertive"){this.setAttribute("aria-live","assertive");}this.updateForTrack(descriptionsTrack);}};_proto.updateDisplayState=function updateDisplayState(track){var overrides=this.player_.textTrackSettings.getValues();var cues=track.activeCues;var i=cues.length;while(i--){var cue=cues[i];if(!cue){continue;}var cueDiv=cue.displayState;if(overrides.color){cueDiv.firstChild.style.color=overrides.color;}if(overrides.textOpacity){tryUpdateStyle(cueDiv.firstChild,"color",constructColor(overrides.color||"#fff",overrides.textOpacity));}if(overrides.backgroundColor){cueDiv.firstChild.style.backgroundColor=overrides.backgroundColor;}if(overrides.backgroundOpacity){tryUpdateStyle(cueDiv.firstChild,"backgroundColor",constructColor(overrides.backgroundColor||"#000",overrides.backgroundOpacity));}if(overrides.windowColor){if(overrides.windowOpacity){tryUpdateStyle(cueDiv,"backgroundColor",constructColor(overrides.windowColor,overrides.windowOpacity));}else{cueDiv.style.backgroundColor=overrides.windowColor;}}if(overrides.edgeStyle){if(overrides.edgeStyle==="dropshadow"){cueDiv.firstChild.style.textShadow="2px 2px 3px "+darkGray+", 2px 2px 4px "+darkGray+", 2px 2px 5px "+darkGray;}else if(overrides.edgeStyle==="raised"){cueDiv.firstChild.style.textShadow="1px 1px "+darkGray+", 2px 2px "+darkGray+", 3px 3px "+darkGray;}else if(overrides.edgeStyle==="depressed"){cueDiv.firstChild.style.textShadow="1px 1px "+lightGray+", 0 1px "+lightGray+", -1px -1px "+darkGray+", 0 -1px "+darkGray;}else if(overrides.edgeStyle==="uniform"){cueDiv.firstChild.style.textShadow="0 0 4px "+darkGray+", 0 0 4px "+darkGray+", 0 0 4px "+darkGray+", 0 0 4px "+darkGray;}}if(overrides.fontPercent&&overrides.fontPercent!==1){var fontSize=import_window6["default"].parseFloat(cueDiv.style.fontSize);cueDiv.style.fontSize=fontSize*overrides.fontPercent+"px";cueDiv.style.height="auto";cueDiv.style.top="auto";}if(overrides.fontFamily&&overrides.fontFamily!=="default"){if(overrides.fontFamily==="small-caps"){cueDiv.firstChild.style.fontVariant="small-caps";}else{cueDiv.firstChild.style.fontFamily=fontMap[overrides.fontFamily];}}}};_proto.updateForTrack=function updateForTrack(tracks){if(!Array.isArray(tracks)){tracks=[tracks];}if(typeof import_window6["default"].WebVTT!=="function"||tracks.every(function(track2){return!track2.activeCues;})){return;}var cues=[];for(var i=0;i<tracks.length;++i){var track=tracks[i];for(var j=0;j<track.activeCues.length;++j){cues.push(track.activeCues[j]);}}import_window6["default"].WebVTT.processCues(import_window6["default"],cues,this.el_);for(var _i2=0;_i2<tracks.length;++_i2){var _track2=tracks[_i2];for(var _j=0;_j<_track2.activeCues.length;++_j){var cueEl=_track2.activeCues[_j].displayState;addClass(cueEl,"vjs-text-track-cue");addClass(cueEl,"vjs-text-track-cue-"+(_track2.language?_track2.language:_i2));if(_track2.language){setAttribute(cueEl,"lang",_track2.language);}}if(this.player_.textTrackSettings){this.updateDisplayState(_track2);}}};return TextTrackDisplay2;}(Component$1);Component$1.registerComponent("TextTrackDisplay",TextTrackDisplay);var LoadingSpinner=/* @__PURE__ */function(_Component){_inheritsLoose3(LoadingSpinner2,_Component);function LoadingSpinner2(){return _Component.apply(this,arguments)||this;}var _proto=LoadingSpinner2.prototype;_proto.createEl=function createEl$1(){var isAudio=this.player_.isAudio();var playerType=this.localize(isAudio?"Audio Player":"Video Player");var controlText=createEl("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[playerType])});var el=_Component.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});el.appendChild(controlText);return el;};return LoadingSpinner2;}(Component$1);Component$1.registerComponent("LoadingSpinner",LoadingSpinner);var Button=/* @__PURE__ */function(_ClickableComponent){_inheritsLoose3(Button2,_ClickableComponent);function Button2(){return _ClickableComponent.apply(this,arguments)||this;}var _proto=Button2.prototype;_proto.createEl=function createEl$1(tag,props,attributes){if(props===void 0){props={};}if(attributes===void 0){attributes={};}tag="button";props=assign({className:this.buildCSSClass()},props);attributes=assign({type:"button"},attributes);var el=createEl(tag,props,attributes);el.appendChild(createEl("span",{className:"vjs-icon-placeholder"},{"aria-hidden":true}));this.createControlTextEl(el);return el;};_proto.addChild=function addChild(child,options){if(options===void 0){options={};}var className=this.constructor.name;log$1.warn("Adding an actionable (user controllable) child to a Button ("+className+") is not supported; use a ClickableComponent instead.");return Component$1.prototype.addChild.call(this,child,options);};_proto.enable=function enable(){_ClickableComponent.prototype.enable.call(this);this.el_.removeAttribute("disabled");};_proto.disable=function disable(){_ClickableComponent.prototype.disable.call(this);this.el_.setAttribute("disabled","disabled");};_proto.handleKeyDown=function handleKeyDown(event){if(import_keycode["default"].isEventKey(event,"Space")||import_keycode["default"].isEventKey(event,"Enter")){event.stopPropagation();return;}_ClickableComponent.prototype.handleKeyDown.call(this,event);};return Button2;}(ClickableComponent);Component$1.registerComponent("Button",Button);var BigPlayButton=/* @__PURE__ */function(_Button){_inheritsLoose3(BigPlayButton2,_Button);function BigPlayButton2(player2,options){var _this;_this=_Button.call(this,player2,options)||this;_this.mouseused_=false;_this.on("mousedown",function(e){return _this.handleMouseDown(e);});return _this;}var _proto=BigPlayButton2.prototype;_proto.buildCSSClass=function buildCSSClass(){return"vjs-big-play-button";};_proto.handleClick=function handleClick(event){var playPromise=this.player_.play();if(this.mouseused_&&event.clientX&&event.clientY){var sourceIsEncrypted=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;silencePromise(playPromise);if(this.player_.tech(true)&&!((IE_VERSION||IS_EDGE)&&sourceIsEncrypted)){this.player_.tech(true).focus();}return;}var cb=this.player_.getChild("controlBar");var playToggle=cb&&cb.getChild("playToggle");if(!playToggle){this.player_.tech(true).focus();return;}var playFocus=function playFocus2(){return playToggle.focus();};if(isPromise(playPromise)){playPromise.then(playFocus,function(){});}else{this.setTimeout(playFocus,1);}};_proto.handleKeyDown=function handleKeyDown(event){this.mouseused_=false;_Button.prototype.handleKeyDown.call(this,event);};_proto.handleMouseDown=function handleMouseDown(event){this.mouseused_=true;};return BigPlayButton2;}(Button);BigPlayButton.prototype.controlText_="Play Video";Component$1.registerComponent("BigPlayButton",BigPlayButton);var CloseButton=/* @__PURE__ */function(_Button){_inheritsLoose3(CloseButton2,_Button);function CloseButton2(player2,options){var _this;_this=_Button.call(this,player2,options)||this;_this.controlText(options&&options.controlText||_this.localize("Close"));return _this;}var _proto=CloseButton2.prototype;_proto.buildCSSClass=function buildCSSClass(){return"vjs-close-button "+_Button.prototype.buildCSSClass.call(this);};_proto.handleClick=function handleClick(event){this.trigger({type:"close",bubbles:false});};_proto.handleKeyDown=function handleKeyDown(event){if(import_keycode["default"].isEventKey(event,"Esc")){event.preventDefault();event.stopPropagation();this.trigger("click");}else{_Button.prototype.handleKeyDown.call(this,event);}};return CloseButton2;}(Button);Component$1.registerComponent("CloseButton",CloseButton);var PlayToggle=/* @__PURE__ */function(_Button){_inheritsLoose3(PlayToggle2,_Button);function PlayToggle2(player2,options){var _this;if(options===void 0){options={};}_this=_Button.call(this,player2,options)||this;options.replay=options.replay===void 0||options.replay;_this.on(player2,"play",function(e){return _this.handlePlay(e);});_this.on(player2,"pause",function(e){return _this.handlePause(e);});if(options.replay){_this.on(player2,"ended",function(e){return _this.handleEnded(e);});}return _this;}var _proto=PlayToggle2.prototype;_proto.buildCSSClass=function buildCSSClass(){return"vjs-play-control "+_Button.prototype.buildCSSClass.call(this);};_proto.handleClick=function handleClick(event){if(this.player_.paused()){silencePromise(this.player_.play());}else{this.player_.pause();}};_proto.handleSeeked=function handleSeeked(event){this.removeClass("vjs-ended");if(this.player_.paused()){this.handlePause(event);}else{this.handlePlay(event);}};_proto.handlePlay=function handlePlay(event){this.removeClass("vjs-ended");this.removeClass("vjs-paused");this.addClass("vjs-playing");this.controlText("Pause");};_proto.handlePause=function handlePause(event){this.removeClass("vjs-playing");this.addClass("vjs-paused");this.controlText("Play");};_proto.handleEnded=function handleEnded(event){var _this2=this;this.removeClass("vjs-playing");this.addClass("vjs-ended");this.controlText("Replay");this.one(this.player_,"seeked",function(e){return _this2.handleSeeked(e);});};return PlayToggle2;}(Button);PlayToggle.prototype.controlText_="Play";Component$1.registerComponent("PlayToggle",PlayToggle);var defaultImplementation=function defaultImplementation2(seconds,guide){seconds=seconds<0?0:seconds;var s=Math.floor(seconds%60);var m=Math.floor(seconds/60%60);var h=Math.floor(seconds/3600);var gm=Math.floor(guide/60%60);var gh=Math.floor(guide/3600);if(isNaN(seconds)||seconds===Infinity){h=m=s="-";}h=h>0||gh>0?h+":":"";m=((h||gm>=10)&&m<10?"0"+m:m)+":";s=s<10?"0"+s:s;return h+m+s;};var implementation=defaultImplementation;function setFormatTime(customImplementation){implementation=customImplementation;}function resetFormatTime(){implementation=defaultImplementation;}function formatTime(seconds,guide){if(guide===void 0){guide=seconds;}return implementation(seconds,guide);}var TimeDisplay=/* @__PURE__ */function(_Component){_inheritsLoose3(TimeDisplay2,_Component);function TimeDisplay2(player2,options){var _this;_this=_Component.call(this,player2,options)||this;_this.on(player2,["timeupdate","ended"],function(e){return _this.updateContent(e);});_this.updateTextNode_();return _this;}var _proto=TimeDisplay2.prototype;_proto.createEl=function createEl$1(){var className=this.buildCSSClass();var el=_Component.prototype.createEl.call(this,"div",{className:className+" vjs-time-control vjs-control"});var span=createEl("span",{className:"vjs-control-text",textContent:this.localize(this.labelText_)+"\xA0"},{role:"presentation"});el.appendChild(span);this.contentEl_=createEl("span",{className:className+"-display"},{"aria-live":"off","role":"presentation"});el.appendChild(this.contentEl_);return el;};_proto.dispose=function dispose(){this.contentEl_=null;this.textNode_=null;_Component.prototype.dispose.call(this);};_proto.updateTextNode_=function updateTextNode_(time){var _this2=this;if(time===void 0){time=0;}time=formatTime(time);if(this.formattedTime_===time){return;}this.formattedTime_=time;this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",function(){if(!_this2.contentEl_){return;}var oldNode=_this2.textNode_;if(oldNode&&_this2.contentEl_.firstChild!==oldNode){oldNode=null;log$1.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.");}_this2.textNode_=import_document["default"].createTextNode(_this2.formattedTime_);if(!_this2.textNode_){return;}if(oldNode){_this2.contentEl_.replaceChild(_this2.textNode_,oldNode);}else{_this2.contentEl_.appendChild(_this2.textNode_);}});};_proto.updateContent=function updateContent(event){};return TimeDisplay2;}(Component$1);TimeDisplay.prototype.labelText_="Time";TimeDisplay.prototype.controlText_="Time";Component$1.registerComponent("TimeDisplay",TimeDisplay);var CurrentTimeDisplay=/* @__PURE__ */function(_TimeDisplay){_inheritsLoose3(CurrentTimeDisplay2,_TimeDisplay);function CurrentTimeDisplay2(){return _TimeDisplay.apply(this,arguments)||this;}var _proto=CurrentTimeDisplay2.prototype;_proto.buildCSSClass=function buildCSSClass(){return"vjs-current-time";};_proto.updateContent=function updateContent(event){var time;if(this.player_.ended()){time=this.player_.duration();}else{time=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();}this.updateTextNode_(time);};return CurrentTimeDisplay2;}(TimeDisplay);CurrentTimeDisplay.prototype.labelText_="Current Time";CurrentTimeDisplay.prototype.controlText_="Current Time";Component$1.registerComponent("CurrentTimeDisplay",CurrentTimeDisplay);var DurationDisplay=/* @__PURE__ */function(_TimeDisplay){_inheritsLoose3(DurationDisplay2,_TimeDisplay);function DurationDisplay2(player2,options){var _this;_this=_TimeDisplay.call(this,player2,options)||this;var updateContent=function updateContent2(e){return _this.updateContent(e);};_this.on(player2,"durationchange",updateContent);_this.on(player2,"loadstart",updateContent);_this.on(player2,"loadedmetadata",updateContent);return _this;}var _proto=DurationDisplay2.prototype;_proto.buildCSSClass=function buildCSSClass(){return"vjs-duration";};_proto.updateContent=function updateContent(event){var duration5=this.player_.duration();this.updateTextNode_(duration5);};return DurationDisplay2;}(TimeDisplay);DurationDisplay.prototype.labelText_="Duration";DurationDisplay.prototype.controlText_="Duration";Component$1.registerComponent("DurationDisplay",DurationDisplay);var TimeDivider=/* @__PURE__ */function(_Component){_inheritsLoose3(TimeDivider2,_Component);function TimeDivider2(){return _Component.apply(this,arguments)||this;}var _proto=TimeDivider2.prototype;_proto.createEl=function createEl2(){var el=_Component.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":true});var div=_Component.prototype.createEl.call(this,"div");var span=_Component.prototype.createEl.call(this,"span",{textContent:"/"});div.appendChild(span);el.appendChild(div);return el;};return TimeDivider2;}(Component$1);Component$1.registerComponent("TimeDivider",TimeDivider);var RemainingTimeDisplay=/* @__PURE__ */function(_TimeDisplay){_inheritsLoose3(RemainingTimeDisplay2,_TimeDisplay);function RemainingTimeDisplay2(player2,options){var _this;_this=_TimeDisplay.call(this,player2,options)||this;_this.on(player2,"durationchange",function(e){return _this.updateContent(e);});return _this;}var _proto=RemainingTimeDisplay2.prototype;_proto.buildCSSClass=function buildCSSClass(){return"vjs-remaining-time";};_proto.createEl=function createEl$1(){var el=_TimeDisplay.prototype.createEl.call(this);if(this.options_.displayNegative!==false){el.insertBefore(createEl("span",{},{"aria-hidden":true},"-"),this.contentEl_);}return el;};_proto.updateContent=function updateContent(event){if(typeof this.player_.duration()!=="number"){return;}var time;if(this.player_.ended()){time=0;}else if(this.player_.remainingTimeDisplay){time=this.player_.remainingTimeDisplay();}else{time=this.player_.remainingTime();}this.updateTextNode_(time);};return RemainingTimeDisplay2;}(TimeDisplay);RemainingTimeDisplay.prototype.labelText_="Remaining Time";RemainingTimeDisplay.prototype.controlText_="Remaining Time";Component$1.registerComponent("RemainingTimeDisplay",RemainingTimeDisplay);var LiveDisplay=/* @__PURE__ */function(_Component){_inheritsLoose3(LiveDisplay2,_Component);function LiveDisplay2(player2,options){var _this;_this=_Component.call(this,player2,options)||this;_this.updateShowing();_this.on(_this.player(),"durationchange",function(e){return _this.updateShowing(e);});return _this;}var _proto=LiveDisplay2.prototype;_proto.createEl=function createEl$1(){var el=_Component.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});this.contentEl_=createEl("div",{className:"vjs-live-display"},{"aria-live":"off"});this.contentEl_.appendChild(createEl("span",{className:"vjs-control-text",textContent:this.localize("Stream Type")+"\xA0"}));this.contentEl_.appendChild(import_document["default"].createTextNode(this.localize("LIVE")));el.appendChild(this.contentEl_);return el;};_proto.dispose=function dispose(){this.contentEl_=null;_Component.prototype.dispose.call(this);};_proto.updateShowing=function updateShowing(event){if(this.player().duration()===Infinity){this.show();}else{this.hide();}};return LiveDisplay2;}(Component$1);Component$1.registerComponent("LiveDisplay",LiveDisplay);var SeekToLive=/* @__PURE__ */function(_Button){_inheritsLoose3(SeekToLive2,_Button);function SeekToLive2(player2,options){var _this;_this=_Button.call(this,player2,options)||this;_this.updateLiveEdgeStatus();if(_this.player_.liveTracker){_this.updateLiveEdgeStatusHandler_=function(e){return _this.updateLiveEdgeStatus(e);};_this.on(_this.player_.liveTracker,"liveedgechange",_this.updateLiveEdgeStatusHandler_);}return _this;}var _proto=SeekToLive2.prototype;_proto.createEl=function createEl$1(){var el=_Button.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});this.textEl_=createEl("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"});el.appendChild(this.textEl_);return el;};_proto.updateLiveEdgeStatus=function updateLiveEdgeStatus(){if(!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()){this.setAttribute("aria-disabled",true);this.addClass("vjs-at-live-edge");this.controlText("Seek to live, currently playing live");}else{this.setAttribute("aria-disabled",false);this.removeClass("vjs-at-live-edge");this.controlText("Seek to live, currently behind live");}};_proto.handleClick=function handleClick(){this.player_.liveTracker.seekToLiveEdge();};_proto.dispose=function dispose(){if(this.player_.liveTracker){this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_);}this.textEl_=null;_Button.prototype.dispose.call(this);};return SeekToLive2;}(Button);SeekToLive.prototype.controlText_="Seek to live, currently playing live";Component$1.registerComponent("SeekToLive",SeekToLive);var clamp4=function clamp5(number,min,max){number=Number(number);return Math.min(max,Math.max(min,isNaN(number)?min:number));};var Slider=/* @__PURE__ */function(_Component){_inheritsLoose3(Slider2,_Component);function Slider2(player2,options){var _this;_this=_Component.call(this,player2,options)||this;_this.handleMouseDown_=function(e){return _this.handleMouseDown(e);};_this.handleMouseUp_=function(e){return _this.handleMouseUp(e);};_this.handleKeyDown_=function(e){return _this.handleKeyDown(e);};_this.handleClick_=function(e){return _this.handleClick(e);};_this.handleMouseMove_=function(e){return _this.handleMouseMove(e);};_this.update_=function(e){return _this.update(e);};_this.bar=_this.getChild(_this.options_.barName);_this.vertical(!!_this.options_.vertical);_this.enable();return _this;}var _proto=Slider2.prototype;_proto.enabled=function enabled(){return this.enabled_;};_proto.enable=function enable(){if(this.enabled()){return;}this.on("mousedown",this.handleMouseDown_);this.on("touchstart",this.handleMouseDown_);this.on("keydown",this.handleKeyDown_);this.on("click",this.handleClick_);this.on(this.player_,"controlsvisible",this.update);if(this.playerEvent){this.on(this.player_,this.playerEvent,this.update);}this.removeClass("disabled");this.setAttribute("tabindex",0);this.enabled_=true;};_proto.disable=function disable(){if(!this.enabled()){return;}var doc=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_);this.off("touchstart",this.handleMouseDown_);this.off("keydown",this.handleKeyDown_);this.off("click",this.handleClick_);this.off(this.player_,"controlsvisible",this.update_);this.off(doc,"mousemove",this.handleMouseMove_);this.off(doc,"mouseup",this.handleMouseUp_);this.off(doc,"touchmove",this.handleMouseMove_);this.off(doc,"touchend",this.handleMouseUp_);this.removeAttribute("tabindex");this.addClass("disabled");if(this.playerEvent){this.off(this.player_,this.playerEvent,this.update);}this.enabled_=false;};_proto.createEl=function createEl2(type2,props,attributes){if(props===void 0){props={};}if(attributes===void 0){attributes={};}props.className=props.className+" vjs-slider";props=assign({tabIndex:0},props);attributes=assign({"role":"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,"tabIndex":0},attributes);return _Component.prototype.createEl.call(this,type2,props,attributes);};_proto.handleMouseDown=function handleMouseDown(event){var doc=this.bar.el_.ownerDocument;if(event.type==="mousedown"){event.preventDefault();}if(event.type==="touchstart"&&!IS_CHROME){event.preventDefault();}blockTextSelection();this.addClass("vjs-sliding");this.trigger("slideractive");this.on(doc,"mousemove",this.handleMouseMove_);this.on(doc,"mouseup",this.handleMouseUp_);this.on(doc,"touchmove",this.handleMouseMove_);this.on(doc,"touchend",this.handleMouseUp_);this.handleMouseMove(event,true);};_proto.handleMouseMove=function handleMouseMove(event){};_proto.handleMouseUp=function handleMouseUp(){var doc=this.bar.el_.ownerDocument;unblockTextSelection();this.removeClass("vjs-sliding");this.trigger("sliderinactive");this.off(doc,"mousemove",this.handleMouseMove_);this.off(doc,"mouseup",this.handleMouseUp_);this.off(doc,"touchmove",this.handleMouseMove_);this.off(doc,"touchend",this.handleMouseUp_);this.update();};_proto.update=function update2(){var _this2=this;if(!this.el_||!this.bar){return;}var progress=this.getProgress();if(progress===this.progress_){return progress;}this.progress_=progress;this.requestNamedAnimationFrame("Slider#update",function(){var sizeKey=_this2.vertical()?"height":"width";_this2.bar.el().style[sizeKey]=(progress*100).toFixed(2)+"%";});return progress;};_proto.getProgress=function getProgress(){return Number(clamp4(this.getPercent(),0,1).toFixed(4));};_proto.calculateDistance=function calculateDistance(event){var position=getPointerPosition(this.el_,event);if(this.vertical()){return position.y;}return position.x;};_proto.handleKeyDown=function handleKeyDown(event){if(import_keycode["default"].isEventKey(event,"Left")||import_keycode["default"].isEventKey(event,"Down")){event.preventDefault();event.stopPropagation();this.stepBack();}else if(import_keycode["default"].isEventKey(event,"Right")||import_keycode["default"].isEventKey(event,"Up")){event.preventDefault();event.stopPropagation();this.stepForward();}else{_Component.prototype.handleKeyDown.call(this,event);}};_proto.handleClick=function handleClick(event){event.stopPropagation();event.preventDefault();};_proto.vertical=function vertical(bool){if(bool===void 0){return this.vertical_||false;}this.vertical_=!!bool;if(this.vertical_){this.addClass("vjs-slider-vertical");}else{this.addClass("vjs-slider-horizontal");}};return Slider2;}(Component$1);Component$1.registerComponent("Slider",Slider);var percentify=function percentify2(time,end){return clamp4(time/end*100,0,100).toFixed(2)+"%";};var LoadProgressBar=/* @__PURE__ */function(_Component){_inheritsLoose3(LoadProgressBar2,_Component);function LoadProgressBar2(player2,options){var _this;_this=_Component.call(this,player2,options)||this;_this.partEls_=[];_this.on(player2,"progress",function(e){return _this.update(e);});return _this;}var _proto=LoadProgressBar2.prototype;_proto.createEl=function createEl$1(){var el=_Component.prototype.createEl.call(this,"div",{className:"vjs-load-progress"});var wrapper=createEl("span",{className:"vjs-control-text"});var loadedText=createEl("span",{textContent:this.localize("Loaded")});var separator=import_document["default"].createTextNode(": ");this.percentageEl_=createEl("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"});el.appendChild(wrapper);wrapper.appendChild(loadedText);wrapper.appendChild(separator);wrapper.appendChild(this.percentageEl_);return el;};_proto.dispose=function dispose(){this.partEls_=null;this.percentageEl_=null;_Component.prototype.dispose.call(this);};_proto.update=function update2(event){var _this2=this;this.requestNamedAnimationFrame("LoadProgressBar#update",function(){var liveTracker=_this2.player_.liveTracker;var buffered=_this2.player_.buffered();var duration5=liveTracker&&liveTracker.isLive()?liveTracker.seekableEnd():_this2.player_.duration();var bufferedEnd=_this2.player_.bufferedEnd();var children=_this2.partEls_;var percent=percentify(bufferedEnd,duration5);if(_this2.percent_!==percent){_this2.el_.style.width=percent;textContent(_this2.percentageEl_,percent);_this2.percent_=percent;}for(var i=0;i<buffered.length;i++){var start2=buffered.start(i);var end=buffered.end(i);var part=children[i];if(!part){part=_this2.el_.appendChild(createEl());children[i]=part;}if(part.dataset.start===start2&&part.dataset.end===end){continue;}part.dataset.start=start2;part.dataset.end=end;part.style.left=percentify(start2,bufferedEnd);part.style.width=percentify(end-start2,bufferedEnd);}for(var _i2=children.length;_i2>buffered.length;_i2--){_this2.el_.removeChild(children[_i2-1]);}children.length=buffered.length;});};return LoadProgressBar2;}(Component$1);Component$1.registerComponent("LoadProgressBar",LoadProgressBar);var TimeTooltip=/* @__PURE__ */function(_Component){_inheritsLoose3(TimeTooltip2,_Component);function TimeTooltip2(player2,options){var _this;_this=_Component.call(this,player2,options)||this;_this.update=throttle(bind(_assertThisInitialized3(_this),_this.update),UPDATE_REFRESH_INTERVAL);return _this;}var _proto=TimeTooltip2.prototype;_proto.createEl=function createEl2(){return _Component.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"});};_proto.update=function update2(seekBarRect,seekBarPoint,content){var tooltipRect=findPosition(this.el_);var playerRect=getBoundingClientRect(this.player_.el());var seekBarPointPx=seekBarRect.width*seekBarPoint;if(!playerRect||!tooltipRect){return;}var spaceLeftOfPoint=seekBarRect.left-playerRect.left+seekBarPointPx;var spaceRightOfPoint=seekBarRect.width-seekBarPointPx+(playerRect.right-seekBarRect.right);var pullTooltipBy=tooltipRect.width/2;if(spaceLeftOfPoint<pullTooltipBy){pullTooltipBy+=pullTooltipBy-spaceLeftOfPoint;}else if(spaceRightOfPoint<pullTooltipBy){pullTooltipBy=spaceRightOfPoint;}if(pullTooltipBy<0){pullTooltipBy=0;}else if(pullTooltipBy>tooltipRect.width){pullTooltipBy=tooltipRect.width;}pullTooltipBy=Math.round(pullTooltipBy);this.el_.style.right="-"+pullTooltipBy+"px";this.write(content);};_proto.write=function write(content){textContent(this.el_,content);};_proto.updateTime=function updateTime(seekBarRect,seekBarPoint,time,cb){var _this2=this;this.requestNamedAnimationFrame("TimeTooltip#updateTime",function(){var content;var duration5=_this2.player_.duration();if(_this2.player_.liveTracker&&_this2.player_.liveTracker.isLive()){var liveWindow=_this2.player_.liveTracker.liveWindow();var secondsBehind=liveWindow-seekBarPoint*liveWindow;content=(secondsBehind<1?"":"-")+formatTime(secondsBehind,liveWindow);}else{content=formatTime(time,duration5);}_this2.update(seekBarRect,seekBarPoint,content);if(cb){cb();}});};return TimeTooltip2;}(Component$1);Component$1.registerComponent("TimeTooltip",TimeTooltip);var PlayProgressBar=/* @__PURE__ */function(_Component){_inheritsLoose3(PlayProgressBar2,_Component);function PlayProgressBar2(player2,options){var _this;_this=_Component.call(this,player2,options)||this;_this.update=throttle(bind(_assertThisInitialized3(_this),_this.update),UPDATE_REFRESH_INTERVAL);return _this;}var _proto=PlayProgressBar2.prototype;_proto.createEl=function createEl2(){return _Component.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"});};_proto.update=function update2(seekBarRect,seekBarPoint){var timeTooltip=this.getChild("timeTooltip");if(!timeTooltip){return;}var time=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();timeTooltip.updateTime(seekBarRect,seekBarPoint,time);};return PlayProgressBar2;}(Component$1);PlayProgressBar.prototype.options_={children:[]};if(!IS_IOS&&!IS_ANDROID){PlayProgressBar.prototype.options_.children.push("timeTooltip");}Component$1.registerComponent("PlayProgressBar",PlayProgressBar);var MouseTimeDisplay=/* @__PURE__ */function(_Component){_inheritsLoose3(MouseTimeDisplay2,_Component);function MouseTimeDisplay2(player2,options){var _this;_this=_Component.call(this,player2,options)||this;_this.update=throttle(bind(_assertThisInitialized3(_this),_this.update),UPDATE_REFRESH_INTERVAL);return _this;}var _proto=MouseTimeDisplay2.prototype;_proto.createEl=function createEl2(){return _Component.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"});};_proto.update=function update2(seekBarRect,seekBarPoint){var _this2=this;var time=seekBarPoint*this.player_.duration();this.getChild("timeTooltip").updateTime(seekBarRect,seekBarPoint,time,function(){_this2.el_.style.left=seekBarRect.width*seekBarPoint+"px";});};return MouseTimeDisplay2;}(Component$1);MouseTimeDisplay.prototype.options_={children:["timeTooltip"]};Component$1.registerComponent("MouseTimeDisplay",MouseTimeDisplay);var STEP_SECONDS=5;var PAGE_KEY_MULTIPLIER=12;var SeekBar=/* @__PURE__ */function(_Slider){_inheritsLoose3(SeekBar2,_Slider);function SeekBar2(player2,options){var _this;_this=_Slider.call(this,player2,options)||this;_this.setEventHandlers_();return _this;}var _proto=SeekBar2.prototype;_proto.setEventHandlers_=function setEventHandlers_(){var _this2=this;this.update_=bind(this,this.update);this.update=throttle(this.update_,UPDATE_REFRESH_INTERVAL);this.on(this.player_,["ended","durationchange","timeupdate"],this.update);if(this.player_.liveTracker){this.on(this.player_.liveTracker,"liveedgechange",this.update);}this.updateInterval=null;this.enableIntervalHandler_=function(e){return _this2.enableInterval_(e);};this.disableIntervalHandler_=function(e){return _this2.disableInterval_(e);};this.on(this.player_,["playing"],this.enableIntervalHandler_);this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_);if("hidden"in import_document["default"]&&"visibilityState"in import_document["default"]){this.on(import_document["default"],"visibilitychange",this.toggleVisibility_);}};_proto.toggleVisibility_=function toggleVisibility_(e){if(import_document["default"].visibilityState==="hidden"){this.cancelNamedAnimationFrame("SeekBar#update");this.cancelNamedAnimationFrame("Slider#update");this.disableInterval_(e);}else{if(!this.player_.ended()&&!this.player_.paused()){this.enableInterval_();}this.update();}};_proto.enableInterval_=function enableInterval_(){if(this.updateInterval){return;}this.updateInterval=this.setInterval(this.update,UPDATE_REFRESH_INTERVAL);};_proto.disableInterval_=function disableInterval_(e){if(this.player_.liveTracker&&this.player_.liveTracker.isLive()&&e&&e.type!=="ended"){return;}if(!this.updateInterval){return;}this.clearInterval(this.updateInterval);this.updateInterval=null;};_proto.createEl=function createEl2(){return _Slider.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")});};_proto.update=function update2(event){var _this3=this;if(import_document["default"].visibilityState==="hidden"){return;}var percent=_Slider.prototype.update.call(this);this.requestNamedAnimationFrame("SeekBar#update",function(){var currentTime=_this3.player_.ended()?_this3.player_.duration():_this3.getCurrentTime_();var liveTracker=_this3.player_.liveTracker;var duration5=_this3.player_.duration();if(liveTracker&&liveTracker.isLive()){duration5=_this3.player_.liveTracker.liveCurrentTime();}if(_this3.percent_!==percent){_this3.el_.setAttribute("aria-valuenow",(percent*100).toFixed(2));_this3.percent_=percent;}if(_this3.currentTime_!==currentTime||_this3.duration_!==duration5){_this3.el_.setAttribute("aria-valuetext",_this3.localize("progress bar timing: currentTime={1} duration={2}",[formatTime(currentTime,duration5),formatTime(duration5,duration5)],"{1} of {2}"));_this3.currentTime_=currentTime;_this3.duration_=duration5;}if(_this3.bar){_this3.bar.update(getBoundingClientRect(_this3.el()),_this3.getProgress());}});return percent;};_proto.userSeek_=function userSeek_(ct){if(this.player_.liveTracker&&this.player_.liveTracker.isLive()){this.player_.liveTracker.nextSeekedFromUser();}this.player_.currentTime(ct);};_proto.getCurrentTime_=function getCurrentTime_(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();};_proto.getPercent=function getPercent(){var currentTime=this.getCurrentTime_();var percent;var liveTracker=this.player_.liveTracker;if(liveTracker&&liveTracker.isLive()){percent=(currentTime-liveTracker.seekableStart())/liveTracker.liveWindow();if(liveTracker.atLiveEdge()){percent=1;}}else{percent=currentTime/this.player_.duration();}return percent;};_proto.handleMouseDown=function handleMouseDown(event){if(!isSingleLeftClick(event)){return;}event.stopPropagation();this.videoWasPlaying=!this.player_.paused();this.player_.pause();_Slider.prototype.handleMouseDown.call(this,event);};_proto.handleMouseMove=function handleMouseMove(event,mouseDown){if(mouseDown===void 0){mouseDown=false;}if(!isSingleLeftClick(event)){return;}if(!mouseDown&&!this.player_.scrubbing()){this.player_.scrubbing(true);}var newTime;var distance=this.calculateDistance(event);var liveTracker=this.player_.liveTracker;if(!liveTracker||!liveTracker.isLive()){newTime=distance*this.player_.duration();if(newTime===this.player_.duration()){newTime=newTime-0.1;}}else{if(distance>=0.99){liveTracker.seekToLiveEdge();return;}var seekableStart=liveTracker.seekableStart();var seekableEnd=liveTracker.liveCurrentTime();newTime=seekableStart+distance*liveTracker.liveWindow();if(newTime>=seekableEnd){newTime=seekableEnd;}if(newTime<=seekableStart){newTime=seekableStart+0.1;}if(newTime===Infinity){return;}}this.userSeek_(newTime);};_proto.enable=function enable(){_Slider.prototype.enable.call(this);var mouseTimeDisplay=this.getChild("mouseTimeDisplay");if(!mouseTimeDisplay){return;}mouseTimeDisplay.show();};_proto.disable=function disable(){_Slider.prototype.disable.call(this);var mouseTimeDisplay=this.getChild("mouseTimeDisplay");if(!mouseTimeDisplay){return;}mouseTimeDisplay.hide();};_proto.handleMouseUp=function handleMouseUp(event){_Slider.prototype.handleMouseUp.call(this,event);if(event){event.stopPropagation();}this.player_.scrubbing(false);this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:true});if(this.videoWasPlaying){silencePromise(this.player_.play());}else{this.update_();}};_proto.stepForward=function stepForward(){this.userSeek_(this.player_.currentTime()+STEP_SECONDS);};_proto.stepBack=function stepBack(){this.userSeek_(this.player_.currentTime()-STEP_SECONDS);};_proto.handleAction=function handleAction(event){if(this.player_.paused()){this.player_.play();}else{this.player_.pause();}};_proto.handleKeyDown=function handleKeyDown(event){var liveTracker=this.player_.liveTracker;if(import_keycode["default"].isEventKey(event,"Space")||import_keycode["default"].isEventKey(event,"Enter")){event.preventDefault();event.stopPropagation();this.handleAction(event);}else if(import_keycode["default"].isEventKey(event,"Home")){event.preventDefault();event.stopPropagation();this.userSeek_(0);}else if(import_keycode["default"].isEventKey(event,"End")){event.preventDefault();event.stopPropagation();if(liveTracker&&liveTracker.isLive()){this.userSeek_(liveTracker.liveCurrentTime());}else{this.userSeek_(this.player_.duration());}}else if(/^[0-9]$/.test((0,import_keycode["default"])(event))){event.preventDefault();event.stopPropagation();var gotoFraction=(import_keycode["default"].codes[(0,import_keycode["default"])(event)]-import_keycode["default"].codes["0"])*10/100;if(liveTracker&&liveTracker.isLive()){this.userSeek_(liveTracker.seekableStart()+liveTracker.liveWindow()*gotoFraction);}else{this.userSeek_(this.player_.duration()*gotoFraction);}}else if(import_keycode["default"].isEventKey(event,"PgDn")){event.preventDefault();event.stopPropagation();this.userSeek_(this.player_.currentTime()-STEP_SECONDS*PAGE_KEY_MULTIPLIER);}else if(import_keycode["default"].isEventKey(event,"PgUp")){event.preventDefault();event.stopPropagation();this.userSeek_(this.player_.currentTime()+STEP_SECONDS*PAGE_KEY_MULTIPLIER);}else{_Slider.prototype.handleKeyDown.call(this,event);}};_proto.dispose=function dispose(){this.disableInterval_();this.off(this.player_,["ended","durationchange","timeupdate"],this.update);if(this.player_.liveTracker){this.off(this.player_.liveTracker,"liveedgechange",this.update);}this.off(this.player_,["playing"],this.enableIntervalHandler_);this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_);if("hidden"in import_document["default"]&&"visibilityState"in import_document["default"]){this.off(import_document["default"],"visibilitychange",this.toggleVisibility_);}_Slider.prototype.dispose.call(this);};return SeekBar2;}(Slider);SeekBar.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"};if(!IS_IOS&&!IS_ANDROID){SeekBar.prototype.options_.children.splice(1,0,"mouseTimeDisplay");}Component$1.registerComponent("SeekBar",SeekBar);var ProgressControl=/* @__PURE__ */function(_Component){_inheritsLoose3(ProgressControl2,_Component);function ProgressControl2(player2,options){var _this;_this=_Component.call(this,player2,options)||this;_this.handleMouseMove=throttle(bind(_assertThisInitialized3(_this),_this.handleMouseMove),UPDATE_REFRESH_INTERVAL);_this.throttledHandleMouseSeek=throttle(bind(_assertThisInitialized3(_this),_this.handleMouseSeek),UPDATE_REFRESH_INTERVAL);_this.handleMouseUpHandler_=function(e){return _this.handleMouseUp(e);};_this.handleMouseDownHandler_=function(e){return _this.handleMouseDown(e);};_this.enable();return _this;}var _proto=ProgressControl2.prototype;_proto.createEl=function createEl2(){return _Component.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"});};_proto.handleMouseMove=function handleMouseMove(event){var seekBar=this.getChild("seekBar");if(!seekBar){return;}var playProgressBar=seekBar.getChild("playProgressBar");var mouseTimeDisplay=seekBar.getChild("mouseTimeDisplay");if(!playProgressBar&&!mouseTimeDisplay){return;}var seekBarEl=seekBar.el();var seekBarRect=findPosition(seekBarEl);var seekBarPoint=getPointerPosition(seekBarEl,event).x;seekBarPoint=clamp4(seekBarPoint,0,1);if(mouseTimeDisplay){mouseTimeDisplay.update(seekBarRect,seekBarPoint);}if(playProgressBar){playProgressBar.update(seekBarRect,seekBar.getProgress());}};_proto.handleMouseSeek=function handleMouseSeek(event){var seekBar=this.getChild("seekBar");if(seekBar){seekBar.handleMouseMove(event);}};_proto.enabled=function enabled(){return this.enabled_;};_proto.disable=function disable(){this.children().forEach(function(child){return child.disable&&child.disable();});if(!this.enabled()){return;}this.off(["mousedown","touchstart"],this.handleMouseDownHandler_);this.off(this.el_,"mousemove",this.handleMouseMove);this.removeListenersAddedOnMousedownAndTouchstart();this.addClass("disabled");this.enabled_=false;if(this.player_.scrubbing()){var seekBar=this.getChild("seekBar");this.player_.scrubbing(false);if(seekBar.videoWasPlaying){silencePromise(this.player_.play());}}};_proto.enable=function enable(){this.children().forEach(function(child){return child.enable&&child.enable();});if(this.enabled()){return;}this.on(["mousedown","touchstart"],this.handleMouseDownHandler_);this.on(this.el_,"mousemove",this.handleMouseMove);this.removeClass("disabled");this.enabled_=true;};_proto.removeListenersAddedOnMousedownAndTouchstart=function removeListenersAddedOnMousedownAndTouchstart(){var doc=this.el_.ownerDocument;this.off(doc,"mousemove",this.throttledHandleMouseSeek);this.off(doc,"touchmove",this.throttledHandleMouseSeek);this.off(doc,"mouseup",this.handleMouseUpHandler_);this.off(doc,"touchend",this.handleMouseUpHandler_);};_proto.handleMouseDown=function handleMouseDown(event){var doc=this.el_.ownerDocument;var seekBar=this.getChild("seekBar");if(seekBar){seekBar.handleMouseDown(event);}this.on(doc,"mousemove",this.throttledHandleMouseSeek);this.on(doc,"touchmove",this.throttledHandleMouseSeek);this.on(doc,"mouseup",this.handleMouseUpHandler_);this.on(doc,"touchend",this.handleMouseUpHandler_);};_proto.handleMouseUp=function handleMouseUp(event){var seekBar=this.getChild("seekBar");if(seekBar){seekBar.handleMouseUp(event);}this.removeListenersAddedOnMousedownAndTouchstart();};return ProgressControl2;}(Component$1);ProgressControl.prototype.options_={children:["seekBar"]};Component$1.registerComponent("ProgressControl",ProgressControl);var PictureInPictureToggle=/* @__PURE__ */function(_Button){_inheritsLoose3(PictureInPictureToggle2,_Button);function PictureInPictureToggle2(player2,options){var _this;_this=_Button.call(this,player2,options)||this;_this.on(player2,["enterpictureinpicture","leavepictureinpicture"],function(e){return _this.handlePictureInPictureChange(e);});_this.on(player2,["disablepictureinpicturechanged","loadedmetadata"],function(e){return _this.handlePictureInPictureEnabledChange(e);});_this.on(player2,["loadedmetadata","audioonlymodechange","audiopostermodechange"],function(){var isSourceAudio=player2.currentType().substring(0,5)==="audio";if(isSourceAudio||player2.audioPosterMode()||player2.audioOnlyMode()){if(player2.isInPictureInPicture()){player2.exitPictureInPicture();}_this.hide();}else{_this.show();}});_this.disable();return _this;}var _proto=PictureInPictureToggle2.prototype;_proto.buildCSSClass=function buildCSSClass(){return"vjs-picture-in-picture-control "+_Button.prototype.buildCSSClass.call(this);};_proto.handlePictureInPictureEnabledChange=function handlePictureInPictureEnabledChange(){if(import_document["default"].pictureInPictureEnabled&&this.player_.disablePictureInPicture()===false){this.enable();}else{this.disable();}};_proto.handlePictureInPictureChange=function handlePictureInPictureChange(event){if(this.player_.isInPictureInPicture()){this.controlText("Exit Picture-in-Picture");}else{this.controlText("Picture-in-Picture");}this.handlePictureInPictureEnabledChange();};_proto.handleClick=function handleClick(event){if(!this.player_.isInPictureInPicture()){this.player_.requestPictureInPicture();}else{this.player_.exitPictureInPicture();}};return PictureInPictureToggle2;}(Button);PictureInPictureToggle.prototype.controlText_="Picture-in-Picture";Component$1.registerComponent("PictureInPictureToggle",PictureInPictureToggle);var FullscreenToggle=/* @__PURE__ */function(_Button){_inheritsLoose3(FullscreenToggle2,_Button);function FullscreenToggle2(player2,options){var _this;_this=_Button.call(this,player2,options)||this;_this.on(player2,"fullscreenchange",function(e){return _this.handleFullscreenChange(e);});if(import_document["default"][player2.fsApi_.fullscreenEnabled]===false){_this.disable();}return _this;}var _proto=FullscreenToggle2.prototype;_proto.buildCSSClass=function buildCSSClass(){return"vjs-fullscreen-control "+_Button.prototype.buildCSSClass.call(this);};_proto.handleFullscreenChange=function handleFullscreenChange(event){if(this.player_.isFullscreen()){this.controlText("Non-Fullscreen");}else{this.controlText("Fullscreen");}};_proto.handleClick=function handleClick(event){if(!this.player_.isFullscreen()){this.player_.requestFullscreen();}else{this.player_.exitFullscreen();}};return FullscreenToggle2;}(Button);FullscreenToggle.prototype.controlText_="Fullscreen";Component$1.registerComponent("FullscreenToggle",FullscreenToggle);var checkVolumeSupport=function checkVolumeSupport2(self2,player2){if(player2.tech_&&!player2.tech_.featuresVolumeControl){self2.addClass("vjs-hidden");}self2.on(player2,"loadstart",function(){if(!player2.tech_.featuresVolumeControl){self2.addClass("vjs-hidden");}else{self2.removeClass("vjs-hidden");}});};var VolumeLevel=/* @__PURE__ */function(_Component){_inheritsLoose3(VolumeLevel2,_Component);function VolumeLevel2(){return _Component.apply(this,arguments)||this;}var _proto=VolumeLevel2.prototype;_proto.createEl=function createEl2(){var el=_Component.prototype.createEl.call(this,"div",{className:"vjs-volume-level"});el.appendChild(_Component.prototype.createEl.call(this,"span",{className:"vjs-control-text"}));return el;};return VolumeLevel2;}(Component$1);Component$1.registerComponent("VolumeLevel",VolumeLevel);var VolumeLevelTooltip=/* @__PURE__ */function(_Component){_inheritsLoose3(VolumeLevelTooltip2,_Component);function VolumeLevelTooltip2(player2,options){var _this;_this=_Component.call(this,player2,options)||this;_this.update=throttle(bind(_assertThisInitialized3(_this),_this.update),UPDATE_REFRESH_INTERVAL);return _this;}var _proto=VolumeLevelTooltip2.prototype;_proto.createEl=function createEl2(){return _Component.prototype.createEl.call(this,"div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"});};_proto.update=function update2(rangeBarRect,rangeBarPoint,vertical,content){if(!vertical){var tooltipRect=getBoundingClientRect(this.el_);var playerRect=getBoundingClientRect(this.player_.el());var volumeBarPointPx=rangeBarRect.width*rangeBarPoint;if(!playerRect||!tooltipRect){return;}var spaceLeftOfPoint=rangeBarRect.left-playerRect.left+volumeBarPointPx;var spaceRightOfPoint=rangeBarRect.width-volumeBarPointPx+(playerRect.right-rangeBarRect.right);var pullTooltipBy=tooltipRect.width/2;if(spaceLeftOfPoint<pullTooltipBy){pullTooltipBy+=pullTooltipBy-spaceLeftOfPoint;}else if(spaceRightOfPoint<pullTooltipBy){pullTooltipBy=spaceRightOfPoint;}if(pullTooltipBy<0){pullTooltipBy=0;}else if(pullTooltipBy>tooltipRect.width){pullTooltipBy=tooltipRect.width;}this.el_.style.right="-"+pullTooltipBy+"px";}this.write(content+"%");};_proto.write=function write(content){textContent(this.el_,content);};_proto.updateVolume=function updateVolume(rangeBarRect,rangeBarPoint,vertical,volume,cb){var _this2=this;this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",function(){_this2.update(rangeBarRect,rangeBarPoint,vertical,volume.toFixed(0));if(cb){cb();}});};return VolumeLevelTooltip2;}(Component$1);Component$1.registerComponent("VolumeLevelTooltip",VolumeLevelTooltip);var MouseVolumeLevelDisplay=/* @__PURE__ */function(_Component){_inheritsLoose3(MouseVolumeLevelDisplay2,_Component);function MouseVolumeLevelDisplay2(player2,options){var _this;_this=_Component.call(this,player2,options)||this;_this.update=throttle(bind(_assertThisInitialized3(_this),_this.update),UPDATE_REFRESH_INTERVAL);return _this;}var _proto=MouseVolumeLevelDisplay2.prototype;_proto.createEl=function createEl2(){return _Component.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"});};_proto.update=function update2(rangeBarRect,rangeBarPoint,vertical){var _this2=this;var volume=100*rangeBarPoint;this.getChild("volumeLevelTooltip").updateVolume(rangeBarRect,rangeBarPoint,vertical,volume,function(){if(vertical){_this2.el_.style.bottom=rangeBarRect.height*rangeBarPoint+"px";}else{_this2.el_.style.left=rangeBarRect.width*rangeBarPoint+"px";}});};return MouseVolumeLevelDisplay2;}(Component$1);MouseVolumeLevelDisplay.prototype.options_={children:["volumeLevelTooltip"]};Component$1.registerComponent("MouseVolumeLevelDisplay",MouseVolumeLevelDisplay);var VolumeBar=/* @__PURE__ */function(_Slider){_inheritsLoose3(VolumeBar2,_Slider);function VolumeBar2(player2,options){var _this;_this=_Slider.call(this,player2,options)||this;_this.on("slideractive",function(e){return _this.updateLastVolume_(e);});_this.on(player2,"volumechange",function(e){return _this.updateARIAAttributes(e);});player2.ready(function(){return _this.updateARIAAttributes();});return _this;}var _proto=VolumeBar2.prototype;_proto.createEl=function createEl2(){return _Slider.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"});};_proto.handleMouseDown=function handleMouseDown(event){if(!isSingleLeftClick(event)){return;}_Slider.prototype.handleMouseDown.call(this,event);};_proto.handleMouseMove=function handleMouseMove(event){var mouseVolumeLevelDisplay=this.getChild("mouseVolumeLevelDisplay");if(mouseVolumeLevelDisplay){var volumeBarEl=this.el();var volumeBarRect=getBoundingClientRect(volumeBarEl);var vertical=this.vertical();var volumeBarPoint=getPointerPosition(volumeBarEl,event);volumeBarPoint=vertical?volumeBarPoint.y:volumeBarPoint.x;volumeBarPoint=clamp4(volumeBarPoint,0,1);mouseVolumeLevelDisplay.update(volumeBarRect,volumeBarPoint,vertical);}if(!isSingleLeftClick(event)){return;}this.checkMuted();this.player_.volume(this.calculateDistance(event));};_proto.checkMuted=function checkMuted(){if(this.player_.muted()){this.player_.muted(false);}};_proto.getPercent=function getPercent(){if(this.player_.muted()){return 0;}return this.player_.volume();};_proto.stepForward=function stepForward(){this.checkMuted();this.player_.volume(this.player_.volume()+0.1);};_proto.stepBack=function stepBack(){this.checkMuted();this.player_.volume(this.player_.volume()-0.1);};_proto.updateARIAAttributes=function updateARIAAttributes(event){var ariaValue=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",ariaValue);this.el_.setAttribute("aria-valuetext",ariaValue+"%");};_proto.volumeAsPercentage_=function volumeAsPercentage_(){return Math.round(this.player_.volume()*100);};_proto.updateLastVolume_=function updateLastVolume_(){var _this2=this;var volumeBeforeDrag=this.player_.volume();this.one("sliderinactive",function(){if(_this2.player_.volume()===0){_this2.player_.lastVolume_(volumeBeforeDrag);}});};return VolumeBar2;}(Slider);VolumeBar.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"};if(!IS_IOS&&!IS_ANDROID){VolumeBar.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay");}VolumeBar.prototype.playerEvent="volumechange";Component$1.registerComponent("VolumeBar",VolumeBar);var VolumeControl=/* @__PURE__ */function(_Component){_inheritsLoose3(VolumeControl2,_Component);function VolumeControl2(player2,options){var _this;if(options===void 0){options={};}options.vertical=options.vertical||false;if(typeof options.volumeBar==="undefined"||isPlain(options.volumeBar)){options.volumeBar=options.volumeBar||{};options.volumeBar.vertical=options.vertical;}_this=_Component.call(this,player2,options)||this;checkVolumeSupport(_assertThisInitialized3(_this),player2);_this.throttledHandleMouseMove=throttle(bind(_assertThisInitialized3(_this),_this.handleMouseMove),UPDATE_REFRESH_INTERVAL);_this.handleMouseUpHandler_=function(e){return _this.handleMouseUp(e);};_this.on("mousedown",function(e){return _this.handleMouseDown(e);});_this.on("touchstart",function(e){return _this.handleMouseDown(e);});_this.on("mousemove",function(e){return _this.handleMouseMove(e);});_this.on(_this.volumeBar,["focus","slideractive"],function(){_this.volumeBar.addClass("vjs-slider-active");_this.addClass("vjs-slider-active");_this.trigger("slideractive");});_this.on(_this.volumeBar,["blur","sliderinactive"],function(){_this.volumeBar.removeClass("vjs-slider-active");_this.removeClass("vjs-slider-active");_this.trigger("sliderinactive");});return _this;}var _proto=VolumeControl2.prototype;_proto.createEl=function createEl2(){var orientationClass="vjs-volume-horizontal";if(this.options_.vertical){orientationClass="vjs-volume-vertical";}return _Component.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+orientationClass});};_proto.handleMouseDown=function handleMouseDown(event){var doc=this.el_.ownerDocument;this.on(doc,"mousemove",this.throttledHandleMouseMove);this.on(doc,"touchmove",this.throttledHandleMouseMove);this.on(doc,"mouseup",this.handleMouseUpHandler_);this.on(doc,"touchend",this.handleMouseUpHandler_);};_proto.handleMouseUp=function handleMouseUp(event){var doc=this.el_.ownerDocument;this.off(doc,"mousemove",this.throttledHandleMouseMove);this.off(doc,"touchmove",this.throttledHandleMouseMove);this.off(doc,"mouseup",this.handleMouseUpHandler_);this.off(doc,"touchend",this.handleMouseUpHandler_);};_proto.handleMouseMove=function handleMouseMove(event){this.volumeBar.handleMouseMove(event);};return VolumeControl2;}(Component$1);VolumeControl.prototype.options_={children:["volumeBar"]};Component$1.registerComponent("VolumeControl",VolumeControl);var checkMuteSupport=function checkMuteSupport2(self2,player2){if(player2.tech_&&!player2.tech_.featuresMuteControl){self2.addClass("vjs-hidden");}self2.on(player2,"loadstart",function(){if(!player2.tech_.featuresMuteControl){self2.addClass("vjs-hidden");}else{self2.removeClass("vjs-hidden");}});};var MuteToggle=/* @__PURE__ */function(_Button){_inheritsLoose3(MuteToggle2,_Button);function MuteToggle2(player2,options){var _this;_this=_Button.call(this,player2,options)||this;checkMuteSupport(_assertThisInitialized3(_this),player2);_this.on(player2,["loadstart","volumechange"],function(e){return _this.update(e);});return _this;}var _proto=MuteToggle2.prototype;_proto.buildCSSClass=function buildCSSClass(){return"vjs-mute-control "+_Button.prototype.buildCSSClass.call(this);};_proto.handleClick=function handleClick(event){var vol=this.player_.volume();var lastVolume=this.player_.lastVolume_();if(vol===0){var volumeToSet=lastVolume<0.1?0.1:lastVolume;this.player_.volume(volumeToSet);this.player_.muted(false);}else{this.player_.muted(this.player_.muted()?false:true);}};_proto.update=function update2(event){this.updateIcon_();this.updateControlText_();};_proto.updateIcon_=function updateIcon_(){var vol=this.player_.volume();var level=3;if(IS_IOS&&this.player_.tech_&&this.player_.tech_.el_){this.player_.muted(this.player_.tech_.el_.muted);}if(vol===0||this.player_.muted()){level=0;}else if(vol<0.33){level=1;}else if(vol<0.67){level=2;}for(var i=0;i<4;i++){removeClass(this.el_,"vjs-vol-"+i);}addClass(this.el_,"vjs-vol-"+level);};_proto.updateControlText_=function updateControlText_(){var soundOff=this.player_.muted()||this.player_.volume()===0;var text=soundOff?"Unmute":"Mute";if(this.controlText()!==text){this.controlText(text);}};return MuteToggle2;}(Button);MuteToggle.prototype.controlText_="Mute";Component$1.registerComponent("MuteToggle",MuteToggle);var VolumePanel=/* @__PURE__ */function(_Component){_inheritsLoose3(VolumePanel2,_Component);function VolumePanel2(player2,options){var _this;if(options===void 0){options={};}if(typeof options.inline!=="undefined"){options.inline=options.inline;}else{options.inline=true;}if(typeof options.volumeControl==="undefined"||isPlain(options.volumeControl)){options.volumeControl=options.volumeControl||{};options.volumeControl.vertical=!options.inline;}_this=_Component.call(this,player2,options)||this;_this.handleKeyPressHandler_=function(e){return _this.handleKeyPress(e);};_this.on(player2,["loadstart"],function(e){return _this.volumePanelState_(e);});_this.on(_this.muteToggle,"keyup",function(e){return _this.handleKeyPress(e);});_this.on(_this.volumeControl,"keyup",function(e){return _this.handleVolumeControlKeyUp(e);});_this.on("keydown",function(e){return _this.handleKeyPress(e);});_this.on("mouseover",function(e){return _this.handleMouseOver(e);});_this.on("mouseout",function(e){return _this.handleMouseOut(e);});_this.on(_this.volumeControl,["slideractive"],_this.sliderActive_);_this.on(_this.volumeControl,["sliderinactive"],_this.sliderInactive_);return _this;}var _proto=VolumePanel2.prototype;_proto.sliderActive_=function sliderActive_(){this.addClass("vjs-slider-active");};_proto.sliderInactive_=function sliderInactive_(){this.removeClass("vjs-slider-active");};_proto.volumePanelState_=function volumePanelState_(){if(this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")){this.addClass("vjs-hidden");}if(this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")){this.addClass("vjs-mute-toggle-only");}};_proto.createEl=function createEl2(){var orientationClass="vjs-volume-panel-horizontal";if(!this.options_.inline){orientationClass="vjs-volume-panel-vertical";}return _Component.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+orientationClass});};_proto.dispose=function dispose(){this.handleMouseOut();_Component.prototype.dispose.call(this);};_proto.handleVolumeControlKeyUp=function handleVolumeControlKeyUp(event){if(import_keycode["default"].isEventKey(event,"Esc")){this.muteToggle.focus();}};_proto.handleMouseOver=function handleMouseOver(event){this.addClass("vjs-hover");on(import_document["default"],"keyup",this.handleKeyPressHandler_);};_proto.handleMouseOut=function handleMouseOut(event){this.removeClass("vjs-hover");off(import_document["default"],"keyup",this.handleKeyPressHandler_);};_proto.handleKeyPress=function handleKeyPress(event){if(import_keycode["default"].isEventKey(event,"Esc")){this.handleMouseOut();}};return VolumePanel2;}(Component$1);VolumePanel.prototype.options_={children:["muteToggle","volumeControl"]};Component$1.registerComponent("VolumePanel",VolumePanel);var Menu=/* @__PURE__ */function(_Component){_inheritsLoose3(Menu2,_Component);function Menu2(player2,options){var _this;_this=_Component.call(this,player2,options)||this;if(options){_this.menuButton_=options.menuButton;}_this.focusedChild_=-1;_this.on("keydown",function(e){return _this.handleKeyDown(e);});_this.boundHandleBlur_=function(e){return _this.handleBlur(e);};_this.boundHandleTapClick_=function(e){return _this.handleTapClick(e);};return _this;}var _proto=Menu2.prototype;_proto.addEventListenerForItem=function addEventListenerForItem(component){if(!(component instanceof Component$1)){return;}this.on(component,"blur",this.boundHandleBlur_);this.on(component,["tap","click"],this.boundHandleTapClick_);};_proto.removeEventListenerForItem=function removeEventListenerForItem(component){if(!(component instanceof Component$1)){return;}this.off(component,"blur",this.boundHandleBlur_);this.off(component,["tap","click"],this.boundHandleTapClick_);};_proto.removeChild=function removeChild(component){if(typeof component==="string"){component=this.getChild(component);}this.removeEventListenerForItem(component);_Component.prototype.removeChild.call(this,component);};_proto.addItem=function addItem(component){var childComponent=this.addChild(component);if(childComponent){this.addEventListenerForItem(childComponent);}};_proto.createEl=function createEl$1(){var contentElType=this.options_.contentElType||"ul";this.contentEl_=createEl(contentElType,{className:"vjs-menu-content"});this.contentEl_.setAttribute("role","menu");var el=_Component.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});el.appendChild(this.contentEl_);on(el,"click",function(event){event.preventDefault();event.stopImmediatePropagation();});return el;};_proto.dispose=function dispose(){this.contentEl_=null;this.boundHandleBlur_=null;this.boundHandleTapClick_=null;_Component.prototype.dispose.call(this);};_proto.handleBlur=function handleBlur(event){var relatedTarget=event.relatedTarget||import_document["default"].activeElement;if(!this.children().some(function(element){return element.el()===relatedTarget;})){var btn=this.menuButton_;if(btn&&btn.buttonPressed_&&relatedTarget!==btn.el().firstChild){btn.unpressButton();}}};_proto.handleTapClick=function handleTapClick(event){if(this.menuButton_){this.menuButton_.unpressButton();var childComponents=this.children();if(!Array.isArray(childComponents)){return;}var foundComponent=childComponents.filter(function(component){return component.el()===event.target;})[0];if(!foundComponent){return;}if(foundComponent.name()!=="CaptionSettingsMenuItem"){this.menuButton_.focus();}}};_proto.handleKeyDown=function handleKeyDown(event){if(import_keycode["default"].isEventKey(event,"Left")||import_keycode["default"].isEventKey(event,"Down")){event.preventDefault();event.stopPropagation();this.stepForward();}else if(import_keycode["default"].isEventKey(event,"Right")||import_keycode["default"].isEventKey(event,"Up")){event.preventDefault();event.stopPropagation();this.stepBack();}};_proto.stepForward=function stepForward(){var stepChild=0;if(this.focusedChild_!==void 0){stepChild=this.focusedChild_+1;}this.focus(stepChild);};_proto.stepBack=function stepBack(){var stepChild=0;if(this.focusedChild_!==void 0){stepChild=this.focusedChild_-1;}this.focus(stepChild);};_proto.focus=function focus(item){if(item===void 0){item=0;}var children=this.children().slice();var haveTitle=children.length&&children[0].hasClass("vjs-menu-title");if(haveTitle){children.shift();}if(children.length>0){if(item<0){item=0;}else if(item>=children.length){item=children.length-1;}this.focusedChild_=item;children[item].el_.focus();}};return Menu2;}(Component$1);Component$1.registerComponent("Menu",Menu);var MenuButton=/* @__PURE__ */function(_Component){_inheritsLoose3(MenuButton2,_Component);function MenuButton2(player2,options){var _this;if(options===void 0){options={};}_this=_Component.call(this,player2,options)||this;_this.menuButton_=new Button(player2,options);_this.menuButton_.controlText(_this.controlText_);_this.menuButton_.el_.setAttribute("aria-haspopup","true");var buttonClass=Button.prototype.buildCSSClass();_this.menuButton_.el_.className=_this.buildCSSClass()+" "+buttonClass;_this.menuButton_.removeClass("vjs-control");_this.addChild(_this.menuButton_);_this.update();_this.enabled_=true;var handleClick=function handleClick2(e){return _this.handleClick(e);};_this.handleMenuKeyUp_=function(e){return _this.handleMenuKeyUp(e);};_this.on(_this.menuButton_,"tap",handleClick);_this.on(_this.menuButton_,"click",handleClick);_this.on(_this.menuButton_,"keydown",function(e){return _this.handleKeyDown(e);});_this.on(_this.menuButton_,"mouseenter",function(){_this.addClass("vjs-hover");_this.menu.show();on(import_document["default"],"keyup",_this.handleMenuKeyUp_);});_this.on("mouseleave",function(e){return _this.handleMouseLeave(e);});_this.on("keydown",function(e){return _this.handleSubmenuKeyDown(e);});return _this;}var _proto=MenuButton2.prototype;_proto.update=function update2(){var menu=this.createMenu();if(this.menu){this.menu.dispose();this.removeChild(this.menu);}this.menu=menu;this.addChild(menu);this.buttonPressed_=false;this.menuButton_.el_.setAttribute("aria-expanded","false");if(this.items&&this.items.length<=this.hideThreshold_){this.hide();this.menu.contentEl_.removeAttribute("role");}else{this.show();this.menu.contentEl_.setAttribute("role","menu");}};_proto.createMenu=function createMenu(){var menu=new Menu(this.player_,{menuButton:this});this.hideThreshold_=0;if(this.options_.title){var titleEl=createEl("li",{className:"vjs-menu-title",textContent:toTitleCase$1(this.options_.title),tabIndex:-1});var titleComponent=new Component$1(this.player_,{el:titleEl});menu.addItem(titleComponent);}this.items=this.createItems();if(this.items){for(var i=0;i<this.items.length;i++){menu.addItem(this.items[i]);}}return menu;};_proto.createItems=function createItems(){};_proto.createEl=function createEl2(){return _Component.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{});};_proto.buildWrapperCSSClass=function buildWrapperCSSClass(){var menuButtonClass="vjs-menu-button";if(this.options_.inline===true){menuButtonClass+="-inline";}else{menuButtonClass+="-popup";}var buttonClass=Button.prototype.buildCSSClass();return"vjs-menu-button "+menuButtonClass+" "+buttonClass+" "+_Component.prototype.buildCSSClass.call(this);};_proto.buildCSSClass=function buildCSSClass(){var menuButtonClass="vjs-menu-button";if(this.options_.inline===true){menuButtonClass+="-inline";}else{menuButtonClass+="-popup";}return"vjs-menu-button "+menuButtonClass+" "+_Component.prototype.buildCSSClass.call(this);};_proto.controlText=function controlText(text,el){if(el===void 0){el=this.menuButton_.el();}return this.menuButton_.controlText(text,el);};_proto.dispose=function dispose(){this.handleMouseLeave();_Component.prototype.dispose.call(this);};_proto.handleClick=function handleClick(event){if(this.buttonPressed_){this.unpressButton();}else{this.pressButton();}};_proto.handleMouseLeave=function handleMouseLeave(event){this.removeClass("vjs-hover");off(import_document["default"],"keyup",this.handleMenuKeyUp_);};_proto.focus=function focus(){this.menuButton_.focus();};_proto.blur=function blur(){this.menuButton_.blur();};_proto.handleKeyDown=function handleKeyDown(event){if(import_keycode["default"].isEventKey(event,"Esc")||import_keycode["default"].isEventKey(event,"Tab")){if(this.buttonPressed_){this.unpressButton();}if(!import_keycode["default"].isEventKey(event,"Tab")){event.preventDefault();this.menuButton_.focus();}}else if(import_keycode["default"].isEventKey(event,"Up")||import_keycode["default"].isEventKey(event,"Down")){if(!this.buttonPressed_){event.preventDefault();this.pressButton();}}};_proto.handleMenuKeyUp=function handleMenuKeyUp(event){if(import_keycode["default"].isEventKey(event,"Esc")||import_keycode["default"].isEventKey(event,"Tab")){this.removeClass("vjs-hover");}};_proto.handleSubmenuKeyPress=function handleSubmenuKeyPress(event){this.handleSubmenuKeyDown(event);};_proto.handleSubmenuKeyDown=function handleSubmenuKeyDown(event){if(import_keycode["default"].isEventKey(event,"Esc")||import_keycode["default"].isEventKey(event,"Tab")){if(this.buttonPressed_){this.unpressButton();}if(!import_keycode["default"].isEventKey(event,"Tab")){event.preventDefault();this.menuButton_.focus();}}};_proto.pressButton=function pressButton(){if(this.enabled_){this.buttonPressed_=true;this.menu.show();this.menu.lockShowing();this.menuButton_.el_.setAttribute("aria-expanded","true");if(IS_IOS&&isInFrame()){return;}this.menu.focus();}};_proto.unpressButton=function unpressButton(){if(this.enabled_){this.buttonPressed_=false;this.menu.unlockShowing();this.menu.hide();this.menuButton_.el_.setAttribute("aria-expanded","false");}};_proto.disable=function disable(){this.unpressButton();this.enabled_=false;this.addClass("vjs-disabled");this.menuButton_.disable();};_proto.enable=function enable(){this.enabled_=true;this.removeClass("vjs-disabled");this.menuButton_.enable();};return MenuButton2;}(Component$1);Component$1.registerComponent("MenuButton",MenuButton);var TrackButton=/* @__PURE__ */function(_MenuButton){_inheritsLoose3(TrackButton2,_MenuButton);function TrackButton2(player2,options){var _this;var tracks=options.tracks;_this=_MenuButton.call(this,player2,options)||this;if(_this.items.length<=1){_this.hide();}if(!tracks){return _assertThisInitialized3(_this);}var updateHandler=bind(_assertThisInitialized3(_this),_this.update);tracks.addEventListener("removetrack",updateHandler);tracks.addEventListener("addtrack",updateHandler);tracks.addEventListener("labelchange",updateHandler);_this.player_.on("ready",updateHandler);_this.player_.on("dispose",function(){tracks.removeEventListener("removetrack",updateHandler);tracks.removeEventListener("addtrack",updateHandler);tracks.removeEventListener("labelchange",updateHandler);});return _this;}return TrackButton2;}(MenuButton);Component$1.registerComponent("TrackButton",TrackButton);var MenuKeys=["Tab","Esc","Up","Down","Right","Left"];var MenuItem=/* @__PURE__ */function(_ClickableComponent){_inheritsLoose3(MenuItem2,_ClickableComponent);function MenuItem2(player2,options){var _this;_this=_ClickableComponent.call(this,player2,options)||this;_this.selectable=options.selectable;_this.isSelected_=options.selected||false;_this.multiSelectable=options.multiSelectable;_this.selected(_this.isSelected_);if(_this.selectable){if(_this.multiSelectable){_this.el_.setAttribute("role","menuitemcheckbox");}else{_this.el_.setAttribute("role","menuitemradio");}}else{_this.el_.setAttribute("role","menuitem");}return _this;}var _proto=MenuItem2.prototype;_proto.createEl=function createEl$1(type2,props,attrs){this.nonIconControl=true;var el=_ClickableComponent.prototype.createEl.call(this,"li",assign({className:"vjs-menu-item",tabIndex:-1},props),attrs);el.replaceChild(createEl("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)}),el.querySelector(".vjs-icon-placeholder"));return el;};_proto.handleKeyDown=function handleKeyDown(event){if(!MenuKeys.some(function(key){return import_keycode["default"].isEventKey(event,key);})){_ClickableComponent.prototype.handleKeyDown.call(this,event);}};_proto.handleClick=function handleClick(event){this.selected(true);};_proto.selected=function selected(_selected){if(this.selectable){if(_selected){this.addClass("vjs-selected");this.el_.setAttribute("aria-checked","true");this.controlText(", selected");this.isSelected_=true;}else{this.removeClass("vjs-selected");this.el_.setAttribute("aria-checked","false");this.controlText("");this.isSelected_=false;}}};return MenuItem2;}(ClickableComponent);Component$1.registerComponent("MenuItem",MenuItem);var TextTrackMenuItem=/* @__PURE__ */function(_MenuItem){_inheritsLoose3(TextTrackMenuItem2,_MenuItem);function TextTrackMenuItem2(player2,options){var _this;var track=options.track;var tracks=player2.textTracks();options.label=track.label||track.language||"Unknown";options.selected=track.mode==="showing";_this=_MenuItem.call(this,player2,options)||this;_this.track=track;_this.kinds=(options.kinds||[options.kind||_this.track.kind]).filter(Boolean);var changeHandler=function changeHandler2(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this.handleTracksChange.apply(_assertThisInitialized3(_this),args);};var selectedLanguageChangeHandler=function selectedLanguageChangeHandler2(){for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2];}_this.handleSelectedLanguageChange.apply(_assertThisInitialized3(_this),args);};player2.on(["loadstart","texttrackchange"],changeHandler);tracks.addEventListener("change",changeHandler);tracks.addEventListener("selectedlanguagechange",selectedLanguageChangeHandler);_this.on("dispose",function(){player2.off(["loadstart","texttrackchange"],changeHandler);tracks.removeEventListener("change",changeHandler);tracks.removeEventListener("selectedlanguagechange",selectedLanguageChangeHandler);});if(tracks.onchange===void 0){var event;_this.on(["tap","click"],function(){if(_typeof(import_window6["default"].Event)!=="object"){try{event=new import_window6["default"].Event("change");}catch(err){}}if(!event){event=import_document["default"].createEvent("Event");event.initEvent("change",true,true);}tracks.dispatchEvent(event);});}_this.handleTracksChange();return _this;}var _proto=TextTrackMenuItem2.prototype;_proto.handleClick=function handleClick(event){var referenceTrack=this.track;var tracks=this.player_.textTracks();_MenuItem.prototype.handleClick.call(this,event);if(!tracks){return;}for(var i=0;i<tracks.length;i++){var track=tracks[i];if(this.kinds.indexOf(track.kind)===-1){continue;}if(track===referenceTrack){if(track.mode!=="showing"){track.mode="showing";}}else if(track.mode!=="disabled"){track.mode="disabled";}}};_proto.handleTracksChange=function handleTracksChange(event){var shouldBeSelected=this.track.mode==="showing";if(shouldBeSelected!==this.isSelected_){this.selected(shouldBeSelected);}};_proto.handleSelectedLanguageChange=function handleSelectedLanguageChange(event){if(this.track.mode==="showing"){var selectedLanguage=this.player_.cache_.selectedLanguage;if(selectedLanguage&&selectedLanguage.enabled&&selectedLanguage.language===this.track.language&&selectedLanguage.kind!==this.track.kind){return;}this.player_.cache_.selectedLanguage={enabled:true,language:this.track.language,kind:this.track.kind};}};_proto.dispose=function dispose(){this.track=null;_MenuItem.prototype.dispose.call(this);};return TextTrackMenuItem2;}(MenuItem);Component$1.registerComponent("TextTrackMenuItem",TextTrackMenuItem);var OffTextTrackMenuItem=/* @__PURE__ */function(_TextTrackMenuItem){_inheritsLoose3(OffTextTrackMenuItem2,_TextTrackMenuItem);function OffTextTrackMenuItem2(player2,options){options.track={player:player2,kind:options.kind,kinds:options.kinds,"default":false,mode:"disabled"};if(!options.kinds){options.kinds=[options.kind];}if(options.label){options.track.label=options.label;}else{options.track.label=options.kinds.join(" and ")+" off";}options.selectable=true;options.multiSelectable=false;return _TextTrackMenuItem.call(this,player2,options)||this;}var _proto=OffTextTrackMenuItem2.prototype;_proto.handleTracksChange=function handleTracksChange(event){var tracks=this.player().textTracks();var shouldBeSelected=true;for(var i=0,l=tracks.length;i<l;i++){var track=tracks[i];if(this.options_.kinds.indexOf(track.kind)>-1&&track.mode==="showing"){shouldBeSelected=false;break;}}if(shouldBeSelected!==this.isSelected_){this.selected(shouldBeSelected);}};_proto.handleSelectedLanguageChange=function handleSelectedLanguageChange(event){var tracks=this.player().textTracks();var allHidden=true;for(var i=0,l=tracks.length;i<l;i++){var track=tracks[i];if(["captions","descriptions","subtitles"].indexOf(track.kind)>-1&&track.mode==="showing"){allHidden=false;break;}}if(allHidden){this.player_.cache_.selectedLanguage={enabled:false};}};return OffTextTrackMenuItem2;}(TextTrackMenuItem);Component$1.registerComponent("OffTextTrackMenuItem",OffTextTrackMenuItem);var TextTrackButton=/* @__PURE__ */function(_TrackButton){_inheritsLoose3(TextTrackButton2,_TrackButton);function TextTrackButton2(player2,options){if(options===void 0){options={};}options.tracks=player2.textTracks();return _TrackButton.call(this,player2,options)||this;}var _proto=TextTrackButton2.prototype;_proto.createItems=function createItems(items,TrackMenuItem){if(items===void 0){items=[];}if(TrackMenuItem===void 0){TrackMenuItem=TextTrackMenuItem;}var label;if(this.label_){label=this.label_+" off";}items.push(new OffTextTrackMenuItem(this.player_,{kinds:this.kinds_,kind:this.kind_,label:label}));this.hideThreshold_+=1;var tracks=this.player_.textTracks();if(!Array.isArray(this.kinds_)){this.kinds_=[this.kind_];}for(var i=0;i<tracks.length;i++){var track=tracks[i];if(this.kinds_.indexOf(track.kind)>-1){var item=new TrackMenuItem(this.player_,{track:track,kinds:this.kinds_,kind:this.kind_,selectable:true,multiSelectable:false});item.addClass("vjs-"+track.kind+"-menu-item");items.push(item);}}return items;};return TextTrackButton2;}(TrackButton);Component$1.registerComponent("TextTrackButton",TextTrackButton);var ChaptersTrackMenuItem=/* @__PURE__ */function(_MenuItem){_inheritsLoose3(ChaptersTrackMenuItem2,_MenuItem);function ChaptersTrackMenuItem2(player2,options){var _this;var track=options.track;var cue=options.cue;var currentTime=player2.currentTime();options.selectable=true;options.multiSelectable=false;options.label=cue.text;options.selected=cue.startTime<=currentTime&&currentTime<cue.endTime;_this=_MenuItem.call(this,player2,options)||this;_this.track=track;_this.cue=cue;return _this;}var _proto=ChaptersTrackMenuItem2.prototype;_proto.handleClick=function handleClick(event){_MenuItem.prototype.handleClick.call(this);this.player_.currentTime(this.cue.startTime);};return ChaptersTrackMenuItem2;}(MenuItem);Component$1.registerComponent("ChaptersTrackMenuItem",ChaptersTrackMenuItem);var ChaptersButton=/* @__PURE__ */function(_TextTrackButton){_inheritsLoose3(ChaptersButton2,_TextTrackButton);function ChaptersButton2(player2,options,ready){var _this;_this=_TextTrackButton.call(this,player2,options,ready)||this;_this.selectCurrentItem_=function(){_this.items.forEach(function(item){item.selected(_this.track_.activeCues[0]===item.cue);});};return _this;}var _proto=ChaptersButton2.prototype;_proto.buildCSSClass=function buildCSSClass(){return"vjs-chapters-button "+_TextTrackButton.prototype.buildCSSClass.call(this);};_proto.buildWrapperCSSClass=function buildWrapperCSSClass(){return"vjs-chapters-button "+_TextTrackButton.prototype.buildWrapperCSSClass.call(this);};_proto.update=function update2(event){if(event&&event.track&&event.track.kind!=="chapters"){return;}var track=this.findChaptersTrack();if(track!==this.track_){this.setTrack(track);_TextTrackButton.prototype.update.call(this);}else if(!this.items||track&&track.cues&&track.cues.length!==this.items.length){_TextTrackButton.prototype.update.call(this);}};_proto.setTrack=function setTrack(track){if(this.track_===track){return;}if(!this.updateHandler_){this.updateHandler_=this.update.bind(this);}if(this.track_){var remoteTextTrackEl=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);if(remoteTextTrackEl){remoteTextTrackEl.removeEventListener("load",this.updateHandler_);}this.track_.removeEventListener("cuechange",this.selectCurrentItem_);this.track_=null;}this.track_=track;if(this.track_){this.track_.mode="hidden";var _remoteTextTrackEl=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);if(_remoteTextTrackEl){_remoteTextTrackEl.addEventListener("load",this.updateHandler_);}this.track_.addEventListener("cuechange",this.selectCurrentItem_);}};_proto.findChaptersTrack=function findChaptersTrack(){var tracks=this.player_.textTracks()||[];for(var i=tracks.length-1;i>=0;i--){var track=tracks[i];if(track.kind===this.kind_){return track;}}};_proto.getMenuCaption=function getMenuCaption(){if(this.track_&&this.track_.label){return this.track_.label;}return this.localize(toTitleCase$1(this.kind_));};_proto.createMenu=function createMenu(){this.options_.title=this.getMenuCaption();return _TextTrackButton.prototype.createMenu.call(this);};_proto.createItems=function createItems(){var items=[];if(!this.track_){return items;}var cues=this.track_.cues;if(!cues){return items;}for(var i=0,l=cues.length;i<l;i++){var cue=cues[i];var mi=new ChaptersTrackMenuItem(this.player_,{track:this.track_,cue:cue});items.push(mi);}return items;};return ChaptersButton2;}(TextTrackButton);ChaptersButton.prototype.kind_="chapters";ChaptersButton.prototype.controlText_="Chapters";Component$1.registerComponent("ChaptersButton",ChaptersButton);var DescriptionsButton=/* @__PURE__ */function(_TextTrackButton){_inheritsLoose3(DescriptionsButton2,_TextTrackButton);function DescriptionsButton2(player2,options,ready){var _this;_this=_TextTrackButton.call(this,player2,options,ready)||this;var tracks=player2.textTracks();var changeHandler=bind(_assertThisInitialized3(_this),_this.handleTracksChange);tracks.addEventListener("change",changeHandler);_this.on("dispose",function(){tracks.removeEventListener("change",changeHandler);});return _this;}var _proto=DescriptionsButton2.prototype;_proto.handleTracksChange=function handleTracksChange(event){var tracks=this.player().textTracks();var disabled=false;for(var i=0,l=tracks.length;i<l;i++){var track=tracks[i];if(track.kind!==this.kind_&&track.mode==="showing"){disabled=true;break;}}if(disabled){this.disable();}else{this.enable();}};_proto.buildCSSClass=function buildCSSClass(){return"vjs-descriptions-button "+_TextTrackButton.prototype.buildCSSClass.call(this);};_proto.buildWrapperCSSClass=function buildWrapperCSSClass(){return"vjs-descriptions-button "+_TextTrackButton.prototype.buildWrapperCSSClass.call(this);};return DescriptionsButton2;}(TextTrackButton);DescriptionsButton.prototype.kind_="descriptions";DescriptionsButton.prototype.controlText_="Descriptions";Component$1.registerComponent("DescriptionsButton",DescriptionsButton);var SubtitlesButton=/* @__PURE__ */function(_TextTrackButton){_inheritsLoose3(SubtitlesButton2,_TextTrackButton);function SubtitlesButton2(player2,options,ready){return _TextTrackButton.call(this,player2,options,ready)||this;}var _proto=SubtitlesButton2.prototype;_proto.buildCSSClass=function buildCSSClass(){return"vjs-subtitles-button "+_TextTrackButton.prototype.buildCSSClass.call(this);};_proto.buildWrapperCSSClass=function buildWrapperCSSClass(){return"vjs-subtitles-button "+_TextTrackButton.prototype.buildWrapperCSSClass.call(this);};return SubtitlesButton2;}(TextTrackButton);SubtitlesButton.prototype.kind_="subtitles";SubtitlesButton.prototype.controlText_="Subtitles";Component$1.registerComponent("SubtitlesButton",SubtitlesButton);var CaptionSettingsMenuItem=/* @__PURE__ */function(_TextTrackMenuItem){_inheritsLoose3(CaptionSettingsMenuItem2,_TextTrackMenuItem);function CaptionSettingsMenuItem2(player2,options){var _this;options.track={player:player2,kind:options.kind,label:options.kind+" settings",selectable:false,"default":false,mode:"disabled"};options.selectable=false;options.name="CaptionSettingsMenuItem";_this=_TextTrackMenuItem.call(this,player2,options)||this;_this.addClass("vjs-texttrack-settings");_this.controlText(", opens "+options.kind+" settings dialog");return _this;}var _proto=CaptionSettingsMenuItem2.prototype;_proto.handleClick=function handleClick(event){this.player().getChild("textTrackSettings").open();};return CaptionSettingsMenuItem2;}(TextTrackMenuItem);Component$1.registerComponent("CaptionSettingsMenuItem",CaptionSettingsMenuItem);var CaptionsButton=/* @__PURE__ */function(_TextTrackButton){_inheritsLoose3(CaptionsButton2,_TextTrackButton);function CaptionsButton2(player2,options,ready){return _TextTrackButton.call(this,player2,options,ready)||this;}var _proto=CaptionsButton2.prototype;_proto.buildCSSClass=function buildCSSClass(){return"vjs-captions-button "+_TextTrackButton.prototype.buildCSSClass.call(this);};_proto.buildWrapperCSSClass=function buildWrapperCSSClass(){return"vjs-captions-button "+_TextTrackButton.prototype.buildWrapperCSSClass.call(this);};_proto.createItems=function createItems(){var items=[];if(!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")){items.push(new CaptionSettingsMenuItem(this.player_,{kind:this.kind_}));this.hideThreshold_+=1;}return _TextTrackButton.prototype.createItems.call(this,items);};return CaptionsButton2;}(TextTrackButton);CaptionsButton.prototype.kind_="captions";CaptionsButton.prototype.controlText_="Captions";Component$1.registerComponent("CaptionsButton",CaptionsButton);var SubsCapsMenuItem=/* @__PURE__ */function(_TextTrackMenuItem){_inheritsLoose3(SubsCapsMenuItem2,_TextTrackMenuItem);function SubsCapsMenuItem2(){return _TextTrackMenuItem.apply(this,arguments)||this;}var _proto=SubsCapsMenuItem2.prototype;_proto.createEl=function createEl$1(type2,props,attrs){var el=_TextTrackMenuItem.prototype.createEl.call(this,type2,props,attrs);var parentSpan=el.querySelector(".vjs-menu-item-text");if(this.options_.track.kind==="captions"){parentSpan.appendChild(createEl("span",{className:"vjs-icon-placeholder"},{"aria-hidden":true}));parentSpan.appendChild(createEl("span",{className:"vjs-control-text",textContent:" "+this.localize("Captions")}));}return el;};return SubsCapsMenuItem2;}(TextTrackMenuItem);Component$1.registerComponent("SubsCapsMenuItem",SubsCapsMenuItem);var SubsCapsButton=/* @__PURE__ */function(_TextTrackButton){_inheritsLoose3(SubsCapsButton2,_TextTrackButton);function SubsCapsButton2(player2,options){var _this;if(options===void 0){options={};}_this=_TextTrackButton.call(this,player2,options)||this;_this.label_="subtitles";if(["en","en-us","en-ca","fr-ca"].indexOf(_this.player_.language_)>-1){_this.label_="captions";}_this.menuButton_.controlText(toTitleCase$1(_this.label_));return _this;}var _proto=SubsCapsButton2.prototype;_proto.buildCSSClass=function buildCSSClass(){return"vjs-subs-caps-button "+_TextTrackButton.prototype.buildCSSClass.call(this);};_proto.buildWrapperCSSClass=function buildWrapperCSSClass(){return"vjs-subs-caps-button "+_TextTrackButton.prototype.buildWrapperCSSClass.call(this);};_proto.createItems=function createItems(){var items=[];if(!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")){items.push(new CaptionSettingsMenuItem(this.player_,{kind:this.label_}));this.hideThreshold_+=1;}items=_TextTrackButton.prototype.createItems.call(this,items,SubsCapsMenuItem);return items;};return SubsCapsButton2;}(TextTrackButton);SubsCapsButton.prototype.kinds_=["captions","subtitles"];SubsCapsButton.prototype.controlText_="Subtitles";Component$1.registerComponent("SubsCapsButton",SubsCapsButton);var AudioTrackMenuItem=/* @__PURE__ */function(_MenuItem){_inheritsLoose3(AudioTrackMenuItem2,_MenuItem);function AudioTrackMenuItem2(player2,options){var _this;var track=options.track;var tracks=player2.audioTracks();options.label=track.label||track.language||"Unknown";options.selected=track.enabled;_this=_MenuItem.call(this,player2,options)||this;_this.track=track;_this.addClass("vjs-"+track.kind+"-menu-item");var changeHandler=function changeHandler2(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this.handleTracksChange.apply(_assertThisInitialized3(_this),args);};tracks.addEventListener("change",changeHandler);_this.on("dispose",function(){tracks.removeEventListener("change",changeHandler);});return _this;}var _proto=AudioTrackMenuItem2.prototype;_proto.createEl=function createEl$1(type2,props,attrs){var el=_MenuItem.prototype.createEl.call(this,type2,props,attrs);var parentSpan=el.querySelector(".vjs-menu-item-text");if(this.options_.track.kind==="main-desc"){parentSpan.appendChild(createEl("span",{className:"vjs-icon-placeholder"},{"aria-hidden":true}));parentSpan.appendChild(createEl("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}));}return el;};_proto.handleClick=function handleClick(event){_MenuItem.prototype.handleClick.call(this,event);this.track.enabled=true;if(this.player_.tech_.featuresNativeAudioTracks){var tracks=this.player_.audioTracks();for(var i=0;i<tracks.length;i++){var track=tracks[i];if(track===this.track){continue;}track.enabled=track===this.track;}}};_proto.handleTracksChange=function handleTracksChange(event){this.selected(this.track.enabled);};return AudioTrackMenuItem2;}(MenuItem);Component$1.registerComponent("AudioTrackMenuItem",AudioTrackMenuItem);var AudioTrackButton=/* @__PURE__ */function(_TrackButton){_inheritsLoose3(AudioTrackButton2,_TrackButton);function AudioTrackButton2(player2,options){if(options===void 0){options={};}options.tracks=player2.audioTracks();return _TrackButton.call(this,player2,options)||this;}var _proto=AudioTrackButton2.prototype;_proto.buildCSSClass=function buildCSSClass(){return"vjs-audio-button "+_TrackButton.prototype.buildCSSClass.call(this);};_proto.buildWrapperCSSClass=function buildWrapperCSSClass(){return"vjs-audio-button "+_TrackButton.prototype.buildWrapperCSSClass.call(this);};_proto.createItems=function createItems(items){if(items===void 0){items=[];}this.hideThreshold_=1;var tracks=this.player_.audioTracks();for(var i=0;i<tracks.length;i++){var track=tracks[i];items.push(new AudioTrackMenuItem(this.player_,{track:track,selectable:true,multiSelectable:false}));}return items;};return AudioTrackButton2;}(TrackButton);AudioTrackButton.prototype.controlText_="Audio Track";Component$1.registerComponent("AudioTrackButton",AudioTrackButton);var PlaybackRateMenuItem=/* @__PURE__ */function(_MenuItem){_inheritsLoose3(PlaybackRateMenuItem2,_MenuItem);function PlaybackRateMenuItem2(player2,options){var _this;var label=options.rate;var rate=parseFloat(label,10);options.label=label;options.selected=rate===player2.playbackRate();options.selectable=true;options.multiSelectable=false;_this=_MenuItem.call(this,player2,options)||this;_this.label=label;_this.rate=rate;_this.on(player2,"ratechange",function(e){return _this.update(e);});return _this;}var _proto=PlaybackRateMenuItem2.prototype;_proto.handleClick=function handleClick(event){_MenuItem.prototype.handleClick.call(this);this.player().playbackRate(this.rate);};_proto.update=function update2(event){this.selected(this.player().playbackRate()===this.rate);};return PlaybackRateMenuItem2;}(MenuItem);PlaybackRateMenuItem.prototype.contentElType="button";Component$1.registerComponent("PlaybackRateMenuItem",PlaybackRateMenuItem);var PlaybackRateMenuButton=/* @__PURE__ */function(_MenuButton){_inheritsLoose3(PlaybackRateMenuButton2,_MenuButton);function PlaybackRateMenuButton2(player2,options){var _this;_this=_MenuButton.call(this,player2,options)||this;_this.menuButton_.el_.setAttribute("aria-describedby",_this.labelElId_);_this.updateVisibility();_this.updateLabel();_this.on(player2,"loadstart",function(e){return _this.updateVisibility(e);});_this.on(player2,"ratechange",function(e){return _this.updateLabel(e);});_this.on(player2,"playbackrateschange",function(e){return _this.handlePlaybackRateschange(e);});return _this;}var _proto=PlaybackRateMenuButton2.prototype;_proto.createEl=function createEl$1(){var el=_MenuButton.prototype.createEl.call(this);this.labelElId_="vjs-playback-rate-value-label-"+this.id_;this.labelEl_=createEl("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"});el.appendChild(this.labelEl_);return el;};_proto.dispose=function dispose(){this.labelEl_=null;_MenuButton.prototype.dispose.call(this);};_proto.buildCSSClass=function buildCSSClass(){return"vjs-playback-rate "+_MenuButton.prototype.buildCSSClass.call(this);};_proto.buildWrapperCSSClass=function buildWrapperCSSClass(){return"vjs-playback-rate "+_MenuButton.prototype.buildWrapperCSSClass.call(this);};_proto.createItems=function createItems(){var rates=this.playbackRates();var items=[];for(var i=rates.length-1;i>=0;i--){items.push(new PlaybackRateMenuItem(this.player(),{rate:rates[i]+"x"}));}return items;};_proto.updateARIAAttributes=function updateARIAAttributes(){this.el().setAttribute("aria-valuenow",this.player().playbackRate());};_proto.handleClick=function handleClick(event){var currentRate=this.player().playbackRate();var rates=this.playbackRates();var currentIndex=rates.indexOf(currentRate);var newIndex=(currentIndex+1)%rates.length;this.player().playbackRate(rates[newIndex]);};_proto.handlePlaybackRateschange=function handlePlaybackRateschange(event){this.update();};_proto.playbackRates=function playbackRates(){var player2=this.player();return player2.playbackRates&&player2.playbackRates()||[];};_proto.playbackRateSupported=function playbackRateSupported(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0;};_proto.updateVisibility=function updateVisibility(event){if(this.playbackRateSupported()){this.removeClass("vjs-hidden");}else{this.addClass("vjs-hidden");}};_proto.updateLabel=function updateLabel(event){if(this.playbackRateSupported()){this.labelEl_.textContent=this.player().playbackRate()+"x";}};return PlaybackRateMenuButton2;}(MenuButton);PlaybackRateMenuButton.prototype.controlText_="Playback Rate";Component$1.registerComponent("PlaybackRateMenuButton",PlaybackRateMenuButton);var Spacer=/* @__PURE__ */function(_Component){_inheritsLoose3(Spacer2,_Component);function Spacer2(){return _Component.apply(this,arguments)||this;}var _proto=Spacer2.prototype;_proto.buildCSSClass=function buildCSSClass(){return"vjs-spacer "+_Component.prototype.buildCSSClass.call(this);};_proto.createEl=function createEl2(tag,props,attributes){if(tag===void 0){tag="div";}if(props===void 0){props={};}if(attributes===void 0){attributes={};}if(!props.className){props.className=this.buildCSSClass();}return _Component.prototype.createEl.call(this,tag,props,attributes);};return Spacer2;}(Component$1);Component$1.registerComponent("Spacer",Spacer);var CustomControlSpacer=/* @__PURE__ */function(_Spacer){_inheritsLoose3(CustomControlSpacer2,_Spacer);function CustomControlSpacer2(){return _Spacer.apply(this,arguments)||this;}var _proto=CustomControlSpacer2.prototype;_proto.buildCSSClass=function buildCSSClass(){return"vjs-custom-control-spacer "+_Spacer.prototype.buildCSSClass.call(this);};_proto.createEl=function createEl2(){return _Spacer.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),textContent:"\xA0"});};return CustomControlSpacer2;}(Spacer);Component$1.registerComponent("CustomControlSpacer",CustomControlSpacer);var ControlBar=/* @__PURE__ */function(_Component){_inheritsLoose3(ControlBar2,_Component);function ControlBar2(){return _Component.apply(this,arguments)||this;}var _proto=ControlBar2.prototype;_proto.createEl=function createEl2(){return _Component.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"});};return ControlBar2;}(Component$1);ControlBar.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]};if("exitPictureInPicture"in import_document["default"]){ControlBar.prototype.options_.children.splice(ControlBar.prototype.options_.children.length-1,0,"pictureInPictureToggle");}Component$1.registerComponent("ControlBar",ControlBar);var ErrorDisplay=/* @__PURE__ */function(_ModalDialog){_inheritsLoose3(ErrorDisplay2,_ModalDialog);function ErrorDisplay2(player2,options){var _this;_this=_ModalDialog.call(this,player2,options)||this;_this.on(player2,"error",function(e){return _this.open(e);});return _this;}var _proto=ErrorDisplay2.prototype;_proto.buildCSSClass=function buildCSSClass(){return"vjs-error-display "+_ModalDialog.prototype.buildCSSClass.call(this);};_proto.content=function content(){var error=this.player().error();return error?this.localize(error.message):"";};return ErrorDisplay2;}(ModalDialog);ErrorDisplay.prototype.options_=_extends({},ModalDialog.prototype.options_,{pauseOnOpen:false,fillAlways:true,temporary:false,uncloseable:true});Component$1.registerComponent("ErrorDisplay",ErrorDisplay);var LOCAL_STORAGE_KEY$1="vjs-text-track-settings";var COLOR_BLACK=["#000","Black"];var COLOR_BLUE=["#00F","Blue"];var COLOR_CYAN=["#0FF","Cyan"];var COLOR_GREEN=["#0F0","Green"];var COLOR_MAGENTA=["#F0F","Magenta"];var COLOR_RED=["#F00","Red"];var COLOR_WHITE=["#FFF","White"];var COLOR_YELLOW=["#FF0","Yellow"];var OPACITY_OPAQUE=["1","Opaque"];var OPACITY_SEMI=["0.5","Semi-Transparent"];var OPACITY_TRANS=["0","Transparent"];var selectConfigs={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[COLOR_BLACK,COLOR_WHITE,COLOR_RED,COLOR_GREEN,COLOR_BLUE,COLOR_YELLOW,COLOR_MAGENTA,COLOR_CYAN]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[OPACITY_OPAQUE,OPACITY_SEMI,OPACITY_TRANS]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[COLOR_WHITE,COLOR_BLACK,COLOR_RED,COLOR_GREEN,COLOR_BLUE,COLOR_YELLOW,COLOR_MAGENTA,COLOR_CYAN]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],"default":2,parser:function parser5(v){return v==="1.00"?null:Number(v);}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[OPACITY_OPAQUE,OPACITY_SEMI]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[OPACITY_TRANS,OPACITY_SEMI,OPACITY_OPAQUE]}};selectConfigs.windowColor.options=selectConfigs.backgroundColor.options;function parseOptionValue(value,parser6){if(parser6){value=parser6(value);}if(value&&value!=="none"){return value;}}function getSelectedOptionValue(el,parser6){var value=el.options[el.options.selectedIndex].value;return parseOptionValue(value,parser6);}function setSelectedOption(el,value,parser6){if(!value){return;}for(var i=0;i<el.options.length;i++){if(parseOptionValue(el.options[i].value,parser6)===value){el.selectedIndex=i;break;}}}var TextTrackSettings=/* @__PURE__ */function(_ModalDialog){_inheritsLoose3(TextTrackSettings2,_ModalDialog);function TextTrackSettings2(player2,options){var _this;options.temporary=false;_this=_ModalDialog.call(this,player2,options)||this;_this.updateDisplay=_this.updateDisplay.bind(_assertThisInitialized3(_this));_this.fill();_this.hasBeenOpened_=_this.hasBeenFilled_=true;_this.endDialog=createEl("p",{className:"vjs-control-text",textContent:_this.localize("End of dialog window.")});_this.el().appendChild(_this.endDialog);_this.setDefaults();if(options.persistTextTrackSettings===void 0){_this.options_.persistTextTrackSettings=_this.options_.playerOptions.persistTextTrackSettings;}_this.on(_this.$(".vjs-done-button"),"click",function(){_this.saveSettings();_this.close();});_this.on(_this.$(".vjs-default-button"),"click",function(){_this.setDefaults();_this.updateDisplay();});each(selectConfigs,function(config3){_this.on(_this.$(config3.selector),"change",_this.updateDisplay);});if(_this.options_.persistTextTrackSettings){_this.restoreSettings();}return _this;}var _proto=TextTrackSettings2.prototype;_proto.dispose=function dispose(){this.endDialog=null;_ModalDialog.prototype.dispose.call(this);};_proto.createElSelect_=function createElSelect_(key,legendId,type2){var _this2=this;if(legendId===void 0){legendId="";}if(type2===void 0){type2="label";}var config3=selectConfigs[key];var id=config3.id.replace("%s",this.id_);var selectLabelledbyIds=[legendId,id].join(" ").trim();return["<"+type2+' id="'+id+'" class="'+(type2==="label"?"vjs-label":"")+'">',this.localize(config3.label),"</"+type2+">",'<select aria-labelledby="'+selectLabelledbyIds+'">'].concat(config3.options.map(function(o){var optionId=id+"-"+o[1].replace(/\W+/g,"");return['<option id="'+optionId+'" value="'+o[0]+'" ','aria-labelledby="'+selectLabelledbyIds+" "+optionId+'">',_this2.localize(o[1]),"</option>"].join("");})).concat("</select>").join("");};_proto.createElFgColor_=function createElFgColor_(){var legendId="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+legendId+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",legendId),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",legendId),"</span>","</fieldset>"].join("");};_proto.createElBgColor_=function createElBgColor_(){var legendId="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+legendId+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",legendId),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",legendId),"</span>","</fieldset>"].join("");};_proto.createElWinColor_=function createElWinColor_(){var legendId="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+legendId+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",legendId),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",legendId),"</span>","</fieldset>"].join("");};_proto.createElColors_=function createElColors_(){return createEl("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")});};_proto.createElFont_=function createElFont_(){return createEl("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")});};_proto.createElControls_=function createElControls_(){var defaultsDescription=this.localize("restore all settings to the default values");return createEl("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+defaultsDescription+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+defaultsDescription+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")});};_proto.content=function content(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()];};_proto.label=function label(){return this.localize("Caption Settings Dialog");};_proto.description=function description(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.");};_proto.buildCSSClass=function buildCSSClass(){return _ModalDialog.prototype.buildCSSClass.call(this)+" vjs-text-track-settings";};_proto.getValues=function getValues(){var _this3=this;return reduce(selectConfigs,function(accum,config3,key){var value=getSelectedOptionValue(_this3.$(config3.selector),config3.parser);if(value!==void 0){accum[key]=value;}return accum;},{});};_proto.setValues=function setValues(values3){var _this4=this;each(selectConfigs,function(config3,key){setSelectedOption(_this4.$(config3.selector),values3[key],config3.parser);});};_proto.setDefaults=function setDefaults(){var _this5=this;each(selectConfigs,function(config3){var index=config3.hasOwnProperty("default")?config3["default"]:0;_this5.$(config3.selector).selectedIndex=index;});};_proto.restoreSettings=function restoreSettings(){var values3;try{values3=JSON.parse(import_window6["default"].localStorage.getItem(LOCAL_STORAGE_KEY$1));}catch(err){log$1.warn(err);}if(values3){this.setValues(values3);}};_proto.saveSettings=function saveSettings(){if(!this.options_.persistTextTrackSettings){return;}var values3=this.getValues();try{if(Object.keys(values3).length){import_window6["default"].localStorage.setItem(LOCAL_STORAGE_KEY$1,JSON.stringify(values3));}else{import_window6["default"].localStorage.removeItem(LOCAL_STORAGE_KEY$1);}}catch(err){log$1.warn(err);}};_proto.updateDisplay=function updateDisplay(){var ttDisplay=this.player_.getChild("textTrackDisplay");if(ttDisplay){ttDisplay.updateDisplay();}};_proto.conditionalBlur_=function conditionalBlur_(){this.previouslyActiveEl_=null;var cb=this.player_.controlBar;var subsCapsBtn=cb&&cb.subsCapsButton;var ccBtn=cb&&cb.captionsButton;if(subsCapsBtn){subsCapsBtn.focus();}else if(ccBtn){ccBtn.focus();}};return TextTrackSettings2;}(ModalDialog);Component$1.registerComponent("TextTrackSettings",TextTrackSettings);var ResizeManager=/* @__PURE__ */function(_Component){_inheritsLoose3(ResizeManager2,_Component);function ResizeManager2(player2,options){var _this;var RESIZE_OBSERVER_AVAILABLE=options.ResizeObserver||import_window6["default"].ResizeObserver;if(options.ResizeObserver===null){RESIZE_OBSERVER_AVAILABLE=false;}var options_=mergeOptions$3({createEl:!RESIZE_OBSERVER_AVAILABLE,reportTouchActivity:false},options);_this=_Component.call(this,player2,options_)||this;_this.ResizeObserver=options.ResizeObserver||import_window6["default"].ResizeObserver;_this.loadListener_=null;_this.resizeObserver_=null;_this.debouncedHandler_=debounce3(function(){_this.resizeHandler();},100,false,_assertThisInitialized3(_this));if(RESIZE_OBSERVER_AVAILABLE){_this.resizeObserver_=new _this.ResizeObserver(_this.debouncedHandler_);_this.resizeObserver_.observe(player2.el());}else{_this.loadListener_=function(){if(!_this.el_||!_this.el_.contentWindow){return;}var debouncedHandler_=_this.debouncedHandler_;var unloadListener_=_this.unloadListener_=function(){off(this,"resize",debouncedHandler_);off(this,"unload",unloadListener_);unloadListener_=null;};on(_this.el_.contentWindow,"unload",unloadListener_);on(_this.el_.contentWindow,"resize",debouncedHandler_);};_this.one("load",_this.loadListener_);}return _this;}var _proto=ResizeManager2.prototype;_proto.createEl=function createEl2(){return _Component.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1},{"aria-hidden":"true"});};_proto.resizeHandler=function resizeHandler2(){if(!this.player_||!this.player_.trigger){return;}this.player_.trigger("playerresize");};_proto.dispose=function dispose(){if(this.debouncedHandler_){this.debouncedHandler_.cancel();}if(this.resizeObserver_){if(this.player_.el()){this.resizeObserver_.unobserve(this.player_.el());}this.resizeObserver_.disconnect();}if(this.loadListener_){this.off("load",this.loadListener_);}if(this.el_&&this.el_.contentWindow&&this.unloadListener_){this.unloadListener_.call(this.el_.contentWindow);}this.ResizeObserver=null;this.resizeObserver=null;this.debouncedHandler_=null;this.loadListener_=null;_Component.prototype.dispose.call(this);};return ResizeManager2;}(Component$1);Component$1.registerComponent("ResizeManager",ResizeManager);var defaults2={trackingThreshold:20,liveTolerance:15};var LiveTracker=/* @__PURE__ */function(_Component){_inheritsLoose3(LiveTracker2,_Component);function LiveTracker2(player2,options){var _this;var options_=mergeOptions$3(defaults2,options,{createEl:false});_this=_Component.call(this,player2,options_)||this;_this.handleVisibilityChange_=function(e){return _this.handleVisibilityChange(e);};_this.trackLiveHandler_=function(){return _this.trackLive_();};_this.handlePlay_=function(e){return _this.handlePlay(e);};_this.handleFirstTimeupdate_=function(e){return _this.handleFirstTimeupdate(e);};_this.handleSeeked_=function(e){return _this.handleSeeked(e);};_this.seekToLiveEdge_=function(e){return _this.seekToLiveEdge(e);};_this.reset_();_this.on(_this.player_,"durationchange",function(e){return _this.handleDurationchange(e);});_this.on(_this.player_,"canplay",function(){return _this.toggleTracking();});if(IE_VERSION&&"hidden"in import_document["default"]&&"visibilityState"in import_document["default"]){_this.on(import_document["default"],"visibilitychange",_this.handleVisibilityChange_);}return _this;}var _proto=LiveTracker2.prototype;_proto.handleVisibilityChange=function handleVisibilityChange(){if(this.player_.duration()!==Infinity){return;}if(import_document["default"].hidden){this.stopTracking();}else{this.startTracking();}};_proto.trackLive_=function trackLive_(){var seekable3=this.player_.seekable();if(!seekable3||!seekable3.length){return;}var newTime=Number(import_window6["default"].performance.now().toFixed(4));var deltaTime=this.lastTime_===-1?0:(newTime-this.lastTime_)/1e3;this.lastTime_=newTime;this.pastSeekEnd_=this.pastSeekEnd()+deltaTime;var liveCurrentTime=this.liveCurrentTime();var currentTime=this.player_.currentTime();var isBehind=this.player_.paused()||this.seekedBehindLive_||Math.abs(liveCurrentTime-currentTime)>this.options_.liveTolerance;if(!this.timeupdateSeen_||liveCurrentTime===Infinity){isBehind=false;}if(isBehind!==this.behindLiveEdge_){this.behindLiveEdge_=isBehind;this.trigger("liveedgechange");}};_proto.handleDurationchange=function handleDurationchange(){this.toggleTracking();};_proto.toggleTracking=function toggleTracking(){if(this.player_.duration()===Infinity&&this.liveWindow()>=this.options_.trackingThreshold){if(this.player_.options_.liveui){this.player_.addClass("vjs-liveui");}this.startTracking();}else{this.player_.removeClass("vjs-liveui");this.stopTracking();}};_proto.startTracking=function startTracking(){if(this.isTracking()){return;}if(!this.timeupdateSeen_){this.timeupdateSeen_=this.player_.hasStarted();}this.trackingInterval_=this.setInterval(this.trackLiveHandler_,UPDATE_REFRESH_INTERVAL);this.trackLive_();this.on(this.player_,["play","pause"],this.trackLiveHandler_);if(!this.timeupdateSeen_){this.one(this.player_,"play",this.handlePlay_);this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_);}else{this.on(this.player_,"seeked",this.handleSeeked_);}};_proto.handleFirstTimeupdate=function handleFirstTimeupdate(){this.timeupdateSeen_=true;this.on(this.player_,"seeked",this.handleSeeked_);};_proto.handleSeeked=function handleSeeked(){var timeDiff=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&timeDiff>2;this.nextSeekedFromUser_=false;this.trackLive_();};_proto.handlePlay=function handlePlay(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_);};_proto.reset_=function reset_(){this.lastTime_=-1;this.pastSeekEnd_=0;this.lastSeekEnd_=-1;this.behindLiveEdge_=true;this.timeupdateSeen_=false;this.seekedBehindLive_=false;this.nextSeekedFromUser_=false;this.clearInterval(this.trackingInterval_);this.trackingInterval_=null;this.off(this.player_,["play","pause"],this.trackLiveHandler_);this.off(this.player_,"seeked",this.handleSeeked_);this.off(this.player_,"play",this.handlePlay_);this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_);this.off(this.player_,"timeupdate",this.seekToLiveEdge_);};_proto.nextSeekedFromUser=function nextSeekedFromUser(){this.nextSeekedFromUser_=true;};_proto.stopTracking=function stopTracking(){if(!this.isTracking()){return;}this.reset_();this.trigger("liveedgechange");};_proto.seekableEnd=function seekableEnd(){var seekable3=this.player_.seekable();var seekableEnds=[];var i=seekable3?seekable3.length:0;while(i--){seekableEnds.push(seekable3.end(i));}return seekableEnds.length?seekableEnds.sort()[seekableEnds.length-1]:Infinity;};_proto.seekableStart=function seekableStart(){var seekable3=this.player_.seekable();var seekableStarts=[];var i=seekable3?seekable3.length:0;while(i--){seekableStarts.push(seekable3.start(i));}return seekableStarts.length?seekableStarts.sort()[0]:0;};_proto.liveWindow=function liveWindow(){var liveCurrentTime=this.liveCurrentTime();if(liveCurrentTime===Infinity){return 0;}return liveCurrentTime-this.seekableStart();};_proto.isLive=function isLive(){return this.isTracking();};_proto.atLiveEdge=function atLiveEdge(){return!this.behindLiveEdge();};_proto.liveCurrentTime=function liveCurrentTime(){return this.pastSeekEnd()+this.seekableEnd();};_proto.pastSeekEnd=function pastSeekEnd(){var seekableEnd=this.seekableEnd();if(this.lastSeekEnd_!==-1&&seekableEnd!==this.lastSeekEnd_){this.pastSeekEnd_=0;}this.lastSeekEnd_=seekableEnd;return this.pastSeekEnd_;};_proto.behindLiveEdge=function behindLiveEdge(){return this.behindLiveEdge_;};_proto.isTracking=function isTracking(){return typeof this.trackingInterval_==="number";};_proto.seekToLiveEdge=function seekToLiveEdge(){this.seekedBehindLive_=false;if(this.atLiveEdge()){return;}this.nextSeekedFromUser_=false;this.player_.currentTime(this.liveCurrentTime());};_proto.dispose=function dispose(){this.off(import_document["default"],"visibilitychange",this.handleVisibilityChange_);this.stopTracking();_Component.prototype.dispose.call(this);};return LiveTracker2;}(Component$1);Component$1.registerComponent("LiveTracker",LiveTracker);var sourcesetLoad=function sourcesetLoad2(tech){var el=tech.el();if(el.hasAttribute("src")){tech.triggerSourceset(el.src);return true;}var sources=tech.$$("source");var srcUrls=[];var src="";if(!sources.length){return false;}for(var i=0;i<sources.length;i++){var url=sources[i].src;if(url&&srcUrls.indexOf(url)===-1){srcUrls.push(url);}}if(!srcUrls.length){return false;}if(srcUrls.length===1){src=srcUrls[0];}tech.triggerSourceset(src);return true;};var innerHTMLDescriptorPolyfill=Object.defineProperty({},"innerHTML",{get:function get2(){return this.cloneNode(true).innerHTML;},set:function set2(v){var dummy=import_document["default"].createElement(this.nodeName.toLowerCase());dummy.innerHTML=v;var docFrag=import_document["default"].createDocumentFragment();while(dummy.childNodes.length){docFrag.appendChild(dummy.childNodes[0]);}this.innerText="";import_window6["default"].Element.prototype.appendChild.call(this,docFrag);return this.innerHTML;}});var getDescriptor=function getDescriptor2(priority,prop){var descriptor={};for(var i=0;i<priority.length;i++){descriptor=Object.getOwnPropertyDescriptor(priority[i],prop);if(descriptor&&descriptor.set&&descriptor.get){break;}}descriptor.enumerable=true;descriptor.configurable=true;return descriptor;};var getInnerHTMLDescriptor=function getInnerHTMLDescriptor2(tech){return getDescriptor([tech.el(),import_window6["default"].HTMLMediaElement.prototype,import_window6["default"].Element.prototype,innerHTMLDescriptorPolyfill],"innerHTML");};var firstSourceWatch=function firstSourceWatch2(tech){var el=tech.el();if(el.resetSourceWatch_){return;}var old={};var innerDescriptor=getInnerHTMLDescriptor(tech);var appendWrapper=function appendWrapper2(appendFn){return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}var retval=appendFn.apply(el,args);sourcesetLoad(tech);return retval;};};["append","appendChild","insertAdjacentHTML"].forEach(function(k){if(!el[k]){return;}old[k]=el[k];el[k]=appendWrapper(old[k]);});Object.defineProperty(el,"innerHTML",mergeOptions$3(innerDescriptor,{set:appendWrapper(innerDescriptor.set)}));el.resetSourceWatch_=function(){el.resetSourceWatch_=null;Object.keys(old).forEach(function(k){el[k]=old[k];});Object.defineProperty(el,"innerHTML",innerDescriptor);};tech.one("sourceset",el.resetSourceWatch_);};var srcDescriptorPolyfill=Object.defineProperty({},"src",{get:function get3(){if(this.hasAttribute("src")){return getAbsoluteURL(import_window6["default"].Element.prototype.getAttribute.call(this,"src"));}return"";},set:function set3(v){import_window6["default"].Element.prototype.setAttribute.call(this,"src",v);return v;}});var getSrcDescriptor=function getSrcDescriptor2(tech){return getDescriptor([tech.el(),import_window6["default"].HTMLMediaElement.prototype,srcDescriptorPolyfill],"src");};var setupSourceset=function setupSourceset2(tech){if(!tech.featuresSourceset){return;}var el=tech.el();if(el.resetSourceset_){return;}var srcDescriptor=getSrcDescriptor(tech);var oldSetAttribute=el.setAttribute;var oldLoad=el.load;Object.defineProperty(el,"src",mergeOptions$3(srcDescriptor,{set:function set4(v){var retval=srcDescriptor.set.call(el,v);tech.triggerSourceset(el.src);return retval;}}));el.setAttribute=function(n,v){var retval=oldSetAttribute.call(el,n,v);if(/src/i.test(n)){tech.triggerSourceset(el.src);}return retval;};el.load=function(){var retval=oldLoad.call(el);if(!sourcesetLoad(tech)){tech.triggerSourceset("");firstSourceWatch(tech);}return retval;};if(el.currentSrc){tech.triggerSourceset(el.currentSrc);}else if(!sourcesetLoad(tech)){firstSourceWatch(tech);}el.resetSourceset_=function(){el.resetSourceset_=null;el.load=oldLoad;el.setAttribute=oldSetAttribute;Object.defineProperty(el,"src",srcDescriptor);if(el.resetSourceWatch_){el.resetSourceWatch_();}};};var defineLazyProperty=function defineLazyProperty2(obj,key,getValue,setter){if(setter===void 0){setter=true;}var set4=function set5(value){return Object.defineProperty(obj,key,{value:value,enumerable:true,writable:true});};var options={configurable:true,enumerable:true,get:function get7(){var value=getValue();set4(value);return value;}};if(setter){options.set=set4;}return Object.defineProperty(obj,key,options);};var Html5=/* @__PURE__ */function(_Tech){_inheritsLoose3(Html52,_Tech);function Html52(options,ready){var _this;_this=_Tech.call(this,options,ready)||this;var source=options.source;var crossoriginTracks=false;if(source&&(_this.el_.currentSrc!==source.src||options.tag&&options.tag.initNetworkState_===3)){_this.setSource(source);}else{_this.handleLateInit_(_this.el_);}if(options.enableSourceset){_this.setupSourcesetHandling_();}_this.isScrubbing_=false;if(_this.el_.hasChildNodes()){var nodes=_this.el_.childNodes;var nodesLength=nodes.length;var removeNodes=[];while(nodesLength--){var node=nodes[nodesLength];var nodeName=node.nodeName.toLowerCase();if(nodeName==="track"){if(!_this.featuresNativeTextTracks){removeNodes.push(node);}else{_this.remoteTextTrackEls().addTrackElement_(node);_this.remoteTextTracks().addTrack(node.track);_this.textTracks().addTrack(node.track);if(!crossoriginTracks&&!_this.el_.hasAttribute("crossorigin")&&isCrossOrigin(node.src)){crossoriginTracks=true;}}}}for(var i=0;i<removeNodes.length;i++){_this.el_.removeChild(removeNodes[i]);}}_this.proxyNativeTracks_();if(_this.featuresNativeTextTracks&&crossoriginTracks){log$1.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading.");}_this.restoreMetadataTracksInIOSNativePlayer_();if((TOUCH_ENABLED||IS_IPHONE||IS_NATIVE_ANDROID)&&options.nativeControlsForTouch===true){_this.setControls(true);}_this.proxyWebkitFullscreen_();_this.triggerReady();return _this;}var _proto=Html52.prototype;_proto.dispose=function dispose(){if(this.el_&&this.el_.resetSourceset_){this.el_.resetSourceset_();}Html52.disposeMediaElement(this.el_);this.options_=null;_Tech.prototype.dispose.call(this);};_proto.setupSourcesetHandling_=function setupSourcesetHandling_(){setupSourceset(this);};_proto.restoreMetadataTracksInIOSNativePlayer_=function restoreMetadataTracksInIOSNativePlayer_(){var textTracks=this.textTracks();var metadataTracksPreFullscreenState;var takeMetadataTrackSnapshot=function takeMetadataTrackSnapshot2(){metadataTracksPreFullscreenState=[];for(var i=0;i<textTracks.length;i++){var track=textTracks[i];if(track.kind==="metadata"){metadataTracksPreFullscreenState.push({track:track,storedMode:track.mode});}}};takeMetadataTrackSnapshot();textTracks.addEventListener("change",takeMetadataTrackSnapshot);this.on("dispose",function(){return textTracks.removeEventListener("change",takeMetadataTrackSnapshot);});var restoreTrackMode=function restoreTrackMode2(){for(var i=0;i<metadataTracksPreFullscreenState.length;i++){var storedTrack=metadataTracksPreFullscreenState[i];if(storedTrack.track.mode==="disabled"&&storedTrack.track.mode!==storedTrack.storedMode){storedTrack.track.mode=storedTrack.storedMode;}}textTracks.removeEventListener("change",restoreTrackMode2);};this.on("webkitbeginfullscreen",function(){textTracks.removeEventListener("change",takeMetadataTrackSnapshot);textTracks.removeEventListener("change",restoreTrackMode);textTracks.addEventListener("change",restoreTrackMode);});this.on("webkitendfullscreen",function(){textTracks.removeEventListener("change",takeMetadataTrackSnapshot);textTracks.addEventListener("change",takeMetadataTrackSnapshot);textTracks.removeEventListener("change",restoreTrackMode);});};_proto.overrideNative_=function overrideNative_(type2,override){var _this2=this;if(override!==this["featuresNative"+type2+"Tracks"]){return;}var lowerCaseType=type2.toLowerCase();if(this[lowerCaseType+"TracksListeners_"]){Object.keys(this[lowerCaseType+"TracksListeners_"]).forEach(function(eventName){var elTracks=_this2.el()[lowerCaseType+"Tracks"];elTracks.removeEventListener(eventName,_this2[lowerCaseType+"TracksListeners_"][eventName]);});}this["featuresNative"+type2+"Tracks"]=!override;this[lowerCaseType+"TracksListeners_"]=null;this.proxyNativeTracksForType_(lowerCaseType);};_proto.overrideNativeAudioTracks=function overrideNativeAudioTracks(override){this.overrideNative_("Audio",override);};_proto.overrideNativeVideoTracks=function overrideNativeVideoTracks(override){this.overrideNative_("Video",override);};_proto.proxyNativeTracksForType_=function proxyNativeTracksForType_(name){var _this3=this;var props=NORMAL[name];var elTracks=this.el()[props.getterName];var techTracks=this[props.getterName]();if(!this["featuresNative"+props.capitalName+"Tracks"]||!elTracks||!elTracks.addEventListener){return;}var listeners={change:function change(e){var event={type:"change",target:techTracks,currentTarget:techTracks,srcElement:techTracks};techTracks.trigger(event);if(name==="text"){_this3[REMOTE.remoteText.getterName]().trigger(event);}},addtrack:function addtrack(e){techTracks.addTrack(e.track);},removetrack:function removetrack(e){techTracks.removeTrack(e.track);}};var removeOldTracks=function removeOldTracks2(){var removeTracks=[];for(var i=0;i<techTracks.length;i++){var found=false;for(var j=0;j<elTracks.length;j++){if(elTracks[j]===techTracks[i]){found=true;break;}}if(!found){removeTracks.push(techTracks[i]);}}while(removeTracks.length){techTracks.removeTrack(removeTracks.shift());}};this[props.getterName+"Listeners_"]=listeners;Object.keys(listeners).forEach(function(eventName){var listener=listeners[eventName];elTracks.addEventListener(eventName,listener);_this3.on("dispose",function(e){return elTracks.removeEventListener(eventName,listener);});});this.on("loadstart",removeOldTracks);this.on("dispose",function(e){return _this3.off("loadstart",removeOldTracks);});};_proto.proxyNativeTracks_=function proxyNativeTracks_(){var _this4=this;NORMAL.names.forEach(function(name){_this4.proxyNativeTracksForType_(name);});};_proto.createEl=function createEl2(){var el=this.options_.tag;if(!el||!(this.options_.playerElIngest||this.movingMediaElementInDOM)){if(el){var clone=el.cloneNode(true);if(el.parentNode){el.parentNode.insertBefore(clone,el);}Html52.disposeMediaElement(el);el=clone;}else{el=import_document["default"].createElement("video");var tagAttributes=this.options_.tag&&getAttributes(this.options_.tag);var attributes=mergeOptions$3({},tagAttributes);if(!TOUCH_ENABLED||this.options_.nativeControlsForTouch!==true){delete attributes.controls;}setAttributes(el,assign(attributes,{id:this.options_.techId,"class":"vjs-tech"}));}el.playerId=this.options_.playerId;}if(typeof this.options_.preload!=="undefined"){setAttribute(el,"preload",this.options_.preload);}if(this.options_.disablePictureInPicture!==void 0){el.disablePictureInPicture=this.options_.disablePictureInPicture;}var settingsAttrs=["loop","muted","playsinline","autoplay"];for(var i=0;i<settingsAttrs.length;i++){var attr=settingsAttrs[i];var value=this.options_[attr];if(typeof value!=="undefined"){if(value){setAttribute(el,attr,attr);}else{removeAttribute(el,attr);}el[attr]=value;}}return el;};_proto.handleLateInit_=function handleLateInit_(el){if(el.networkState===0||el.networkState===3){return;}if(el.readyState===0){var loadstartFired=false;var setLoadstartFired=function setLoadstartFired2(){loadstartFired=true;};this.on("loadstart",setLoadstartFired);var triggerLoadstart=function triggerLoadstart2(){if(!loadstartFired){this.trigger("loadstart");}};this.on("loadedmetadata",triggerLoadstart);this.ready(function(){this.off("loadstart",setLoadstartFired);this.off("loadedmetadata",triggerLoadstart);if(!loadstartFired){this.trigger("loadstart");}});return;}var eventsToTrigger=["loadstart"];eventsToTrigger.push("loadedmetadata");if(el.readyState>=2){eventsToTrigger.push("loadeddata");}if(el.readyState>=3){eventsToTrigger.push("canplay");}if(el.readyState>=4){eventsToTrigger.push("canplaythrough");}this.ready(function(){eventsToTrigger.forEach(function(type2){this.trigger(type2);},this);});};_proto.setScrubbing=function setScrubbing(isScrubbing){this.isScrubbing_=isScrubbing;};_proto.scrubbing=function scrubbing(){return this.isScrubbing_;};_proto.setCurrentTime=function setCurrentTime(seconds){try{if(this.isScrubbing_&&this.el_.fastSeek&&IS_ANY_SAFARI){this.el_.fastSeek(seconds);}else{this.el_.currentTime=seconds;}}catch(e){log$1(e,"Video is not ready. (Video.js)");}};_proto.duration=function duration5(){var _this5=this;if(this.el_.duration===Infinity&&IS_ANDROID&&IS_CHROME&&this.el_.currentTime===0){var checkProgress=function checkProgress2(){if(_this5.el_.currentTime>0){if(_this5.el_.duration===Infinity){_this5.trigger("durationchange");}_this5.off("timeupdate",checkProgress2);}};this.on("timeupdate",checkProgress);return NaN;}return this.el_.duration||NaN;};_proto.width=function width2(){return this.el_.offsetWidth;};_proto.height=function height2(){return this.el_.offsetHeight;};_proto.proxyWebkitFullscreen_=function proxyWebkitFullscreen_(){var _this6=this;if(!("webkitDisplayingFullscreen"in this.el_)){return;}var endFn=function endFn2(){this.trigger("fullscreenchange",{isFullscreen:false});if(this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()){this.el_.controls=false;}};var beginFn=function beginFn2(){if("webkitPresentationMode"in this.el_&&this.el_.webkitPresentationMode!=="picture-in-picture"){this.one("webkitendfullscreen",endFn);this.trigger("fullscreenchange",{isFullscreen:true,nativeIOSFullscreen:true});}};this.on("webkitbeginfullscreen",beginFn);this.on("dispose",function(){_this6.off("webkitbeginfullscreen",beginFn);_this6.off("webkitendfullscreen",endFn);});};_proto.supportsFullScreen=function supportsFullScreen(){if(typeof this.el_.webkitEnterFullScreen==="function"){var userAgent=import_window6["default"].navigator&&import_window6["default"].navigator.userAgent||"";if(/Android/.test(userAgent)||!/Chrome|Mac OS X 10.5/.test(userAgent)){return true;}}return false;};_proto.enterFullScreen=function enterFullScreen(){var video=this.el_;if(video.paused&&video.networkState<=video.HAVE_METADATA){silencePromise(this.el_.play());this.setTimeout(function(){video.pause();try{video.webkitEnterFullScreen();}catch(e){this.trigger("fullscreenerror",e);}},0);}else{try{video.webkitEnterFullScreen();}catch(e){this.trigger("fullscreenerror",e);}}};_proto.exitFullScreen=function exitFullScreen(){if(!this.el_.webkitDisplayingFullscreen){this.trigger("fullscreenerror",new Error("The video is not fullscreen"));return;}this.el_.webkitExitFullScreen();};_proto.requestPictureInPicture=function requestPictureInPicture(){return this.el_.requestPictureInPicture();};_proto.requestVideoFrameCallback=function requestVideoFrameCallback(cb){if(this.featuresVideoFrameCallback){return this.el_.requestVideoFrameCallback(cb);}return _Tech.prototype.requestVideoFrameCallback.call(this,cb);};_proto.cancelVideoFrameCallback=function cancelVideoFrameCallback(id){if(this.featuresVideoFrameCallback){this.el_.cancelVideoFrameCallback(id);}else{_Tech.prototype.cancelVideoFrameCallback.call(this,id);}};_proto.src=function src(_src){if(_src===void 0){return this.el_.src;}this.setSrc(_src);};_proto.reset=function reset3(){Html52.resetMediaElement(this.el_);};_proto.currentSrc=function currentSrc(){if(this.currentSource_){return this.currentSource_.src;}return this.el_.currentSrc;};_proto.setControls=function setControls(val){this.el_.controls=!!val;};_proto.addTextTrack=function addTextTrack(kind,label,language){if(!this.featuresNativeTextTracks){return _Tech.prototype.addTextTrack.call(this,kind,label,language);}return this.el_.addTextTrack(kind,label,language);};_proto.createRemoteTextTrack=function createRemoteTextTrack(options){if(!this.featuresNativeTextTracks){return _Tech.prototype.createRemoteTextTrack.call(this,options);}var htmlTrackElement=import_document["default"].createElement("track");if(options.kind){htmlTrackElement.kind=options.kind;}if(options.label){htmlTrackElement.label=options.label;}if(options.language||options.srclang){htmlTrackElement.srclang=options.language||options.srclang;}if(options["default"]){htmlTrackElement["default"]=options["default"];}if(options.id){htmlTrackElement.id=options.id;}if(options.src){htmlTrackElement.src=options.src;}return htmlTrackElement;};_proto.addRemoteTextTrack=function addRemoteTextTrack(options,manualCleanup){var htmlTrackElement=_Tech.prototype.addRemoteTextTrack.call(this,options,manualCleanup);if(this.featuresNativeTextTracks){this.el().appendChild(htmlTrackElement);}return htmlTrackElement;};_proto.removeRemoteTextTrack=function removeRemoteTextTrack(track){_Tech.prototype.removeRemoteTextTrack.call(this,track);if(this.featuresNativeTextTracks){var tracks=this.$$("track");var i=tracks.length;while(i--){if(track===tracks[i]||track===tracks[i].track){this.el().removeChild(tracks[i]);}}}};_proto.getVideoPlaybackQuality=function getVideoPlaybackQuality(){if(typeof this.el().getVideoPlaybackQuality==="function"){return this.el().getVideoPlaybackQuality();}var videoPlaybackQuality={};if(typeof this.el().webkitDroppedFrameCount!=="undefined"&&typeof this.el().webkitDecodedFrameCount!=="undefined"){videoPlaybackQuality.droppedVideoFrames=this.el().webkitDroppedFrameCount;videoPlaybackQuality.totalVideoFrames=this.el().webkitDecodedFrameCount;}if(import_window6["default"].performance&&typeof import_window6["default"].performance.now==="function"){videoPlaybackQuality.creationTime=import_window6["default"].performance.now();}else if(import_window6["default"].performance&&import_window6["default"].performance.timing&&typeof import_window6["default"].performance.timing.navigationStart==="number"){videoPlaybackQuality.creationTime=import_window6["default"].Date.now()-import_window6["default"].performance.timing.navigationStart;}return videoPlaybackQuality;};return Html52;}(Tech);defineLazyProperty(Html5,"TEST_VID",function(){if(!isReal()){return;}var video=import_document["default"].createElement("video");var track=import_document["default"].createElement("track");track.kind="captions";track.srclang="en";track.label="English";video.appendChild(track);return video;});Html5.isSupported=function(){try{Html5.TEST_VID.volume=0.5;}catch(e){return false;}return!!(Html5.TEST_VID&&Html5.TEST_VID.canPlayType);};Html5.canPlayType=function(type2){return Html5.TEST_VID.canPlayType(type2);};Html5.canPlaySource=function(srcObj,options){return Html5.canPlayType(srcObj.type);};Html5.canControlVolume=function(){try{var volume=Html5.TEST_VID.volume;Html5.TEST_VID.volume=volume/2+0.1;var canControl=volume!==Html5.TEST_VID.volume;if(canControl&&IS_IOS){import_window6["default"].setTimeout(function(){if(Html5&&Html5.prototype){Html5.prototype.featuresVolumeControl=volume!==Html5.TEST_VID.volume;}});return false;}return canControl;}catch(e){return false;}};Html5.canMuteVolume=function(){try{var muted=Html5.TEST_VID.muted;Html5.TEST_VID.muted=!muted;if(Html5.TEST_VID.muted){setAttribute(Html5.TEST_VID,"muted","muted");}else{removeAttribute(Html5.TEST_VID,"muted","muted");}return muted!==Html5.TEST_VID.muted;}catch(e){return false;}};Html5.canControlPlaybackRate=function(){if(IS_ANDROID&&IS_CHROME&&CHROME_VERSION<58){return false;}try{var playbackRate=Html5.TEST_VID.playbackRate;Html5.TEST_VID.playbackRate=playbackRate/2+0.1;return playbackRate!==Html5.TEST_VID.playbackRate;}catch(e){return false;}};Html5.canOverrideAttributes=function(){try{var noop2=function noop3(){};Object.defineProperty(import_document["default"].createElement("video"),"src",{get:noop2,set:noop2});Object.defineProperty(import_document["default"].createElement("audio"),"src",{get:noop2,set:noop2});Object.defineProperty(import_document["default"].createElement("video"),"innerHTML",{get:noop2,set:noop2});Object.defineProperty(import_document["default"].createElement("audio"),"innerHTML",{get:noop2,set:noop2});}catch(e){return false;}return true;};Html5.supportsNativeTextTracks=function(){return IS_ANY_SAFARI||IS_IOS&&IS_CHROME;};Html5.supportsNativeVideoTracks=function(){return!!(Html5.TEST_VID&&Html5.TEST_VID.videoTracks);};Html5.supportsNativeAudioTracks=function(){return!!(Html5.TEST_VID&&Html5.TEST_VID.audioTracks);};Html5.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"];[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function(_ref){var key=_ref[0],fn=_ref[1];defineLazyProperty(Html5.prototype,key,function(){return Html5[fn]();},true);});Html5.prototype.featuresVolumeControl=Html5.canControlVolume();Html5.prototype.movingMediaElementInDOM=!IS_IOS;Html5.prototype.featuresFullscreenResize=true;Html5.prototype.featuresProgressEvents=true;Html5.prototype.featuresTimeupdateEvents=true;Html5.prototype.featuresVideoFrameCallback=!!(Html5.TEST_VID&&Html5.TEST_VID.requestVideoFrameCallback);var canPlayType;Html5.patchCanPlayType=function(){if(ANDROID_VERSION>=4&&!IS_FIREFOX&&!IS_CHROME){canPlayType=Html5.TEST_VID&&Html5.TEST_VID.constructor.prototype.canPlayType;Html5.TEST_VID.constructor.prototype.canPlayType=function(type2){var mpegurlRE=/^application\/(?:x-|vnd\.apple\.)mpegurl/i;if(type2&&mpegurlRE.test(type2)){return"maybe";}return canPlayType.call(this,type2);};}};Html5.unpatchCanPlayType=function(){var r2=Html5.TEST_VID.constructor.prototype.canPlayType;if(canPlayType){Html5.TEST_VID.constructor.prototype.canPlayType=canPlayType;}return r2;};Html5.patchCanPlayType();Html5.disposeMediaElement=function(el){if(!el){return;}if(el.parentNode){el.parentNode.removeChild(el);}while(el.hasChildNodes()){el.removeChild(el.firstChild);}el.removeAttribute("src");if(typeof el.load==="function"){(function(){try{el.load();}catch(e){}})();}};Html5.resetMediaElement=function(el){if(!el){return;}var sources=el.querySelectorAll("source");var i=sources.length;while(i--){el.removeChild(sources[i]);}el.removeAttribute("src");if(typeof el.load==="function"){(function(){try{el.load();}catch(e){}})();}};["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(prop){Html5.prototype[prop]=function(){return this.el_[prop]||this.el_.hasAttribute(prop);};});["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(prop){Html5.prototype["set"+toTitleCase$1(prop)]=function(v){this.el_[prop]=v;if(v){this.el_.setAttribute(prop,prop);}else{this.el_.removeAttribute(prop);}};});["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(prop){Html5.prototype[prop]=function(){return this.el_[prop];};});["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(prop){Html5.prototype["set"+toTitleCase$1(prop)]=function(v){this.el_[prop]=v;};});["pause","load","play"].forEach(function(prop){Html5.prototype[prop]=function(){return this.el_[prop]();};});Tech.withSourceHandlers(Html5);Html5.nativeSourceHandler={};Html5.nativeSourceHandler.canPlayType=function(type2){try{return Html5.TEST_VID.canPlayType(type2);}catch(e){return"";}};Html5.nativeSourceHandler.canHandleSource=function(source,options){if(source.type){return Html5.nativeSourceHandler.canPlayType(source.type);}else if(source.src){var ext=getFileExtension(source.src);return Html5.nativeSourceHandler.canPlayType("video/"+ext);}return"";};Html5.nativeSourceHandler.handleSource=function(source,tech,options){tech.setSrc(source.src);};Html5.nativeSourceHandler.dispose=function(){};Html5.registerSourceHandler(Html5.nativeSourceHandler);Tech.registerTech("Html5",Html5);var TECH_EVENTS_RETRIGGER=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"];var TECH_EVENTS_QUEUE={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"};var BREAKPOINT_ORDER=["tiny","xsmall","small","medium","large","xlarge","huge"];var BREAKPOINT_CLASSES={};BREAKPOINT_ORDER.forEach(function(k){var v=k.charAt(0)==="x"?"x-"+k.substring(1):k;BREAKPOINT_CLASSES[k]="vjs-layout-"+v;});var DEFAULT_BREAKPOINTS={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:Infinity};var Player=/* @__PURE__ */function(_Component){_inheritsLoose3(Player2,_Component);function Player2(tag,options,ready){var _this;tag.id=tag.id||options.id||"vjs_video_"+newGUID();options=assign(Player2.getTagSettings(tag),options);options.initChildren=false;options.createEl=false;options.evented=false;options.reportTouchActivity=false;if(!options.language){if(typeof tag.closest==="function"){var closest=tag.closest("[lang]");if(closest&&closest.getAttribute){options.language=closest.getAttribute("lang");}}else{var element=tag;while(element&&element.nodeType===1){if(getAttributes(element).hasOwnProperty("lang")){options.language=element.getAttribute("lang");break;}element=element.parentNode;}}}_this=_Component.call(this,null,options,ready)||this;_this.boundDocumentFullscreenChange_=function(e){return _this.documentFullscreenChange_(e);};_this.boundFullWindowOnEscKey_=function(e){return _this.fullWindowOnEscKey(e);};_this.boundUpdateStyleEl_=function(e){return _this.updateStyleEl_(e);};_this.boundApplyInitTime_=function(e){return _this.applyInitTime_(e);};_this.boundUpdateCurrentBreakpoint_=function(e){return _this.updateCurrentBreakpoint_(e);};_this.boundHandleTechClick_=function(e){return _this.handleTechClick_(e);};_this.boundHandleTechDoubleClick_=function(e){return _this.handleTechDoubleClick_(e);};_this.boundHandleTechTouchStart_=function(e){return _this.handleTechTouchStart_(e);};_this.boundHandleTechTouchMove_=function(e){return _this.handleTechTouchMove_(e);};_this.boundHandleTechTouchEnd_=function(e){return _this.handleTechTouchEnd_(e);};_this.boundHandleTechTap_=function(e){return _this.handleTechTap_(e);};_this.isFullscreen_=false;_this.log=createLogger(_this.id_);_this.fsApi_=FullscreenApi;_this.isPosterFromTech_=false;_this.queuedCallbacks_=[];_this.isReady_=false;_this.hasStarted_=false;_this.userActive_=false;_this.debugEnabled_=false;_this.audioOnlyMode_=false;_this.audioPosterMode_=false;_this.audioOnlyCache_={playerHeight:null,hiddenChildren:[]};if(!_this.options_||!_this.options_.techOrder||!_this.options_.techOrder.length){throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");}_this.tag=tag;_this.tagAttributes=tag&&getAttributes(tag);_this.language(_this.options_.language);if(options.languages){var languagesToLower={};Object.getOwnPropertyNames(options.languages).forEach(function(name){languagesToLower[name.toLowerCase()]=options.languages[name];});_this.languages_=languagesToLower;}else{_this.languages_=Player2.prototype.options_.languages;}_this.resetCache_();_this.poster_=options.poster||"";_this.controls_=!!options.controls;tag.controls=false;tag.removeAttribute("controls");_this.changingSrc_=false;_this.playCallbacks_=[];_this.playTerminatedQueue_=[];if(tag.hasAttribute("autoplay")){_this.autoplay(true);}else{_this.autoplay(_this.options_.autoplay);}if(options.plugins){Object.keys(options.plugins).forEach(function(name){if(typeof _this[name]!=="function"){throw new Error('plugin "'+name+'" does not exist');}});}_this.scrubbing_=false;_this.el_=_this.createEl();evented(_assertThisInitialized3(_this),{eventBusKey:"el_"});if(_this.fsApi_.requestFullscreen){on(import_document["default"],_this.fsApi_.fullscreenchange,_this.boundDocumentFullscreenChange_);_this.on(_this.fsApi_.fullscreenchange,_this.boundDocumentFullscreenChange_);}if(_this.fluid_){_this.on(["playerreset","resize"],_this.boundUpdateStyleEl_);}var playerOptionsCopy=mergeOptions$3(_this.options_);if(options.plugins){Object.keys(options.plugins).forEach(function(name){_this[name](options.plugins[name]);});}if(options.debug){_this.debug(true);}_this.options_.playerOptions=playerOptionsCopy;_this.middleware_=[];_this.playbackRates(options.playbackRates);_this.initChildren();_this.isAudio(tag.nodeName.toLowerCase()==="audio");if(_this.controls()){_this.addClass("vjs-controls-enabled");}else{_this.addClass("vjs-controls-disabled");}_this.el_.setAttribute("role","region");if(_this.isAudio()){_this.el_.setAttribute("aria-label",_this.localize("Audio Player"));}else{_this.el_.setAttribute("aria-label",_this.localize("Video Player"));}if(_this.isAudio()){_this.addClass("vjs-audio");}if(_this.flexNotSupported_()){_this.addClass("vjs-no-flex");}if(TOUCH_ENABLED){_this.addClass("vjs-touch-enabled");}if(!IS_IOS){_this.addClass("vjs-workinghover");}Player2.players[_this.id_]=_assertThisInitialized3(_this);var majorVersion=version$5.split(".")[0];_this.addClass("vjs-v"+majorVersion);_this.userActive(true);_this.reportUserActivity();_this.one("play",function(e){return _this.listenForUserActivity_(e);});_this.on("stageclick",function(e){return _this.handleStageClick_(e);});_this.on("keydown",function(e){return _this.handleKeyDown(e);});_this.on("languagechange",function(e){return _this.handleLanguagechange(e);});_this.breakpoints(_this.options_.breakpoints);_this.responsive(_this.options_.responsive);_this.on("ready",function(){_this.audioPosterMode(_this.options_.audioPosterMode);_this.audioOnlyMode(_this.options_.audioOnlyMode);});return _this;}var _proto=Player2.prototype;_proto.dispose=function dispose(){var _this2=this;this.trigger("dispose");this.off("dispose");off(import_document["default"],this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_);off(import_document["default"],"keydown",this.boundFullWindowOnEscKey_);if(this.styleEl_&&this.styleEl_.parentNode){this.styleEl_.parentNode.removeChild(this.styleEl_);this.styleEl_=null;}Player2.players[this.id_]=null;if(this.tag&&this.tag.player){this.tag.player=null;}if(this.el_&&this.el_.player){this.el_.player=null;}if(this.tech_){this.tech_.dispose();this.isPosterFromTech_=false;this.poster_="";}if(this.playerElIngest_){this.playerElIngest_=null;}if(this.tag){this.tag=null;}clearCacheForPlayer(this);ALL.names.forEach(function(name){var props=ALL[name];var list=_this2[props.getterName]();if(list&&list.off){list.off();}});_Component.prototype.dispose.call(this);};_proto.createEl=function createEl2(){var tag=this.tag;var el;var playerElIngest=this.playerElIngest_=tag.parentNode&&tag.parentNode.hasAttribute&&tag.parentNode.hasAttribute("data-vjs-player");var divEmbed=this.tag.tagName.toLowerCase()==="video-js";if(playerElIngest){el=this.el_=tag.parentNode;}else if(!divEmbed){el=this.el_=_Component.prototype.createEl.call(this,"div");}var attrs=getAttributes(tag);if(divEmbed){el=this.el_=tag;tag=this.tag=import_document["default"].createElement("video");while(el.children.length){tag.appendChild(el.firstChild);}if(!hasClass(el,"video-js")){addClass(el,"video-js");}el.appendChild(tag);playerElIngest=this.playerElIngest_=el;Object.keys(el).forEach(function(k){try{tag[k]=el[k];}catch(e){}});}tag.setAttribute("tabindex","-1");attrs.tabindex="-1";if(IE_VERSION||IS_CHROME&&IS_WINDOWS){tag.setAttribute("role","application");attrs.role="application";}tag.removeAttribute("width");tag.removeAttribute("height");if("width"in attrs){delete attrs.width;}if("height"in attrs){delete attrs.height;}Object.getOwnPropertyNames(attrs).forEach(function(attr){if(!(divEmbed&&attr==="class")){el.setAttribute(attr,attrs[attr]);}if(divEmbed){tag.setAttribute(attr,attrs[attr]);}});tag.playerId=tag.id;tag.id+="_html5_api";tag.className="vjs-tech";tag.player=el.player=this;this.addClass("vjs-paused");if(import_window6["default"].VIDEOJS_NO_DYNAMIC_STYLE!==true){this.styleEl_=createStyleElement("vjs-styles-dimensions");var defaultsStyleEl=$(".vjs-styles-defaults");var head=$("head");head.insertBefore(this.styleEl_,defaultsStyleEl?defaultsStyleEl.nextSibling:head.firstChild);}this.fill_=false;this.fluid_=false;this.width(this.options_.width);this.height(this.options_.height);this.fill(this.options_.fill);this.fluid(this.options_.fluid);this.aspectRatio(this.options_.aspectRatio);this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);var links=tag.getElementsByTagName("a");for(var i=0;i<links.length;i++){var linkEl=links.item(i);addClass(linkEl,"vjs-hidden");linkEl.setAttribute("hidden","hidden");}tag.initNetworkState_=tag.networkState;if(tag.parentNode&&!playerElIngest){tag.parentNode.insertBefore(el,tag);}prependTo(tag,el);this.children_.unshift(tag);this.el_.setAttribute("lang",this.language_);this.el_.setAttribute("translate","no");this.el_=el;return el;};_proto.crossOrigin=function crossOrigin(value){if(!value){return this.techGet_("crossOrigin");}if(value!=="anonymous"&&value!=="use-credentials"){log$1.warn('crossOrigin must be "anonymous" or "use-credentials", given "'+value+'"');return;}this.techCall_("setCrossOrigin",value);return;};_proto.width=function width2(value){return this.dimension("width",value);};_proto.height=function height2(value){return this.dimension("height",value);};_proto.dimension=function dimension(_dimension,value){var privDimension=_dimension+"_";if(value===void 0){return this[privDimension]||0;}if(value===""||value==="auto"){this[privDimension]=void 0;this.updateStyleEl_();return;}var parsedVal=parseFloat(value);if(isNaN(parsedVal)){log$1.error('Improper value "'+value+'" supplied for for '+_dimension);return;}this[privDimension]=parsedVal;this.updateStyleEl_();};_proto.fluid=function fluid(bool){var _this3=this;if(bool===void 0){return!!this.fluid_;}this.fluid_=!!bool;if(isEvented(this)){this.off(["playerreset","resize"],this.boundUpdateStyleEl_);}if(bool){this.addClass("vjs-fluid");this.fill(false);addEventedCallback(this,function(){_this3.on(["playerreset","resize"],_this3.boundUpdateStyleEl_);});}else{this.removeClass("vjs-fluid");}this.updateStyleEl_();};_proto.fill=function fill(bool){if(bool===void 0){return!!this.fill_;}this.fill_=!!bool;if(bool){this.addClass("vjs-fill");this.fluid(false);}else{this.removeClass("vjs-fill");}};_proto.aspectRatio=function aspectRatio(ratio){if(ratio===void 0){return this.aspectRatio_;}if(!/^\d+\:\d+$/.test(ratio)){throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");}this.aspectRatio_=ratio;this.fluid(true);this.updateStyleEl_();};_proto.updateStyleEl_=function updateStyleEl_(){if(import_window6["default"].VIDEOJS_NO_DYNAMIC_STYLE===true){var _width2=typeof this.width_==="number"?this.width_:this.options_.width;var _height2=typeof this.height_==="number"?this.height_:this.options_.height;var techEl=this.tech_&&this.tech_.el();if(techEl){if(_width2>=0){techEl.width=_width2;}if(_height2>=0){techEl.height=_height2;}}return;}var width2;var height2;var aspectRatio;var idClass;if(this.aspectRatio_!==void 0&&this.aspectRatio_!=="auto"){aspectRatio=this.aspectRatio_;}else if(this.videoWidth()>0){aspectRatio=this.videoWidth()+":"+this.videoHeight();}else{aspectRatio="16:9";}var ratioParts=aspectRatio.split(":");var ratioMultiplier=ratioParts[1]/ratioParts[0];if(this.width_!==void 0){width2=this.width_;}else if(this.height_!==void 0){width2=this.height_/ratioMultiplier;}else{width2=this.videoWidth()||300;}if(this.height_!==void 0){height2=this.height_;}else{height2=width2*ratioMultiplier;}if(/^[^a-zA-Z]/.test(this.id())){idClass="dimensions-"+this.id();}else{idClass=this.id()+"-dimensions";}this.addClass(idClass);setTextContent(this.styleEl_,"\n      ."+idClass+" {\n        width: "+width2+"px;\n        height: "+height2+"px;\n      }\n\n      ."+idClass+".vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: "+ratioMultiplier*100+"%;\n      }\n    ");};_proto.loadTech_=function loadTech_(techName,source){var _this4=this;if(this.tech_){this.unloadTech_();}var titleTechName=toTitleCase$1(techName);var camelTechName=techName.charAt(0).toLowerCase()+techName.slice(1);if(titleTechName!=="Html5"&&this.tag){Tech.getTech("Html5").disposeMediaElement(this.tag);this.tag.player=null;this.tag=null;}this.techName_=titleTechName;this.isReady_=false;var autoplay=this.autoplay();if(typeof this.autoplay()==="string"||this.autoplay()===true&&this.options_.normalizeAutoplay){autoplay=false;}var techOptions={source:source,autoplay:autoplay,"nativeControlsForTouch":this.options_.nativeControlsForTouch,"playerId":this.id(),"techId":this.id()+"_"+camelTechName+"_api","playsinline":this.options_.playsinline,"preload":this.options_.preload,"loop":this.options_.loop,"disablePictureInPicture":this.options_.disablePictureInPicture,"muted":this.options_.muted,"poster":this.poster(),"language":this.language(),"playerElIngest":this.playerElIngest_||false,"vtt.js":this.options_["vtt.js"],"canOverridePoster":!!this.options_.techCanOverridePoster,"enableSourceset":this.options_.enableSourceset,"Promise":this.options_.Promise};ALL.names.forEach(function(name){var props=ALL[name];techOptions[props.getterName]=_this4[props.privateName];});assign(techOptions,this.options_[titleTechName]);assign(techOptions,this.options_[camelTechName]);assign(techOptions,this.options_[techName.toLowerCase()]);if(this.tag){techOptions.tag=this.tag;}if(source&&source.src===this.cache_.src&&this.cache_.currentTime>0){techOptions.startTime=this.cache_.currentTime;}var TechClass=Tech.getTech(techName);if(!TechClass){throw new Error("No Tech named '"+titleTechName+"' exists! '"+titleTechName+"' should be registered using videojs.registerTech()'");}this.tech_=new TechClass(techOptions);this.tech_.ready(bind(this,this.handleTechReady_),true);textTrackConverter.jsonToTextTracks(this.textTracksJson_||[],this.tech_);TECH_EVENTS_RETRIGGER.forEach(function(event){_this4.on(_this4.tech_,event,function(e){return _this4["handleTech"+toTitleCase$1(event)+"_"](e);});});Object.keys(TECH_EVENTS_QUEUE).forEach(function(event){_this4.on(_this4.tech_,event,function(eventObj){if(_this4.tech_.playbackRate()===0&&_this4.tech_.seeking()){_this4.queuedCallbacks_.push({callback:_this4["handleTech"+TECH_EVENTS_QUEUE[event]+"_"].bind(_this4),event:eventObj});return;}_this4["handleTech"+TECH_EVENTS_QUEUE[event]+"_"](eventObj);});});this.on(this.tech_,"loadstart",function(e){return _this4.handleTechLoadStart_(e);});this.on(this.tech_,"sourceset",function(e){return _this4.handleTechSourceset_(e);});this.on(this.tech_,"waiting",function(e){return _this4.handleTechWaiting_(e);});this.on(this.tech_,"ended",function(e){return _this4.handleTechEnded_(e);});this.on(this.tech_,"seeking",function(e){return _this4.handleTechSeeking_(e);});this.on(this.tech_,"play",function(e){return _this4.handleTechPlay_(e);});this.on(this.tech_,"firstplay",function(e){return _this4.handleTechFirstPlay_(e);});this.on(this.tech_,"pause",function(e){return _this4.handleTechPause_(e);});this.on(this.tech_,"durationchange",function(e){return _this4.handleTechDurationChange_(e);});this.on(this.tech_,"fullscreenchange",function(e,data){return _this4.handleTechFullscreenChange_(e,data);});this.on(this.tech_,"fullscreenerror",function(e,err){return _this4.handleTechFullscreenError_(e,err);});this.on(this.tech_,"enterpictureinpicture",function(e){return _this4.handleTechEnterPictureInPicture_(e);});this.on(this.tech_,"leavepictureinpicture",function(e){return _this4.handleTechLeavePictureInPicture_(e);});this.on(this.tech_,"error",function(e){return _this4.handleTechError_(e);});this.on(this.tech_,"posterchange",function(e){return _this4.handleTechPosterChange_(e);});this.on(this.tech_,"textdata",function(e){return _this4.handleTechTextData_(e);});this.on(this.tech_,"ratechange",function(e){return _this4.handleTechRateChange_(e);});this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_);this.usingNativeControls(this.techGet_("controls"));if(this.controls()&&!this.usingNativeControls()){this.addTechControlsListeners_();}if(this.tech_.el().parentNode!==this.el()&&(titleTechName!=="Html5"||!this.tag)){prependTo(this.tech_.el(),this.el());}if(this.tag){this.tag.player=null;this.tag=null;}};_proto.unloadTech_=function unloadTech_(){var _this5=this;ALL.names.forEach(function(name){var props=ALL[name];_this5[props.privateName]=_this5[props.getterName]();});this.textTracksJson_=textTrackConverter.textTracksToJson(this.tech_);this.isReady_=false;this.tech_.dispose();this.tech_=false;if(this.isPosterFromTech_){this.poster_="";this.trigger("posterchange");}this.isPosterFromTech_=false;};_proto.tech=function tech(safety){if(safety===void 0){log$1.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n");}return this.tech_;};_proto.addTechControlsListeners_=function addTechControlsListeners_(){this.removeTechControlsListeners_();this.on(this.tech_,"click",this.boundHandleTechClick_);this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_);this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_);this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_);this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_);this.on(this.tech_,"tap",this.boundHandleTechTap_);};_proto.removeTechControlsListeners_=function removeTechControlsListeners_(){this.off(this.tech_,"tap",this.boundHandleTechTap_);this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_);this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_);this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_);this.off(this.tech_,"click",this.boundHandleTechClick_);this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_);};_proto.handleTechReady_=function handleTechReady_(){this.triggerReady();if(this.cache_.volume){this.techCall_("setVolume",this.cache_.volume);}this.handleTechPosterChange_();this.handleTechDurationChange_();};_proto.handleTechLoadStart_=function handleTechLoadStart_(){this.removeClass("vjs-ended");this.removeClass("vjs-seeking");this.error(null);this.handleTechDurationChange_();if(!this.paused()){this.trigger("loadstart");this.trigger("firstplay");}else{this.hasStarted(false);this.trigger("loadstart");}this.manualAutoplay_(this.autoplay()===true&&this.options_.normalizeAutoplay?"play":this.autoplay());};_proto.manualAutoplay_=function manualAutoplay_(type2){var _this6=this;if(!this.tech_||typeof type2!=="string"){return;}var resolveMuted=function resolveMuted2(){var previouslyMuted=_this6.muted();_this6.muted(true);var restoreMuted=function restoreMuted2(){_this6.muted(previouslyMuted);};_this6.playTerminatedQueue_.push(restoreMuted);var mutedPromise=_this6.play();if(!isPromise(mutedPromise)){return;}return mutedPromise["catch"](function(err){restoreMuted();throw new Error("Rejection at manualAutoplay. Restoring muted value. "+(err?err:""));});};var promise;if(type2==="any"&&!this.muted()){promise=this.play();if(isPromise(promise)){promise=promise["catch"](resolveMuted);}}else if(type2==="muted"&&!this.muted()){promise=resolveMuted();}else{promise=this.play();}if(!isPromise(promise)){return;}return promise.then(function(){_this6.trigger({type:"autoplay-success",autoplay:type2});})["catch"](function(){_this6.trigger({type:"autoplay-failure",autoplay:type2});});};_proto.updateSourceCaches_=function updateSourceCaches_(srcObj){if(srcObj===void 0){srcObj="";}var src=srcObj;var type2="";if(typeof src!=="string"){src=srcObj.src;type2=srcObj.type;}this.cache_.source=this.cache_.source||{};this.cache_.sources=this.cache_.sources||[];if(src&&!type2){type2=findMimetype(this,src);}this.cache_.source=mergeOptions$3({},srcObj,{src:src,type:type2});var matchingSources=this.cache_.sources.filter(function(s){return s.src&&s.src===src;});var sourceElSources=[];var sourceEls=this.$$("source");var matchingSourceEls=[];for(var i=0;i<sourceEls.length;i++){var sourceObj=getAttributes(sourceEls[i]);sourceElSources.push(sourceObj);if(sourceObj.src&&sourceObj.src===src){matchingSourceEls.push(sourceObj.src);}}if(matchingSourceEls.length&&!matchingSources.length){this.cache_.sources=sourceElSources;}else if(!matchingSources.length){this.cache_.sources=[this.cache_.source];}this.cache_.src=src;};_proto.handleTechSourceset_=function handleTechSourceset_(event){var _this7=this;if(!this.changingSrc_){var updateSourceCaches=function updateSourceCaches2(src){return _this7.updateSourceCaches_(src);};var playerSrc=this.currentSource().src;var eventSrc=event.src;if(playerSrc&&!/^blob:/.test(playerSrc)&&/^blob:/.test(eventSrc)){if(!this.lastSource_||this.lastSource_.tech!==eventSrc&&this.lastSource_.player!==playerSrc){updateSourceCaches=function updateSourceCaches2(){};}}updateSourceCaches(eventSrc);if(!event.src){this.tech_.any(["sourceset","loadstart"],function(e){if(e.type==="sourceset"){return;}var techSrc=_this7.techGet("currentSrc");_this7.lastSource_.tech=techSrc;_this7.updateSourceCaches_(techSrc);});}}this.lastSource_={player:this.currentSource().src,tech:event.src};this.trigger({src:event.src,type:"sourceset"});};_proto.hasStarted=function hasStarted(request){if(request===void 0){return this.hasStarted_;}if(request===this.hasStarted_){return;}this.hasStarted_=request;if(this.hasStarted_){this.addClass("vjs-has-started");this.trigger("firstplay");}else{this.removeClass("vjs-has-started");}};_proto.handleTechPlay_=function handleTechPlay_(){this.removeClass("vjs-ended");this.removeClass("vjs-paused");this.addClass("vjs-playing");this.hasStarted(true);this.trigger("play");};_proto.handleTechRateChange_=function handleTechRateChange_(){if(this.tech_.playbackRate()>0&&this.cache_.lastPlaybackRate===0){this.queuedCallbacks_.forEach(function(queued){return queued.callback(queued.event);});this.queuedCallbacks_=[];}this.cache_.lastPlaybackRate=this.tech_.playbackRate();this.trigger("ratechange");};_proto.handleTechWaiting_=function handleTechWaiting_(){var _this8=this;this.addClass("vjs-waiting");this.trigger("waiting");var timeWhenWaiting=this.currentTime();var timeUpdateListener=function timeUpdateListener2(){if(timeWhenWaiting!==_this8.currentTime()){_this8.removeClass("vjs-waiting");_this8.off("timeupdate",timeUpdateListener2);}};this.on("timeupdate",timeUpdateListener);};_proto.handleTechCanPlay_=function handleTechCanPlay_(){this.removeClass("vjs-waiting");this.trigger("canplay");};_proto.handleTechCanPlayThrough_=function handleTechCanPlayThrough_(){this.removeClass("vjs-waiting");this.trigger("canplaythrough");};_proto.handleTechPlaying_=function handleTechPlaying_(){this.removeClass("vjs-waiting");this.trigger("playing");};_proto.handleTechSeeking_=function handleTechSeeking_(){this.addClass("vjs-seeking");this.trigger("seeking");};_proto.handleTechSeeked_=function handleTechSeeked_(){this.removeClass("vjs-seeking");this.removeClass("vjs-ended");this.trigger("seeked");};_proto.handleTechFirstPlay_=function handleTechFirstPlay_(){if(this.options_.starttime){log$1.warn("Passing the `starttime` option to the player will be deprecated in 6.0");this.currentTime(this.options_.starttime);}this.addClass("vjs-has-started");this.trigger("firstplay");};_proto.handleTechPause_=function handleTechPause_(){this.removeClass("vjs-playing");this.addClass("vjs-paused");this.trigger("pause");};_proto.handleTechEnded_=function handleTechEnded_(){this.addClass("vjs-ended");this.removeClass("vjs-waiting");if(this.options_.loop){this.currentTime(0);this.play();}else if(!this.paused()){this.pause();}this.trigger("ended");};_proto.handleTechDurationChange_=function handleTechDurationChange_(){this.duration(this.techGet_("duration"));};_proto.handleTechClick_=function handleTechClick_(event){if(!this.controls_){return;}if(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.click===void 0||this.options_.userActions.click!==false){if(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.click==="function"){this.options_.userActions.click.call(this,event);}else if(this.paused()){silencePromise(this.play());}else{this.pause();}}};_proto.handleTechDoubleClick_=function handleTechDoubleClick_(event){if(!this.controls_){return;}var inAllowedEls=Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),function(el){return el.contains(event.target);});if(!inAllowedEls){if(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.doubleClick===void 0||this.options_.userActions.doubleClick!==false){if(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.doubleClick==="function"){this.options_.userActions.doubleClick.call(this,event);}else if(this.isFullscreen()){this.exitFullscreen();}else{this.requestFullscreen();}}}};_proto.handleTechTap_=function handleTechTap_(){this.userActive(!this.userActive());};_proto.handleTechTouchStart_=function handleTechTouchStart_(){this.userWasActive=this.userActive();};_proto.handleTechTouchMove_=function handleTechTouchMove_(){if(this.userWasActive){this.reportUserActivity();}};_proto.handleTechTouchEnd_=function handleTechTouchEnd_(event){if(event.cancelable){event.preventDefault();}};_proto.handleStageClick_=function handleStageClick_(){this.reportUserActivity();};_proto.toggleFullscreenClass_=function toggleFullscreenClass_(){if(this.isFullscreen()){this.addClass("vjs-fullscreen");}else{this.removeClass("vjs-fullscreen");}};_proto.documentFullscreenChange_=function documentFullscreenChange_(e){var targetPlayer=e.target.player;if(targetPlayer&&targetPlayer!==this){return;}var el=this.el();var isFs=import_document["default"][this.fsApi_.fullscreenElement]===el;if(!isFs&&el.matches){isFs=el.matches(":"+this.fsApi_.fullscreen);}else if(!isFs&&el.msMatchesSelector){isFs=el.msMatchesSelector(":"+this.fsApi_.fullscreen);}this.isFullscreen(isFs);};_proto.handleTechFullscreenChange_=function handleTechFullscreenChange_(event,data){var _this9=this;if(data){if(data.nativeIOSFullscreen){this.addClass("vjs-ios-native-fs");this.tech_.one("webkitendfullscreen",function(){_this9.removeClass("vjs-ios-native-fs");});}this.isFullscreen(data.isFullscreen);}};_proto.handleTechFullscreenError_=function handleTechFullscreenError_(event,err){this.trigger("fullscreenerror",err);};_proto.togglePictureInPictureClass_=function togglePictureInPictureClass_(){if(this.isInPictureInPicture()){this.addClass("vjs-picture-in-picture");}else{this.removeClass("vjs-picture-in-picture");}};_proto.handleTechEnterPictureInPicture_=function handleTechEnterPictureInPicture_(event){this.isInPictureInPicture(true);};_proto.handleTechLeavePictureInPicture_=function handleTechLeavePictureInPicture_(event){this.isInPictureInPicture(false);};_proto.handleTechError_=function handleTechError_(){var error=this.tech_.error();this.error(error);};_proto.handleTechTextData_=function handleTechTextData_(){var data=null;if(arguments.length>1){data=arguments[1];}this.trigger("textdata",data);};_proto.getCache=function getCache(){return this.cache_;};_proto.resetCache_=function resetCache_(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1};};_proto.techCall_=function techCall_(method,arg){this.ready(function(){if(method in allowedSetters){return set(this.middleware_,this.tech_,method,arg);}else if(method in allowedMediators){return mediate(this.middleware_,this.tech_,method,arg);}try{if(this.tech_){this.tech_[method](arg);}}catch(e){log$1(e);throw e;}},true);};_proto.techGet_=function techGet_(method){if(!this.tech_||!this.tech_.isReady_){return;}if(method in allowedGetters){return get(this.middleware_,this.tech_,method);}else if(method in allowedMediators){return mediate(this.middleware_,this.tech_,method);}try{return this.tech_[method]();}catch(e){if(this.tech_[method]===void 0){log$1("Video.js: "+method+" method not defined for "+this.techName_+" playback technology.",e);throw e;}if(e.name==="TypeError"){log$1("Video.js: "+method+" unavailable on "+this.techName_+" playback technology element.",e);this.tech_.isReady_=false;throw e;}log$1(e);throw e;}};_proto.play=function play(){var _this10=this;var PromiseClass=this.options_.Promise||import_window6["default"].Promise;if(PromiseClass){return new PromiseClass(function(resolve){_this10.play_(resolve);});}return this.play_();};_proto.play_=function play_(callback2){var _this11=this;if(callback2===void 0){callback2=silencePromise;}this.playCallbacks_.push(callback2);var isSrcReady=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc()));if(this.waitToPlay_){this.off(["ready","loadstart"],this.waitToPlay_);this.waitToPlay_=null;}if(!this.isReady_||!isSrcReady){this.waitToPlay_=function(e){_this11.play_();};this.one(["ready","loadstart"],this.waitToPlay_);if(!isSrcReady&&(IS_ANY_SAFARI||IS_IOS)){this.load();}return;}var val=this.techGet_("play");if(val===null){this.runPlayTerminatedQueue_();}else{this.runPlayCallbacks_(val);}};_proto.runPlayTerminatedQueue_=function runPlayTerminatedQueue_(){var queue=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[];queue.forEach(function(q){q();});};_proto.runPlayCallbacks_=function runPlayCallbacks_(val){var callbacks=this.playCallbacks_.slice(0);this.playCallbacks_=[];this.playTerminatedQueue_=[];callbacks.forEach(function(cb){cb(val);});};_proto.pause=function pause(){this.techCall_("pause");};_proto.paused=function paused(){return this.techGet_("paused")===false?false:true;};_proto.played=function played(){return this.techGet_("played")||createTimeRanges(0,0);};_proto.scrubbing=function scrubbing(isScrubbing){if(typeof isScrubbing==="undefined"){return this.scrubbing_;}this.scrubbing_=!!isScrubbing;this.techCall_("setScrubbing",this.scrubbing_);if(isScrubbing){this.addClass("vjs-scrubbing");}else{this.removeClass("vjs-scrubbing");}};_proto.currentTime=function currentTime(seconds){if(typeof seconds!=="undefined"){if(seconds<0){seconds=0;}if(!this.isReady_||this.changingSrc_||!this.tech_||!this.tech_.isReady_){this.cache_.initTime=seconds;this.off("canplay",this.boundApplyInitTime_);this.one("canplay",this.boundApplyInitTime_);return;}this.techCall_("setCurrentTime",seconds);this.cache_.initTime=0;return;}this.cache_.currentTime=this.techGet_("currentTime")||0;return this.cache_.currentTime;};_proto.applyInitTime_=function applyInitTime_(){this.currentTime(this.cache_.initTime);};_proto.duration=function duration5(seconds){if(seconds===void 0){return this.cache_.duration!==void 0?this.cache_.duration:NaN;}seconds=parseFloat(seconds);if(seconds<0){seconds=Infinity;}if(seconds!==this.cache_.duration){this.cache_.duration=seconds;if(seconds===Infinity){this.addClass("vjs-live");}else{this.removeClass("vjs-live");}if(!isNaN(seconds)){this.trigger("durationchange");}}};_proto.remainingTime=function remainingTime(){return this.duration()-this.currentTime();};_proto.remainingTimeDisplay=function remainingTimeDisplay(){return Math.floor(this.duration())-Math.floor(this.currentTime());};_proto.buffered=function buffered(){var buffered2=this.techGet_("buffered");if(!buffered2||!buffered2.length){buffered2=createTimeRanges(0,0);}return buffered2;};_proto.bufferedPercent=function bufferedPercent$1(){return bufferedPercent(this.buffered(),this.duration());};_proto.bufferedEnd=function bufferedEnd(){var buffered=this.buffered();var duration5=this.duration();var end=buffered.end(buffered.length-1);if(end>duration5){end=duration5;}return end;};_proto.volume=function volume(percentAsDecimal){var vol;if(percentAsDecimal!==void 0){vol=Math.max(0,Math.min(1,parseFloat(percentAsDecimal)));this.cache_.volume=vol;this.techCall_("setVolume",vol);if(vol>0){this.lastVolume_(vol);}return;}vol=parseFloat(this.techGet_("volume"));return isNaN(vol)?1:vol;};_proto.muted=function muted(_muted){if(_muted!==void 0){this.techCall_("setMuted",_muted);return;}return this.techGet_("muted")||false;};_proto.defaultMuted=function defaultMuted(_defaultMuted){if(_defaultMuted!==void 0){return this.techCall_("setDefaultMuted",_defaultMuted);}return this.techGet_("defaultMuted")||false;};_proto.lastVolume_=function lastVolume_(percentAsDecimal){if(percentAsDecimal!==void 0&&percentAsDecimal!==0){this.cache_.lastVolume=percentAsDecimal;return;}return this.cache_.lastVolume;};_proto.supportsFullScreen=function supportsFullScreen(){return this.techGet_("supportsFullScreen")||false;};_proto.isFullscreen=function isFullscreen(isFS){if(isFS!==void 0){var oldValue=this.isFullscreen_;this.isFullscreen_=Boolean(isFS);if(this.isFullscreen_!==oldValue&&this.fsApi_.prefixed){this.trigger("fullscreenchange");}this.toggleFullscreenClass_();return;}return this.isFullscreen_;};_proto.requestFullscreen=function requestFullscreen(fullscreenOptions){var PromiseClass=this.options_.Promise||import_window6["default"].Promise;if(PromiseClass){var self2=this;return new PromiseClass(function(resolve,reject){function offHandler(){self2.off("fullscreenerror",errorHandler);self2.off("fullscreenchange",changeHandler);}function changeHandler(){offHandler();resolve();}function errorHandler(e,err){offHandler();reject(err);}self2.one("fullscreenchange",changeHandler);self2.one("fullscreenerror",errorHandler);var promise=self2.requestFullscreenHelper_(fullscreenOptions);if(promise){promise.then(offHandler,offHandler);promise.then(resolve,reject);}});}return this.requestFullscreenHelper_();};_proto.requestFullscreenHelper_=function requestFullscreenHelper_(fullscreenOptions){var _this12=this;var fsOptions;if(!this.fsApi_.prefixed){fsOptions=this.options_.fullscreen&&this.options_.fullscreen.options||{};if(fullscreenOptions!==void 0){fsOptions=fullscreenOptions;}}if(this.fsApi_.requestFullscreen){var promise=this.el_[this.fsApi_.requestFullscreen](fsOptions);if(promise){promise.then(function(){return _this12.isFullscreen(true);},function(){return _this12.isFullscreen(false);});}return promise;}else if(this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow===true){this.techCall_("enterFullScreen");}else{this.enterFullWindow();}};_proto.exitFullscreen=function exitFullscreen(){var PromiseClass=this.options_.Promise||import_window6["default"].Promise;if(PromiseClass){var self2=this;return new PromiseClass(function(resolve,reject){function offHandler(){self2.off("fullscreenerror",errorHandler);self2.off("fullscreenchange",changeHandler);}function changeHandler(){offHandler();resolve();}function errorHandler(e,err){offHandler();reject(err);}self2.one("fullscreenchange",changeHandler);self2.one("fullscreenerror",errorHandler);var promise=self2.exitFullscreenHelper_();if(promise){promise.then(offHandler,offHandler);promise.then(resolve,reject);}});}return this.exitFullscreenHelper_();};_proto.exitFullscreenHelper_=function exitFullscreenHelper_(){var _this13=this;if(this.fsApi_.requestFullscreen){var promise=import_document["default"][this.fsApi_.exitFullscreen]();if(promise){silencePromise(promise.then(function(){return _this13.isFullscreen(false);}));}return promise;}else if(this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow===true){this.techCall_("exitFullScreen");}else{this.exitFullWindow();}};_proto.enterFullWindow=function enterFullWindow(){this.isFullscreen(true);this.isFullWindow=true;this.docOrigOverflow=import_document["default"].documentElement.style.overflow;on(import_document["default"],"keydown",this.boundFullWindowOnEscKey_);import_document["default"].documentElement.style.overflow="hidden";addClass(import_document["default"].body,"vjs-full-window");this.trigger("enterFullWindow");};_proto.fullWindowOnEscKey=function fullWindowOnEscKey(event){if(import_keycode["default"].isEventKey(event,"Esc")){if(this.isFullscreen()===true){if(!this.isFullWindow){this.exitFullscreen();}else{this.exitFullWindow();}}}};_proto.exitFullWindow=function exitFullWindow(){this.isFullscreen(false);this.isFullWindow=false;off(import_document["default"],"keydown",this.boundFullWindowOnEscKey_);import_document["default"].documentElement.style.overflow=this.docOrigOverflow;removeClass(import_document["default"].body,"vjs-full-window");this.trigger("exitFullWindow");};_proto.disablePictureInPicture=function disablePictureInPicture(value){if(value===void 0){return this.techGet_("disablePictureInPicture");}this.techCall_("setDisablePictureInPicture",value);this.options_.disablePictureInPicture=value;this.trigger("disablepictureinpicturechanged");};_proto.isInPictureInPicture=function isInPictureInPicture(isPiP){if(isPiP!==void 0){this.isInPictureInPicture_=!!isPiP;this.togglePictureInPictureClass_();return;}return!!this.isInPictureInPicture_;};_proto.requestPictureInPicture=function requestPictureInPicture(){if("pictureInPictureEnabled"in import_document["default"]&&this.disablePictureInPicture()===false){return this.techGet_("requestPictureInPicture");}};_proto.exitPictureInPicture=function exitPictureInPicture(){if("pictureInPictureEnabled"in import_document["default"]){return import_document["default"].exitPictureInPicture();}};_proto.handleKeyDown=function handleKeyDown(event){var userActions=this.options_.userActions;if(!userActions||!userActions.hotkeys){return;}var excludeElement=function excludeElement2(el){var tagName=el.tagName.toLowerCase();if(el.isContentEditable){return true;}var allowedInputTypes=["button","checkbox","hidden","radio","reset","submit"];if(tagName==="input"){return allowedInputTypes.indexOf(el.type)===-1;}var excludedTags=["textarea"];return excludedTags.indexOf(tagName)!==-1;};if(excludeElement(this.el_.ownerDocument.activeElement)){return;}if(typeof userActions.hotkeys==="function"){userActions.hotkeys.call(this,event);}else{this.handleHotkeys(event);}};_proto.handleHotkeys=function handleHotkeys(event){var hotkeys=this.options_.userActions?this.options_.userActions.hotkeys:{};var _hotkeys$fullscreenKe=hotkeys.fullscreenKey,fullscreenKey=_hotkeys$fullscreenKe===void 0?function(keydownEvent){return import_keycode["default"].isEventKey(keydownEvent,"f");}:_hotkeys$fullscreenKe,_hotkeys$muteKey=hotkeys.muteKey,muteKey=_hotkeys$muteKey===void 0?function(keydownEvent){return import_keycode["default"].isEventKey(keydownEvent,"m");}:_hotkeys$muteKey,_hotkeys$playPauseKey=hotkeys.playPauseKey,playPauseKey=_hotkeys$playPauseKey===void 0?function(keydownEvent){return import_keycode["default"].isEventKey(keydownEvent,"k")||import_keycode["default"].isEventKey(keydownEvent,"Space");}:_hotkeys$playPauseKey;if(fullscreenKey.call(this,event)){event.preventDefault();event.stopPropagation();var FSToggle=Component$1.getComponent("FullscreenToggle");if(import_document["default"][this.fsApi_.fullscreenEnabled]!==false){FSToggle.prototype.handleClick.call(this,event);}}else if(muteKey.call(this,event)){event.preventDefault();event.stopPropagation();var MuteToggle2=Component$1.getComponent("MuteToggle");MuteToggle2.prototype.handleClick.call(this,event);}else if(playPauseKey.call(this,event)){event.preventDefault();event.stopPropagation();var PlayToggle2=Component$1.getComponent("PlayToggle");PlayToggle2.prototype.handleClick.call(this,event);}};_proto.canPlayType=function canPlayType3(type2){var can;for(var i=0,j=this.options_.techOrder;i<j.length;i++){var techName=j[i];var tech=Tech.getTech(techName);if(!tech){tech=Component$1.getComponent(techName);}if(!tech){log$1.error('The "'+techName+'" tech is undefined. Skipped browser support check for that tech.');continue;}if(tech.isSupported()){can=tech.canPlayType(type2);if(can){return can;}}}return"";};_proto.selectSource=function selectSource(sources){var _this14=this;var techs=this.options_.techOrder.map(function(techName){return[techName,Tech.getTech(techName)];}).filter(function(_ref){var techName=_ref[0],tech=_ref[1];if(tech){return tech.isSupported();}log$1.error('The "'+techName+'" tech is undefined. Skipped browser support check for that tech.');return false;});var findFirstPassingTechSourcePair=function findFirstPassingTechSourcePair2(outerArray,innerArray,tester){var found;outerArray.some(function(outerChoice){return innerArray.some(function(innerChoice){found=tester(outerChoice,innerChoice);if(found){return true;}});});return found;};var foundSourceAndTech;var flip=function flip2(fn){return function(a,b){return fn(b,a);};};var finder=function finder2(_ref2,source){var techName=_ref2[0],tech=_ref2[1];if(tech.canPlaySource(source,_this14.options_[techName.toLowerCase()])){return{source:source,tech:techName};}};if(this.options_.sourceOrder){foundSourceAndTech=findFirstPassingTechSourcePair(sources,techs,flip(finder));}else{foundSourceAndTech=findFirstPassingTechSourcePair(techs,sources,finder);}return foundSourceAndTech||false;};_proto.handleSrc_=function handleSrc_(source,isRetry){var _this15=this;if(typeof source==="undefined"){return this.cache_.src||"";}if(this.resetRetryOnError_){this.resetRetryOnError_();}var sources=filterSource(source);if(!sources.length){this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)});},0);return;}this.changingSrc_=true;if(!isRetry){this.cache_.sources=sources;}this.updateSourceCaches_(sources[0]);setSource(this,sources[0],function(middlewareSource,mws){_this15.middleware_=mws;if(!isRetry){_this15.cache_.sources=sources;}_this15.updateSourceCaches_(middlewareSource);var err=_this15.src_(middlewareSource);if(err){if(sources.length>1){return _this15.handleSrc_(sources.slice(1));}_this15.changingSrc_=false;_this15.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)});},0);_this15.triggerReady();return;}setTech(mws,_this15.tech_);});if(this.options_.retryOnError&&sources.length>1){var retry=function retry2(){_this15.error(null);_this15.handleSrc_(sources.slice(1),true);};var stopListeningForErrors=function stopListeningForErrors2(){_this15.off("error",retry);};this.one("error",retry);this.one("playing",stopListeningForErrors);this.resetRetryOnError_=function(){_this15.off("error",retry);_this15.off("playing",stopListeningForErrors);};}};_proto.src=function src(source){return this.handleSrc_(source,false);};_proto.src_=function src_(source){var _this16=this;var sourceTech=this.selectSource([source]);if(!sourceTech){return true;}if(!titleCaseEquals(sourceTech.tech,this.techName_)){this.changingSrc_=true;this.loadTech_(sourceTech.tech,sourceTech.source);this.tech_.ready(function(){_this16.changingSrc_=false;});return false;}this.ready(function(){if(this.tech_.constructor.prototype.hasOwnProperty("setSource")){this.techCall_("setSource",source);}else{this.techCall_("src",source.src);}this.changingSrc_=false;},true);return false;};_proto.load=function load(){this.techCall_("load");};_proto.reset=function reset3(){var _this17=this;var PromiseClass=this.options_.Promise||import_window6["default"].Promise;if(this.paused()||!PromiseClass){this.doReset_();}else{var playPromise=this.play();silencePromise(playPromise.then(function(){return _this17.doReset_();}));}};_proto.doReset_=function doReset_(){if(this.tech_){this.tech_.clearTracks("text");}this.resetCache_();this.poster("");this.loadTech_(this.options_.techOrder[0],null);this.techCall_("reset");this.resetControlBarUI_();if(isEvented(this)){this.trigger("playerreset");}};_proto.resetControlBarUI_=function resetControlBarUI_(){this.resetProgressBar_();this.resetPlaybackRate_();this.resetVolumeBar_();};_proto.resetProgressBar_=function resetProgressBar_(){this.currentTime(0);var _this$controlBar=this.controlBar,durationDisplay=_this$controlBar.durationDisplay,remainingTimeDisplay=_this$controlBar.remainingTimeDisplay;if(durationDisplay){durationDisplay.updateContent();}if(remainingTimeDisplay){remainingTimeDisplay.updateContent();}};_proto.resetPlaybackRate_=function resetPlaybackRate_(){this.playbackRate(this.defaultPlaybackRate());this.handleTechRateChange_();};_proto.resetVolumeBar_=function resetVolumeBar_(){this.volume(1);this.trigger("volumechange");};_proto.currentSources=function currentSources(){var source=this.currentSource();var sources=[];if(Object.keys(source).length!==0){sources.push(source);}return this.cache_.sources||sources;};_proto.currentSource=function currentSource(){return this.cache_.source||{};};_proto.currentSrc=function currentSrc(){return this.currentSource()&&this.currentSource().src||"";};_proto.currentType=function currentType(){return this.currentSource()&&this.currentSource().type||"";};_proto.preload=function preload(value){if(value!==void 0){this.techCall_("setPreload",value);this.options_.preload=value;return;}return this.techGet_("preload");};_proto.autoplay=function autoplay(value){if(value===void 0){return this.options_.autoplay||false;}var techAutoplay;if(typeof value==="string"&&/(any|play|muted)/.test(value)||value===true&&this.options_.normalizeAutoplay){this.options_.autoplay=value;this.manualAutoplay_(typeof value==="string"?value:"play");techAutoplay=false;}else if(!value){this.options_.autoplay=false;}else{this.options_.autoplay=true;}techAutoplay=typeof techAutoplay==="undefined"?this.options_.autoplay:techAutoplay;if(this.tech_){this.techCall_("setAutoplay",techAutoplay);}};_proto.playsinline=function playsinline(value){if(value!==void 0){this.techCall_("setPlaysinline",value);this.options_.playsinline=value;return this;}return this.techGet_("playsinline");};_proto.loop=function loop(value){if(value!==void 0){this.techCall_("setLoop",value);this.options_.loop=value;return;}return this.techGet_("loop");};_proto.poster=function poster(src){if(src===void 0){return this.poster_;}if(!src){src="";}if(src===this.poster_){return;}this.poster_=src;this.techCall_("setPoster",src);this.isPosterFromTech_=false;this.trigger("posterchange");};_proto.handleTechPosterChange_=function handleTechPosterChange_(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var newPoster=this.tech_.poster()||"";if(newPoster!==this.poster_){this.poster_=newPoster;this.isPosterFromTech_=true;this.trigger("posterchange");}}};_proto.controls=function controls(bool){if(bool===void 0){return!!this.controls_;}bool=!!bool;if(this.controls_===bool){return;}this.controls_=bool;if(this.usingNativeControls()){this.techCall_("setControls",bool);}if(this.controls_){this.removeClass("vjs-controls-disabled");this.addClass("vjs-controls-enabled");this.trigger("controlsenabled");if(!this.usingNativeControls()){this.addTechControlsListeners_();}}else{this.removeClass("vjs-controls-enabled");this.addClass("vjs-controls-disabled");this.trigger("controlsdisabled");if(!this.usingNativeControls()){this.removeTechControlsListeners_();}}};_proto.usingNativeControls=function usingNativeControls(bool){if(bool===void 0){return!!this.usingNativeControls_;}bool=!!bool;if(this.usingNativeControls_===bool){return;}this.usingNativeControls_=bool;if(this.usingNativeControls_){this.addClass("vjs-using-native-controls");this.trigger("usingnativecontrols");}else{this.removeClass("vjs-using-native-controls");this.trigger("usingcustomcontrols");}};_proto.error=function error(err){var _this18=this;if(err===void 0){return this.error_||null;}hooks("beforeerror").forEach(function(hookFunction){var newErr=hookFunction(_this18,err);if(!(isObject4(newErr)&&!Array.isArray(newErr)||typeof newErr==="string"||typeof newErr==="number"||newErr===null)){_this18.log.error("please return a value that MediaError expects in beforeerror hooks");return;}err=newErr;});if(this.options_.suppressNotSupportedError&&err&&err.code===4){var triggerSuppressedError=function triggerSuppressedError2(){this.error(err);};this.options_.suppressNotSupportedError=false;this.any(["click","touchstart"],triggerSuppressedError);this.one("loadstart",function(){this.off(["click","touchstart"],triggerSuppressedError);});return;}if(err===null){this.error_=err;this.removeClass("vjs-error");if(this.errorDisplay){this.errorDisplay.close();}return;}this.error_=new MediaError(err);this.addClass("vjs-error");log$1.error("(CODE:"+this.error_.code+" "+MediaError.errorTypes[this.error_.code]+")",this.error_.message,this.error_);this.trigger("error");hooks("error").forEach(function(hookFunction){return hookFunction(_this18,_this18.error_);});return;};_proto.reportUserActivity=function reportUserActivity(event){this.userActivity_=true;};_proto.userActive=function userActive(bool){if(bool===void 0){return this.userActive_;}bool=!!bool;if(bool===this.userActive_){return;}this.userActive_=bool;if(this.userActive_){this.userActivity_=true;this.removeClass("vjs-user-inactive");this.addClass("vjs-user-active");this.trigger("useractive");return;}if(this.tech_){this.tech_.one("mousemove",function(e){e.stopPropagation();e.preventDefault();});}this.userActivity_=false;this.removeClass("vjs-user-active");this.addClass("vjs-user-inactive");this.trigger("userinactive");};_proto.listenForUserActivity_=function listenForUserActivity_(){var mouseInProgress;var lastMoveX;var lastMoveY;var handleActivity=bind(this,this.reportUserActivity);var handleMouseMove=function handleMouseMove2(e){if(e.screenX!==lastMoveX||e.screenY!==lastMoveY){lastMoveX=e.screenX;lastMoveY=e.screenY;handleActivity();}};var handleMouseDown=function handleMouseDown2(){handleActivity();this.clearInterval(mouseInProgress);mouseInProgress=this.setInterval(handleActivity,250);};var handleMouseUpAndMouseLeave=function handleMouseUpAndMouseLeave2(event){handleActivity();this.clearInterval(mouseInProgress);};this.on("mousedown",handleMouseDown);this.on("mousemove",handleMouseMove);this.on("mouseup",handleMouseUpAndMouseLeave);this.on("mouseleave",handleMouseUpAndMouseLeave);var controlBar=this.getChild("controlBar");if(controlBar&&!IS_IOS&&!IS_ANDROID){controlBar.on("mouseenter",function(event){if(this.player().options_.inactivityTimeout!==0){this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout;}this.player().options_.inactivityTimeout=0;});controlBar.on("mouseleave",function(event){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout;});}this.on("keydown",handleActivity);this.on("keyup",handleActivity);var inactivityTimeout;this.setInterval(function(){if(!this.userActivity_){return;}this.userActivity_=false;this.userActive(true);this.clearTimeout(inactivityTimeout);var timeout=this.options_.inactivityTimeout;if(timeout<=0){return;}inactivityTimeout=this.setTimeout(function(){if(!this.userActivity_){this.userActive(false);}},timeout);},250);};_proto.playbackRate=function playbackRate(rate){if(rate!==void 0){this.techCall_("setPlaybackRate",rate);return;}if(this.tech_&&this.tech_.featuresPlaybackRate){return this.cache_.lastPlaybackRate||this.techGet_("playbackRate");}return 1;};_proto.defaultPlaybackRate=function defaultPlaybackRate(rate){if(rate!==void 0){return this.techCall_("setDefaultPlaybackRate",rate);}if(this.tech_&&this.tech_.featuresPlaybackRate){return this.techGet_("defaultPlaybackRate");}return 1;};_proto.isAudio=function isAudio(bool){if(bool!==void 0){this.isAudio_=!!bool;return;}return!!this.isAudio_;};_proto.enableAudioOnlyUI_=function enableAudioOnlyUI_(){var _this19=this;this.addClass("vjs-audio-only-mode");var playerChildren=this.children();var controlBar=this.getChild("ControlBar");var controlBarHeight=controlBar&&controlBar.currentHeight();playerChildren.forEach(function(child){if(child===controlBar){return;}if(child.el_&&!child.hasClass("vjs-hidden")){child.hide();_this19.audioOnlyCache_.hiddenChildren.push(child);}});this.audioOnlyCache_.playerHeight=this.currentHeight();this.height(controlBarHeight);this.trigger("audioonlymodechange");};_proto.disableAudioOnlyUI_=function disableAudioOnlyUI_(){this.removeClass("vjs-audio-only-mode");this.audioOnlyCache_.hiddenChildren.forEach(function(child){return child.show();});this.height(this.audioOnlyCache_.playerHeight);this.trigger("audioonlymodechange");};_proto.audioOnlyMode=function audioOnlyMode(value){var _this20=this;if(typeof value!=="boolean"||value===this.audioOnlyMode_){return this.audioOnlyMode_;}this.audioOnlyMode_=value;var PromiseClass=this.options_.Promise||import_window6["default"].Promise;if(PromiseClass){if(value){var exitPromises=[];if(this.isInPictureInPicture()){exitPromises.push(this.exitPictureInPicture());}if(this.isFullscreen()){exitPromises.push(this.exitFullscreen());}if(this.audioPosterMode()){exitPromises.push(this.audioPosterMode(false));}return PromiseClass.all(exitPromises).then(function(){return _this20.enableAudioOnlyUI_();});}return PromiseClass.resolve().then(function(){return _this20.disableAudioOnlyUI_();});}if(value){if(this.isInPictureInPicture()){this.exitPictureInPicture();}if(this.isFullscreen()){this.exitFullscreen();}this.enableAudioOnlyUI_();}else{this.disableAudioOnlyUI_();}};_proto.enablePosterModeUI_=function enablePosterModeUI_(){var tech=this.tech_&&this.tech_;tech.hide();this.addClass("vjs-audio-poster-mode");this.trigger("audiopostermodechange");};_proto.disablePosterModeUI_=function disablePosterModeUI_(){var tech=this.tech_&&this.tech_;tech.show();this.removeClass("vjs-audio-poster-mode");this.trigger("audiopostermodechange");};_proto.audioPosterMode=function audioPosterMode(value){var _this21=this;if(typeof value!=="boolean"||value===this.audioPosterMode_){return this.audioPosterMode_;}this.audioPosterMode_=value;var PromiseClass=this.options_.Promise||import_window6["default"].Promise;if(PromiseClass){if(value){if(this.audioOnlyMode()){var audioOnlyModePromise=this.audioOnlyMode(false);return audioOnlyModePromise.then(function(){_this21.enablePosterModeUI_();});}return PromiseClass.resolve().then(function(){_this21.enablePosterModeUI_();});}return PromiseClass.resolve().then(function(){_this21.disablePosterModeUI_();});}if(value){if(this.audioOnlyMode()){this.audioOnlyMode(false);}this.enablePosterModeUI_();return;}this.disablePosterModeUI_();};_proto.addTextTrack=function addTextTrack(kind,label,language){if(this.tech_){return this.tech_.addTextTrack(kind,label,language);}};_proto.addRemoteTextTrack=function addRemoteTextTrack(options,manualCleanup){if(this.tech_){return this.tech_.addRemoteTextTrack(options,manualCleanup);}};_proto.removeRemoteTextTrack=function removeRemoteTextTrack(obj){if(obj===void 0){obj={};}var _obj=obj,track=_obj.track;if(!track){track=obj;}if(this.tech_){return this.tech_.removeRemoteTextTrack(track);}};_proto.getVideoPlaybackQuality=function getVideoPlaybackQuality(){return this.techGet_("getVideoPlaybackQuality");};_proto.videoWidth=function videoWidth(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0;};_proto.videoHeight=function videoHeight(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0;};_proto.language=function language(code){if(code===void 0){return this.language_;}if(this.language_!==String(code).toLowerCase()){this.language_=String(code).toLowerCase();if(isEvented(this)){this.trigger("languagechange");}}};_proto.languages=function languages(){return mergeOptions$3(Player2.prototype.options_.languages,this.languages_);};_proto.toJSON=function toJSON(){var options=mergeOptions$3(this.options_);var tracks=options.tracks;options.tracks=[];for(var i=0;i<tracks.length;i++){var track=tracks[i];track=mergeOptions$3(track);track.player=void 0;options.tracks[i]=track;}return options;};_proto.createModal=function createModal(content,options){var _this22=this;options=options||{};options.content=content||"";var modal=new ModalDialog(this,options);this.addChild(modal);modal.on("dispose",function(){_this22.removeChild(modal);});modal.open();return modal;};_proto.updateCurrentBreakpoint_=function updateCurrentBreakpoint_(){if(!this.responsive()){return;}var currentBreakpoint=this.currentBreakpoint();var currentWidth=this.currentWidth();for(var i=0;i<BREAKPOINT_ORDER.length;i++){var candidateBreakpoint=BREAKPOINT_ORDER[i];var maxWidth=this.breakpoints_[candidateBreakpoint];if(currentWidth<=maxWidth){if(currentBreakpoint===candidateBreakpoint){return;}if(currentBreakpoint){this.removeClass(BREAKPOINT_CLASSES[currentBreakpoint]);}this.addClass(BREAKPOINT_CLASSES[candidateBreakpoint]);this.breakpoint_=candidateBreakpoint;break;}}};_proto.removeCurrentBreakpoint_=function removeCurrentBreakpoint_(){var className=this.currentBreakpointClass();this.breakpoint_="";if(className){this.removeClass(className);}};_proto.breakpoints=function breakpoints(_breakpoints){if(_breakpoints===void 0){return assign(this.breakpoints_);}this.breakpoint_="";this.breakpoints_=assign({},DEFAULT_BREAKPOINTS,_breakpoints);this.updateCurrentBreakpoint_();return assign(this.breakpoints_);};_proto.responsive=function responsive(value){if(value===void 0){return this.responsive_;}value=Boolean(value);var current=this.responsive_;if(value===current){return;}this.responsive_=value;if(value){this.on("playerresize",this.boundUpdateCurrentBreakpoint_);this.updateCurrentBreakpoint_();}else{this.off("playerresize",this.boundUpdateCurrentBreakpoint_);this.removeCurrentBreakpoint_();}return value;};_proto.currentBreakpoint=function currentBreakpoint(){return this.breakpoint_;};_proto.currentBreakpointClass=function currentBreakpointClass(){return BREAKPOINT_CLASSES[this.breakpoint_]||"";};_proto.loadMedia=function loadMedia(media,ready){var _this23=this;if(!media||_typeof(media)!=="object"){return;}this.reset();this.cache_.media=mergeOptions$3(media);var _this$cache_$media=this.cache_.media,artwork=_this$cache_$media.artwork,poster=_this$cache_$media.poster,src=_this$cache_$media.src,textTracks=_this$cache_$media.textTracks;if(!artwork&&poster){this.cache_.media.artwork=[{src:poster,type:getMimetype(poster)}];}if(src){this.src(src);}if(poster){this.poster(poster);}if(Array.isArray(textTracks)){textTracks.forEach(function(tt){return _this23.addRemoteTextTrack(tt,false);});}this.ready(ready);};_proto.getMedia=function getMedia(){if(!this.cache_.media){var poster=this.poster();var src=this.currentSources();var textTracks=Array.prototype.map.call(this.remoteTextTracks(),function(tt){return{kind:tt.kind,label:tt.label,language:tt.language,src:tt.src};});var media={src:src,textTracks:textTracks};if(poster){media.poster=poster;media.artwork=[{src:media.poster,type:getMimetype(media.poster)}];}return media;}return mergeOptions$3(this.cache_.media);};Player2.getTagSettings=function getTagSettings(tag){var baseOptions={sources:[],tracks:[]};var tagOptions=getAttributes(tag);var dataSetup=tagOptions["data-setup"];if(hasClass(tag,"vjs-fill")){tagOptions.fill=true;}if(hasClass(tag,"vjs-fluid")){tagOptions.fluid=true;}if(dataSetup!==null){var _safeParseTuple=(0,import_tuple["default"])(dataSetup||"{}"),err=_safeParseTuple[0],data=_safeParseTuple[1];if(err){log$1.error(err);}assign(tagOptions,data);}assign(baseOptions,tagOptions);if(tag.hasChildNodes()){var children=tag.childNodes;for(var i=0,j=children.length;i<j;i++){var child=children[i];var childName=child.nodeName.toLowerCase();if(childName==="source"){baseOptions.sources.push(getAttributes(child));}else if(childName==="track"){baseOptions.tracks.push(getAttributes(child));}}}return baseOptions;};_proto.flexNotSupported_=function flexNotSupported_(){var elem=import_document["default"].createElement("i");return!("flexBasis"in elem.style||"webkitFlexBasis"in elem.style||"mozFlexBasis"in elem.style||"msFlexBasis"in elem.style||"msFlexOrder"in elem.style);};_proto.debug=function debug(enabled){if(enabled===void 0){return this.debugEnabled_;}if(enabled){this.trigger("debugon");this.previousLogLevel_=this.log.level;this.log.level("debug");this.debugEnabled_=true;}else{this.trigger("debugoff");this.log.level(this.previousLogLevel_);this.previousLogLevel_=void 0;this.debugEnabled_=false;}};_proto.playbackRates=function playbackRates(newRates){if(newRates===void 0){return this.cache_.playbackRates;}if(!Array.isArray(newRates)){return;}if(!newRates.every(function(rate){return typeof rate==="number";})){return;}this.cache_.playbackRates=newRates;this.trigger("playbackrateschange");};return Player2;}(Component$1);ALL.names.forEach(function(name){var props=ALL[name];Player.prototype[props.getterName]=function(){if(this.tech_){return this.tech_[props.getterName]();}this[props.privateName]=this[props.privateName]||new props.ListClass();return this[props.privateName];};});Player.prototype.crossorigin=Player.prototype.crossOrigin;Player.players={};var navigator2=import_window6["default"].navigator;Player.prototype.options_={techOrder:Tech.defaultTechOrder_,html5:{},inactivityTimeout:2e3,playbackRates:[],liveui:false,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:navigator2&&(navigator2.languages&&navigator2.languages[0]||navigator2.userLanguage||navigator2.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:false,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:false,audioOnlyMode:false,audioPosterMode:false};["ended","seeking","seekable","networkState","readyState"].forEach(function(fn){Player.prototype[fn]=function(){return this.techGet_(fn);};});TECH_EVENTS_RETRIGGER.forEach(function(event){Player.prototype["handleTech"+toTitleCase$1(event)+"_"]=function(){return this.trigger(event);};});Component$1.registerComponent("Player",Player);var BASE_PLUGIN_NAME="plugin";var PLUGIN_CACHE_KEY="activePlugins_";var pluginStorage={};var pluginExists=function pluginExists2(name){return pluginStorage.hasOwnProperty(name);};var getPlugin=function getPlugin2(name){return pluginExists(name)?pluginStorage[name]:void 0;};var markPluginAsActive=function markPluginAsActive2(player2,name){player2[PLUGIN_CACHE_KEY]=player2[PLUGIN_CACHE_KEY]||{};player2[PLUGIN_CACHE_KEY][name]=true;};var triggerSetupEvent=function triggerSetupEvent2(player2,hash,before){var eventName=(before?"before":"")+"pluginsetup";player2.trigger(eventName,hash);player2.trigger(eventName+":"+hash.name,hash);};var createBasicPlugin=function createBasicPlugin2(name,plugin){var basicPluginWrapper=function basicPluginWrapper2(){triggerSetupEvent(this,{name:name,plugin:plugin,instance:null},true);var instance=plugin.apply(this,arguments);markPluginAsActive(this,name);triggerSetupEvent(this,{name:name,plugin:plugin,instance:instance});return instance;};Object.keys(plugin).forEach(function(prop){basicPluginWrapper[prop]=plugin[prop];});return basicPluginWrapper;};var createPluginFactory=function createPluginFactory2(name,PluginSubClass){PluginSubClass.prototype.name=name;return function(){triggerSetupEvent(this,{name:name,plugin:PluginSubClass,instance:null},true);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}var instance=_construct(PluginSubClass,[this].concat(args));this[name]=function(){return instance;};triggerSetupEvent(this,instance.getEventHash());return instance;};};var Plugin=/* @__PURE__ */function(){function Plugin2(player2){if(this.constructor===Plugin2){throw new Error("Plugin must be sub-classed; not directly instantiated.");}this.player=player2;if(!this.log){this.log=this.player.log.createLogger(this.name);}evented(this);delete this.trigger;stateful(this,this.constructor.defaultState);markPluginAsActive(player2,this.name);this.dispose=this.dispose.bind(this);player2.on("dispose",this.dispose);}var _proto=Plugin2.prototype;_proto.version=function version2(){return this.constructor.VERSION;};_proto.getEventHash=function getEventHash(hash){if(hash===void 0){hash={};}hash.name=this.name;hash.plugin=this.constructor;hash.instance=this;return hash;};_proto.trigger=function trigger$12(event,hash){if(hash===void 0){hash={};}return trigger(this.eventBusEl_,event,this.getEventHash(hash));};_proto.handleStateChanged=function handleStateChanged(e){};_proto.dispose=function dispose(){var name=this.name,player2=this.player;this.trigger("dispose");this.off();player2.off("dispose",this.dispose);player2[PLUGIN_CACHE_KEY][name]=false;this.player=this.state=null;player2[name]=createPluginFactory(name,pluginStorage[name]);};Plugin2.isBasic=function isBasic(plugin){var p=typeof plugin==="string"?getPlugin(plugin):plugin;return typeof p==="function"&&!Plugin2.prototype.isPrototypeOf(p.prototype);};Plugin2.registerPlugin=function registerPlugin2(name,plugin){if(typeof name!=="string"){throw new Error('Illegal plugin name, "'+name+'", must be a string, was '+_typeof(name)+".");}if(pluginExists(name)){log$1.warn('A plugin named "'+name+'" already exists. You may want to avoid re-registering plugins!');}else if(Player.prototype.hasOwnProperty(name)){throw new Error('Illegal plugin name, "'+name+'", cannot share a name with an existing player method!');}if(typeof plugin!=="function"){throw new Error('Illegal plugin for "'+name+'", must be a function, was '+_typeof(plugin)+".");}pluginStorage[name]=plugin;if(name!==BASE_PLUGIN_NAME){if(Plugin2.isBasic(plugin)){Player.prototype[name]=createBasicPlugin(name,plugin);}else{Player.prototype[name]=createPluginFactory(name,plugin);}}return plugin;};Plugin2.deregisterPlugin=function deregisterPlugin(name){if(name===BASE_PLUGIN_NAME){throw new Error("Cannot de-register base plugin.");}if(pluginExists(name)){delete pluginStorage[name];delete Player.prototype[name];}};Plugin2.getPlugins=function getPlugins(names){if(names===void 0){names=Object.keys(pluginStorage);}var result;names.forEach(function(name){var plugin=getPlugin(name);if(plugin){result=result||{};result[name]=plugin;}});return result;};Plugin2.getPluginVersion=function getPluginVersion(name){var plugin=getPlugin(name);return plugin&&plugin.VERSION||"";};return Plugin2;}();Plugin.getPlugin=getPlugin;Plugin.BASE_PLUGIN_NAME=BASE_PLUGIN_NAME;Plugin.registerPlugin(BASE_PLUGIN_NAME,Plugin);Player.prototype.usingPlugin=function(name){return!!this[PLUGIN_CACHE_KEY]&&this[PLUGIN_CACHE_KEY][name]===true;};Player.prototype.hasPlugin=function(name){return!!pluginExists(name);};var extend=function extend2(superClass,subClassMethods){if(subClassMethods===void 0){subClassMethods={};}var subClass=function subClass2(){superClass.apply(this,arguments);};var methods={};if(_typeof(subClassMethods)==="object"){if(subClassMethods.constructor!==Object.prototype.constructor){subClass=subClassMethods.constructor;}methods=subClassMethods;}else if(typeof subClassMethods==="function"){subClass=subClassMethods;}_inherits(subClass,superClass);if(superClass){subClass.super_=superClass;}for(var name in methods){if(methods.hasOwnProperty(name)){subClass.prototype[name]=methods[name];}}return subClass;};var normalizeId=function normalizeId2(id){return id.indexOf("#")===0?id.slice(1):id;};function videojs(id,options,ready){var player2=videojs.getPlayer(id);if(player2){if(options){log$1.warn('Player "'+id+'" is already initialised. Options will not be applied.');}if(ready){player2.ready(ready);}return player2;}var el=typeof id==="string"?$("#"+normalizeId(id)):id;if(!isEl(el)){throw new TypeError("The element or ID supplied is not valid. (videojs)");}if(!el.ownerDocument.defaultView||!el.ownerDocument.body.contains(el)){log$1.warn("The element supplied is not included in the DOM");}options=options||{};hooks("beforesetup").forEach(function(hookFunction){var opts=hookFunction(el,mergeOptions$3(options));if(!isObject4(opts)||Array.isArray(opts)){log$1.error("please return an object in beforesetup hooks");return;}options=mergeOptions$3(options,opts);});var PlayerComponent=Component$1.getComponent("Player");player2=new PlayerComponent(el,options,ready);hooks("setup").forEach(function(hookFunction){return hookFunction(player2);});return player2;}videojs.hooks_=hooks_;videojs.hooks=hooks;videojs.hook=hook;videojs.hookOnce=hookOnce;videojs.removeHook=removeHook;if(import_window6["default"].VIDEOJS_NO_DYNAMIC_STYLE!==true&&isReal()){style=$(".vjs-styles-defaults");if(!style){style=createStyleElement("vjs-styles-defaults");head=$("head");if(head){head.insertBefore(style,head.firstChild);}setTextContent(style,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: 56.25%\n      }\n    ");}}var style;var head;autoSetupTimeout(1,videojs);videojs.VERSION=version$5;videojs.options=Player.prototype.options_;videojs.getPlayers=function(){return Player.players;};videojs.getPlayer=function(id){var players=Player.players;var tag;if(typeof id==="string"){var nId=normalizeId(id);var player2=players[nId];if(player2){return player2;}tag=$("#"+nId);}else{tag=id;}if(isEl(tag)){var _tag=tag,_player=_tag.player,playerId=_tag.playerId;if(_player||players[playerId]){return _player||players[playerId];}}};videojs.getAllPlayers=function(){return Object.keys(Player.players).map(function(k){return Player.players[k];}).filter(Boolean);};videojs.players=Player.players;videojs.getComponent=Component$1.getComponent;videojs.registerComponent=function(name,comp){if(Tech.isTech(comp)){log$1.warn("The "+name+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)");}Component$1.registerComponent.call(Component$1,name,comp);};videojs.getTech=Tech.getTech;videojs.registerTech=Tech.registerTech;videojs.use=use;Object.defineProperty(videojs,"middleware",{value:{},writeable:false,enumerable:true});Object.defineProperty(videojs.middleware,"TERMINATOR",{value:TERMINATOR,writeable:false,enumerable:true});videojs.browser=browser;videojs.TOUCH_ENABLED=TOUCH_ENABLED;videojs.extend=extend;videojs.mergeOptions=mergeOptions$3;videojs.bind=bind;videojs.registerPlugin=Plugin.registerPlugin;videojs.deregisterPlugin=Plugin.deregisterPlugin;videojs.plugin=function(name,plugin){log$1.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead");return Plugin.registerPlugin(name,plugin);};videojs.getPlugins=Plugin.getPlugins;videojs.getPlugin=Plugin.getPlugin;videojs.getPluginVersion=Plugin.getPluginVersion;videojs.addLanguage=function(code,data){var _mergeOptions;code=(""+code).toLowerCase();videojs.options.languages=mergeOptions$3(videojs.options.languages,(_mergeOptions={},_mergeOptions[code]=data,_mergeOptions));return videojs.options.languages[code];};videojs.log=log$1;videojs.createLogger=createLogger;videojs.createTimeRange=videojs.createTimeRanges=createTimeRanges;videojs.formatTime=formatTime;videojs.setFormatTime=setFormatTime;videojs.resetFormatTime=resetFormatTime;videojs.parseUrl=parseUrl;videojs.isCrossOrigin=isCrossOrigin;videojs.EventTarget=EventTarget$2;videojs.on=on;videojs.one=one;videojs.off=off;videojs.trigger=trigger;videojs.xhr=import_xhr["default"];videojs.TextTrack=TextTrack;videojs.AudioTrack=AudioTrack;videojs.VideoTrack=VideoTrack;["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(function(k){videojs[k]=function(){log$1.warn("videojs."+k+"() is deprecated; use videojs.dom."+k+"() instead");return Dom[k].apply(null,arguments);};});videojs.computedStyle=computedStyle;videojs.dom=Dom;videojs.url=Url;videojs.defineLazyProperty=defineLazyProperty;videojs.addLanguage("en",{"Non-Fullscreen":"Exit Fullscreen"});var resolveUrl3=resolve_url_default;var resolveManifestRedirect=function resolveManifestRedirect2(handleManifestRedirect,url,req){if(handleManifestRedirect&&req&&req.responseURL&&url!==req.responseURL){return req.responseURL;}return url;};var logger=function logger2(source){if(videojs.log.debug){return videojs.log.debug.bind(videojs,"VHS:",source+" >");}return function(){};};var TIME_FUDGE_FACTOR=1/30;var SAFE_TIME_DELTA=TIME_FUDGE_FACTOR*3;var filterRanges=function filterRanges2(timeRanges,predicate){var results=[];var i;if(timeRanges&&timeRanges.length){for(i=0;i<timeRanges.length;i++){if(predicate(timeRanges.start(i),timeRanges.end(i))){results.push([timeRanges.start(i),timeRanges.end(i)]);}}}return videojs.createTimeRanges(results);};var findRange=function findRange2(buffered,time){return filterRanges(buffered,function(start2,end){return start2-SAFE_TIME_DELTA<=time&&end+SAFE_TIME_DELTA>=time;});};var findNextRange=function findNextRange2(timeRanges,time){return filterRanges(timeRanges,function(start2){return start2-TIME_FUDGE_FACTOR>=time;});};var findGaps=function findGaps2(buffered){if(buffered.length<2){return videojs.createTimeRanges();}var ranges=[];for(var i=1;i<buffered.length;i++){var start2=buffered.end(i-1);var end=buffered.start(i);ranges.push([start2,end]);}return videojs.createTimeRanges(ranges);};var bufferIntersection=function bufferIntersection2(bufferA,bufferB){var start2=null;var end=null;var arity=0;var extents=[];var ranges=[];if(!bufferA||!bufferA.length||!bufferB||!bufferB.length){return videojs.createTimeRange();}var count=bufferA.length;while(count--){extents.push({time:bufferA.start(count),type:"start"});extents.push({time:bufferA.end(count),type:"end"});}count=bufferB.length;while(count--){extents.push({time:bufferB.start(count),type:"start"});extents.push({time:bufferB.end(count),type:"end"});}extents.sort(function(a,b){return a.time-b.time;});for(count=0;count<extents.length;count++){if(extents[count].type==="start"){arity++;if(arity===2){start2=extents[count].time;}}else if(extents[count].type==="end"){arity--;if(arity===1){end=extents[count].time;}}if(start2!==null&&end!==null){ranges.push([start2,end]);start2=null;end=null;}}return videojs.createTimeRanges(ranges);};var printableRange=function printableRange2(range4){var strArr=[];if(!range4||!range4.length){return"";}for(var i=0;i<range4.length;i++){strArr.push(range4.start(i)+" => "+range4.end(i));}return strArr.join(", ");};var timeUntilRebuffer=function timeUntilRebuffer2(buffered,currentTime,playbackRate){if(playbackRate===void 0){playbackRate=1;}var bufferedEnd=buffered.length?buffered.end(buffered.length-1):0;return(bufferedEnd-currentTime)/playbackRate;};var timeRangesToArray=function timeRangesToArray2(timeRanges){var timeRangesList=[];for(var i=0;i<timeRanges.length;i++){timeRangesList.push({start:timeRanges.start(i),end:timeRanges.end(i)});}return timeRangesList;};var isRangeDifferent=function isRangeDifferent2(a,b){if(a===b){return false;}if(!a&&b||!b&&a){return true;}if(a.length!==b.length){return true;}for(var i=0;i<a.length;i++){if(a.start(i)!==b.start(i)||a.end(i)!==b.end(i)){return true;}}return false;};var lastBufferedEnd=function lastBufferedEnd2(a){if(!a||!a.length||!a.end){return;}return a.end(a.length-1);};var timeAheadOf=function timeAheadOf2(range4,startTime){var time=0;if(!range4||!range4.length){return time;}for(var i=0;i<range4.length;i++){var start2=range4.start(i);var end=range4.end(i);if(startTime>end){continue;}if(startTime>start2&&startTime<=end){time+=end-startTime;continue;}time+=end-start2;}return time;};var createTimeRange=videojs.createTimeRange;var segmentDurationWithParts=function segmentDurationWithParts2(playlist,segment){if(!segment.preload){return segment.duration;}var result=0;(segment.parts||[]).forEach(function(p){result+=p.duration;});(segment.preloadHints||[]).forEach(function(p){if(p.type==="PART"){result+=playlist.partTargetDuration;}});return result;};var getPartsAndSegments=function getPartsAndSegments2(playlist){return(playlist.segments||[]).reduce(function(acc,segment,si){if(segment.parts){segment.parts.forEach(function(part,pi){acc.push({duration:part.duration,segmentIndex:si,partIndex:pi,part:part,segment:segment});});}else{acc.push({duration:segment.duration,segmentIndex:si,partIndex:null,segment:segment,part:null});}return acc;},[]);};var getLastParts=function getLastParts2(media){var lastSegment=media.segments&&media.segments.length&&media.segments[media.segments.length-1];return lastSegment&&lastSegment.parts||[];};var getKnownPartCount=function getKnownPartCount2(_ref){var preloadSegment=_ref.preloadSegment;if(!preloadSegment){return;}var parts=preloadSegment.parts,preloadHints=preloadSegment.preloadHints;var partCount=(preloadHints||[]).reduce(function(count,hint){return count+(hint.type==="PART"?1:0);},0);partCount+=parts&&parts.length?parts.length:0;return partCount;};var liveEdgeDelay=function liveEdgeDelay2(master,media){if(media.endList){return 0;}if(master&&master.suggestedPresentationDelay){return master.suggestedPresentationDelay;}var hasParts=getLastParts(media).length>0;if(hasParts&&media.serverControl&&media.serverControl.partHoldBack){return media.serverControl.partHoldBack;}else if(hasParts&&media.partTargetDuration){return media.partTargetDuration*3;}else if(media.serverControl&&media.serverControl.holdBack){return media.serverControl.holdBack;}else if(media.targetDuration){return media.targetDuration*3;}return 0;};var backwardDuration=function backwardDuration2(playlist,endSequence){var result=0;var i=endSequence-playlist.mediaSequence;var segment=playlist.segments[i];if(segment){if(typeof segment.start!=="undefined"){return{result:segment.start,precise:true};}if(typeof segment.end!=="undefined"){return{result:segment.end-segment.duration,precise:true};}}while(i--){segment=playlist.segments[i];if(typeof segment.end!=="undefined"){return{result:result+segment.end,precise:true};}result+=segmentDurationWithParts(playlist,segment);if(typeof segment.start!=="undefined"){return{result:result+segment.start,precise:true};}}return{result:result,precise:false};};var forwardDuration=function forwardDuration2(playlist,endSequence){var result=0;var segment;var i=endSequence-playlist.mediaSequence;for(;i<playlist.segments.length;i++){segment=playlist.segments[i];if(typeof segment.start!=="undefined"){return{result:segment.start-result,precise:true};}result+=segmentDurationWithParts(playlist,segment);if(typeof segment.end!=="undefined"){return{result:segment.end-result,precise:true};}}return{result:-1,precise:false};};var intervalDuration=function intervalDuration2(playlist,endSequence,expired){if(typeof endSequence==="undefined"){endSequence=playlist.mediaSequence+playlist.segments.length;}if(endSequence<playlist.mediaSequence){return 0;}var backward=backwardDuration(playlist,endSequence);if(backward.precise){return backward.result;}var forward=forwardDuration(playlist,endSequence);if(forward.precise){return forward.result;}return backward.result+expired;};var duration2=function duration3(playlist,endSequence,expired){if(!playlist){return 0;}if(typeof expired!=="number"){expired=0;}if(typeof endSequence==="undefined"){if(playlist.totalDuration){return playlist.totalDuration;}if(!playlist.endList){return import_window6["default"].Infinity;}}return intervalDuration(playlist,endSequence,expired);};var sumDurations=function sumDurations2(_ref2){var defaultDuration=_ref2.defaultDuration,durationList=_ref2.durationList,startIndex=_ref2.startIndex,endIndex=_ref2.endIndex;var durations=0;if(startIndex>endIndex){var _ref3=[endIndex,startIndex];startIndex=_ref3[0];endIndex=_ref3[1];}if(startIndex<0){for(var i=startIndex;i<Math.min(0,endIndex);i++){durations+=defaultDuration;}startIndex=0;}for(var _i2=startIndex;_i2<endIndex;_i2++){durations+=durationList[_i2].duration;}return durations;};var playlistEnd=function playlistEnd2(playlist,expired,useSafeLiveEnd,liveEdgePadding){if(!playlist||!playlist.segments){return null;}if(playlist.endList){return duration2(playlist);}if(expired===null){return null;}expired=expired||0;var lastSegmentEndTime=intervalDuration(playlist,playlist.mediaSequence+playlist.segments.length,expired);if(useSafeLiveEnd){liveEdgePadding=typeof liveEdgePadding==="number"?liveEdgePadding:liveEdgeDelay(null,playlist);lastSegmentEndTime-=liveEdgePadding;}return Math.max(0,lastSegmentEndTime);};var seekable=function seekable2(playlist,expired,liveEdgePadding){var useSafeLiveEnd=true;var seekableStart=expired||0;var seekableEnd=playlistEnd(playlist,expired,useSafeLiveEnd,liveEdgePadding);if(seekableEnd===null){return createTimeRange();}return createTimeRange(seekableStart,seekableEnd);};var getMediaInfoForTime=function getMediaInfoForTime2(_ref4){var playlist=_ref4.playlist,currentTime=_ref4.currentTime,startingSegmentIndex=_ref4.startingSegmentIndex,startingPartIndex=_ref4.startingPartIndex,startTime=_ref4.startTime,experimentalExactManifestTimings=_ref4.experimentalExactManifestTimings;var time=currentTime-startTime;var partsAndSegments=getPartsAndSegments(playlist);var startIndex=0;for(var i=0;i<partsAndSegments.length;i++){var partAndSegment=partsAndSegments[i];if(startingSegmentIndex!==partAndSegment.segmentIndex){continue;}if(typeof startingPartIndex==="number"&&typeof partAndSegment.partIndex==="number"&&startingPartIndex!==partAndSegment.partIndex){continue;}startIndex=i;break;}if(time<0){if(startIndex>0){for(var _i2=startIndex-1;_i2>=0;_i2--){var _partAndSegment=partsAndSegments[_i2];time+=_partAndSegment.duration;if(experimentalExactManifestTimings){if(time<0){continue;}}else if(time+TIME_FUDGE_FACTOR<=0){continue;}return{partIndex:_partAndSegment.partIndex,segmentIndex:_partAndSegment.segmentIndex,startTime:startTime-sumDurations({defaultDuration:playlist.targetDuration,durationList:partsAndSegments,startIndex:startIndex,endIndex:_i2})};}}return{partIndex:partsAndSegments[0]&&partsAndSegments[0].partIndex||null,segmentIndex:partsAndSegments[0]&&partsAndSegments[0].segmentIndex||0,startTime:currentTime};}if(startIndex<0){for(var _i3=startIndex;_i3<0;_i3++){time-=playlist.targetDuration;if(time<0){return{partIndex:partsAndSegments[0]&&partsAndSegments[0].partIndex||null,segmentIndex:partsAndSegments[0]&&partsAndSegments[0].segmentIndex||0,startTime:currentTime};}}startIndex=0;}for(var _i4=startIndex;_i4<partsAndSegments.length;_i4++){var _partAndSegment2=partsAndSegments[_i4];time-=_partAndSegment2.duration;if(experimentalExactManifestTimings){if(time>0){continue;}}else if(time-TIME_FUDGE_FACTOR>=0){continue;}return{partIndex:_partAndSegment2.partIndex,segmentIndex:_partAndSegment2.segmentIndex,startTime:startTime+sumDurations({defaultDuration:playlist.targetDuration,durationList:partsAndSegments,startIndex:startIndex,endIndex:_i4})};}return{segmentIndex:partsAndSegments[partsAndSegments.length-1].segmentIndex,partIndex:partsAndSegments[partsAndSegments.length-1].partIndex,startTime:currentTime};};var isBlacklisted=function isBlacklisted2(playlist){return playlist.excludeUntil&&playlist.excludeUntil>Date.now();};var isIncompatible=function isIncompatible2(playlist){return playlist.excludeUntil&&playlist.excludeUntil===Infinity;};var isEnabled=function isEnabled2(playlist){var blacklisted=isBlacklisted(playlist);return!playlist.disabled&&!blacklisted;};var isDisabled=function isDisabled2(playlist){return playlist.disabled;};var isAes=function isAes2(media){for(var i=0;i<media.segments.length;i++){if(media.segments[i].key){return true;}}return false;};var hasAttribute=function hasAttribute2(attr,playlist){return playlist.attributes&&playlist.attributes[attr];};var estimateSegmentRequestTime=function estimateSegmentRequestTime2(segmentDuration,bandwidth2,playlist,bytesReceived){if(bytesReceived===void 0){bytesReceived=0;}if(!hasAttribute("BANDWIDTH",playlist)){return NaN;}var size=segmentDuration*playlist.attributes.BANDWIDTH;return(size-bytesReceived*8)/bandwidth2;};var isLowestEnabledRendition=function isLowestEnabledRendition2(master,media){if(master.playlists.length===1){return true;}var currentBandwidth=media.attributes.BANDWIDTH||Number.MAX_VALUE;return master.playlists.filter(function(playlist){if(!isEnabled(playlist)){return false;}return(playlist.attributes.BANDWIDTH||0)<currentBandwidth;}).length===0;};var playlistMatch=function playlistMatch2(a,b){if(!a&&!b||!a&&b||a&&!b){return false;}if(a===b){return true;}if(a.id&&b.id&&a.id===b.id){return true;}if(a.resolvedUri&&b.resolvedUri&&a.resolvedUri===b.resolvedUri){return true;}if(a.uri&&b.uri&&a.uri===b.uri){return true;}return false;};var someAudioVariant=function someAudioVariant2(master,callback2){var AUDIO5=master&&master.mediaGroups&&master.mediaGroups.AUDIO||{};var found=false;for(var groupName in AUDIO5){for(var label in AUDIO5[groupName]){found=callback2(AUDIO5[groupName][label]);if(found){break;}}if(found){break;}}return!!found;};var isAudioOnly=function isAudioOnly2(master){if(!master||!master.playlists||!master.playlists.length){var found=someAudioVariant(master,function(variant){return variant.playlists&&variant.playlists.length||variant.uri;});return found;}var _loop=function _loop2(i2){var playlist=master.playlists[i2];var CODECS=playlist.attributes&&playlist.attributes.CODECS;if(CODECS&&CODECS.split(",").every(function(c){return isAudioCodec(c);})){return"continue";}var found2=someAudioVariant(master,function(variant){return playlistMatch(playlist,variant);});if(found2){return"continue";}return{v:false};};for(var i=0;i<master.playlists.length;i++){var _ret=_loop(i);if(_ret==="continue")continue;if(_typeof(_ret)==="object")return _ret.v;}return true;};var Playlist={liveEdgeDelay:liveEdgeDelay,duration:duration2,seekable:seekable,getMediaInfoForTime:getMediaInfoForTime,isEnabled:isEnabled,isDisabled:isDisabled,isBlacklisted:isBlacklisted,isIncompatible:isIncompatible,playlistEnd:playlistEnd,isAes:isAes,hasAttribute:hasAttribute,estimateSegmentRequestTime:estimateSegmentRequestTime,isLowestEnabledRendition:isLowestEnabledRendition,isAudioOnly:isAudioOnly,playlistMatch:playlistMatch,segmentDurationWithParts:segmentDurationWithParts};var log=videojs.log;var createPlaylistID=function createPlaylistID2(index,uri){return index+"-"+uri;};var parseManifest=function parseManifest2(_ref){var onwarn=_ref.onwarn,oninfo=_ref.oninfo,manifestString=_ref.manifestString,_ref$customTagParsers=_ref.customTagParsers,customTagParsers=_ref$customTagParsers===void 0?[]:_ref$customTagParsers,_ref$customTagMappers=_ref.customTagMappers,customTagMappers=_ref$customTagMappers===void 0?[]:_ref$customTagMappers,experimentalLLHLS=_ref.experimentalLLHLS;var parser6=new Parser();if(onwarn){parser6.on("warn",onwarn);}if(oninfo){parser6.on("info",oninfo);}customTagParsers.forEach(function(customParser){return parser6.addParser(customParser);});customTagMappers.forEach(function(mapper){return parser6.addTagMapper(mapper);});parser6.push(manifestString);parser6.end();var manifest=parser6.manifest;if(!experimentalLLHLS){["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(k){if(manifest.hasOwnProperty(k)){delete manifest[k];}});if(manifest.segments){manifest.segments.forEach(function(segment){["parts","preloadHints"].forEach(function(k){if(segment.hasOwnProperty(k)){delete segment[k];}});});}}if(!manifest.targetDuration){var targetDuration=10;if(manifest.segments&&manifest.segments.length){targetDuration=manifest.segments.reduce(function(acc,s){return Math.max(acc,s.duration);},0);}if(onwarn){onwarn("manifest has no targetDuration defaulting to "+targetDuration);}manifest.targetDuration=targetDuration;}var parts=getLastParts(manifest);if(parts.length&&!manifest.partTargetDuration){var partTargetDuration=parts.reduce(function(acc,p){return Math.max(acc,p.duration);},0);if(onwarn){onwarn("manifest has no partTargetDuration defaulting to "+partTargetDuration);log.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.");}manifest.partTargetDuration=partTargetDuration;}return manifest;};var forEachMediaGroup3=function forEachMediaGroup4(master,callback2){if(!master.mediaGroups){return;}["AUDIO","SUBTITLES"].forEach(function(mediaType){if(!master.mediaGroups[mediaType]){return;}for(var groupKey in master.mediaGroups[mediaType]){for(var labelKey in master.mediaGroups[mediaType][groupKey]){var mediaProperties=master.mediaGroups[mediaType][groupKey][labelKey];callback2(mediaProperties,mediaType,groupKey,labelKey);}}});};var setupMediaPlaylist=function setupMediaPlaylist2(_ref2){var playlist=_ref2.playlist,uri=_ref2.uri,id=_ref2.id;playlist.id=id;playlist.playlistErrors_=0;if(uri){playlist.uri=uri;}playlist.attributes=playlist.attributes||{};};var setupMediaPlaylists=function setupMediaPlaylists2(master){var i=master.playlists.length;while(i--){var playlist=master.playlists[i];setupMediaPlaylist({playlist:playlist,id:createPlaylistID(i,playlist.uri)});playlist.resolvedUri=resolveUrl3(master.uri,playlist.uri);master.playlists[playlist.id]=playlist;master.playlists[playlist.uri]=playlist;if(!playlist.attributes.BANDWIDTH){log.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.");}}};var resolveMediaGroupUris=function resolveMediaGroupUris2(master){forEachMediaGroup3(master,function(properties){if(properties.uri){properties.resolvedUri=resolveUrl3(master.uri,properties.uri);}});};var masterForMedia=function masterForMedia2(media,uri){var id=createPlaylistID(0,uri);var master={mediaGroups:{"AUDIO":{},"VIDEO":{},"CLOSED-CAPTIONS":{},"SUBTITLES":{}},uri:import_window6["default"].location.href,resolvedUri:import_window6["default"].location.href,playlists:[{uri:uri,id:id,resolvedUri:uri,attributes:{}}]};master.playlists[id]=master.playlists[0];master.playlists[uri]=master.playlists[0];return master;};var addPropertiesToMaster=function addPropertiesToMaster2(master,uri){master.uri=uri;for(var i=0;i<master.playlists.length;i++){if(!master.playlists[i].uri){var phonyUri="placeholder-uri-"+i;master.playlists[i].uri=phonyUri;}}var audioOnlyMaster=isAudioOnly(master);forEachMediaGroup3(master,function(properties,mediaType,groupKey,labelKey){var groupId="placeholder-uri-"+mediaType+"-"+groupKey+"-"+labelKey;if(!properties.playlists||!properties.playlists.length){if(audioOnlyMaster&&mediaType==="AUDIO"&&!properties.uri){for(var _i2=0;_i2<master.playlists.length;_i2++){var p=master.playlists[_i2];if(p.attributes&&p.attributes.AUDIO&&p.attributes.AUDIO===groupKey){return;}}}properties.playlists=[_extends({},properties)];}properties.playlists.forEach(function(p2,i2){var id=createPlaylistID(i2,groupId);if(p2.uri){p2.resolvedUri=p2.resolvedUri||resolveUrl3(master.uri,p2.uri);}else{p2.uri=i2===0?groupId:id;p2.resolvedUri=p2.uri;}p2.id=p2.id||id;p2.attributes=p2.attributes||{};master.playlists[p2.id]=p2;master.playlists[p2.uri]=p2;});});setupMediaPlaylists(master);resolveMediaGroupUris(master);};var mergeOptions$2=videojs.mergeOptions;var EventTarget$1=videojs.EventTarget;var addLLHLSQueryDirectives=function addLLHLSQueryDirectives2(uri,media){if(media.endList||!media.serverControl){return uri;}var parameters={};if(media.serverControl.canBlockReload){var preloadSegment=media.preloadSegment;var nextMSN=media.mediaSequence+media.segments.length;if(preloadSegment){var parts=preloadSegment.parts||[];var nextPart=getKnownPartCount(media)-1;if(nextPart>-1&&nextPart!==parts.length-1){parameters._HLS_part=nextPart;}if(nextPart>-1||parts.length){nextMSN--;}}parameters._HLS_msn=nextMSN;}if(media.serverControl&&media.serverControl.canSkipUntil){parameters._HLS_skip=media.serverControl.canSkipDateranges?"v2":"YES";}if(Object.keys(parameters).length){var parsedUri=new import_window6["default"].URL(uri);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(name){if(!parameters.hasOwnProperty(name)){return;}parsedUri.searchParams.set(name,parameters[name]);});uri=parsedUri.toString();}return uri;};var updateSegment=function updateSegment2(a,b){if(!a){return b;}var result=mergeOptions$2(a,b);if(a.preloadHints&&!b.preloadHints){delete result.preloadHints;}if(a.parts&&!b.parts){delete result.parts;}else if(a.parts&&b.parts){for(var i=0;i<b.parts.length;i++){if(a.parts&&a.parts[i]){result.parts[i]=mergeOptions$2(a.parts[i],b.parts[i]);}}}if(!a.skipped&&b.skipped){result.skipped=false;}if(a.preload&&!b.preload){result.preload=false;}return result;};var updateSegments=function updateSegments2(original,update2,offset){var oldSegments=original.slice();var newSegments=update2.slice();offset=offset||0;var result=[];var currentMap;for(var newIndex=0;newIndex<newSegments.length;newIndex++){var oldSegment=oldSegments[newIndex+offset];var newSegment=newSegments[newIndex];if(oldSegment){currentMap=oldSegment.map||currentMap;result.push(updateSegment(oldSegment,newSegment));}else{if(currentMap&&!newSegment.map){newSegment.map=currentMap;}result.push(newSegment);}}return result;};var resolveSegmentUris=function resolveSegmentUris2(segment,baseUri){if(!segment.resolvedUri&&segment.uri){segment.resolvedUri=resolveUrl3(baseUri,segment.uri);}if(segment.key&&!segment.key.resolvedUri){segment.key.resolvedUri=resolveUrl3(baseUri,segment.key.uri);}if(segment.map&&!segment.map.resolvedUri){segment.map.resolvedUri=resolveUrl3(baseUri,segment.map.uri);}if(segment.map&&segment.map.key&&!segment.map.key.resolvedUri){segment.map.key.resolvedUri=resolveUrl3(baseUri,segment.map.key.uri);}if(segment.parts&&segment.parts.length){segment.parts.forEach(function(p){if(p.resolvedUri){return;}p.resolvedUri=resolveUrl3(baseUri,p.uri);});}if(segment.preloadHints&&segment.preloadHints.length){segment.preloadHints.forEach(function(p){if(p.resolvedUri){return;}p.resolvedUri=resolveUrl3(baseUri,p.uri);});}};var getAllSegments=function getAllSegments2(media){var segments=media.segments||[];var preloadSegment=media.preloadSegment;if(preloadSegment&&preloadSegment.parts&&preloadSegment.parts.length){if(preloadSegment.preloadHints){for(var i=0;i<preloadSegment.preloadHints.length;i++){if(preloadSegment.preloadHints[i].type==="MAP"){return segments;}}}preloadSegment.duration=media.targetDuration;preloadSegment.preload=true;segments.push(preloadSegment);}return segments;};var isPlaylistUnchanged=function isPlaylistUnchanged2(a,b){return a===b||a.segments&&b.segments&&a.segments.length===b.segments.length&&a.endList===b.endList&&a.mediaSequence===b.mediaSequence&&a.preloadSegment===b.preloadSegment;};var updateMaster$1=function updateMaster(master,newMedia,unchangedCheck){if(unchangedCheck===void 0){unchangedCheck=isPlaylistUnchanged;}var result=mergeOptions$2(master,{});var oldMedia=result.playlists[newMedia.id];if(!oldMedia){return null;}if(unchangedCheck(oldMedia,newMedia)){return null;}newMedia.segments=getAllSegments(newMedia);var mergedPlaylist=mergeOptions$2(oldMedia,newMedia);if(mergedPlaylist.preloadSegment&&!newMedia.preloadSegment){delete mergedPlaylist.preloadSegment;}if(oldMedia.segments){if(newMedia.skip){newMedia.segments=newMedia.segments||[];for(var i=0;i<newMedia.skip.skippedSegments;i++){newMedia.segments.unshift({skipped:true});}}mergedPlaylist.segments=updateSegments(oldMedia.segments,newMedia.segments,newMedia.mediaSequence-oldMedia.mediaSequence);}mergedPlaylist.segments.forEach(function(segment){resolveSegmentUris(segment,mergedPlaylist.resolvedUri);});for(var _i2=0;_i2<result.playlists.length;_i2++){if(result.playlists[_i2].id===newMedia.id){result.playlists[_i2]=mergedPlaylist;}}result.playlists[newMedia.id]=mergedPlaylist;result.playlists[newMedia.uri]=mergedPlaylist;forEachMediaGroup3(master,function(properties,mediaType,groupKey,labelKey){if(!properties.playlists){return;}for(var _i22=0;_i22<properties.playlists.length;_i22++){if(newMedia.id===properties.playlists[_i22].id){properties.playlists[_i22]=mergedPlaylist;}}});return result;};var refreshDelay=function refreshDelay2(media,update2){var segments=media.segments||[];var lastSegment=segments[segments.length-1];var lastPart=lastSegment&&lastSegment.parts&&lastSegment.parts[lastSegment.parts.length-1];var lastDuration=lastPart&&lastPart.duration||lastSegment&&lastSegment.duration;if(update2&&lastDuration){return lastDuration*1e3;}return(media.partTargetDuration||media.targetDuration||10)*500;};var PlaylistLoader=/* @__PURE__ */function(_EventTarget){_inheritsLoose3(PlaylistLoader2,_EventTarget);function PlaylistLoader2(src,vhs,options){var _this;if(options===void 0){options={};}_this=_EventTarget.call(this)||this;if(!src){throw new Error("A non-empty playlist URL or object is required");}_this.logger_=logger("PlaylistLoader");var _options=options,_options$withCredenti=_options.withCredentials,withCredentials=_options$withCredenti===void 0?false:_options$withCredenti,_options$handleManife=_options.handleManifestRedirects,handleManifestRedirects=_options$handleManife===void 0?false:_options$handleManife;_this.src=src;_this.vhs_=vhs;_this.withCredentials=withCredentials;_this.handleManifestRedirects=handleManifestRedirects;var vhsOptions=vhs.options_;_this.customTagParsers=vhsOptions&&vhsOptions.customTagParsers||[];_this.customTagMappers=vhsOptions&&vhsOptions.customTagMappers||[];_this.experimentalLLHLS=vhsOptions&&vhsOptions.experimentalLLHLS||false;if(videojs.browser.IE_VERSION){_this.experimentalLLHLS=false;}_this.state="HAVE_NOTHING";_this.handleMediaupdatetimeout_=_this.handleMediaupdatetimeout_.bind(_assertThisInitialized3(_this));_this.on("mediaupdatetimeout",_this.handleMediaupdatetimeout_);return _this;}var _proto=PlaylistLoader2.prototype;_proto.handleMediaupdatetimeout_=function handleMediaupdatetimeout_(){var _this2=this;if(this.state!=="HAVE_METADATA"){return;}var media=this.media();var uri=resolveUrl3(this.master.uri,media.uri);if(this.experimentalLLHLS){uri=addLLHLSQueryDirectives(uri,media);}this.state="HAVE_CURRENT_METADATA";this.request=this.vhs_.xhr({uri:uri,withCredentials:this.withCredentials},function(error,req){if(!_this2.request){return;}if(error){return _this2.playlistRequestError(_this2.request,_this2.media(),"HAVE_METADATA");}_this2.haveMetadata({playlistString:_this2.request.responseText,url:_this2.media().uri,id:_this2.media().id});});};_proto.playlistRequestError=function playlistRequestError(xhr,playlist,startingState){var uri=playlist.uri,id=playlist.id;this.request=null;if(startingState){this.state=startingState;}this.error={playlist:this.master.playlists[id],status:xhr.status,message:"HLS playlist request error at URL: "+uri+".",responseText:xhr.responseText,code:xhr.status>=500?4:2};this.trigger("error");};_proto.parseManifest_=function parseManifest_(_ref){var _this3=this;var url=_ref.url,manifestString=_ref.manifestString;return parseManifest({onwarn:function onwarn(_ref2){var message=_ref2.message;return _this3.logger_("m3u8-parser warn for "+url+": "+message);},oninfo:function oninfo(_ref3){var message=_ref3.message;return _this3.logger_("m3u8-parser info for "+url+": "+message);},manifestString:manifestString,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,experimentalLLHLS:this.experimentalLLHLS});};_proto.haveMetadata=function haveMetadata(_ref4){var playlistString=_ref4.playlistString,playlistObject=_ref4.playlistObject,url=_ref4.url,id=_ref4.id;this.request=null;this.state="HAVE_METADATA";var playlist=playlistObject||this.parseManifest_({url:url,manifestString:playlistString});playlist.lastRequest=Date.now();setupMediaPlaylist({playlist:playlist,uri:url,id:id});var update2=updateMaster$1(this.master,playlist);this.targetDuration=playlist.partTargetDuration||playlist.targetDuration;this.pendingMedia_=null;if(update2){this.master=update2;this.media_=this.master.playlists[id];}else{this.trigger("playlistunchanged");}this.updateMediaUpdateTimeout_(refreshDelay(this.media(),!!update2));this.trigger("loadedplaylist");};_proto.dispose=function dispose(){this.trigger("dispose");this.stopRequest();import_window6["default"].clearTimeout(this.mediaUpdateTimeout);import_window6["default"].clearTimeout(this.finalRenditionTimeout);this.off();};_proto.stopRequest=function stopRequest(){if(this.request){var oldRequest=this.request;this.request=null;oldRequest.onreadystatechange=null;oldRequest.abort();}};_proto.media=function media(playlist,shouldDelay){var _this4=this;if(!playlist){return this.media_;}if(this.state==="HAVE_NOTHING"){throw new Error("Cannot switch media playlist from "+this.state);}if(typeof playlist==="string"){if(!this.master.playlists[playlist]){throw new Error("Unknown playlist URI: "+playlist);}playlist=this.master.playlists[playlist];}import_window6["default"].clearTimeout(this.finalRenditionTimeout);if(shouldDelay){var delay=(playlist.partTargetDuration||playlist.targetDuration)/2*1e3||5*1e3;this.finalRenditionTimeout=import_window6["default"].setTimeout(this.media.bind(this,playlist,false),delay);return;}var startingState=this.state;var mediaChange=!this.media_||playlist.id!==this.media_.id;var masterPlaylistRef=this.master.playlists[playlist.id];if(masterPlaylistRef&&masterPlaylistRef.endList||playlist.endList&&playlist.segments.length){if(this.request){this.request.onreadystatechange=null;this.request.abort();this.request=null;}this.state="HAVE_METADATA";this.media_=playlist;if(mediaChange){this.trigger("mediachanging");if(startingState==="HAVE_MASTER"){this.trigger("loadedmetadata");}else{this.trigger("mediachange");}}return;}this.updateMediaUpdateTimeout_(refreshDelay(playlist,true));if(!mediaChange){return;}this.state="SWITCHING_MEDIA";if(this.request){if(playlist.resolvedUri===this.request.url){return;}this.request.onreadystatechange=null;this.request.abort();this.request=null;}if(this.media_){this.trigger("mediachanging");}this.pendingMedia_=playlist;this.request=this.vhs_.xhr({uri:playlist.resolvedUri,withCredentials:this.withCredentials},function(error,req){if(!_this4.request){return;}playlist.lastRequest=Date.now();playlist.resolvedUri=resolveManifestRedirect(_this4.handleManifestRedirects,playlist.resolvedUri,req);if(error){return _this4.playlistRequestError(_this4.request,playlist,startingState);}_this4.haveMetadata({playlistString:req.responseText,url:playlist.uri,id:playlist.id});if(startingState==="HAVE_MASTER"){_this4.trigger("loadedmetadata");}else{_this4.trigger("mediachange");}});};_proto.pause=function pause(){if(this.mediaUpdateTimeout){import_window6["default"].clearTimeout(this.mediaUpdateTimeout);this.mediaUpdateTimeout=null;}this.stopRequest();if(this.state==="HAVE_NOTHING"){this.started=false;}if(this.state==="SWITCHING_MEDIA"){if(this.media_){this.state="HAVE_METADATA";}else{this.state="HAVE_MASTER";}}else if(this.state==="HAVE_CURRENT_METADATA"){this.state="HAVE_METADATA";}};_proto.load=function load(shouldDelay){var _this5=this;if(this.mediaUpdateTimeout){import_window6["default"].clearTimeout(this.mediaUpdateTimeout);this.mediaUpdateTimeout=null;}var media=this.media();if(shouldDelay){var delay=media?(media.partTargetDuration||media.targetDuration)/2*1e3:5*1e3;this.mediaUpdateTimeout=import_window6["default"].setTimeout(function(){_this5.mediaUpdateTimeout=null;_this5.load();},delay);return;}if(!this.started){this.start();return;}if(media&&!media.endList){this.trigger("mediaupdatetimeout");}else{this.trigger("loadedplaylist");}};_proto.updateMediaUpdateTimeout_=function updateMediaUpdateTimeout_(delay){var _this6=this;if(this.mediaUpdateTimeout){import_window6["default"].clearTimeout(this.mediaUpdateTimeout);this.mediaUpdateTimeout=null;}if(!this.media()||this.media().endList){return;}this.mediaUpdateTimeout=import_window6["default"].setTimeout(function(){_this6.mediaUpdateTimeout=null;_this6.trigger("mediaupdatetimeout");_this6.updateMediaUpdateTimeout_(delay);},delay);};_proto.start=function start2(){var _this7=this;this.started=true;if(_typeof(this.src)==="object"){if(!this.src.uri){this.src.uri=import_window6["default"].location.href;}this.src.resolvedUri=this.src.uri;setTimeout(function(){_this7.setupInitialPlaylist(_this7.src);},0);return;}this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},function(error,req){if(!_this7.request){return;}_this7.request=null;if(error){_this7.error={status:req.status,message:"HLS playlist request error at URL: "+_this7.src+".",responseText:req.responseText,code:2};if(_this7.state==="HAVE_NOTHING"){_this7.started=false;}return _this7.trigger("error");}_this7.src=resolveManifestRedirect(_this7.handleManifestRedirects,_this7.src,req);var manifest=_this7.parseManifest_({manifestString:req.responseText,url:_this7.src});_this7.setupInitialPlaylist(manifest);});};_proto.srcUri=function srcUri(){return typeof this.src==="string"?this.src:this.src.uri;};_proto.setupInitialPlaylist=function setupInitialPlaylist(manifest){this.state="HAVE_MASTER";if(manifest.playlists){this.master=manifest;addPropertiesToMaster(this.master,this.srcUri());manifest.playlists.forEach(function(playlist){playlist.segments=getAllSegments(playlist);playlist.segments.forEach(function(segment){resolveSegmentUris(segment,playlist.resolvedUri);});});this.trigger("loadedplaylist");if(!this.request){this.media(this.master.playlists[0]);}return;}var uri=this.srcUri()||import_window6["default"].location.href;this.master=masterForMedia(manifest,uri);this.haveMetadata({playlistObject:manifest,url:uri,id:this.master.playlists[0].id});this.trigger("loadedmetadata");};return PlaylistLoader2;}(EventTarget$1);var videojsXHR=videojs.xhr;var mergeOptions$1=videojs.mergeOptions;var callbackWrapper=function callbackWrapper2(request,error,response,callback2){var reqResponse=request.responseType==="arraybuffer"?request.response:request.responseText;if(!error&&reqResponse){request.responseTime=Date.now();request.roundTripTime=request.responseTime-request.requestTime;request.bytesReceived=reqResponse.byteLength||reqResponse.length;if(!request.bandwidth){request.bandwidth=Math.floor(request.bytesReceived/request.roundTripTime*8*1e3);}}if(response.headers){request.responseHeaders=response.headers;}if(error&&error.code==="ETIMEDOUT"){request.timedout=true;}if(!error&&!request.aborted&&response.statusCode!==200&&response.statusCode!==206&&response.statusCode!==0){error=new Error("XHR Failed with a response of: "+(request&&(reqResponse||request.responseText)));}callback2(error,request);};var xhrFactory=function xhrFactory2(){var xhr=function XhrFunction(options,callback2){options=mergeOptions$1({timeout:45e3},options);var beforeRequest=XhrFunction.beforeRequest||videojs.Vhs.xhr.beforeRequest;if(beforeRequest&&typeof beforeRequest==="function"){var newOptions=beforeRequest(options);if(newOptions){options=newOptions;}}var xhrMethod=videojs.Vhs.xhr.original===true?videojsXHR:videojs.Vhs.xhr;var request=xhrMethod(options,function(error,response){return callbackWrapper(request,error,response,callback2);});var originalAbort=request.abort;request.abort=function(){request.aborted=true;return originalAbort.apply(request,arguments);};request.uri=options.uri;request.requestTime=Date.now();return request;};xhr.original=true;return xhr;};var byterangeStr=function byterangeStr2(byterange){var byterangeEnd;var byterangeStart=byterange.offset;if(typeof byterange.offset==="bigint"||typeof byterange.length==="bigint"){byterangeEnd=import_window6["default"].BigInt(byterange.offset)+import_window6["default"].BigInt(byterange.length)-import_window6["default"].BigInt(1);}else{byterangeEnd=byterange.offset+byterange.length-1;}return"bytes="+byterangeStart+"-"+byterangeEnd;};var segmentXhrHeaders=function segmentXhrHeaders2(segment){var headers={};if(segment.byterange){headers.Range=byterangeStr(segment.byterange);}return headers;};var textRange=function textRange2(range4,i){return range4.start(i)+"-"+range4.end(i);};var formatHexString=function formatHexString2(e,i){var value=e.toString(16);return"00".substring(0,2-value.length)+value+(i%2?" ":"");};var formatAsciiString=function formatAsciiString2(e){if(e>=32&&e<126){return String.fromCharCode(e);}return".";};var createTransferableMessage=function createTransferableMessage2(message){var transferable={};Object.keys(message).forEach(function(key){var value=message[key];if(isArrayBufferView(value)){transferable[key]={bytes:value.buffer,byteOffset:value.byteOffset,byteLength:value.byteLength};}else{transferable[key]=value;}});return transferable;};var initSegmentId=function initSegmentId2(initSegment){var byterange=initSegment.byterange||{length:Infinity,offset:0};return[byterange.length,byterange.offset,initSegment.resolvedUri].join(",");};var segmentKeyId=function segmentKeyId2(key){return key.resolvedUri;};var hexDump=function hexDump2(data){var bytes=Array.prototype.slice.call(data);var step=16;var result="";var hex;var ascii;for(var j=0;j<bytes.length/step;j++){hex=bytes.slice(j*step,j*step+step).map(formatHexString).join("");ascii=bytes.slice(j*step,j*step+step).map(formatAsciiString).join("");result+=hex+" "+ascii+"\n";}return result;};var tagDump=function tagDump2(_ref){var bytes=_ref.bytes;return hexDump(bytes);};var textRanges=function textRanges2(ranges){var result="";var i;for(i=0;i<ranges.length;i++){result+=textRange(ranges,i)+" ";}return result;};var utils=/* @__PURE__ */Object.freeze({__proto__:null,createTransferableMessage:createTransferableMessage,initSegmentId:initSegmentId,segmentKeyId:segmentKeyId,hexDump:hexDump,tagDump:tagDump,textRanges:textRanges});var SEGMENT_END_FUDGE_PERCENT=0.25;var playerTimeToProgramTime=function playerTimeToProgramTime2(playerTime,segment){if(!segment.dateTimeObject){return null;}var transmuxerPrependedSeconds=segment.videoTimingInfo.transmuxerPrependedSeconds;var transmuxedStart=segment.videoTimingInfo.transmuxedPresentationStart;var startOfSegment=transmuxedStart+transmuxerPrependedSeconds;var offsetFromSegmentStart=playerTime-startOfSegment;return new Date(segment.dateTimeObject.getTime()+offsetFromSegmentStart*1e3);};var originalSegmentVideoDuration=function originalSegmentVideoDuration2(videoTimingInfo){return videoTimingInfo.transmuxedPresentationEnd-videoTimingInfo.transmuxedPresentationStart-videoTimingInfo.transmuxerPrependedSeconds;};var findSegmentForProgramTime=function findSegmentForProgramTime2(programTime,playlist){var dateTimeObject;try{dateTimeObject=new Date(programTime);}catch(e){return null;}if(!playlist||!playlist.segments||playlist.segments.length===0){return null;}var segment=playlist.segments[0];if(dateTimeObject<segment.dateTimeObject){return null;}for(var i=0;i<playlist.segments.length-1;i++){segment=playlist.segments[i];var nextSegmentStart=playlist.segments[i+1].dateTimeObject;if(dateTimeObject<nextSegmentStart){break;}}var lastSegment=playlist.segments[playlist.segments.length-1];var lastSegmentStart=lastSegment.dateTimeObject;var lastSegmentDuration=lastSegment.videoTimingInfo?originalSegmentVideoDuration(lastSegment.videoTimingInfo):lastSegment.duration+lastSegment.duration*SEGMENT_END_FUDGE_PERCENT;var lastSegmentEnd=new Date(lastSegmentStart.getTime()+lastSegmentDuration*1e3);if(dateTimeObject>lastSegmentEnd){return null;}if(dateTimeObject>lastSegmentStart){segment=lastSegment;}return{segment:segment,estimatedStart:segment.videoTimingInfo?segment.videoTimingInfo.transmuxedPresentationStart:Playlist.duration(playlist,playlist.mediaSequence+playlist.segments.indexOf(segment)),type:segment.videoTimingInfo?"accurate":"estimate"};};var findSegmentForPlayerTime=function findSegmentForPlayerTime2(time,playlist){if(!playlist||!playlist.segments||playlist.segments.length===0){return null;}var segmentEnd=0;var segment;for(var i=0;i<playlist.segments.length;i++){segment=playlist.segments[i];segmentEnd=segment.videoTimingInfo?segment.videoTimingInfo.transmuxedPresentationEnd:segmentEnd+segment.duration;if(time<=segmentEnd){break;}}var lastSegment=playlist.segments[playlist.segments.length-1];if(lastSegment.videoTimingInfo&&lastSegment.videoTimingInfo.transmuxedPresentationEnd<time){return null;}if(time>segmentEnd){if(time>segmentEnd+lastSegment.duration*SEGMENT_END_FUDGE_PERCENT){return null;}segment=lastSegment;}return{segment:segment,estimatedStart:segment.videoTimingInfo?segment.videoTimingInfo.transmuxedPresentationStart:segmentEnd-segment.duration,type:segment.videoTimingInfo?"accurate":"estimate"};};var getOffsetFromTimestamp=function getOffsetFromTimestamp2(comparisonTimeStamp,programTime){var segmentDateTime;var programDateTime;try{segmentDateTime=new Date(comparisonTimeStamp);programDateTime=new Date(programTime);}catch(e){}var segmentTimeEpoch=segmentDateTime.getTime();var programTimeEpoch=programDateTime.getTime();return(programTimeEpoch-segmentTimeEpoch)/1e3;};var verifyProgramDateTimeTags=function verifyProgramDateTimeTags2(playlist){if(!playlist.segments||playlist.segments.length===0){return false;}for(var i=0;i<playlist.segments.length;i++){var segment=playlist.segments[i];if(!segment.dateTimeObject){return false;}}return true;};var getProgramTime=function getProgramTime2(_ref){var playlist=_ref.playlist,_ref$time=_ref.time,time=_ref$time===void 0?void 0:_ref$time,callback2=_ref.callback;if(!callback2){throw new Error("getProgramTime: callback must be provided");}if(!playlist||time===void 0){return callback2({message:"getProgramTime: playlist and time must be provided"});}var matchedSegment=findSegmentForPlayerTime(time,playlist);if(!matchedSegment){return callback2({message:"valid programTime was not found"});}if(matchedSegment.type==="estimate"){return callback2({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:matchedSegment.estimatedStart});}var programTimeObject={mediaSeconds:time};var programTime=playerTimeToProgramTime(time,matchedSegment.segment);if(programTime){programTimeObject.programDateTime=programTime.toISOString();}return callback2(null,programTimeObject);};var seekToProgramTime=function seekToProgramTime2(_ref2){var programTime=_ref2.programTime,playlist=_ref2.playlist,_ref2$retryCount=_ref2.retryCount,retryCount=_ref2$retryCount===void 0?2:_ref2$retryCount,seekTo=_ref2.seekTo,_ref2$pauseAfterSeek=_ref2.pauseAfterSeek,pauseAfterSeek=_ref2$pauseAfterSeek===void 0?true:_ref2$pauseAfterSeek,tech=_ref2.tech,callback2=_ref2.callback;if(!callback2){throw new Error("seekToProgramTime: callback must be provided");}if(typeof programTime==="undefined"||!playlist||!seekTo){return callback2({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});}if(!playlist.endList&&!tech.hasStarted_){return callback2({message:"player must be playing a live stream to start buffering"});}if(!verifyProgramDateTimeTags(playlist)){return callback2({message:"programDateTime tags must be provided in the manifest "+playlist.resolvedUri});}var matchedSegment=findSegmentForProgramTime(programTime,playlist);if(!matchedSegment){return callback2({message:programTime+" was not found in the stream"});}var segment=matchedSegment.segment;var mediaOffset=getOffsetFromTimestamp(segment.dateTimeObject,programTime);if(matchedSegment.type==="estimate"){if(retryCount===0){return callback2({message:programTime+" is not buffered yet. Try again"});}seekTo(matchedSegment.estimatedStart+mediaOffset);tech.one("seeked",function(){seekToProgramTime2({programTime:programTime,playlist:playlist,retryCount:retryCount-1,seekTo:seekTo,pauseAfterSeek:pauseAfterSeek,tech:tech,callback:callback2});});return;}var seekToTime=segment.start+mediaOffset;var seekedCallback=function seekedCallback2(){return callback2(null,tech.currentTime());};tech.one("seeked",seekedCallback);if(pauseAfterSeek){tech.pause();}seekTo(seekToTime);};var callbackOnCompleted=function callbackOnCompleted2(request,cb){if(request.readyState===4){return cb();}return;};var containerRequest=function containerRequest2(uri,xhr,cb){var bytes=[];var id3Offset;var finished=false;var endRequestAndCallback=function endRequestAndCallback2(err,req,type2,_bytes){req.abort();finished=true;return cb(err,req,type2,_bytes);};var progressListener=function progressListener2(error,request2){if(finished){return;}if(error){return endRequestAndCallback(error,request2,"",bytes);}var newPart=request2.responseText.substring(bytes&&bytes.byteLength||0,request2.responseText.length);bytes=concatTypedArrays(bytes,stringToBytes(newPart,true));id3Offset=id3Offset||getId3Offset(bytes);if(bytes.length<10||id3Offset&&bytes.length<id3Offset+2){return callbackOnCompleted(request2,function(){return endRequestAndCallback(error,request2,"",bytes);});}var type2=detectContainerForBytes(bytes);if(type2==="ts"&&bytes.length<188){return callbackOnCompleted(request2,function(){return endRequestAndCallback(error,request2,"",bytes);});}if(!type2&&bytes.length<376){return callbackOnCompleted(request2,function(){return endRequestAndCallback(error,request2,"",bytes);});}return endRequestAndCallback(null,request2,type2,bytes);};var options={uri:uri,beforeSend:function beforeSend(request2){request2.overrideMimeType("text/plain; charset=x-user-defined");request2.addEventListener("progress",function(_ref){_ref.total;_ref.loaded;return callbackWrapper(request2,null,{statusCode:request2.status},progressListener);});}};var request=xhr(options,function(error,response){return callbackWrapper(request,error,response,progressListener);});return request;};var EventTarget2=videojs.EventTarget;var mergeOptions=videojs.mergeOptions;var dashPlaylistUnchanged=function dashPlaylistUnchanged2(a,b){if(!isPlaylistUnchanged(a,b)){return false;}if(a.sidx&&b.sidx&&(a.sidx.offset!==b.sidx.offset||a.sidx.length!==b.sidx.length)){return false;}else if(!a.sidx&&b.sidx||a.sidx&&!b.sidx){return false;}if(a.segments&&!b.segments||!a.segments&&b.segments){return false;}if(!a.segments&&!b.segments){return true;}for(var i=0;i<a.segments.length;i++){var aSegment=a.segments[i];var bSegment=b.segments[i];if(aSegment.uri!==bSegment.uri){return false;}if(!aSegment.byterange&&!bSegment.byterange){continue;}var aByterange=aSegment.byterange;var bByterange=bSegment.byterange;if(aByterange&&!bByterange||!aByterange&&bByterange){return false;}if(aByterange.offset!==bByterange.offset||aByterange.length!==bByterange.length){return false;}}return true;};var parseMasterXml=function parseMasterXml2(_ref){var masterXml=_ref.masterXml,srcUrl=_ref.srcUrl,clientOffset=_ref.clientOffset,sidxMapping=_ref.sidxMapping,previousManifest=_ref.previousManifest;var manifest=parse(masterXml,{manifestUri:srcUrl,clientOffset:clientOffset,sidxMapping:sidxMapping,previousManifest:previousManifest});addPropertiesToMaster(manifest,srcUrl);return manifest;};var updateMaster2=function updateMaster3(oldMaster,newMaster,sidxMapping){var noChanges=true;var update2=mergeOptions(oldMaster,{duration:newMaster.duration,minimumUpdatePeriod:newMaster.minimumUpdatePeriod,timelineStarts:newMaster.timelineStarts});for(var i=0;i<newMaster.playlists.length;i++){var playlist=newMaster.playlists[i];if(playlist.sidx){var sidxKey=generateSidxKey(playlist.sidx);if(sidxMapping&&sidxMapping[sidxKey]&&sidxMapping[sidxKey].sidx){addSidxSegmentsToPlaylist$1(playlist,sidxMapping[sidxKey].sidx,playlist.sidx.resolvedUri);}}var playlistUpdate=updateMaster$1(update2,playlist,dashPlaylistUnchanged);if(playlistUpdate){update2=playlistUpdate;noChanges=false;}}forEachMediaGroup3(newMaster,function(properties,type2,group,label){if(properties.playlists&&properties.playlists.length){var id=properties.playlists[0].id;var _playlistUpdate=updateMaster$1(update2,properties.playlists[0],dashPlaylistUnchanged);if(_playlistUpdate){update2=_playlistUpdate;update2.mediaGroups[type2][group][label].playlists[0]=update2.playlists[id];noChanges=false;}}});if(newMaster.minimumUpdatePeriod!==oldMaster.minimumUpdatePeriod){noChanges=false;}if(noChanges){return null;}return update2;};var equivalentSidx=function equivalentSidx2(a,b){var neitherMap=Boolean(!a.map&&!b.map);var equivalentMap=neitherMap||Boolean(a.map&&b.map&&a.map.byterange.offset===b.map.byterange.offset&&a.map.byterange.length===b.map.byterange.length);return equivalentMap&&a.uri===b.uri&&a.byterange.offset===b.byterange.offset&&a.byterange.length===b.byterange.length;};var compareSidxEntry=function compareSidxEntry2(playlists,oldSidxMapping){var newSidxMapping={};for(var id in playlists){var playlist=playlists[id];var currentSidxInfo=playlist.sidx;if(currentSidxInfo){var key=generateSidxKey(currentSidxInfo);if(!oldSidxMapping[key]){break;}var savedSidxInfo=oldSidxMapping[key].sidxInfo;if(equivalentSidx(savedSidxInfo,currentSidxInfo)){newSidxMapping[key]=oldSidxMapping[key];}}}return newSidxMapping;};var filterChangedSidxMappings=function filterChangedSidxMappings2(master,oldSidxMapping){var videoSidx=compareSidxEntry(master.playlists,oldSidxMapping);var mediaGroupSidx=videoSidx;forEachMediaGroup3(master,function(properties,mediaType,groupKey,labelKey){if(properties.playlists&&properties.playlists.length){var playlists=properties.playlists;mediaGroupSidx=mergeOptions(mediaGroupSidx,compareSidxEntry(playlists,oldSidxMapping));}});return mediaGroupSidx;};var DashPlaylistLoader=/* @__PURE__ */function(_EventTarget){_inheritsLoose3(DashPlaylistLoader2,_EventTarget);function DashPlaylistLoader2(srcUrlOrPlaylist,vhs,options,masterPlaylistLoader){var _this;if(options===void 0){options={};}_this=_EventTarget.call(this)||this;_this.masterPlaylistLoader_=masterPlaylistLoader||_assertThisInitialized3(_this);if(!masterPlaylistLoader){_this.isMaster_=true;}var _options=options,_options$withCredenti=_options.withCredentials,withCredentials=_options$withCredenti===void 0?false:_options$withCredenti,_options$handleManife=_options.handleManifestRedirects,handleManifestRedirects=_options$handleManife===void 0?false:_options$handleManife;_this.vhs_=vhs;_this.withCredentials=withCredentials;_this.handleManifestRedirects=handleManifestRedirects;if(!srcUrlOrPlaylist){throw new Error("A non-empty playlist URL or object is required");}_this.on("minimumUpdatePeriod",function(){_this.refreshXml_();});_this.on("mediaupdatetimeout",function(){_this.refreshMedia_(_this.media().id);});_this.state="HAVE_NOTHING";_this.loadedPlaylists_={};_this.logger_=logger("DashPlaylistLoader");if(_this.isMaster_){_this.masterPlaylistLoader_.srcUrl=srcUrlOrPlaylist;_this.masterPlaylistLoader_.sidxMapping_={};}else{_this.childPlaylist_=srcUrlOrPlaylist;}return _this;}var _proto=DashPlaylistLoader2.prototype;_proto.requestErrored_=function requestErrored_(err,request,startingState){if(!this.request){return true;}this.request=null;if(err){this.error=_typeof(err)==="object"&&!(err instanceof Error)?err:{status:request.status,message:"DASH request error at URL: "+request.uri,response:request.response,code:2};if(startingState){this.state=startingState;}this.trigger("error");return true;}};_proto.addSidxSegments_=function addSidxSegments_(playlist,startingState,cb){var _this2=this;var sidxKey=playlist.sidx&&generateSidxKey(playlist.sidx);if(!playlist.sidx||!sidxKey||this.masterPlaylistLoader_.sidxMapping_[sidxKey]){this.mediaRequest_=import_window6["default"].setTimeout(function(){return cb(false);},0);return;}var uri=resolveManifestRedirect(this.handleManifestRedirects,playlist.sidx.resolvedUri);var fin=function fin2(err,request){if(_this2.requestErrored_(err,request,startingState)){return;}var sidxMapping=_this2.masterPlaylistLoader_.sidxMapping_;var sidx;try{sidx=(0,import_parse_sidx["default"])(toUint8(request.response).subarray(8));}catch(e){_this2.requestErrored_(e,request,startingState);return;}sidxMapping[sidxKey]={sidxInfo:playlist.sidx,sidx:sidx};addSidxSegmentsToPlaylist$1(playlist,sidx,playlist.sidx.resolvedUri);return cb(true);};this.request=containerRequest(uri,this.vhs_.xhr,function(err,request,container,bytes){if(err){return fin(err,request);}if(!container||container!=="mp4"){return fin({status:request.status,message:"Unsupported "+(container||"unknown")+" container type for sidx segment at URL: "+uri,response:"",playlist:playlist,internal:true,blacklistDuration:Infinity,code:2},request);}var _playlist$sidx$bytera=playlist.sidx.byterange,offset=_playlist$sidx$bytera.offset,length=_playlist$sidx$bytera.length;if(bytes.length>=length+offset){return fin(err,{response:bytes.subarray(offset,offset+length),status:request.status,uri:request.uri});}_this2.request=_this2.vhs_.xhr({uri:uri,responseType:"arraybuffer",headers:segmentXhrHeaders({byterange:playlist.sidx.byterange})},fin);});};_proto.dispose=function dispose(){this.trigger("dispose");this.stopRequest();this.loadedPlaylists_={};import_window6["default"].clearTimeout(this.minimumUpdatePeriodTimeout_);import_window6["default"].clearTimeout(this.mediaRequest_);import_window6["default"].clearTimeout(this.mediaUpdateTimeout);this.mediaUpdateTimeout=null;this.mediaRequest_=null;this.minimumUpdatePeriodTimeout_=null;if(this.masterPlaylistLoader_.createMupOnMedia_){this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_);this.masterPlaylistLoader_.createMupOnMedia_=null;}this.off();};_proto.hasPendingRequest=function hasPendingRequest(){return this.request||this.mediaRequest_;};_proto.stopRequest=function stopRequest(){if(this.request){var oldRequest=this.request;this.request=null;oldRequest.onreadystatechange=null;oldRequest.abort();}};_proto.media=function media(playlist){var _this3=this;if(!playlist){return this.media_;}if(this.state==="HAVE_NOTHING"){throw new Error("Cannot switch media playlist from "+this.state);}var startingState=this.state;if(typeof playlist==="string"){if(!this.masterPlaylistLoader_.master.playlists[playlist]){throw new Error("Unknown playlist URI: "+playlist);}playlist=this.masterPlaylistLoader_.master.playlists[playlist];}var mediaChange=!this.media_||playlist.id!==this.media_.id;if(mediaChange&&this.loadedPlaylists_[playlist.id]&&this.loadedPlaylists_[playlist.id].endList){this.state="HAVE_METADATA";this.media_=playlist;if(mediaChange){this.trigger("mediachanging");this.trigger("mediachange");}return;}if(!mediaChange){return;}if(this.media_){this.trigger("mediachanging");}this.addSidxSegments_(playlist,startingState,function(sidxChanged){_this3.haveMetadata({startingState:startingState,playlist:playlist});});};_proto.haveMetadata=function haveMetadata(_ref2){var startingState=_ref2.startingState,playlist=_ref2.playlist;this.state="HAVE_METADATA";this.loadedPlaylists_[playlist.id]=playlist;this.mediaRequest_=null;this.refreshMedia_(playlist.id);if(startingState==="HAVE_MASTER"){this.trigger("loadedmetadata");}else{this.trigger("mediachange");}};_proto.pause=function pause(){if(this.masterPlaylistLoader_.createMupOnMedia_){this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_);this.masterPlaylistLoader_.createMupOnMedia_=null;}this.stopRequest();import_window6["default"].clearTimeout(this.mediaUpdateTimeout);this.mediaUpdateTimeout=null;if(this.isMaster_){import_window6["default"].clearTimeout(this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_);this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_=null;}if(this.state==="HAVE_NOTHING"){this.started=false;}};_proto.load=function load(isFinalRendition){var _this4=this;import_window6["default"].clearTimeout(this.mediaUpdateTimeout);this.mediaUpdateTimeout=null;var media=this.media();if(isFinalRendition){var delay=media?media.targetDuration/2*1e3:5*1e3;this.mediaUpdateTimeout=import_window6["default"].setTimeout(function(){return _this4.load();},delay);return;}if(!this.started){this.start();return;}if(media&&!media.endList){if(this.isMaster_&&!this.minimumUpdatePeriodTimeout_){this.trigger("minimumUpdatePeriod");this.updateMinimumUpdatePeriodTimeout_();}this.trigger("mediaupdatetimeout");}else{this.trigger("loadedplaylist");}};_proto.start=function start2(){var _this5=this;this.started=true;if(!this.isMaster_){this.mediaRequest_=import_window6["default"].setTimeout(function(){return _this5.haveMaster_();},0);return;}this.requestMaster_(function(req,masterChanged){_this5.haveMaster_();if(!_this5.hasPendingRequest()&&!_this5.media_){_this5.media(_this5.masterPlaylistLoader_.master.playlists[0]);}});};_proto.requestMaster_=function requestMaster_(cb){var _this6=this;this.request=this.vhs_.xhr({uri:this.masterPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},function(error,req){if(_this6.requestErrored_(error,req)){if(_this6.state==="HAVE_NOTHING"){_this6.started=false;}return;}var masterChanged=req.responseText!==_this6.masterPlaylistLoader_.masterXml_;_this6.masterPlaylistLoader_.masterXml_=req.responseText;if(req.responseHeaders&&req.responseHeaders.date){_this6.masterLoaded_=Date.parse(req.responseHeaders.date);}else{_this6.masterLoaded_=Date.now();}_this6.masterPlaylistLoader_.srcUrl=resolveManifestRedirect(_this6.handleManifestRedirects,_this6.masterPlaylistLoader_.srcUrl,req);if(masterChanged){_this6.handleMaster_();_this6.syncClientServerClock_(function(){return cb(req,masterChanged);});return;}return cb(req,masterChanged);});};_proto.syncClientServerClock_=function syncClientServerClock_(done){var _this7=this;var utcTiming=parseUTCTiming(this.masterPlaylistLoader_.masterXml_);if(utcTiming===null){this.masterPlaylistLoader_.clientOffset_=this.masterLoaded_-Date.now();return done();}if(utcTiming.method==="DIRECT"){this.masterPlaylistLoader_.clientOffset_=utcTiming.value-Date.now();return done();}this.request=this.vhs_.xhr({uri:resolveUrl3(this.masterPlaylistLoader_.srcUrl,utcTiming.value),method:utcTiming.method,withCredentials:this.withCredentials},function(error,req){if(!_this7.request){return;}if(error){_this7.masterPlaylistLoader_.clientOffset_=_this7.masterLoaded_-Date.now();return done();}var serverTime;if(utcTiming.method==="HEAD"){if(!req.responseHeaders||!req.responseHeaders.date){serverTime=_this7.masterLoaded_;}else{serverTime=Date.parse(req.responseHeaders.date);}}else{serverTime=Date.parse(req.responseText);}_this7.masterPlaylistLoader_.clientOffset_=serverTime-Date.now();done();});};_proto.haveMaster_=function haveMaster_(){this.state="HAVE_MASTER";if(this.isMaster_){this.trigger("loadedplaylist");}else if(!this.media_){this.media(this.childPlaylist_);}};_proto.handleMaster_=function handleMaster_(){this.mediaRequest_=null;var oldMaster=this.masterPlaylistLoader_.master;var newMaster=parseMasterXml({masterXml:this.masterPlaylistLoader_.masterXml_,srcUrl:this.masterPlaylistLoader_.srcUrl,clientOffset:this.masterPlaylistLoader_.clientOffset_,sidxMapping:this.masterPlaylistLoader_.sidxMapping_,previousManifest:oldMaster});if(oldMaster){newMaster=updateMaster2(oldMaster,newMaster,this.masterPlaylistLoader_.sidxMapping_);}this.masterPlaylistLoader_.master=newMaster?newMaster:oldMaster;var location=this.masterPlaylistLoader_.master.locations&&this.masterPlaylistLoader_.master.locations[0];if(location&&location!==this.masterPlaylistLoader_.srcUrl){this.masterPlaylistLoader_.srcUrl=location;}if(!oldMaster||newMaster&&newMaster.minimumUpdatePeriod!==oldMaster.minimumUpdatePeriod){this.updateMinimumUpdatePeriodTimeout_();}return Boolean(newMaster);};_proto.updateMinimumUpdatePeriodTimeout_=function updateMinimumUpdatePeriodTimeout_(){var mpl=this.masterPlaylistLoader_;if(mpl.createMupOnMedia_){mpl.off("loadedmetadata",mpl.createMupOnMedia_);mpl.createMupOnMedia_=null;}if(mpl.minimumUpdatePeriodTimeout_){import_window6["default"].clearTimeout(mpl.minimumUpdatePeriodTimeout_);mpl.minimumUpdatePeriodTimeout_=null;}var mup=mpl.master&&mpl.master.minimumUpdatePeriod;if(mup===0){if(mpl.media()){mup=mpl.media().targetDuration*1e3;}else{mpl.createMupOnMedia_=mpl.updateMinimumUpdatePeriodTimeout_;mpl.one("loadedmetadata",mpl.createMupOnMedia_);}}if(typeof mup!=="number"||mup<=0){if(mup<0){this.logger_("found invalid minimumUpdatePeriod of "+mup+", not setting a timeout");}return;}this.createMUPTimeout_(mup);};_proto.createMUPTimeout_=function createMUPTimeout_(mup){var mpl=this.masterPlaylistLoader_;mpl.minimumUpdatePeriodTimeout_=import_window6["default"].setTimeout(function(){mpl.minimumUpdatePeriodTimeout_=null;mpl.trigger("minimumUpdatePeriod");mpl.createMUPTimeout_(mup);},mup);};_proto.refreshXml_=function refreshXml_(){var _this8=this;this.requestMaster_(function(req,masterChanged){if(!masterChanged){return;}if(_this8.media_){_this8.media_=_this8.masterPlaylistLoader_.master.playlists[_this8.media_.id];}_this8.masterPlaylistLoader_.sidxMapping_=filterChangedSidxMappings(_this8.masterPlaylistLoader_.master,_this8.masterPlaylistLoader_.sidxMapping_);_this8.addSidxSegments_(_this8.media(),_this8.state,function(sidxChanged){_this8.refreshMedia_(_this8.media().id);});});};_proto.refreshMedia_=function refreshMedia_(mediaID){var _this9=this;if(!mediaID){throw new Error("refreshMedia_ must take a media id");}if(this.media_&&this.isMaster_){this.handleMaster_();}var playlists=this.masterPlaylistLoader_.master.playlists;var mediaChanged=!this.media_||this.media_!==playlists[mediaID];if(mediaChanged){this.media_=playlists[mediaID];}else{this.trigger("playlistunchanged");}if(!this.mediaUpdateTimeout){var createMediaUpdateTimeout=function createMediaUpdateTimeout2(){if(_this9.media().endList){return;}_this9.mediaUpdateTimeout=import_window6["default"].setTimeout(function(){_this9.trigger("mediaupdatetimeout");createMediaUpdateTimeout2();},refreshDelay(_this9.media(),Boolean(mediaChanged)));};createMediaUpdateTimeout();}this.trigger("loadedplaylist");};return DashPlaylistLoader2;}(EventTarget2);var Config={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30};var stringToArrayBuffer=function stringToArrayBuffer2(string){var view=new Uint8Array(new ArrayBuffer(string.length));for(var i=0;i<string.length;i++){view[i]=string.charCodeAt(i);}return view.buffer;};var browserWorkerPolyFill=function browserWorkerPolyFill2(workerObj){workerObj.on=workerObj.addEventListener;workerObj.off=workerObj.removeEventListener;return workerObj;};var createObjectURL=function createObjectURL2(str){try{return URL.createObjectURL(new Blob([str],{type:"application/javascript"}));}catch(e){var blob=new BlobBuilder();blob.append(str);return URL.createObjectURL(blob.getBlob());}};var factory=function factory2(code){return function(){var objectUrl=createObjectURL(code);var worker=browserWorkerPolyFill(new Worker(objectUrl));worker.objURL=objectUrl;var terminate=worker.terminate;worker.on=worker.addEventListener;worker.off=worker.removeEventListener;worker.terminate=function(){URL.revokeObjectURL(objectUrl);return terminate.call(this);};return worker;};};var transform=function transform2(code){return"var browserWorkerPolyFill = "+browserWorkerPolyFill.toString()+";\nbrowserWorkerPolyFill(self);\n"+code;};var getWorkerString=function getWorkerString2(fn){return fn.toString().replace(/^function.+?{/,"").slice(0,-1);};var workerCode$1=transform(getWorkerString(function(){var Stream2=function Stream3(){this.init=function(){var listeners={};this.on=function(type3,listener){if(!listeners[type3]){listeners[type3]=[];}listeners[type3]=listeners[type3].concat(listener);};this.off=function(type3,listener){var index;if(!listeners[type3]){return false;}index=listeners[type3].indexOf(listener);listeners[type3]=listeners[type3].slice();listeners[type3].splice(index,1);return index>-1;};this.trigger=function(type3){var callbacks,i,length,args;callbacks=listeners[type3];if(!callbacks){return;}if(arguments.length===2){length=callbacks.length;for(i=0;i<length;++i){callbacks[i].call(this,arguments[1]);}}else{args=[];i=arguments.length;for(i=1;i<arguments.length;++i){args.push(arguments[i]);}length=callbacks.length;for(i=0;i<length;++i){callbacks[i].apply(this,args);}}};this.dispose=function(){listeners={};};};};Stream2.prototype.pipe=function(destination){this.on("data",function(data){destination.push(data);});this.on("done",function(flushSource){destination.flush(flushSource);});this.on("partialdone",function(flushSource){destination.partialFlush(flushSource);});this.on("endedtimeline",function(flushSource){destination.endTimeline(flushSource);});this.on("reset",function(flushSource){destination.reset(flushSource);});return destination;};Stream2.prototype.push=function(data){this.trigger("data",data);};Stream2.prototype.flush=function(flushSource){this.trigger("done",flushSource);};Stream2.prototype.partialFlush=function(flushSource){this.trigger("partialdone",flushSource);};Stream2.prototype.endTimeline=function(flushSource){this.trigger("endedtimeline",flushSource);};Stream2.prototype.reset=function(flushSource){this.trigger("reset",flushSource);};var stream=Stream2;var MAX_UINT32$1=Math.pow(2,32);var getUint64$2=function getUint642(uint8){var dv=new DataView(uint8.buffer,uint8.byteOffset,uint8.byteLength);var value;if(dv.getBigUint64){value=dv.getBigUint64(0);if(value<Number.MAX_SAFE_INTEGER){return Number(value);}return value;}return dv.getUint32(0)*MAX_UINT32$1+dv.getUint32(4);};var numbers={getUint64:getUint64$2,MAX_UINT32:MAX_UINT32$1};var MAX_UINT32=numbers.MAX_UINT32;var box,dinf,esds,ftyp,mdat,mfhd,minf,moof,moov,mvex,mvhd,trak,tkhd,mdia,mdhd,hdlr,sdtp,stbl,stsd,traf,trex,trun$1,types,MAJOR_BRAND,MINOR_VERSION,AVC1_BRAND,VIDEO_HDLR,AUDIO_HDLR,HDLR_TYPES,VMHD,SMHD,DREF,STCO,STSC,STSZ,STTS;(function(){var i;types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]};if(typeof Uint8Array==="undefined"){return;}for(i in types){if(types.hasOwnProperty(i)){types[i]=[i.charCodeAt(0),i.charCodeAt(1),i.charCodeAt(2),i.charCodeAt(3)];}}MAJOR_BRAND=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]);AVC1_BRAND=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]);MINOR_VERSION=new Uint8Array([0,0,0,1]);VIDEO_HDLR=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]);AUDIO_HDLR=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);HDLR_TYPES={video:VIDEO_HDLR,audio:AUDIO_HDLR};DREF=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]);SMHD=new Uint8Array([0,0,0,0,0,0,0,0]);STCO=new Uint8Array([0,0,0,0,0,0,0,0]);STSC=STCO;STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]);STTS=STCO;VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]);})();box=function box2(type3){var payload=[],size=0,i,result,view;for(i=1;i<arguments.length;i++){payload.push(arguments[i]);}i=payload.length;while(i--){size+=payload[i].byteLength;}result=new Uint8Array(size+8);view=new DataView(result.buffer,result.byteOffset,result.byteLength);view.setUint32(0,result.byteLength);result.set(type3,4);for(i=0,size=8;i<payload.length;i++){result.set(payload[i],size);size+=payload[i].byteLength;}return result;};dinf=function dinf2(){return box(types.dinf,box(types.dref,DREF));};esds=function esds2(track){return box(types.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,track.audioobjecttype<<3|track.samplingfrequencyindex>>>1,track.samplingfrequencyindex<<7|track.channelcount<<3,6,1,2]));};ftyp=function ftyp2(){return box(types.ftyp,MAJOR_BRAND,MINOR_VERSION,MAJOR_BRAND,AVC1_BRAND);};hdlr=function hdlr2(type3){return box(types.hdlr,HDLR_TYPES[type3]);};mdat=function mdat2(data){return box(types.mdat,data);};mdhd=function mdhd2(track){var result=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,track.duration>>>24&255,track.duration>>>16&255,track.duration>>>8&255,track.duration&255,85,196,0,0]);if(track.samplerate){result[12]=track.samplerate>>>24&255;result[13]=track.samplerate>>>16&255;result[14]=track.samplerate>>>8&255;result[15]=track.samplerate&255;}return box(types.mdhd,result);};mdia=function mdia2(track){return box(types.mdia,mdhd(track),hdlr(track.type),minf(track));};mfhd=function mfhd2(sequenceNumber){return box(types.mfhd,new Uint8Array([0,0,0,0,(sequenceNumber&4278190080)>>24,(sequenceNumber&16711680)>>16,(sequenceNumber&65280)>>8,sequenceNumber&255]));};minf=function minf2(track){return box(types.minf,track.type==="video"?box(types.vmhd,VMHD):box(types.smhd,SMHD),dinf(),stbl(track));};moof=function moof2(sequenceNumber,tracks){var trackFragments=[],i=tracks.length;while(i--){trackFragments[i]=traf(tracks[i]);}return box.apply(null,[types.moof,mfhd(sequenceNumber)].concat(trackFragments));};moov=function moov2(tracks){var i=tracks.length,boxes=[];while(i--){boxes[i]=trak(tracks[i]);}return box.apply(null,[types.moov,mvhd(4294967295)].concat(boxes).concat(mvex(tracks)));};mvex=function mvex2(tracks){var i=tracks.length,boxes=[];while(i--){boxes[i]=trex(tracks[i]);}return box.apply(null,[types.mvex].concat(boxes));};mvhd=function mvhd2(duration5){var bytes=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(duration5&4278190080)>>24,(duration5&16711680)>>16,(duration5&65280)>>8,duration5&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return box(types.mvhd,bytes);};sdtp=function sdtp2(track){var samples=track.samples||[],bytes=new Uint8Array(4+samples.length),flags,i;for(i=0;i<samples.length;i++){flags=samples[i].flags;bytes[i+4]=flags.dependsOn<<4|flags.isDependedOn<<2|flags.hasRedundancy;}return box(types.sdtp,bytes);};stbl=function stbl2(track){return box(types.stbl,stsd(track),box(types.stts,STTS),box(types.stsc,STSC),box(types.stsz,STSZ),box(types.stco,STCO));};(function(){var videoSample,audioSample;stsd=function stsd2(track){return box(types.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),track.type==="video"?videoSample(track):audioSample(track));};videoSample=function videoSample2(track){var sps=track.sps||[],pps=track.pps||[],sequenceParameterSets=[],pictureParameterSets=[],i,avc1Box;for(i=0;i<sps.length;i++){sequenceParameterSets.push((sps[i].byteLength&65280)>>>8);sequenceParameterSets.push(sps[i].byteLength&255);sequenceParameterSets=sequenceParameterSets.concat(Array.prototype.slice.call(sps[i]));}for(i=0;i<pps.length;i++){pictureParameterSets.push((pps[i].byteLength&65280)>>>8);pictureParameterSets.push(pps[i].byteLength&255);pictureParameterSets=pictureParameterSets.concat(Array.prototype.slice.call(pps[i]));}avc1Box=[types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(track.width&65280)>>8,track.width&255,(track.height&65280)>>8,track.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),box(types.avcC,new Uint8Array([1,track.profileIdc,track.profileCompatibility,track.levelIdc,255].concat([sps.length],sequenceParameterSets,[pps.length],pictureParameterSets))),box(types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))];if(track.sarRatio){var hSpacing=track.sarRatio[0],vSpacing=track.sarRatio[1];avc1Box.push(box(types.pasp,new Uint8Array([(hSpacing&4278190080)>>24,(hSpacing&16711680)>>16,(hSpacing&65280)>>8,hSpacing&255,(vSpacing&4278190080)>>24,(vSpacing&16711680)>>16,(vSpacing&65280)>>8,vSpacing&255])));}return box.apply(null,avc1Box);};audioSample=function audioSample2(track){return box(types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(track.channelcount&65280)>>8,track.channelcount&255,(track.samplesize&65280)>>8,track.samplesize&255,0,0,0,0,(track.samplerate&65280)>>8,track.samplerate&255,0,0]),esds(track));};})();tkhd=function tkhd2(track){var result=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(track.id&4278190080)>>24,(track.id&16711680)>>16,(track.id&65280)>>8,track.id&255,0,0,0,0,(track.duration&4278190080)>>24,(track.duration&16711680)>>16,(track.duration&65280)>>8,track.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(track.width&65280)>>8,track.width&255,0,0,(track.height&65280)>>8,track.height&255,0,0]);return box(types.tkhd,result);};traf=function traf2(track){var trackFragmentHeader,trackFragmentDecodeTime,trackFragmentRun,sampleDependencyTable,dataOffset,upperWordBaseMediaDecodeTime,lowerWordBaseMediaDecodeTime;trackFragmentHeader=box(types.tfhd,new Uint8Array([0,0,0,58,(track.id&4278190080)>>24,(track.id&16711680)>>16,(track.id&65280)>>8,track.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0]));upperWordBaseMediaDecodeTime=Math.floor(track.baseMediaDecodeTime/MAX_UINT32);lowerWordBaseMediaDecodeTime=Math.floor(track.baseMediaDecodeTime%MAX_UINT32);trackFragmentDecodeTime=box(types.tfdt,new Uint8Array([1,0,0,0,upperWordBaseMediaDecodeTime>>>24&255,upperWordBaseMediaDecodeTime>>>16&255,upperWordBaseMediaDecodeTime>>>8&255,upperWordBaseMediaDecodeTime&255,lowerWordBaseMediaDecodeTime>>>24&255,lowerWordBaseMediaDecodeTime>>>16&255,lowerWordBaseMediaDecodeTime>>>8&255,lowerWordBaseMediaDecodeTime&255]));dataOffset=32+20+8+16+8+8;if(track.type==="audio"){trackFragmentRun=trun$1(track,dataOffset);return box(types.traf,trackFragmentHeader,trackFragmentDecodeTime,trackFragmentRun);}sampleDependencyTable=sdtp(track);trackFragmentRun=trun$1(track,sampleDependencyTable.length+dataOffset);return box(types.traf,trackFragmentHeader,trackFragmentDecodeTime,trackFragmentRun,sampleDependencyTable);};trak=function trak2(track){track.duration=track.duration||4294967295;return box(types.trak,tkhd(track),mdia(track));};trex=function trex2(track){var result=new Uint8Array([0,0,0,0,(track.id&4278190080)>>24,(track.id&16711680)>>16,(track.id&65280)>>8,track.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);if(track.type!=="video"){result[result.length-1]=0;}return box(types.trex,result);};(function(){var audioTrun,videoTrun,trunHeader;trunHeader=function trunHeader2(samples,offset){var durationPresent=0,sizePresent=0,flagsPresent=0,compositionTimeOffset=0;if(samples.length){if(samples[0].duration!==void 0){durationPresent=1;}if(samples[0].size!==void 0){sizePresent=2;}if(samples[0].flags!==void 0){flagsPresent=4;}if(samples[0].compositionTimeOffset!==void 0){compositionTimeOffset=8;}}return[0,0,durationPresent|sizePresent|flagsPresent|compositionTimeOffset,1,(samples.length&4278190080)>>>24,(samples.length&16711680)>>>16,(samples.length&65280)>>>8,samples.length&255,(offset&4278190080)>>>24,(offset&16711680)>>>16,(offset&65280)>>>8,offset&255];};videoTrun=function videoTrun2(track,offset){var bytesOffest,bytes,header,samples,sample,i;samples=track.samples||[];offset+=8+12+16*samples.length;header=trunHeader(samples,offset);bytes=new Uint8Array(header.length+samples.length*16);bytes.set(header);bytesOffest=header.length;for(i=0;i<samples.length;i++){sample=samples[i];bytes[bytesOffest++]=(sample.duration&4278190080)>>>24;bytes[bytesOffest++]=(sample.duration&16711680)>>>16;bytes[bytesOffest++]=(sample.duration&65280)>>>8;bytes[bytesOffest++]=sample.duration&255;bytes[bytesOffest++]=(sample.size&4278190080)>>>24;bytes[bytesOffest++]=(sample.size&16711680)>>>16;bytes[bytesOffest++]=(sample.size&65280)>>>8;bytes[bytesOffest++]=sample.size&255;bytes[bytesOffest++]=sample.flags.isLeading<<2|sample.flags.dependsOn;bytes[bytesOffest++]=sample.flags.isDependedOn<<6|sample.flags.hasRedundancy<<4|sample.flags.paddingValue<<1|sample.flags.isNonSyncSample;bytes[bytesOffest++]=sample.flags.degradationPriority&240<<8;bytes[bytesOffest++]=sample.flags.degradationPriority&15;bytes[bytesOffest++]=(sample.compositionTimeOffset&4278190080)>>>24;bytes[bytesOffest++]=(sample.compositionTimeOffset&16711680)>>>16;bytes[bytesOffest++]=(sample.compositionTimeOffset&65280)>>>8;bytes[bytesOffest++]=sample.compositionTimeOffset&255;}return box(types.trun,bytes);};audioTrun=function audioTrun2(track,offset){var bytes,bytesOffest,header,samples,sample,i;samples=track.samples||[];offset+=8+12+8*samples.length;header=trunHeader(samples,offset);bytes=new Uint8Array(header.length+samples.length*8);bytes.set(header);bytesOffest=header.length;for(i=0;i<samples.length;i++){sample=samples[i];bytes[bytesOffest++]=(sample.duration&4278190080)>>>24;bytes[bytesOffest++]=(sample.duration&16711680)>>>16;bytes[bytesOffest++]=(sample.duration&65280)>>>8;bytes[bytesOffest++]=sample.duration&255;bytes[bytesOffest++]=(sample.size&4278190080)>>>24;bytes[bytesOffest++]=(sample.size&16711680)>>>16;bytes[bytesOffest++]=(sample.size&65280)>>>8;bytes[bytesOffest++]=sample.size&255;}return box(types.trun,bytes);};trun$1=function trun2(track,offset){if(track.type==="audio"){return audioTrun(track,offset);}return videoTrun(track,offset);};})();var mp4Generator={ftyp:ftyp,mdat:mdat,moof:moof,moov:moov,initSegment:function initSegment(tracks){var fileType=ftyp(),movie=moov(tracks),result;result=new Uint8Array(fileType.byteLength+movie.byteLength);result.set(fileType);result.set(movie,fileType.byteLength);return result;}};var groupNalsIntoFrames=function groupNalsIntoFrames2(nalUnits){var i,currentNal,currentFrame=[],frames=[];frames.byteLength=0;frames.nalCount=0;frames.duration=0;currentFrame.byteLength=0;for(i=0;i<nalUnits.length;i++){currentNal=nalUnits[i];if(currentNal.nalUnitType==="access_unit_delimiter_rbsp"){if(currentFrame.length){currentFrame.duration=currentNal.dts-currentFrame.dts;frames.byteLength+=currentFrame.byteLength;frames.nalCount+=currentFrame.length;frames.duration+=currentFrame.duration;frames.push(currentFrame);}currentFrame=[currentNal];currentFrame.byteLength=currentNal.data.byteLength;currentFrame.pts=currentNal.pts;currentFrame.dts=currentNal.dts;}else{if(currentNal.nalUnitType==="slice_layer_without_partitioning_rbsp_idr"){currentFrame.keyFrame=true;}currentFrame.duration=currentNal.dts-currentFrame.dts;currentFrame.byteLength+=currentNal.data.byteLength;currentFrame.push(currentNal);}}if(frames.length&&(!currentFrame.duration||currentFrame.duration<=0)){currentFrame.duration=frames[frames.length-1].duration;}frames.byteLength+=currentFrame.byteLength;frames.nalCount+=currentFrame.length;frames.duration+=currentFrame.duration;frames.push(currentFrame);return frames;};var groupFramesIntoGops=function groupFramesIntoGops2(frames){var i,currentFrame,currentGop=[],gops=[];currentGop.byteLength=0;currentGop.nalCount=0;currentGop.duration=0;currentGop.pts=frames[0].pts;currentGop.dts=frames[0].dts;gops.byteLength=0;gops.nalCount=0;gops.duration=0;gops.pts=frames[0].pts;gops.dts=frames[0].dts;for(i=0;i<frames.length;i++){currentFrame=frames[i];if(currentFrame.keyFrame){if(currentGop.length){gops.push(currentGop);gops.byteLength+=currentGop.byteLength;gops.nalCount+=currentGop.nalCount;gops.duration+=currentGop.duration;}currentGop=[currentFrame];currentGop.nalCount=currentFrame.length;currentGop.byteLength=currentFrame.byteLength;currentGop.pts=currentFrame.pts;currentGop.dts=currentFrame.dts;currentGop.duration=currentFrame.duration;}else{currentGop.duration+=currentFrame.duration;currentGop.nalCount+=currentFrame.length;currentGop.byteLength+=currentFrame.byteLength;currentGop.push(currentFrame);}}if(gops.length&&currentGop.duration<=0){currentGop.duration=gops[gops.length-1].duration;}gops.byteLength+=currentGop.byteLength;gops.nalCount+=currentGop.nalCount;gops.duration+=currentGop.duration;gops.push(currentGop);return gops;};var extendFirstKeyFrame=function extendFirstKeyFrame2(gops){var currentGop;if(!gops[0][0].keyFrame&&gops.length>1){currentGop=gops.shift();gops.byteLength-=currentGop.byteLength;gops.nalCount-=currentGop.nalCount;gops[0][0].dts=currentGop.dts;gops[0][0].pts=currentGop.pts;gops[0][0].duration+=currentGop.duration;}return gops;};var createDefaultSample=function createDefaultSample2(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};};var sampleForFrame=function sampleForFrame2(frame,dataOffset){var sample=createDefaultSample();sample.dataOffset=dataOffset;sample.compositionTimeOffset=frame.pts-frame.dts;sample.duration=frame.duration;sample.size=4*frame.length;sample.size+=frame.byteLength;if(frame.keyFrame){sample.flags.dependsOn=2;sample.flags.isNonSyncSample=0;}return sample;};var generateSampleTable$1=function generateSampleTable2(gops,baseDataOffset){var h,i,sample,currentGop,currentFrame,dataOffset=baseDataOffset||0,samples=[];for(h=0;h<gops.length;h++){currentGop=gops[h];for(i=0;i<currentGop.length;i++){currentFrame=currentGop[i];sample=sampleForFrame(currentFrame,dataOffset);dataOffset+=sample.size;samples.push(sample);}}return samples;};var concatenateNalData=function concatenateNalData2(gops){var h,i,j,currentGop,currentFrame,currentNal,dataOffset=0,nalsByteLength=gops.byteLength,numberOfNals=gops.nalCount,totalByteLength=nalsByteLength+4*numberOfNals,data=new Uint8Array(totalByteLength),view=new DataView(data.buffer);for(h=0;h<gops.length;h++){currentGop=gops[h];for(i=0;i<currentGop.length;i++){currentFrame=currentGop[i];for(j=0;j<currentFrame.length;j++){currentNal=currentFrame[j];view.setUint32(dataOffset,currentNal.data.byteLength);dataOffset+=4;data.set(currentNal.data,dataOffset);dataOffset+=currentNal.data.byteLength;}}}return data;};var generateSampleTableForFrame=function generateSampleTableForFrame2(frame,baseDataOffset){var sample,dataOffset=baseDataOffset||0,samples=[];sample=sampleForFrame(frame,dataOffset);samples.push(sample);return samples;};var concatenateNalDataForFrame=function concatenateNalDataForFrame2(frame){var i,currentNal,dataOffset=0,nalsByteLength=frame.byteLength,numberOfNals=frame.length,totalByteLength=nalsByteLength+4*numberOfNals,data=new Uint8Array(totalByteLength),view=new DataView(data.buffer);for(i=0;i<frame.length;i++){currentNal=frame[i];view.setUint32(dataOffset,currentNal.data.byteLength);dataOffset+=4;data.set(currentNal.data,dataOffset);dataOffset+=currentNal.data.byteLength;}return data;};var frameUtils={groupNalsIntoFrames:groupNalsIntoFrames,groupFramesIntoGops:groupFramesIntoGops,extendFirstKeyFrame:extendFirstKeyFrame,generateSampleTable:generateSampleTable$1,concatenateNalData:concatenateNalData,generateSampleTableForFrame:generateSampleTableForFrame,concatenateNalDataForFrame:concatenateNalDataForFrame};var highPrefix=[33,16,5,32,164,27];var lowPrefix=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252];var zeroFill=function zeroFill2(count){var a=[];while(count--){a.push(0);}return a;};var makeTable=function makeTable2(metaTable){return Object.keys(metaTable).reduce(function(obj,key){obj[key]=new Uint8Array(metaTable[key].reduce(function(arr,part){return arr.concat(part);},[]));return obj;},{});};var silence;var silence_1=function silence_12(){if(!silence){var coneOfSilence={96e3:[highPrefix,[227,64],zeroFill(154),[56]],88200:[highPrefix,[231],zeroFill(170),[56]],64e3:[highPrefix,[248,192],zeroFill(240),[56]],48e3:[highPrefix,[255,192],zeroFill(268),[55,148,128],zeroFill(54),[112]],44100:[highPrefix,[255,192],zeroFill(268),[55,163,128],zeroFill(84),[112]],32e3:[highPrefix,[255,192],zeroFill(268),[55,234],zeroFill(226),[112]],24e3:[highPrefix,[255,192],zeroFill(268),[55,255,128],zeroFill(268),[111,112],zeroFill(126),[224]],16e3:[highPrefix,[255,192],zeroFill(268),[55,255,128],zeroFill(268),[111,255],zeroFill(269),[223,108],zeroFill(195),[1,192]],12e3:[lowPrefix,zeroFill(268),[3,127,248],zeroFill(268),[6,255,240],zeroFill(268),[13,255,224],zeroFill(268),[27,253,128],zeroFill(259),[56]],11025:[lowPrefix,zeroFill(268),[3,127,248],zeroFill(268),[6,255,240],zeroFill(268),[13,255,224],zeroFill(268),[27,255,192],zeroFill(268),[55,175,128],zeroFill(108),[112]],8e3:[lowPrefix,zeroFill(268),[3,121,16],zeroFill(47),[7]]};silence=makeTable(coneOfSilence);}return silence;};var ONE_SECOND_IN_TS$4=9e4,secondsToVideoTs,secondsToAudioTs,videoTsToSeconds,audioTsToSeconds,audioTsToVideoTs,videoTsToAudioTs,metadataTsToSeconds;secondsToVideoTs=function secondsToVideoTs2(seconds){return seconds*ONE_SECOND_IN_TS$4;};secondsToAudioTs=function secondsToAudioTs2(seconds,sampleRate){return seconds*sampleRate;};videoTsToSeconds=function videoTsToSeconds2(timestamp){return timestamp/ONE_SECOND_IN_TS$4;};audioTsToSeconds=function audioTsToSeconds2(timestamp,sampleRate){return timestamp/sampleRate;};audioTsToVideoTs=function audioTsToVideoTs2(timestamp,sampleRate){return secondsToVideoTs(audioTsToSeconds(timestamp,sampleRate));};videoTsToAudioTs=function videoTsToAudioTs2(timestamp,sampleRate){return secondsToAudioTs(videoTsToSeconds(timestamp),sampleRate);};metadataTsToSeconds=function metadataTsToSeconds2(timestamp,timelineStartPts,keepOriginalTimestamps){return videoTsToSeconds(keepOriginalTimestamps?timestamp:timestamp-timelineStartPts);};var clock={ONE_SECOND_IN_TS:ONE_SECOND_IN_TS$4,secondsToVideoTs:secondsToVideoTs,secondsToAudioTs:secondsToAudioTs,videoTsToSeconds:videoTsToSeconds,audioTsToSeconds:audioTsToSeconds,audioTsToVideoTs:audioTsToVideoTs,videoTsToAudioTs:videoTsToAudioTs,metadataTsToSeconds:metadataTsToSeconds};var sumFrameByteLengths=function sumFrameByteLengths2(array){var i,currentObj,sum=0;for(i=0;i<array.length;i++){currentObj=array[i];sum+=currentObj.data.byteLength;}return sum;};var prefixWithSilence=function prefixWithSilence2(track,frames,audioAppendStartTs,videoBaseMediaDecodeTime){var baseMediaDecodeTimeTs,frameDuration=0,audioGapDuration=0,audioFillFrameCount=0,audioFillDuration=0,silentFrame,i,firstFrame;if(!frames.length){return;}baseMediaDecodeTimeTs=clock.audioTsToVideoTs(track.baseMediaDecodeTime,track.samplerate);frameDuration=Math.ceil(clock.ONE_SECOND_IN_TS/(track.samplerate/1024));if(audioAppendStartTs&&videoBaseMediaDecodeTime){audioGapDuration=baseMediaDecodeTimeTs-Math.max(audioAppendStartTs,videoBaseMediaDecodeTime);audioFillFrameCount=Math.floor(audioGapDuration/frameDuration);audioFillDuration=audioFillFrameCount*frameDuration;}if(audioFillFrameCount<1||audioFillDuration>clock.ONE_SECOND_IN_TS/2){return;}silentFrame=silence_1()[track.samplerate];if(!silentFrame){silentFrame=frames[0].data;}for(i=0;i<audioFillFrameCount;i++){firstFrame=frames[0];frames.splice(0,0,{data:silentFrame,dts:firstFrame.dts-frameDuration,pts:firstFrame.pts-frameDuration});}track.baseMediaDecodeTime-=Math.floor(clock.videoTsToAudioTs(audioFillDuration,track.samplerate));return audioFillDuration;};var trimAdtsFramesByEarliestDts=function trimAdtsFramesByEarliestDts2(adtsFrames,track,earliestAllowedDts){if(track.minSegmentDts>=earliestAllowedDts){return adtsFrames;}track.minSegmentDts=Infinity;return adtsFrames.filter(function(currentFrame){if(currentFrame.dts>=earliestAllowedDts){track.minSegmentDts=Math.min(track.minSegmentDts,currentFrame.dts);track.minSegmentPts=track.minSegmentDts;return true;}return false;});};var generateSampleTable=function generateSampleTable2(frames){var i,currentFrame,samples=[];for(i=0;i<frames.length;i++){currentFrame=frames[i];samples.push({size:currentFrame.data.byteLength,duration:1024});}return samples;};var concatenateFrameData=function concatenateFrameData2(frames){var i,currentFrame,dataOffset=0,data=new Uint8Array(sumFrameByteLengths(frames));for(i=0;i<frames.length;i++){currentFrame=frames[i];data.set(currentFrame.data,dataOffset);dataOffset+=currentFrame.data.byteLength;}return data;};var audioFrameUtils={prefixWithSilence:prefixWithSilence,trimAdtsFramesByEarliestDts:trimAdtsFramesByEarliestDts,generateSampleTable:generateSampleTable,concatenateFrameData:concatenateFrameData};var ONE_SECOND_IN_TS$3=clock.ONE_SECOND_IN_TS;var collectDtsInfo=function collectDtsInfo2(track,data){if(typeof data.pts==="number"){if(track.timelineStartInfo.pts===void 0){track.timelineStartInfo.pts=data.pts;}if(track.minSegmentPts===void 0){track.minSegmentPts=data.pts;}else{track.minSegmentPts=Math.min(track.minSegmentPts,data.pts);}if(track.maxSegmentPts===void 0){track.maxSegmentPts=data.pts;}else{track.maxSegmentPts=Math.max(track.maxSegmentPts,data.pts);}}if(typeof data.dts==="number"){if(track.timelineStartInfo.dts===void 0){track.timelineStartInfo.dts=data.dts;}if(track.minSegmentDts===void 0){track.minSegmentDts=data.dts;}else{track.minSegmentDts=Math.min(track.minSegmentDts,data.dts);}if(track.maxSegmentDts===void 0){track.maxSegmentDts=data.dts;}else{track.maxSegmentDts=Math.max(track.maxSegmentDts,data.dts);}}};var clearDtsInfo=function clearDtsInfo2(track){delete track.minSegmentDts;delete track.maxSegmentDts;delete track.minSegmentPts;delete track.maxSegmentPts;};var calculateTrackBaseMediaDecodeTime=function calculateTrackBaseMediaDecodeTime2(track,keepOriginalTimestamps){var baseMediaDecodeTime,scale,minSegmentDts=track.minSegmentDts;if(!keepOriginalTimestamps){minSegmentDts-=track.timelineStartInfo.dts;}baseMediaDecodeTime=track.timelineStartInfo.baseMediaDecodeTime;baseMediaDecodeTime+=minSegmentDts;baseMediaDecodeTime=Math.max(0,baseMediaDecodeTime);if(track.type==="audio"){scale=track.samplerate/ONE_SECOND_IN_TS$3;baseMediaDecodeTime*=scale;baseMediaDecodeTime=Math.floor(baseMediaDecodeTime);}return baseMediaDecodeTime;};var trackDecodeInfo={clearDtsInfo:clearDtsInfo,calculateTrackBaseMediaDecodeTime:calculateTrackBaseMediaDecodeTime,collectDtsInfo:collectDtsInfo};var USER_DATA_REGISTERED_ITU_T_T35=4,RBSP_TRAILING_BITS=128;var parseSei=function parseSei2(bytes){var i=0,result={payloadType:-1,payloadSize:0},payloadType=0,payloadSize=0;while(i<bytes.byteLength){if(bytes[i]===RBSP_TRAILING_BITS){break;}while(bytes[i]===255){payloadType+=255;i++;}payloadType+=bytes[i++];while(bytes[i]===255){payloadSize+=255;i++;}payloadSize+=bytes[i++];if(!result.payload&&payloadType===USER_DATA_REGISTERED_ITU_T_T35){var userIdentifier=String.fromCharCode(bytes[i+3],bytes[i+4],bytes[i+5],bytes[i+6]);if(userIdentifier==="GA94"){result.payloadType=payloadType;result.payloadSize=payloadSize;result.payload=bytes.subarray(i,i+payloadSize);break;}else{result.payload=void 0;}}i+=payloadSize;payloadType=0;payloadSize=0;}return result;};var parseUserData=function parseUserData2(sei){if(sei.payload[0]!==181){return null;}if((sei.payload[1]<<8|sei.payload[2])!==49){return null;}if(String.fromCharCode(sei.payload[3],sei.payload[4],sei.payload[5],sei.payload[6])!=="GA94"){return null;}if(sei.payload[7]!==3){return null;}return sei.payload.subarray(8,sei.payload.length-1);};var parseCaptionPackets=function parseCaptionPackets2(pts,userData){var results=[],i,count,offset,data;if(!(userData[0]&64)){return results;}count=userData[0]&31;for(i=0;i<count;i++){offset=i*3;data={type:userData[offset+2]&3,pts:pts};if(userData[offset+2]&4){data.ccData=userData[offset+3]<<8|userData[offset+4];results.push(data);}}return results;};var discardEmulationPreventionBytes$1=function discardEmulationPreventionBytes4(data){var length=data.byteLength,emulationPreventionBytesPositions=[],i=1,newLength,newData;while(i<length-2){if(data[i]===0&&data[i+1]===0&&data[i+2]===3){emulationPreventionBytesPositions.push(i+2);i+=2;}else{i++;}}if(emulationPreventionBytesPositions.length===0){return data;}newLength=length-emulationPreventionBytesPositions.length;newData=new Uint8Array(newLength);var sourceIndex=0;for(i=0;i<newLength;sourceIndex++,i++){if(sourceIndex===emulationPreventionBytesPositions[0]){sourceIndex++;emulationPreventionBytesPositions.shift();}newData[i]=data[sourceIndex];}return newData;};var captionPacketParser={parseSei:parseSei,parseUserData:parseUserData,parseCaptionPackets:parseCaptionPackets,discardEmulationPreventionBytes:discardEmulationPreventionBytes$1,USER_DATA_REGISTERED_ITU_T_T35:USER_DATA_REGISTERED_ITU_T_T35};var CaptionStream$1=function CaptionStream2(options){options=options||{};CaptionStream2.prototype.init.call(this);this.parse708captions_=typeof options.parse708captions==="boolean"?options.parse708captions:true;this.captionPackets_=[];this.ccStreams_=[new Cea608Stream(0,0),new Cea608Stream(0,1),new Cea608Stream(1,0),new Cea608Stream(1,1)];if(this.parse708captions_){this.cc708Stream_=new Cea708Stream({captionServices:options.captionServices});}this.reset();this.ccStreams_.forEach(function(cc){cc.on("data",this.trigger.bind(this,"data"));cc.on("partialdone",this.trigger.bind(this,"partialdone"));cc.on("done",this.trigger.bind(this,"done"));},this);if(this.parse708captions_){this.cc708Stream_.on("data",this.trigger.bind(this,"data"));this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone"));this.cc708Stream_.on("done",this.trigger.bind(this,"done"));}};CaptionStream$1.prototype=new stream();CaptionStream$1.prototype.push=function(event){var sei,userData,newCaptionPackets;if(event.nalUnitType!=="sei_rbsp"){return;}sei=captionPacketParser.parseSei(event.escapedRBSP);if(!sei.payload){return;}if(sei.payloadType!==captionPacketParser.USER_DATA_REGISTERED_ITU_T_T35){return;}userData=captionPacketParser.parseUserData(sei);if(!userData){return;}if(event.dts<this.latestDts_){this.ignoreNextEqualDts_=true;return;}else if(event.dts===this.latestDts_&&this.ignoreNextEqualDts_){this.numSameDts_--;if(!this.numSameDts_){this.ignoreNextEqualDts_=false;}return;}newCaptionPackets=captionPacketParser.parseCaptionPackets(event.pts,userData);this.captionPackets_=this.captionPackets_.concat(newCaptionPackets);if(this.latestDts_!==event.dts){this.numSameDts_=0;}this.numSameDts_++;this.latestDts_=event.dts;};CaptionStream$1.prototype.flushCCStreams=function(flushType){this.ccStreams_.forEach(function(cc){return flushType==="flush"?cc.flush():cc.partialFlush();},this);};CaptionStream$1.prototype.flushStream=function(flushType){if(!this.captionPackets_.length){this.flushCCStreams(flushType);return;}this.captionPackets_.forEach(function(elem,idx){elem.presortIndex=idx;});this.captionPackets_.sort(function(a,b){if(a.pts===b.pts){return a.presortIndex-b.presortIndex;}return a.pts-b.pts;});this.captionPackets_.forEach(function(packet){if(packet.type<2){this.dispatchCea608Packet(packet);}else{this.dispatchCea708Packet(packet);}},this);this.captionPackets_.length=0;this.flushCCStreams(flushType);};CaptionStream$1.prototype.flush=function(){return this.flushStream("flush");};CaptionStream$1.prototype.partialFlush=function(){return this.flushStream("partialFlush");};CaptionStream$1.prototype.reset=function(){this.latestDts_=null;this.ignoreNextEqualDts_=false;this.numSameDts_=0;this.activeCea608Channel_=[null,null];this.ccStreams_.forEach(function(ccStream){ccStream.reset();});};CaptionStream$1.prototype.dispatchCea608Packet=function(packet){if(this.setsTextOrXDSActive(packet)){this.activeCea608Channel_[packet.type]=null;}else if(this.setsChannel1Active(packet)){this.activeCea608Channel_[packet.type]=0;}else if(this.setsChannel2Active(packet)){this.activeCea608Channel_[packet.type]=1;}if(this.activeCea608Channel_[packet.type]===null){return;}this.ccStreams_[(packet.type<<1)+this.activeCea608Channel_[packet.type]].push(packet);};CaptionStream$1.prototype.setsChannel1Active=function(packet){return(packet.ccData&30720)===4096;};CaptionStream$1.prototype.setsChannel2Active=function(packet){return(packet.ccData&30720)===6144;};CaptionStream$1.prototype.setsTextOrXDSActive=function(packet){return(packet.ccData&28928)===256||(packet.ccData&30974)===4138||(packet.ccData&30974)===6186;};CaptionStream$1.prototype.dispatchCea708Packet=function(packet){if(this.parse708captions_){this.cc708Stream_.push(packet);}};var CHARACTER_TRANSLATION_708={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600};var get708CharFromCode=function get708CharFromCode2(code){var newCode=CHARACTER_TRANSLATION_708[code]||code;if(code&4096&&code===newCode){return"";}return String.fromCharCode(newCode);};var within708TextBlock=function within708TextBlock2(b){return 32<=b&&b<=127||160<=b&&b<=255;};var Cea708Window=function Cea708Window2(windowNum){this.windowNum=windowNum;this.reset();};Cea708Window.prototype.reset=function(){this.clearText();this.pendingNewLine=false;this.winAttr={};this.penAttr={};this.penLoc={};this.penColor={};this.visible=0;this.rowLock=0;this.columnLock=0;this.priority=0;this.relativePositioning=0;this.anchorVertical=0;this.anchorHorizontal=0;this.anchorPoint=0;this.rowCount=1;this.virtualRowCount=this.rowCount+1;this.columnCount=41;this.windowStyle=0;this.penStyle=0;};Cea708Window.prototype.getText=function(){return this.rows.join("\n");};Cea708Window.prototype.clearText=function(){this.rows=[""];this.rowIdx=0;};Cea708Window.prototype.newLine=function(pts){if(this.rows.length>=this.virtualRowCount&&typeof this.beforeRowOverflow==="function"){this.beforeRowOverflow(pts);}if(this.rows.length>0){this.rows.push("");this.rowIdx++;}while(this.rows.length>this.virtualRowCount){this.rows.shift();this.rowIdx--;}};Cea708Window.prototype.isEmpty=function(){if(this.rows.length===0){return true;}else if(this.rows.length===1){return this.rows[0]==="";}return false;};Cea708Window.prototype.addText=function(text){this.rows[this.rowIdx]+=text;};Cea708Window.prototype.backspace=function(){if(!this.isEmpty()){var row=this.rows[this.rowIdx];this.rows[this.rowIdx]=row.substr(0,row.length-1);}};var Cea708Service=function Cea708Service2(serviceNum,encoding,stream2){this.serviceNum=serviceNum;this.text="";this.currentWindow=new Cea708Window(-1);this.windows=[];this.stream=stream2;if(typeof encoding==="string"){this.createTextDecoder(encoding);}};Cea708Service.prototype.init=function(pts,beforeRowOverflow){this.startPts=pts;for(var win2=0;win2<8;win2++){this.windows[win2]=new Cea708Window(win2);if(typeof beforeRowOverflow==="function"){this.windows[win2].beforeRowOverflow=beforeRowOverflow;}}};Cea708Service.prototype.setCurrentWindow=function(windowNum){this.currentWindow=this.windows[windowNum];};Cea708Service.prototype.createTextDecoder=function(encoding){if(typeof TextDecoder==="undefined"){this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});}else{try{this.textDecoder_=new TextDecoder(encoding);}catch(error){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+encoding+" encoding. "+error});}}};var Cea708Stream=function Cea708Stream2(options){options=options||{};Cea708Stream2.prototype.init.call(this);var self2=this;var captionServices=options.captionServices||{};var captionServiceEncodings={};var serviceProps;Object.keys(captionServices).forEach(function(serviceName){serviceProps=captionServices[serviceName];if(/^SERVICE/.test(serviceName)){captionServiceEncodings[serviceName]=serviceProps.encoding;}});this.serviceEncodings=captionServiceEncodings;this.current708Packet=null;this.services={};this.push=function(packet){if(packet.type===3){self2.new708Packet();self2.add708Bytes(packet);}else{if(self2.current708Packet===null){self2.new708Packet();}self2.add708Bytes(packet);}};};Cea708Stream.prototype=new stream();Cea708Stream.prototype.new708Packet=function(){if(this.current708Packet!==null){this.push708Packet();}this.current708Packet={data:[],ptsVals:[]};};Cea708Stream.prototype.add708Bytes=function(packet){var data=packet.ccData;var byte0=data>>>8;var byte1=data&255;this.current708Packet.ptsVals.push(packet.pts);this.current708Packet.data.push(byte0);this.current708Packet.data.push(byte1);};Cea708Stream.prototype.push708Packet=function(){var packet708=this.current708Packet;var packetData=packet708.data;var serviceNum=null;var blockSize=null;var i=0;var b=packetData[i++];packet708.seq=b>>6;packet708.sizeCode=b&63;for(;i<packetData.length;i++){b=packetData[i++];serviceNum=b>>5;blockSize=b&31;if(serviceNum===7&&blockSize>0){b=packetData[i++];serviceNum=b;}this.pushServiceBlock(serviceNum,i,blockSize);if(blockSize>0){i+=blockSize-1;}}};Cea708Stream.prototype.pushServiceBlock=function(serviceNum,start2,size){var b;var i=start2;var packetData=this.current708Packet.data;var service=this.services[serviceNum];if(!service){service=this.initService(serviceNum,i);}for(;i<start2+size&&i<packetData.length;i++){b=packetData[i];if(within708TextBlock(b)){i=this.handleText(i,service);}else if(b===24){i=this.multiByteCharacter(i,service);}else if(b===16){i=this.extendedCommands(i,service);}else if(128<=b&&b<=135){i=this.setCurrentWindow(i,service);}else if(152<=b&&b<=159){i=this.defineWindow(i,service);}else if(b===136){i=this.clearWindows(i,service);}else if(b===140){i=this.deleteWindows(i,service);}else if(b===137){i=this.displayWindows(i,service);}else if(b===138){i=this.hideWindows(i,service);}else if(b===139){i=this.toggleWindows(i,service);}else if(b===151){i=this.setWindowAttributes(i,service);}else if(b===144){i=this.setPenAttributes(i,service);}else if(b===145){i=this.setPenColor(i,service);}else if(b===146){i=this.setPenLocation(i,service);}else if(b===143){service=this.reset(i,service);}else if(b===8){service.currentWindow.backspace();}else if(b===12){service.currentWindow.clearText();}else if(b===13){service.currentWindow.pendingNewLine=true;}else if(b===14){service.currentWindow.clearText();}else if(b===141){i++;}else;}};Cea708Stream.prototype.extendedCommands=function(i,service){var packetData=this.current708Packet.data;var b=packetData[++i];if(within708TextBlock(b)){i=this.handleText(i,service,{isExtended:true});}return i;};Cea708Stream.prototype.getPts=function(byteIndex){return this.current708Packet.ptsVals[Math.floor(byteIndex/2)];};Cea708Stream.prototype.initService=function(serviceNum,i){var serviceName="SERVICE"+serviceNum;var self2=this;var serviceName;var encoding;if(serviceName in this.serviceEncodings){encoding=this.serviceEncodings[serviceName];}this.services[serviceNum]=new Cea708Service(serviceNum,encoding,self2);this.services[serviceNum].init(this.getPts(i),function(pts){self2.flushDisplayed(pts,self2.services[serviceNum]);});return this.services[serviceNum];};Cea708Stream.prototype.handleText=function(i,service,options){var isExtended=options&&options.isExtended;var isMultiByte=options&&options.isMultiByte;var packetData=this.current708Packet.data;var extended=isExtended?4096:0;var currentByte=packetData[i];var nextByte=packetData[i+1];var win2=service.currentWindow;var _char;var charCodeArray;if(service.textDecoder_&&!isExtended){if(isMultiByte){charCodeArray=[currentByte,nextByte];i++;}else{charCodeArray=[currentByte];}_char=service.textDecoder_.decode(new Uint8Array(charCodeArray));}else{_char=get708CharFromCode(extended|currentByte);}if(win2.pendingNewLine&&!win2.isEmpty()){win2.newLine(this.getPts(i));}win2.pendingNewLine=false;win2.addText(_char);return i;};Cea708Stream.prototype.multiByteCharacter=function(i,service){var packetData=this.current708Packet.data;var firstByte=packetData[i+1];var secondByte=packetData[i+2];if(within708TextBlock(firstByte)&&within708TextBlock(secondByte)){i=this.handleText(++i,service,{isMultiByte:true});}return i;};Cea708Stream.prototype.setCurrentWindow=function(i,service){var packetData=this.current708Packet.data;var b=packetData[i];var windowNum=b&7;service.setCurrentWindow(windowNum);return i;};Cea708Stream.prototype.defineWindow=function(i,service){var packetData=this.current708Packet.data;var b=packetData[i];var windowNum=b&7;service.setCurrentWindow(windowNum);var win2=service.currentWindow;b=packetData[++i];win2.visible=(b&32)>>5;win2.rowLock=(b&16)>>4;win2.columnLock=(b&8)>>3;win2.priority=b&7;b=packetData[++i];win2.relativePositioning=(b&128)>>7;win2.anchorVertical=b&127;b=packetData[++i];win2.anchorHorizontal=b;b=packetData[++i];win2.anchorPoint=(b&240)>>4;win2.rowCount=b&15;b=packetData[++i];win2.columnCount=b&63;b=packetData[++i];win2.windowStyle=(b&56)>>3;win2.penStyle=b&7;win2.virtualRowCount=win2.rowCount+1;return i;};Cea708Stream.prototype.setWindowAttributes=function(i,service){var packetData=this.current708Packet.data;var b=packetData[i];var winAttr=service.currentWindow.winAttr;b=packetData[++i];winAttr.fillOpacity=(b&192)>>6;winAttr.fillRed=(b&48)>>4;winAttr.fillGreen=(b&12)>>2;winAttr.fillBlue=b&3;b=packetData[++i];winAttr.borderType=(b&192)>>6;winAttr.borderRed=(b&48)>>4;winAttr.borderGreen=(b&12)>>2;winAttr.borderBlue=b&3;b=packetData[++i];winAttr.borderType+=(b&128)>>5;winAttr.wordWrap=(b&64)>>6;winAttr.printDirection=(b&48)>>4;winAttr.scrollDirection=(b&12)>>2;winAttr.justify=b&3;b=packetData[++i];winAttr.effectSpeed=(b&240)>>4;winAttr.effectDirection=(b&12)>>2;winAttr.displayEffect=b&3;return i;};Cea708Stream.prototype.flushDisplayed=function(pts,service){var displayedText=[];for(var winId=0;winId<8;winId++){if(service.windows[winId].visible&&!service.windows[winId].isEmpty()){displayedText.push(service.windows[winId].getText());}}service.endPts=pts;service.text=displayedText.join("\n\n");this.pushCaption(service);service.startPts=pts;};Cea708Stream.prototype.pushCaption=function(service){if(service.text!==""){this.trigger("data",{startPts:service.startPts,endPts:service.endPts,text:service.text,stream:"cc708_"+service.serviceNum});service.text="";service.startPts=service.endPts;}};Cea708Stream.prototype.displayWindows=function(i,service){var packetData=this.current708Packet.data;var b=packetData[++i];var pts=this.getPts(i);this.flushDisplayed(pts,service);for(var winId=0;winId<8;winId++){if(b&1<<winId){service.windows[winId].visible=1;}}return i;};Cea708Stream.prototype.hideWindows=function(i,service){var packetData=this.current708Packet.data;var b=packetData[++i];var pts=this.getPts(i);this.flushDisplayed(pts,service);for(var winId=0;winId<8;winId++){if(b&1<<winId){service.windows[winId].visible=0;}}return i;};Cea708Stream.prototype.toggleWindows=function(i,service){var packetData=this.current708Packet.data;var b=packetData[++i];var pts=this.getPts(i);this.flushDisplayed(pts,service);for(var winId=0;winId<8;winId++){if(b&1<<winId){service.windows[winId].visible^=1;}}return i;};Cea708Stream.prototype.clearWindows=function(i,service){var packetData=this.current708Packet.data;var b=packetData[++i];var pts=this.getPts(i);this.flushDisplayed(pts,service);for(var winId=0;winId<8;winId++){if(b&1<<winId){service.windows[winId].clearText();}}return i;};Cea708Stream.prototype.deleteWindows=function(i,service){var packetData=this.current708Packet.data;var b=packetData[++i];var pts=this.getPts(i);this.flushDisplayed(pts,service);for(var winId=0;winId<8;winId++){if(b&1<<winId){service.windows[winId].reset();}}return i;};Cea708Stream.prototype.setPenAttributes=function(i,service){var packetData=this.current708Packet.data;var b=packetData[i];var penAttr=service.currentWindow.penAttr;b=packetData[++i];penAttr.textTag=(b&240)>>4;penAttr.offset=(b&12)>>2;penAttr.penSize=b&3;b=packetData[++i];penAttr.italics=(b&128)>>7;penAttr.underline=(b&64)>>6;penAttr.edgeType=(b&56)>>3;penAttr.fontStyle=b&7;return i;};Cea708Stream.prototype.setPenColor=function(i,service){var packetData=this.current708Packet.data;var b=packetData[i];var penColor=service.currentWindow.penColor;b=packetData[++i];penColor.fgOpacity=(b&192)>>6;penColor.fgRed=(b&48)>>4;penColor.fgGreen=(b&12)>>2;penColor.fgBlue=b&3;b=packetData[++i];penColor.bgOpacity=(b&192)>>6;penColor.bgRed=(b&48)>>4;penColor.bgGreen=(b&12)>>2;penColor.bgBlue=b&3;b=packetData[++i];penColor.edgeRed=(b&48)>>4;penColor.edgeGreen=(b&12)>>2;penColor.edgeBlue=b&3;return i;};Cea708Stream.prototype.setPenLocation=function(i,service){var packetData=this.current708Packet.data;var b=packetData[i];var penLoc=service.currentWindow.penLoc;service.currentWindow.pendingNewLine=true;b=packetData[++i];penLoc.row=b&15;b=packetData[++i];penLoc.column=b&63;return i;};Cea708Stream.prototype.reset=function(i,service){var pts=this.getPts(i);this.flushDisplayed(pts,service);return this.initService(service.serviceNum,i);};var CHARACTER_TRANSLATION={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496};var getCharFromCode=function getCharFromCode2(code){if(code===null){return"";}code=CHARACTER_TRANSLATION[code]||code;return String.fromCharCode(code);};var BOTTOM_ROW=14;var ROWS=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152];var createDisplayBuffer=function createDisplayBuffer2(){var result=[],i=BOTTOM_ROW+1;while(i--){result.push("");}return result;};var Cea608Stream=function Cea608Stream2(field,dataChannel){Cea608Stream2.prototype.init.call(this);this.field_=field||0;this.dataChannel_=dataChannel||0;this.name_="CC"+((this.field_<<1|this.dataChannel_)+1);this.setConstants();this.reset();this.push=function(packet){var data,swap,char0,char1,text;data=packet.ccData&32639;if(data===this.lastControlCode_){this.lastControlCode_=null;return;}if((data&61440)===4096){this.lastControlCode_=data;}else if(data!==this.PADDING_){this.lastControlCode_=null;}char0=data>>>8;char1=data&255;if(data===this.PADDING_){return;}else if(data===this.RESUME_CAPTION_LOADING_){this.mode_="popOn";}else if(data===this.END_OF_CAPTION_){this.mode_="popOn";this.clearFormatting(packet.pts);this.flushDisplayed(packet.pts);swap=this.displayed_;this.displayed_=this.nonDisplayed_;this.nonDisplayed_=swap;this.startPts_=packet.pts;}else if(data===this.ROLL_UP_2_ROWS_){this.rollUpRows_=2;this.setRollUp(packet.pts);}else if(data===this.ROLL_UP_3_ROWS_){this.rollUpRows_=3;this.setRollUp(packet.pts);}else if(data===this.ROLL_UP_4_ROWS_){this.rollUpRows_=4;this.setRollUp(packet.pts);}else if(data===this.CARRIAGE_RETURN_){this.clearFormatting(packet.pts);this.flushDisplayed(packet.pts);this.shiftRowsUp_();this.startPts_=packet.pts;}else if(data===this.BACKSPACE_){if(this.mode_==="popOn"){this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1);}else{this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);}}else if(data===this.ERASE_DISPLAYED_MEMORY_){this.flushDisplayed(packet.pts);this.displayed_=createDisplayBuffer();}else if(data===this.ERASE_NON_DISPLAYED_MEMORY_){this.nonDisplayed_=createDisplayBuffer();}else if(data===this.RESUME_DIRECT_CAPTIONING_){if(this.mode_!=="paintOn"){this.flushDisplayed(packet.pts);this.displayed_=createDisplayBuffer();}this.mode_="paintOn";this.startPts_=packet.pts;}else if(this.isSpecialCharacter(char0,char1)){char0=(char0&3)<<8;text=getCharFromCode(char0|char1);this[this.mode_](packet.pts,text);this.column_++;}else if(this.isExtCharacter(char0,char1)){if(this.mode_==="popOn"){this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1);}else{this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);}char0=(char0&3)<<8;text=getCharFromCode(char0|char1);this[this.mode_](packet.pts,text);this.column_++;}else if(this.isMidRowCode(char0,char1)){this.clearFormatting(packet.pts);this[this.mode_](packet.pts," ");this.column_++;if((char1&14)===14){this.addFormatting(packet.pts,["i"]);}if((char1&1)===1){this.addFormatting(packet.pts,["u"]);}}else if(this.isOffsetControlCode(char0,char1)){this.column_+=char1&3;}else if(this.isPAC(char0,char1)){var row=ROWS.indexOf(data&7968);if(this.mode_==="rollUp"){if(row-this.rollUpRows_+1<0){row=this.rollUpRows_-1;}this.setRollUp(packet.pts,row);}if(row!==this.row_){this.clearFormatting(packet.pts);this.row_=row;}if(char1&1&&this.formatting_.indexOf("u")===-1){this.addFormatting(packet.pts,["u"]);}if((data&16)===16){this.column_=((data&14)>>1)*4;}if(this.isColorPAC(char1)){if((char1&14)===14){this.addFormatting(packet.pts,["i"]);}}}else if(this.isNormalChar(char0)){if(char1===0){char1=null;}text=getCharFromCode(char0);text+=getCharFromCode(char1);this[this.mode_](packet.pts,text);this.column_+=text.length;}};};Cea608Stream.prototype=new stream();Cea608Stream.prototype.flushDisplayed=function(pts){var content=this.displayed_.map(function(row,index){try{return row.trim();}catch(e){this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+index+"."});return"";}},this).join("\n").replace(/^\n+|\n+$/g,"");if(content.length){this.trigger("data",{startPts:this.startPts_,endPts:pts,text:content,stream:this.name_});}};Cea608Stream.prototype.reset=function(){this.mode_="popOn";this.topRow_=0;this.startPts_=0;this.displayed_=createDisplayBuffer();this.nonDisplayed_=createDisplayBuffer();this.lastControlCode_=null;this.column_=0;this.row_=BOTTOM_ROW;this.rollUpRows_=2;this.formatting_=[];};Cea608Stream.prototype.setConstants=function(){if(this.dataChannel_===0){this.BASE_=16;this.EXT_=17;this.CONTROL_=(20|this.field_)<<8;this.OFFSET_=23;}else if(this.dataChannel_===1){this.BASE_=24;this.EXT_=25;this.CONTROL_=(28|this.field_)<<8;this.OFFSET_=31;}this.PADDING_=0;this.RESUME_CAPTION_LOADING_=this.CONTROL_|32;this.END_OF_CAPTION_=this.CONTROL_|47;this.ROLL_UP_2_ROWS_=this.CONTROL_|37;this.ROLL_UP_3_ROWS_=this.CONTROL_|38;this.ROLL_UP_4_ROWS_=this.CONTROL_|39;this.CARRIAGE_RETURN_=this.CONTROL_|45;this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41;this.BACKSPACE_=this.CONTROL_|33;this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44;this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46;};Cea608Stream.prototype.isSpecialCharacter=function(char0,char1){return char0===this.EXT_&&char1>=48&&char1<=63;};Cea608Stream.prototype.isExtCharacter=function(char0,char1){return(char0===this.EXT_+1||char0===this.EXT_+2)&&char1>=32&&char1<=63;};Cea608Stream.prototype.isMidRowCode=function(char0,char1){return char0===this.EXT_&&char1>=32&&char1<=47;};Cea608Stream.prototype.isOffsetControlCode=function(char0,char1){return char0===this.OFFSET_&&char1>=33&&char1<=35;};Cea608Stream.prototype.isPAC=function(char0,char1){return char0>=this.BASE_&&char0<this.BASE_+8&&char1>=64&&char1<=127;};Cea608Stream.prototype.isColorPAC=function(char1){return char1>=64&&char1<=79||char1>=96&&char1<=127;};Cea608Stream.prototype.isNormalChar=function(_char2){return _char2>=32&&_char2<=127;};Cea608Stream.prototype.setRollUp=function(pts,newBaseRow){if(this.mode_!=="rollUp"){this.row_=BOTTOM_ROW;this.mode_="rollUp";this.flushDisplayed(pts);this.nonDisplayed_=createDisplayBuffer();this.displayed_=createDisplayBuffer();}if(newBaseRow!==void 0&&newBaseRow!==this.row_){for(var i=0;i<this.rollUpRows_;i++){this.displayed_[newBaseRow-i]=this.displayed_[this.row_-i];this.displayed_[this.row_-i]="";}}if(newBaseRow===void 0){newBaseRow=this.row_;}this.topRow_=newBaseRow-this.rollUpRows_+1;};Cea608Stream.prototype.addFormatting=function(pts,format){this.formatting_=this.formatting_.concat(format);var text=format.reduce(function(text2,format2){return text2+"<"+format2+">";},"");this[this.mode_](pts,text);};Cea608Stream.prototype.clearFormatting=function(pts){if(!this.formatting_.length){return;}var text=this.formatting_.reverse().reduce(function(text2,format){return text2+"</"+format+">";},"");this.formatting_=[];this[this.mode_](pts,text);};Cea608Stream.prototype.popOn=function(pts,text){var baseRow=this.nonDisplayed_[this.row_];baseRow+=text;this.nonDisplayed_[this.row_]=baseRow;};Cea608Stream.prototype.rollUp=function(pts,text){var baseRow=this.displayed_[this.row_];baseRow+=text;this.displayed_[this.row_]=baseRow;};Cea608Stream.prototype.shiftRowsUp_=function(){var i;for(i=0;i<this.topRow_;i++){this.displayed_[i]="";}for(i=this.row_+1;i<BOTTOM_ROW+1;i++){this.displayed_[i]="";}for(i=this.topRow_;i<this.row_;i++){this.displayed_[i]=this.displayed_[i+1];}this.displayed_[this.row_]="";};Cea608Stream.prototype.paintOn=function(pts,text){var baseRow=this.displayed_[this.row_];baseRow+=text;this.displayed_[this.row_]=baseRow;};var captionStream={CaptionStream:CaptionStream$1,Cea608Stream:Cea608Stream,Cea708Stream:Cea708Stream};var streamTypes={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21};var MAX_TS=8589934592;var RO_THRESH=4294967296;var TYPE_SHARED="shared";var handleRollover$1=function handleRollover2(value,reference){var direction=1;if(value>reference){direction=-1;}while(Math.abs(reference-value)>RO_THRESH){value+=direction*MAX_TS;}return value;};var TimestampRolloverStream$1=function TimestampRolloverStream2(type3){var lastDTS,referenceDTS;TimestampRolloverStream2.prototype.init.call(this);this.type_=type3||TYPE_SHARED;this.push=function(data){if(this.type_!==TYPE_SHARED&&data.type!==this.type_){return;}if(referenceDTS===void 0){referenceDTS=data.dts;}data.dts=handleRollover$1(data.dts,referenceDTS);data.pts=handleRollover$1(data.pts,referenceDTS);lastDTS=data.dts;this.trigger("data",data);};this.flush=function(){referenceDTS=lastDTS;this.trigger("done");};this.endTimeline=function(){this.flush();this.trigger("endedtimeline");};this.discontinuity=function(){referenceDTS=void 0;lastDTS=void 0;};this.reset=function(){this.discontinuity();this.trigger("reset");};};TimestampRolloverStream$1.prototype=new stream();var timestampRolloverStream={TimestampRolloverStream:TimestampRolloverStream$1,handleRollover:handleRollover$1};var percentEncode$1=function percentEncode2(bytes,start2,end){var i,result="";for(i=start2;i<end;i++){result+="%"+("00"+bytes[i].toString(16)).slice(-2);}return result;},parseUtf8=function parseUtf82(bytes,start2,end){return decodeURIComponent(percentEncode$1(bytes,start2,end));},parseIso88591$1=function parseIso885912(bytes,start2,end){return unescape(percentEncode$1(bytes,start2,end));},parseSyncSafeInteger$1=function parseSyncSafeInteger2(data){return data[0]<<21|data[1]<<14|data[2]<<7|data[3];},tagParsers={TXXX:function TXXX(tag){var i;if(tag.data[0]!==3){return;}for(i=1;i<tag.data.length;i++){if(tag.data[i]===0){tag.description=parseUtf8(tag.data,1,i);tag.value=parseUtf8(tag.data,i+1,tag.data.length).replace(/\0*$/,"");break;}}tag.data=tag.value;},WXXX:function WXXX(tag){var i;if(tag.data[0]!==3){return;}for(i=1;i<tag.data.length;i++){if(tag.data[i]===0){tag.description=parseUtf8(tag.data,1,i);tag.url=parseUtf8(tag.data,i+1,tag.data.length);break;}}},PRIV:function PRIV(tag){var i;for(i=0;i<tag.data.length;i++){if(tag.data[i]===0){tag.owner=parseIso88591$1(tag.data,0,i);break;}}tag.privateData=tag.data.subarray(i+1);tag.data=tag.privateData;}},_MetadataStream;_MetadataStream=function MetadataStream(options){var settings={descriptor:options&&options.descriptor},tagSize=0,buffer=[],bufferSize=0,i;_MetadataStream.prototype.init.call(this);this.dispatchType=streamTypes.METADATA_STREAM_TYPE.toString(16);if(settings.descriptor){for(i=0;i<settings.descriptor.length;i++){this.dispatchType+=("00"+settings.descriptor[i].toString(16)).slice(-2);}}this.push=function(chunk){var tag,frameStart,frameSize,frame,i2,frameHeader;if(chunk.type!=="timed-metadata"){return;}if(chunk.dataAlignmentIndicator){bufferSize=0;buffer.length=0;}if(buffer.length===0&&(chunk.data.length<10||chunk.data[0]!=="I".charCodeAt(0)||chunk.data[1]!=="D".charCodeAt(0)||chunk.data[2]!=="3".charCodeAt(0))){this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});return;}buffer.push(chunk);bufferSize+=chunk.data.byteLength;if(buffer.length===1){tagSize=parseSyncSafeInteger$1(chunk.data.subarray(6,10));tagSize+=10;}if(bufferSize<tagSize){return;}tag={data:new Uint8Array(tagSize),frames:[],pts:buffer[0].pts,dts:buffer[0].dts};for(i2=0;i2<tagSize;){tag.data.set(buffer[0].data.subarray(0,tagSize-i2),i2);i2+=buffer[0].data.byteLength;bufferSize-=buffer[0].data.byteLength;buffer.shift();}frameStart=10;if(tag.data[5]&64){frameStart+=4;frameStart+=parseSyncSafeInteger$1(tag.data.subarray(10,14));tagSize-=parseSyncSafeInteger$1(tag.data.subarray(16,20));}do{frameSize=parseSyncSafeInteger$1(tag.data.subarray(frameStart+4,frameStart+8));if(frameSize<1){this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping metadata parsing."});return;}frameHeader=String.fromCharCode(tag.data[frameStart],tag.data[frameStart+1],tag.data[frameStart+2],tag.data[frameStart+3]);frame={id:frameHeader,data:tag.data.subarray(frameStart+10,frameStart+frameSize+10)};frame.key=frame.id;if(tagParsers[frame.id]){tagParsers[frame.id](frame);if(frame.owner==="com.apple.streaming.transportStreamTimestamp"){var d2=frame.data,size=(d2[3]&1)<<30|d2[4]<<22|d2[5]<<14|d2[6]<<6|d2[7]>>>2;size*=4;size+=d2[7]&3;frame.timeStamp=size;if(tag.pts===void 0&&tag.dts===void 0){tag.pts=frame.timeStamp;tag.dts=frame.timeStamp;}this.trigger("timestamp",frame);}}tag.frames.push(frame);frameStart+=10;frameStart+=frameSize;}while(frameStart<tagSize);this.trigger("data",tag);};};_MetadataStream.prototype=new stream();var metadataStream=_MetadataStream;var TimestampRolloverStream=timestampRolloverStream.TimestampRolloverStream;var _TransportPacketStream,_TransportParseStream,_ElementaryStream;var MP2T_PACKET_LENGTH$1=188,SYNC_BYTE$1=71;_TransportPacketStream=function TransportPacketStream(){var buffer=new Uint8Array(MP2T_PACKET_LENGTH$1),bytesInBuffer=0;_TransportPacketStream.prototype.init.call(this);this.push=function(bytes){var startIndex=0,endIndex=MP2T_PACKET_LENGTH$1,everything;if(bytesInBuffer){everything=new Uint8Array(bytes.byteLength+bytesInBuffer);everything.set(buffer.subarray(0,bytesInBuffer));everything.set(bytes,bytesInBuffer);bytesInBuffer=0;}else{everything=bytes;}while(endIndex<everything.byteLength){if(everything[startIndex]===SYNC_BYTE$1&&everything[endIndex]===SYNC_BYTE$1){this.trigger("data",everything.subarray(startIndex,endIndex));startIndex+=MP2T_PACKET_LENGTH$1;endIndex+=MP2T_PACKET_LENGTH$1;continue;}startIndex++;endIndex++;}if(startIndex<everything.byteLength){buffer.set(everything.subarray(startIndex),0);bytesInBuffer=everything.byteLength-startIndex;}};this.flush=function(){if(bytesInBuffer===MP2T_PACKET_LENGTH$1&&buffer[0]===SYNC_BYTE$1){this.trigger("data",buffer);bytesInBuffer=0;}this.trigger("done");};this.endTimeline=function(){this.flush();this.trigger("endedtimeline");};this.reset=function(){bytesInBuffer=0;this.trigger("reset");};};_TransportPacketStream.prototype=new stream();_TransportParseStream=function TransportParseStream(){var parsePsi,parsePat2,parsePmt2,self2;_TransportParseStream.prototype.init.call(this);self2=this;this.packetsWaitingForPmt=[];this.programMapTable=void 0;parsePsi=function parsePsi2(payload,psi){var offset=0;if(psi.payloadUnitStartIndicator){offset+=payload[offset]+1;}if(psi.type==="pat"){parsePat2(payload.subarray(offset),psi);}else{parsePmt2(payload.subarray(offset),psi);}};parsePat2=function parsePat3(payload,pat){pat.section_number=payload[7];pat.last_section_number=payload[8];self2.pmtPid=(payload[10]&31)<<8|payload[11];pat.pmtPid=self2.pmtPid;};parsePmt2=function parsePmt3(payload,pmt){var sectionLength,tableEnd,programInfoLength,offset;if(!(payload[5]&1)){return;}self2.programMapTable={video:null,audio:null,"timed-metadata":{}};sectionLength=(payload[1]&15)<<8|payload[2];tableEnd=3+sectionLength-4;programInfoLength=(payload[10]&15)<<8|payload[11];offset=12+programInfoLength;while(offset<tableEnd){var streamType=payload[offset];var pid=(payload[offset+1]&31)<<8|payload[offset+2];if(streamType===streamTypes.H264_STREAM_TYPE&&self2.programMapTable.video===null){self2.programMapTable.video=pid;}else if(streamType===streamTypes.ADTS_STREAM_TYPE&&self2.programMapTable.audio===null){self2.programMapTable.audio=pid;}else if(streamType===streamTypes.METADATA_STREAM_TYPE){self2.programMapTable["timed-metadata"][pid]=streamType;}offset+=((payload[offset+3]&15)<<8|payload[offset+4])+5;}pmt.programMapTable=self2.programMapTable;};this.push=function(packet){var result={},offset=4;result.payloadUnitStartIndicator=!!(packet[1]&64);result.pid=packet[1]&31;result.pid<<=8;result.pid|=packet[2];if((packet[3]&48)>>>4>1){offset+=packet[offset]+1;}if(result.pid===0){result.type="pat";parsePsi(packet.subarray(offset),result);this.trigger("data",result);}else if(result.pid===this.pmtPid){result.type="pmt";parsePsi(packet.subarray(offset),result);this.trigger("data",result);while(this.packetsWaitingForPmt.length){this.processPes_.apply(this,this.packetsWaitingForPmt.shift());}}else if(this.programMapTable===void 0){this.packetsWaitingForPmt.push([packet,offset,result]);}else{this.processPes_(packet,offset,result);}};this.processPes_=function(packet,offset,result){if(result.pid===this.programMapTable.video){result.streamType=streamTypes.H264_STREAM_TYPE;}else if(result.pid===this.programMapTable.audio){result.streamType=streamTypes.ADTS_STREAM_TYPE;}else{result.streamType=this.programMapTable["timed-metadata"][result.pid];}result.type="pes";result.data=packet.subarray(offset);this.trigger("data",result);};};_TransportParseStream.prototype=new stream();_TransportParseStream.STREAM_TYPES={h264:27,adts:15};_ElementaryStream=function ElementaryStream(){var self2=this,segmentHadPmt=false,video={data:[],size:0},audio={data:[],size:0},timedMetadata={data:[],size:0},programMapTable,parsePes=function parsePes2(payload,pes){var ptsDtsFlags;var startPrefix=payload[0]<<16|payload[1]<<8|payload[2];pes.data=new Uint8Array();if(startPrefix!==1){return;}pes.packetLength=6+(payload[4]<<8|payload[5]);pes.dataAlignmentIndicator=(payload[6]&4)!==0;ptsDtsFlags=payload[7];if(ptsDtsFlags&192){pes.pts=(payload[9]&14)<<27|(payload[10]&255)<<20|(payload[11]&254)<<12|(payload[12]&255)<<5|(payload[13]&254)>>>3;pes.pts*=4;pes.pts+=(payload[13]&6)>>>1;pes.dts=pes.pts;if(ptsDtsFlags&64){pes.dts=(payload[14]&14)<<27|(payload[15]&255)<<20|(payload[16]&254)<<12|(payload[17]&255)<<5|(payload[18]&254)>>>3;pes.dts*=4;pes.dts+=(payload[18]&6)>>>1;}}pes.data=payload.subarray(9+payload[8]);},flushStream=function flushStream2(stream2,type3,forceFlush){var packetData=new Uint8Array(stream2.size),event={type:type3},i=0,offset=0,packetFlushable=false,fragment;if(!stream2.data.length||stream2.size<9){return;}event.trackId=stream2.data[0].pid;for(i=0;i<stream2.data.length;i++){fragment=stream2.data[i];packetData.set(fragment.data,offset);offset+=fragment.data.byteLength;}parsePes(packetData,event);packetFlushable=type3==="video"||event.packetLength<=stream2.size;if(forceFlush||packetFlushable){stream2.size=0;stream2.data.length=0;}if(packetFlushable){self2.trigger("data",event);}};_ElementaryStream.prototype.init.call(this);this.push=function(data){({pat:function pat(){},pes:function pes(){var stream2,streamType;switch(data.streamType){case streamTypes.H264_STREAM_TYPE:stream2=video;streamType="video";break;case streamTypes.ADTS_STREAM_TYPE:stream2=audio;streamType="audio";break;case streamTypes.METADATA_STREAM_TYPE:stream2=timedMetadata;streamType="timed-metadata";break;default:return;}if(data.payloadUnitStartIndicator){flushStream(stream2,streamType,true);}stream2.data.push(data);stream2.size+=data.data.byteLength;},pmt:function pmt(){var event={type:"metadata",tracks:[]};programMapTable=data.programMapTable;if(programMapTable.video!==null){event.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+programMapTable.video,codec:"avc",type:"video"});}if(programMapTable.audio!==null){event.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+programMapTable.audio,codec:"adts",type:"audio"});}segmentHadPmt=true;self2.trigger("data",event);}})[data.type]();};this.reset=function(){video.size=0;video.data.length=0;audio.size=0;audio.data.length=0;this.trigger("reset");};this.flushStreams_=function(){flushStream(video,"video");flushStream(audio,"audio");flushStream(timedMetadata,"timed-metadata");};this.flush=function(){if(!segmentHadPmt&&programMapTable){var pmt={type:"metadata",tracks:[]};if(programMapTable.video!==null){pmt.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+programMapTable.video,codec:"avc",type:"video"});}if(programMapTable.audio!==null){pmt.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+programMapTable.audio,codec:"adts",type:"audio"});}self2.trigger("data",pmt);}segmentHadPmt=false;this.flushStreams_();this.trigger("done");};};_ElementaryStream.prototype=new stream();var m2ts={PAT_PID:0,MP2T_PACKET_LENGTH:MP2T_PACKET_LENGTH$1,TransportPacketStream:_TransportPacketStream,TransportParseStream:_TransportParseStream,ElementaryStream:_ElementaryStream,TimestampRolloverStream:TimestampRolloverStream,CaptionStream:captionStream.CaptionStream,Cea608Stream:captionStream.Cea608Stream,Cea708Stream:captionStream.Cea708Stream,MetadataStream:metadataStream};for(var type2 in streamTypes){if(streamTypes.hasOwnProperty(type2)){m2ts[type2]=streamTypes[type2];}}var m2ts_1=m2ts;var ONE_SECOND_IN_TS$2=clock.ONE_SECOND_IN_TS;var _AdtsStream;var ADTS_SAMPLING_FREQUENCIES$1=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];_AdtsStream=function AdtsStream(handlePartialSegments){var buffer,frameNum=0;_AdtsStream.prototype.init.call(this);this.skipWarn_=function(start2,end){this.trigger("log",{level:"warn",message:"adts skiping bytes "+start2+" to "+end+" in frame "+frameNum+" outside syncword"});};this.push=function(packet){var i=0,frameLength,protectionSkipBytes,oldBuffer,sampleCount,adtsFrameDuration;if(!handlePartialSegments){frameNum=0;}if(packet.type!=="audio"){return;}if(buffer&&buffer.length){oldBuffer=buffer;buffer=new Uint8Array(oldBuffer.byteLength+packet.data.byteLength);buffer.set(oldBuffer);buffer.set(packet.data,oldBuffer.byteLength);}else{buffer=packet.data;}var skip;while(i+7<buffer.length){if(buffer[i]!==255||(buffer[i+1]&246)!==240){if(typeof skip!=="number"){skip=i;}i++;continue;}if(typeof skip==="number"){this.skipWarn_(skip,i);skip=null;}protectionSkipBytes=(~buffer[i+1]&1)*2;frameLength=(buffer[i+3]&3)<<11|buffer[i+4]<<3|(buffer[i+5]&224)>>5;sampleCount=((buffer[i+6]&3)+1)*1024;adtsFrameDuration=sampleCount*ONE_SECOND_IN_TS$2/ADTS_SAMPLING_FREQUENCIES$1[(buffer[i+2]&60)>>>2];if(buffer.byteLength-i<frameLength){break;}this.trigger("data",{pts:packet.pts+frameNum*adtsFrameDuration,dts:packet.dts+frameNum*adtsFrameDuration,sampleCount:sampleCount,audioobjecttype:(buffer[i+2]>>>6&3)+1,channelcount:(buffer[i+2]&1)<<2|(buffer[i+3]&192)>>>6,samplerate:ADTS_SAMPLING_FREQUENCIES$1[(buffer[i+2]&60)>>>2],samplingfrequencyindex:(buffer[i+2]&60)>>>2,samplesize:16,data:buffer.subarray(i+7+protectionSkipBytes,i+frameLength)});frameNum++;i+=frameLength;}if(typeof skip==="number"){this.skipWarn_(skip,i);skip=null;}buffer=buffer.subarray(i);};this.flush=function(){frameNum=0;this.trigger("done");};this.reset=function(){buffer=void 0;this.trigger("reset");};this.endTimeline=function(){buffer=void 0;this.trigger("endedtimeline");};};_AdtsStream.prototype=new stream();var adts=_AdtsStream;var ExpGolomb;ExpGolomb=function ExpGolomb2(workingData){var workingBytesAvailable=workingData.byteLength,workingWord=0,workingBitsAvailable=0;this.length=function(){return 8*workingBytesAvailable;};this.bitsAvailable=function(){return 8*workingBytesAvailable+workingBitsAvailable;};this.loadWord=function(){var position=workingData.byteLength-workingBytesAvailable,workingBytes=new Uint8Array(4),availableBytes=Math.min(4,workingBytesAvailable);if(availableBytes===0){throw new Error("no bytes available");}workingBytes.set(workingData.subarray(position,position+availableBytes));workingWord=new DataView(workingBytes.buffer).getUint32(0);workingBitsAvailable=availableBytes*8;workingBytesAvailable-=availableBytes;};this.skipBits=function(count){var skipBytes;if(workingBitsAvailable>count){workingWord<<=count;workingBitsAvailable-=count;}else{count-=workingBitsAvailable;skipBytes=Math.floor(count/8);count-=skipBytes*8;workingBytesAvailable-=skipBytes;this.loadWord();workingWord<<=count;workingBitsAvailable-=count;}};this.readBits=function(size){var bits=Math.min(workingBitsAvailable,size),valu=workingWord>>>32-bits;workingBitsAvailable-=bits;if(workingBitsAvailable>0){workingWord<<=bits;}else if(workingBytesAvailable>0){this.loadWord();}bits=size-bits;if(bits>0){return valu<<bits|this.readBits(bits);}return valu;};this.skipLeadingZeros=function(){var leadingZeroCount;for(leadingZeroCount=0;leadingZeroCount<workingBitsAvailable;++leadingZeroCount){if((workingWord&2147483648>>>leadingZeroCount)!==0){workingWord<<=leadingZeroCount;workingBitsAvailable-=leadingZeroCount;return leadingZeroCount;}}this.loadWord();return leadingZeroCount+this.skipLeadingZeros();};this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros());};this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros());};this.readUnsignedExpGolomb=function(){var clz=this.skipLeadingZeros();return this.readBits(clz+1)-1;};this.readExpGolomb=function(){var valu=this.readUnsignedExpGolomb();if(1&valu){return 1+valu>>>1;}return-1*(valu>>>1);};this.readBoolean=function(){return this.readBits(1)===1;};this.readUnsignedByte=function(){return this.readBits(8);};this.loadWord();};var expGolomb=ExpGolomb;var _H264Stream,_NalByteStream;var PROFILES_WITH_OPTIONAL_SPS_DATA;_NalByteStream=function NalByteStream(){var syncPoint=0,i,buffer;_NalByteStream.prototype.init.call(this);this.push=function(data){var swapBuffer;if(!buffer){buffer=data.data;}else{swapBuffer=new Uint8Array(buffer.byteLength+data.data.byteLength);swapBuffer.set(buffer);swapBuffer.set(data.data,buffer.byteLength);buffer=swapBuffer;}var len=buffer.byteLength;for(;syncPoint<len-3;syncPoint++){if(buffer[syncPoint+2]===1){i=syncPoint+5;break;}}while(i<len){switch(buffer[i]){case 0:if(buffer[i-1]!==0){i+=2;break;}else if(buffer[i-2]!==0){i++;break;}if(syncPoint+3!==i-2){this.trigger("data",buffer.subarray(syncPoint+3,i-2));}do{i++;}while(buffer[i]!==1&&i<len);syncPoint=i-2;i+=3;break;case 1:if(buffer[i-1]!==0||buffer[i-2]!==0){i+=3;break;}this.trigger("data",buffer.subarray(syncPoint+3,i-2));syncPoint=i-2;i+=3;break;default:i+=3;break;}}buffer=buffer.subarray(syncPoint);i-=syncPoint;syncPoint=0;};this.reset=function(){buffer=null;syncPoint=0;this.trigger("reset");};this.flush=function(){if(buffer&&buffer.byteLength>3){this.trigger("data",buffer.subarray(syncPoint+3));}buffer=null;syncPoint=0;this.trigger("done");};this.endTimeline=function(){this.flush();this.trigger("endedtimeline");};};_NalByteStream.prototype=new stream();PROFILES_WITH_OPTIONAL_SPS_DATA={100:true,110:true,122:true,244:true,44:true,83:true,86:true,118:true,128:true,138:true,139:true,134:true};_H264Stream=function H264Stream2(){var nalByteStream=new _NalByteStream(),self2,trackId,currentPts,currentDts,discardEmulationPreventionBytes4,readSequenceParameterSet,skipScalingList;_H264Stream.prototype.init.call(this);self2=this;this.push=function(packet){if(packet.type!=="video"){return;}trackId=packet.trackId;currentPts=packet.pts;currentDts=packet.dts;nalByteStream.push(packet);};nalByteStream.on("data",function(data){var event={trackId:trackId,pts:currentPts,dts:currentDts,data:data,nalUnitTypeCode:data[0]&31};switch(event.nalUnitTypeCode){case 5:event.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:event.nalUnitType="sei_rbsp";event.escapedRBSP=discardEmulationPreventionBytes4(data.subarray(1));break;case 7:event.nalUnitType="seq_parameter_set_rbsp";event.escapedRBSP=discardEmulationPreventionBytes4(data.subarray(1));event.config=readSequenceParameterSet(event.escapedRBSP);break;case 8:event.nalUnitType="pic_parameter_set_rbsp";break;case 9:event.nalUnitType="access_unit_delimiter_rbsp";break;}self2.trigger("data",event);});nalByteStream.on("done",function(){self2.trigger("done");});nalByteStream.on("partialdone",function(){self2.trigger("partialdone");});nalByteStream.on("reset",function(){self2.trigger("reset");});nalByteStream.on("endedtimeline",function(){self2.trigger("endedtimeline");});this.flush=function(){nalByteStream.flush();};this.partialFlush=function(){nalByteStream.partialFlush();};this.reset=function(){nalByteStream.reset();};this.endTimeline=function(){nalByteStream.endTimeline();};skipScalingList=function skipScalingList2(count,expGolombDecoder){var lastScale=8,nextScale=8,j,deltaScale;for(j=0;j<count;j++){if(nextScale!==0){deltaScale=expGolombDecoder.readExpGolomb();nextScale=(lastScale+deltaScale+256)%256;}lastScale=nextScale===0?lastScale:nextScale;}};discardEmulationPreventionBytes4=function discardEmulationPreventionBytes5(data){var length=data.byteLength,emulationPreventionBytesPositions=[],i=1,newLength,newData;while(i<length-2){if(data[i]===0&&data[i+1]===0&&data[i+2]===3){emulationPreventionBytesPositions.push(i+2);i+=2;}else{i++;}}if(emulationPreventionBytesPositions.length===0){return data;}newLength=length-emulationPreventionBytesPositions.length;newData=new Uint8Array(newLength);var sourceIndex=0;for(i=0;i<newLength;sourceIndex++,i++){if(sourceIndex===emulationPreventionBytesPositions[0]){sourceIndex++;emulationPreventionBytesPositions.shift();}newData[i]=data[sourceIndex];}return newData;};readSequenceParameterSet=function readSequenceParameterSet2(data){var frameCropLeftOffset=0,frameCropRightOffset=0,frameCropTopOffset=0,frameCropBottomOffset=0,expGolombDecoder,profileIdc,levelIdc,profileCompatibility,chromaFormatIdc,picOrderCntType,numRefFramesInPicOrderCntCycle,picWidthInMbsMinus1,picHeightInMapUnitsMinus1,frameMbsOnlyFlag,scalingListCount,sarRatio=[1,1],aspectRatioIdc,i;expGolombDecoder=new expGolomb(data);profileIdc=expGolombDecoder.readUnsignedByte();profileCompatibility=expGolombDecoder.readUnsignedByte();levelIdc=expGolombDecoder.readUnsignedByte();expGolombDecoder.skipUnsignedExpGolomb();if(PROFILES_WITH_OPTIONAL_SPS_DATA[profileIdc]){chromaFormatIdc=expGolombDecoder.readUnsignedExpGolomb();if(chromaFormatIdc===3){expGolombDecoder.skipBits(1);}expGolombDecoder.skipUnsignedExpGolomb();expGolombDecoder.skipUnsignedExpGolomb();expGolombDecoder.skipBits(1);if(expGolombDecoder.readBoolean()){scalingListCount=chromaFormatIdc!==3?8:12;for(i=0;i<scalingListCount;i++){if(expGolombDecoder.readBoolean()){if(i<6){skipScalingList(16,expGolombDecoder);}else{skipScalingList(64,expGolombDecoder);}}}}}expGolombDecoder.skipUnsignedExpGolomb();picOrderCntType=expGolombDecoder.readUnsignedExpGolomb();if(picOrderCntType===0){expGolombDecoder.readUnsignedExpGolomb();}else if(picOrderCntType===1){expGolombDecoder.skipBits(1);expGolombDecoder.skipExpGolomb();expGolombDecoder.skipExpGolomb();numRefFramesInPicOrderCntCycle=expGolombDecoder.readUnsignedExpGolomb();for(i=0;i<numRefFramesInPicOrderCntCycle;i++){expGolombDecoder.skipExpGolomb();}}expGolombDecoder.skipUnsignedExpGolomb();expGolombDecoder.skipBits(1);picWidthInMbsMinus1=expGolombDecoder.readUnsignedExpGolomb();picHeightInMapUnitsMinus1=expGolombDecoder.readUnsignedExpGolomb();frameMbsOnlyFlag=expGolombDecoder.readBits(1);if(frameMbsOnlyFlag===0){expGolombDecoder.skipBits(1);}expGolombDecoder.skipBits(1);if(expGolombDecoder.readBoolean()){frameCropLeftOffset=expGolombDecoder.readUnsignedExpGolomb();frameCropRightOffset=expGolombDecoder.readUnsignedExpGolomb();frameCropTopOffset=expGolombDecoder.readUnsignedExpGolomb();frameCropBottomOffset=expGolombDecoder.readUnsignedExpGolomb();}if(expGolombDecoder.readBoolean()){if(expGolombDecoder.readBoolean()){aspectRatioIdc=expGolombDecoder.readUnsignedByte();switch(aspectRatioIdc){case 1:sarRatio=[1,1];break;case 2:sarRatio=[12,11];break;case 3:sarRatio=[10,11];break;case 4:sarRatio=[16,11];break;case 5:sarRatio=[40,33];break;case 6:sarRatio=[24,11];break;case 7:sarRatio=[20,11];break;case 8:sarRatio=[32,11];break;case 9:sarRatio=[80,33];break;case 10:sarRatio=[18,11];break;case 11:sarRatio=[15,11];break;case 12:sarRatio=[64,33];break;case 13:sarRatio=[160,99];break;case 14:sarRatio=[4,3];break;case 15:sarRatio=[3,2];break;case 16:sarRatio=[2,1];break;case 255:{sarRatio=[expGolombDecoder.readUnsignedByte()<<8|expGolombDecoder.readUnsignedByte(),expGolombDecoder.readUnsignedByte()<<8|expGolombDecoder.readUnsignedByte()];break;}}if(sarRatio){sarRatio[0]/sarRatio[1];}}}return{profileIdc:profileIdc,levelIdc:levelIdc,profileCompatibility:profileCompatibility,width:(picWidthInMbsMinus1+1)*16-frameCropLeftOffset*2-frameCropRightOffset*2,height:(2-frameMbsOnlyFlag)*(picHeightInMapUnitsMinus1+1)*16-frameCropTopOffset*2-frameCropBottomOffset*2,sarRatio:sarRatio};};};_H264Stream.prototype=new stream();var h2642={H264Stream:_H264Stream,NalByteStream:_NalByteStream};var ADTS_SAMPLING_FREQUENCIES=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];var parseId3TagSize=function parseId3TagSize2(header,byteIndex){var returnSize=header[byteIndex+6]<<21|header[byteIndex+7]<<14|header[byteIndex+8]<<7|header[byteIndex+9],flags=header[byteIndex+5],footerPresent=(flags&16)>>4;returnSize=returnSize>=0?returnSize:0;if(footerPresent){return returnSize+20;}return returnSize+10;};var getId3Offset3=function getId3Offset4(data,offset){if(data.length-offset<10||data[offset]!=="I".charCodeAt(0)||data[offset+1]!=="D".charCodeAt(0)||data[offset+2]!=="3".charCodeAt(0)){return offset;}offset+=parseId3TagSize(data,offset);return getId3Offset4(data,offset);};var isLikelyAacData$1=function isLikelyAacData2(data){var offset=getId3Offset3(data,0);return data.length>=offset+2&&(data[offset]&255)===255&&(data[offset+1]&240)===240&&(data[offset+1]&22)===16;};var parseSyncSafeInteger=function parseSyncSafeInteger2(data){return data[0]<<21|data[1]<<14|data[2]<<7|data[3];};var percentEncode=function percentEncode2(bytes,start2,end){var i,result="";for(i=start2;i<end;i++){result+="%"+("00"+bytes[i].toString(16)).slice(-2);}return result;};var parseIso88591=function parseIso885912(bytes,start2,end){return unescape(percentEncode(bytes,start2,end));};var parseAdtsSize=function parseAdtsSize2(header,byteIndex){var lowThree=(header[byteIndex+5]&224)>>5,middle=header[byteIndex+4]<<3,highTwo=header[byteIndex+3]&3<<11;return highTwo|middle|lowThree;};var parseType$2=function parseType2(header,byteIndex){if(header[byteIndex]==="I".charCodeAt(0)&&header[byteIndex+1]==="D".charCodeAt(0)&&header[byteIndex+2]==="3".charCodeAt(0)){return"timed-metadata";}else if(header[byteIndex]&true&&(header[byteIndex+1]&240)===240){return"audio";}return null;};var parseSampleRate=function parseSampleRate2(packet){var i=0;while(i+5<packet.length){if(packet[i]!==255||(packet[i+1]&246)!==240){i++;continue;}return ADTS_SAMPLING_FREQUENCIES[(packet[i+2]&60)>>>2];}return null;};var parseAacTimestamp=function parseAacTimestamp2(packet){var frameStart,frameSize,frame,frameHeader;frameStart=10;if(packet[5]&64){frameStart+=4;frameStart+=parseSyncSafeInteger(packet.subarray(10,14));}do{frameSize=parseSyncSafeInteger(packet.subarray(frameStart+4,frameStart+8));if(frameSize<1){return null;}frameHeader=String.fromCharCode(packet[frameStart],packet[frameStart+1],packet[frameStart+2],packet[frameStart+3]);if(frameHeader==="PRIV"){frame=packet.subarray(frameStart+10,frameStart+frameSize+10);for(var i=0;i<frame.byteLength;i++){if(frame[i]===0){var owner=parseIso88591(frame,0,i);if(owner==="com.apple.streaming.transportStreamTimestamp"){var d2=frame.subarray(i+1);var size=(d2[3]&1)<<30|d2[4]<<22|d2[5]<<14|d2[6]<<6|d2[7]>>>2;size*=4;size+=d2[7]&3;return size;}break;}}}frameStart+=10;frameStart+=frameSize;}while(frameStart<packet.byteLength);return null;};var utils2={isLikelyAacData:isLikelyAacData$1,parseId3TagSize:parseId3TagSize,parseAdtsSize:parseAdtsSize,parseType:parseType$2,parseSampleRate:parseSampleRate,parseAacTimestamp:parseAacTimestamp};var _AacStream;_AacStream=function AacStream(){var everything=new Uint8Array(),timeStamp=0;_AacStream.prototype.init.call(this);this.setTimestamp=function(timestamp){timeStamp=timestamp;};this.push=function(bytes){var frameSize=0,byteIndex=0,bytesLeft,chunk,packet,tempLength;if(everything.length){tempLength=everything.length;everything=new Uint8Array(bytes.byteLength+tempLength);everything.set(everything.subarray(0,tempLength));everything.set(bytes,tempLength);}else{everything=bytes;}while(everything.length-byteIndex>=3){if(everything[byteIndex]==="I".charCodeAt(0)&&everything[byteIndex+1]==="D".charCodeAt(0)&&everything[byteIndex+2]==="3".charCodeAt(0)){if(everything.length-byteIndex<10){break;}frameSize=utils2.parseId3TagSize(everything,byteIndex);if(byteIndex+frameSize>everything.length){break;}chunk={type:"timed-metadata",data:everything.subarray(byteIndex,byteIndex+frameSize)};this.trigger("data",chunk);byteIndex+=frameSize;continue;}else if((everything[byteIndex]&255)===255&&(everything[byteIndex+1]&240)===240){if(everything.length-byteIndex<7){break;}frameSize=utils2.parseAdtsSize(everything,byteIndex);if(byteIndex+frameSize>everything.length){break;}packet={type:"audio",data:everything.subarray(byteIndex,byteIndex+frameSize),pts:timeStamp,dts:timeStamp};this.trigger("data",packet);byteIndex+=frameSize;continue;}byteIndex++;}bytesLeft=everything.length-byteIndex;if(bytesLeft>0){everything=everything.subarray(byteIndex);}else{everything=new Uint8Array();}};this.reset=function(){everything=new Uint8Array();this.trigger("reset");};this.endTimeline=function(){everything=new Uint8Array();this.trigger("endedtimeline");};};_AacStream.prototype=new stream();var aac2=_AacStream;var AUDIO_PROPERTIES=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"];var audioProperties=AUDIO_PROPERTIES;var VIDEO_PROPERTIES=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"];var videoProperties=VIDEO_PROPERTIES;var H264Stream=h2642.H264Stream;var isLikelyAacData=utils2.isLikelyAacData;var ONE_SECOND_IN_TS$1=clock.ONE_SECOND_IN_TS;var _VideoSegmentStream,_AudioSegmentStream,_Transmuxer,_CoalesceStream;var retriggerForStream=function retriggerForStream2(key,event){event.stream=key;this.trigger("log",event);};var addPipelineLogRetriggers=function addPipelineLogRetriggers2(transmuxer2,pipeline){var keys3=Object.keys(pipeline);for(var i=0;i<keys3.length;i++){var key=keys3[i];if(key==="headOfPipeline"||!pipeline[key].on){continue;}pipeline[key].on("log",retriggerForStream.bind(transmuxer2,key));}};var arrayEquals=function arrayEquals2(a,b){var i;if(a.length!==b.length){return false;}for(i=0;i<a.length;i++){if(a[i]!==b[i]){return false;}}return true;};var generateSegmentTimingInfo=function generateSegmentTimingInfo2(baseMediaDecodeTime,startDts,startPts,endDts,endPts,prependedContentDuration){var ptsOffsetFromDts=startPts-startDts,decodeDuration=endDts-startDts,presentationDuration=endPts-startPts;return{start:{dts:baseMediaDecodeTime,pts:baseMediaDecodeTime+ptsOffsetFromDts},end:{dts:baseMediaDecodeTime+decodeDuration,pts:baseMediaDecodeTime+presentationDuration},prependedContentDuration:prependedContentDuration,baseMediaDecodeTime:baseMediaDecodeTime};};_AudioSegmentStream=function AudioSegmentStream(track,options){var adtsFrames=[],sequenceNumber,earliestAllowedDts=0,audioAppendStartTs=0,videoBaseMediaDecodeTime=Infinity;options=options||{};sequenceNumber=options.firstSequenceNumber||0;_AudioSegmentStream.prototype.init.call(this);this.push=function(data){trackDecodeInfo.collectDtsInfo(track,data);if(track){audioProperties.forEach(function(prop){track[prop]=data[prop];});}adtsFrames.push(data);};this.setEarliestDts=function(earliestDts){earliestAllowedDts=earliestDts;};this.setVideoBaseMediaDecodeTime=function(baseMediaDecodeTime){videoBaseMediaDecodeTime=baseMediaDecodeTime;};this.setAudioAppendStart=function(timestamp){audioAppendStartTs=timestamp;};this.flush=function(){var frames,moof2,mdat2,boxes,frameDuration,segmentDuration,videoClockCyclesOfSilencePrefixed;if(adtsFrames.length===0){this.trigger("done","AudioSegmentStream");return;}frames=audioFrameUtils.trimAdtsFramesByEarliestDts(adtsFrames,track,earliestAllowedDts);track.baseMediaDecodeTime=trackDecodeInfo.calculateTrackBaseMediaDecodeTime(track,options.keepOriginalTimestamps);videoClockCyclesOfSilencePrefixed=audioFrameUtils.prefixWithSilence(track,frames,audioAppendStartTs,videoBaseMediaDecodeTime);track.samples=audioFrameUtils.generateSampleTable(frames);mdat2=mp4Generator.mdat(audioFrameUtils.concatenateFrameData(frames));adtsFrames=[];moof2=mp4Generator.moof(sequenceNumber,[track]);boxes=new Uint8Array(moof2.byteLength+mdat2.byteLength);sequenceNumber++;boxes.set(moof2);boxes.set(mdat2,moof2.byteLength);trackDecodeInfo.clearDtsInfo(track);frameDuration=Math.ceil(ONE_SECOND_IN_TS$1*1024/track.samplerate);if(frames.length){segmentDuration=frames.length*frameDuration;this.trigger("segmentTimingInfo",generateSegmentTimingInfo(clock.audioTsToVideoTs(track.baseMediaDecodeTime,track.samplerate),frames[0].dts,frames[0].pts,frames[0].dts+segmentDuration,frames[0].pts+segmentDuration,videoClockCyclesOfSilencePrefixed||0));this.trigger("timingInfo",{start:frames[0].pts,end:frames[0].pts+segmentDuration});}this.trigger("data",{track:track,boxes:boxes});this.trigger("done","AudioSegmentStream");};this.reset=function(){trackDecodeInfo.clearDtsInfo(track);adtsFrames=[];this.trigger("reset");};};_AudioSegmentStream.prototype=new stream();_VideoSegmentStream=function VideoSegmentStream(track,options){var sequenceNumber,nalUnits=[],gopsToAlignWith=[],config3,pps;options=options||{};sequenceNumber=options.firstSequenceNumber||0;_VideoSegmentStream.prototype.init.call(this);delete track.minPTS;this.gopCache_=[];this.push=function(nalUnit){trackDecodeInfo.collectDtsInfo(track,nalUnit);if(nalUnit.nalUnitType==="seq_parameter_set_rbsp"&&!config3){config3=nalUnit.config;track.sps=[nalUnit.data];videoProperties.forEach(function(prop){track[prop]=config3[prop];},this);}if(nalUnit.nalUnitType==="pic_parameter_set_rbsp"&&!pps){pps=nalUnit.data;track.pps=[nalUnit.data];}nalUnits.push(nalUnit);};this.flush=function(){var frames,gopForFusion,gops,moof2,mdat2,boxes,prependedContentDuration=0,firstGop,lastGop;while(nalUnits.length){if(nalUnits[0].nalUnitType==="access_unit_delimiter_rbsp"){break;}nalUnits.shift();}if(nalUnits.length===0){this.resetStream_();this.trigger("done","VideoSegmentStream");return;}frames=frameUtils.groupNalsIntoFrames(nalUnits);gops=frameUtils.groupFramesIntoGops(frames);if(!gops[0][0].keyFrame){gopForFusion=this.getGopForFusion_(nalUnits[0],track);if(gopForFusion){prependedContentDuration=gopForFusion.duration;gops.unshift(gopForFusion);gops.byteLength+=gopForFusion.byteLength;gops.nalCount+=gopForFusion.nalCount;gops.pts=gopForFusion.pts;gops.dts=gopForFusion.dts;gops.duration+=gopForFusion.duration;}else{gops=frameUtils.extendFirstKeyFrame(gops);}}if(gopsToAlignWith.length){var alignedGops;if(options.alignGopsAtEnd){alignedGops=this.alignGopsAtEnd_(gops);}else{alignedGops=this.alignGopsAtStart_(gops);}if(!alignedGops){this.gopCache_.unshift({gop:gops.pop(),pps:track.pps,sps:track.sps});this.gopCache_.length=Math.min(6,this.gopCache_.length);nalUnits=[];this.resetStream_();this.trigger("done","VideoSegmentStream");return;}trackDecodeInfo.clearDtsInfo(track);gops=alignedGops;}trackDecodeInfo.collectDtsInfo(track,gops);track.samples=frameUtils.generateSampleTable(gops);mdat2=mp4Generator.mdat(frameUtils.concatenateNalData(gops));track.baseMediaDecodeTime=trackDecodeInfo.calculateTrackBaseMediaDecodeTime(track,options.keepOriginalTimestamps);this.trigger("processedGopsInfo",gops.map(function(gop){return{pts:gop.pts,dts:gop.dts,byteLength:gop.byteLength};}));firstGop=gops[0];lastGop=gops[gops.length-1];this.trigger("segmentTimingInfo",generateSegmentTimingInfo(track.baseMediaDecodeTime,firstGop.dts,firstGop.pts,lastGop.dts+lastGop.duration,lastGop.pts+lastGop.duration,prependedContentDuration));this.trigger("timingInfo",{start:gops[0].pts,end:gops[gops.length-1].pts+gops[gops.length-1].duration});this.gopCache_.unshift({gop:gops.pop(),pps:track.pps,sps:track.sps});this.gopCache_.length=Math.min(6,this.gopCache_.length);nalUnits=[];this.trigger("baseMediaDecodeTime",track.baseMediaDecodeTime);this.trigger("timelineStartInfo",track.timelineStartInfo);moof2=mp4Generator.moof(sequenceNumber,[track]);boxes=new Uint8Array(moof2.byteLength+mdat2.byteLength);sequenceNumber++;boxes.set(moof2);boxes.set(mdat2,moof2.byteLength);this.trigger("data",{track:track,boxes:boxes});this.resetStream_();this.trigger("done","VideoSegmentStream");};this.reset=function(){this.resetStream_();nalUnits=[];this.gopCache_.length=0;gopsToAlignWith.length=0;this.trigger("reset");};this.resetStream_=function(){trackDecodeInfo.clearDtsInfo(track);config3=void 0;pps=void 0;};this.getGopForFusion_=function(nalUnit){var halfSecond=45e3,allowableOverlap=1e4,nearestDistance=Infinity,dtsDistance,nearestGopObj,currentGop,currentGopObj,i;for(i=0;i<this.gopCache_.length;i++){currentGopObj=this.gopCache_[i];currentGop=currentGopObj.gop;if(!(track.pps&&arrayEquals(track.pps[0],currentGopObj.pps[0]))||!(track.sps&&arrayEquals(track.sps[0],currentGopObj.sps[0]))){continue;}if(currentGop.dts<track.timelineStartInfo.dts){continue;}dtsDistance=nalUnit.dts-currentGop.dts-currentGop.duration;if(dtsDistance>=-allowableOverlap&&dtsDistance<=halfSecond){if(!nearestGopObj||nearestDistance>dtsDistance){nearestGopObj=currentGopObj;nearestDistance=dtsDistance;}}}if(nearestGopObj){return nearestGopObj.gop;}return null;};this.alignGopsAtStart_=function(gops){var alignIndex,gopIndex,align,gop,byteLength,nalCount,duration5,alignedGops;byteLength=gops.byteLength;nalCount=gops.nalCount;duration5=gops.duration;alignIndex=gopIndex=0;while(alignIndex<gopsToAlignWith.length&&gopIndex<gops.length){align=gopsToAlignWith[alignIndex];gop=gops[gopIndex];if(align.pts===gop.pts){break;}if(gop.pts>align.pts){alignIndex++;continue;}gopIndex++;byteLength-=gop.byteLength;nalCount-=gop.nalCount;duration5-=gop.duration;}if(gopIndex===0){return gops;}if(gopIndex===gops.length){return null;}alignedGops=gops.slice(gopIndex);alignedGops.byteLength=byteLength;alignedGops.duration=duration5;alignedGops.nalCount=nalCount;alignedGops.pts=alignedGops[0].pts;alignedGops.dts=alignedGops[0].dts;return alignedGops;};this.alignGopsAtEnd_=function(gops){var alignIndex,gopIndex,align,gop,alignEndIndex,matchFound;alignIndex=gopsToAlignWith.length-1;gopIndex=gops.length-1;alignEndIndex=null;matchFound=false;while(alignIndex>=0&&gopIndex>=0){align=gopsToAlignWith[alignIndex];gop=gops[gopIndex];if(align.pts===gop.pts){matchFound=true;break;}if(align.pts>gop.pts){alignIndex--;continue;}if(alignIndex===gopsToAlignWith.length-1){alignEndIndex=gopIndex;}gopIndex--;}if(!matchFound&&alignEndIndex===null){return null;}var trimIndex;if(matchFound){trimIndex=gopIndex;}else{trimIndex=alignEndIndex;}if(trimIndex===0){return gops;}var alignedGops=gops.slice(trimIndex);var metadata=alignedGops.reduce(function(total,gop2){total.byteLength+=gop2.byteLength;total.duration+=gop2.duration;total.nalCount+=gop2.nalCount;return total;},{byteLength:0,duration:0,nalCount:0});alignedGops.byteLength=metadata.byteLength;alignedGops.duration=metadata.duration;alignedGops.nalCount=metadata.nalCount;alignedGops.pts=alignedGops[0].pts;alignedGops.dts=alignedGops[0].dts;return alignedGops;};this.alignGopsWith=function(newGopsToAlignWith){gopsToAlignWith=newGopsToAlignWith;};};_VideoSegmentStream.prototype=new stream();_CoalesceStream=function CoalesceStream(options,metadataStream2){this.numberOfTracks=0;this.metadataStream=metadataStream2;options=options||{};if(typeof options.remux!=="undefined"){this.remuxTracks=!!options.remux;}else{this.remuxTracks=true;}if(typeof options.keepOriginalTimestamps==="boolean"){this.keepOriginalTimestamps=options.keepOriginalTimestamps;}else{this.keepOriginalTimestamps=false;}this.pendingTracks=[];this.videoTrack=null;this.pendingBoxes=[];this.pendingCaptions=[];this.pendingMetadata=[];this.pendingBytes=0;this.emittedTracks=0;_CoalesceStream.prototype.init.call(this);this.push=function(output){if(output.text){return this.pendingCaptions.push(output);}if(output.frames){return this.pendingMetadata.push(output);}this.pendingTracks.push(output.track);this.pendingBytes+=output.boxes.byteLength;if(output.track.type==="video"){this.videoTrack=output.track;this.pendingBoxes.push(output.boxes);}if(output.track.type==="audio"){this.audioTrack=output.track;this.pendingBoxes.unshift(output.boxes);}};};_CoalesceStream.prototype=new stream();_CoalesceStream.prototype.flush=function(flushSource){var offset=0,event={captions:[],captionStreams:{},metadata:[],info:{}},caption,id3,initSegment,timelineStartPts=0,i;if(this.pendingTracks.length<this.numberOfTracks){if(flushSource!=="VideoSegmentStream"&&flushSource!=="AudioSegmentStream"){return;}else if(this.remuxTracks){return;}else if(this.pendingTracks.length===0){this.emittedTracks++;if(this.emittedTracks>=this.numberOfTracks){this.trigger("done");this.emittedTracks=0;}return;}}if(this.videoTrack){timelineStartPts=this.videoTrack.timelineStartInfo.pts;videoProperties.forEach(function(prop){event.info[prop]=this.videoTrack[prop];},this);}else if(this.audioTrack){timelineStartPts=this.audioTrack.timelineStartInfo.pts;audioProperties.forEach(function(prop){event.info[prop]=this.audioTrack[prop];},this);}if(this.videoTrack||this.audioTrack){if(this.pendingTracks.length===1){event.type=this.pendingTracks[0].type;}else{event.type="combined";}this.emittedTracks+=this.pendingTracks.length;initSegment=mp4Generator.initSegment(this.pendingTracks);event.initSegment=new Uint8Array(initSegment.byteLength);event.initSegment.set(initSegment);event.data=new Uint8Array(this.pendingBytes);for(i=0;i<this.pendingBoxes.length;i++){event.data.set(this.pendingBoxes[i],offset);offset+=this.pendingBoxes[i].byteLength;}for(i=0;i<this.pendingCaptions.length;i++){caption=this.pendingCaptions[i];caption.startTime=clock.metadataTsToSeconds(caption.startPts,timelineStartPts,this.keepOriginalTimestamps);caption.endTime=clock.metadataTsToSeconds(caption.endPts,timelineStartPts,this.keepOriginalTimestamps);event.captionStreams[caption.stream]=true;event.captions.push(caption);}for(i=0;i<this.pendingMetadata.length;i++){id3=this.pendingMetadata[i];id3.cueTime=clock.metadataTsToSeconds(id3.pts,timelineStartPts,this.keepOriginalTimestamps);event.metadata.push(id3);}event.metadata.dispatchType=this.metadataStream.dispatchType;this.pendingTracks.length=0;this.videoTrack=null;this.pendingBoxes.length=0;this.pendingCaptions.length=0;this.pendingBytes=0;this.pendingMetadata.length=0;this.trigger("data",event);for(i=0;i<event.captions.length;i++){caption=event.captions[i];this.trigger("caption",caption);}for(i=0;i<event.metadata.length;i++){id3=event.metadata[i];this.trigger("id3Frame",id3);}}if(this.emittedTracks>=this.numberOfTracks){this.trigger("done");this.emittedTracks=0;}};_CoalesceStream.prototype.setRemux=function(val){this.remuxTracks=val;};_Transmuxer=function Transmuxer(options){var self2=this,hasFlushed=true,videoTrack,audioTrack;_Transmuxer.prototype.init.call(this);options=options||{};this.baseMediaDecodeTime=options.baseMediaDecodeTime||0;this.transmuxPipeline_={};this.setupAacPipeline=function(){var pipeline={};this.transmuxPipeline_=pipeline;pipeline.type="aac";pipeline.metadataStream=new m2ts_1.MetadataStream();pipeline.aacStream=new aac2();pipeline.audioTimestampRolloverStream=new m2ts_1.TimestampRolloverStream("audio");pipeline.timedMetadataTimestampRolloverStream=new m2ts_1.TimestampRolloverStream("timed-metadata");pipeline.adtsStream=new adts();pipeline.coalesceStream=new _CoalesceStream(options,pipeline.metadataStream);pipeline.headOfPipeline=pipeline.aacStream;pipeline.aacStream.pipe(pipeline.audioTimestampRolloverStream).pipe(pipeline.adtsStream);pipeline.aacStream.pipe(pipeline.timedMetadataTimestampRolloverStream).pipe(pipeline.metadataStream).pipe(pipeline.coalesceStream);pipeline.metadataStream.on("timestamp",function(frame){pipeline.aacStream.setTimestamp(frame.timeStamp);});pipeline.aacStream.on("data",function(data){if(data.type!=="timed-metadata"&&data.type!=="audio"||pipeline.audioSegmentStream){return;}audioTrack=audioTrack||{timelineStartInfo:{baseMediaDecodeTime:self2.baseMediaDecodeTime},codec:"adts",type:"audio"};pipeline.coalesceStream.numberOfTracks++;pipeline.audioSegmentStream=new _AudioSegmentStream(audioTrack,options);pipeline.audioSegmentStream.on("log",self2.getLogTrigger_("audioSegmentStream"));pipeline.audioSegmentStream.on("timingInfo",self2.trigger.bind(self2,"audioTimingInfo"));pipeline.adtsStream.pipe(pipeline.audioSegmentStream).pipe(pipeline.coalesceStream);self2.trigger("trackinfo",{hasAudio:!!audioTrack,hasVideo:!!videoTrack});});pipeline.coalesceStream.on("data",this.trigger.bind(this,"data"));pipeline.coalesceStream.on("done",this.trigger.bind(this,"done"));addPipelineLogRetriggers(this,pipeline);};this.setupTsPipeline=function(){var pipeline={};this.transmuxPipeline_=pipeline;pipeline.type="ts";pipeline.metadataStream=new m2ts_1.MetadataStream();pipeline.packetStream=new m2ts_1.TransportPacketStream();pipeline.parseStream=new m2ts_1.TransportParseStream();pipeline.elementaryStream=new m2ts_1.ElementaryStream();pipeline.timestampRolloverStream=new m2ts_1.TimestampRolloverStream();pipeline.adtsStream=new adts();pipeline.h264Stream=new H264Stream();pipeline.captionStream=new m2ts_1.CaptionStream(options);pipeline.coalesceStream=new _CoalesceStream(options,pipeline.metadataStream);pipeline.headOfPipeline=pipeline.packetStream;pipeline.packetStream.pipe(pipeline.parseStream).pipe(pipeline.elementaryStream).pipe(pipeline.timestampRolloverStream);pipeline.timestampRolloverStream.pipe(pipeline.h264Stream);pipeline.timestampRolloverStream.pipe(pipeline.adtsStream);pipeline.timestampRolloverStream.pipe(pipeline.metadataStream).pipe(pipeline.coalesceStream);pipeline.h264Stream.pipe(pipeline.captionStream).pipe(pipeline.coalesceStream);pipeline.elementaryStream.on("data",function(data){var i;if(data.type==="metadata"){i=data.tracks.length;while(i--){if(!videoTrack&&data.tracks[i].type==="video"){videoTrack=data.tracks[i];videoTrack.timelineStartInfo.baseMediaDecodeTime=self2.baseMediaDecodeTime;}else if(!audioTrack&&data.tracks[i].type==="audio"){audioTrack=data.tracks[i];audioTrack.timelineStartInfo.baseMediaDecodeTime=self2.baseMediaDecodeTime;}}if(videoTrack&&!pipeline.videoSegmentStream){pipeline.coalesceStream.numberOfTracks++;pipeline.videoSegmentStream=new _VideoSegmentStream(videoTrack,options);pipeline.videoSegmentStream.on("log",self2.getLogTrigger_("videoSegmentStream"));pipeline.videoSegmentStream.on("timelineStartInfo",function(timelineStartInfo){if(audioTrack&&!options.keepOriginalTimestamps){audioTrack.timelineStartInfo=timelineStartInfo;pipeline.audioSegmentStream.setEarliestDts(timelineStartInfo.dts-self2.baseMediaDecodeTime);}});pipeline.videoSegmentStream.on("processedGopsInfo",self2.trigger.bind(self2,"gopInfo"));pipeline.videoSegmentStream.on("segmentTimingInfo",self2.trigger.bind(self2,"videoSegmentTimingInfo"));pipeline.videoSegmentStream.on("baseMediaDecodeTime",function(baseMediaDecodeTime){if(audioTrack){pipeline.audioSegmentStream.setVideoBaseMediaDecodeTime(baseMediaDecodeTime);}});pipeline.videoSegmentStream.on("timingInfo",self2.trigger.bind(self2,"videoTimingInfo"));pipeline.h264Stream.pipe(pipeline.videoSegmentStream).pipe(pipeline.coalesceStream);}if(audioTrack&&!pipeline.audioSegmentStream){pipeline.coalesceStream.numberOfTracks++;pipeline.audioSegmentStream=new _AudioSegmentStream(audioTrack,options);pipeline.audioSegmentStream.on("log",self2.getLogTrigger_("audioSegmentStream"));pipeline.audioSegmentStream.on("timingInfo",self2.trigger.bind(self2,"audioTimingInfo"));pipeline.audioSegmentStream.on("segmentTimingInfo",self2.trigger.bind(self2,"audioSegmentTimingInfo"));pipeline.adtsStream.pipe(pipeline.audioSegmentStream).pipe(pipeline.coalesceStream);}self2.trigger("trackinfo",{hasAudio:!!audioTrack,hasVideo:!!videoTrack});}});pipeline.coalesceStream.on("data",this.trigger.bind(this,"data"));pipeline.coalesceStream.on("id3Frame",function(id3Frame){id3Frame.dispatchType=pipeline.metadataStream.dispatchType;self2.trigger("id3Frame",id3Frame);});pipeline.coalesceStream.on("caption",this.trigger.bind(this,"caption"));pipeline.coalesceStream.on("done",this.trigger.bind(this,"done"));addPipelineLogRetriggers(this,pipeline);};this.setBaseMediaDecodeTime=function(baseMediaDecodeTime){var pipeline=this.transmuxPipeline_;if(!options.keepOriginalTimestamps){this.baseMediaDecodeTime=baseMediaDecodeTime;}if(audioTrack){audioTrack.timelineStartInfo.dts=void 0;audioTrack.timelineStartInfo.pts=void 0;trackDecodeInfo.clearDtsInfo(audioTrack);if(pipeline.audioTimestampRolloverStream){pipeline.audioTimestampRolloverStream.discontinuity();}}if(videoTrack){if(pipeline.videoSegmentStream){pipeline.videoSegmentStream.gopCache_=[];}videoTrack.timelineStartInfo.dts=void 0;videoTrack.timelineStartInfo.pts=void 0;trackDecodeInfo.clearDtsInfo(videoTrack);pipeline.captionStream.reset();}if(pipeline.timestampRolloverStream){pipeline.timestampRolloverStream.discontinuity();}};this.setAudioAppendStart=function(timestamp){if(audioTrack){this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(timestamp);}};this.setRemux=function(val){var pipeline=this.transmuxPipeline_;options.remux=val;if(pipeline&&pipeline.coalesceStream){pipeline.coalesceStream.setRemux(val);}};this.alignGopsWith=function(gopsToAlignWith){if(videoTrack&&this.transmuxPipeline_.videoSegmentStream){this.transmuxPipeline_.videoSegmentStream.alignGopsWith(gopsToAlignWith);}};this.getLogTrigger_=function(key){var self3=this;return function(event){event.stream=key;self3.trigger("log",event);};};this.push=function(data){if(hasFlushed){var isAac=isLikelyAacData(data);if(isAac&&this.transmuxPipeline_.type!=="aac"){this.setupAacPipeline();}else if(!isAac&&this.transmuxPipeline_.type!=="ts"){this.setupTsPipeline();}hasFlushed=false;}this.transmuxPipeline_.headOfPipeline.push(data);};this.flush=function(){hasFlushed=true;this.transmuxPipeline_.headOfPipeline.flush();};this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline();};this.reset=function(){if(this.transmuxPipeline_.headOfPipeline){this.transmuxPipeline_.headOfPipeline.reset();}};this.resetCaptions=function(){if(this.transmuxPipeline_.captionStream){this.transmuxPipeline_.captionStream.reset();}};};_Transmuxer.prototype=new stream();var transmuxer={Transmuxer:_Transmuxer,VideoSegmentStream:_VideoSegmentStream,AudioSegmentStream:_AudioSegmentStream,AUDIO_PROPERTIES:audioProperties,VIDEO_PROPERTIES:videoProperties,generateSegmentTimingInfo:generateSegmentTimingInfo};var toUnsigned$3=function toUnsigned2(value){return value>>>0;};var toHexString$1=function toHexString3(value){return("00"+value.toString(16)).slice(-2);};var bin={toUnsigned:toUnsigned$3,toHexString:toHexString$1};var parseType$1=function parseType2(buffer){var result="";result+=String.fromCharCode(buffer[0]);result+=String.fromCharCode(buffer[1]);result+=String.fromCharCode(buffer[2]);result+=String.fromCharCode(buffer[3]);return result;};var parseType_1=parseType$1;var toUnsigned$2=bin.toUnsigned;var findBox3=function findBox4(data,path){var results=[],i,size,type3,end,subresults;if(!path.length){return null;}for(i=0;i<data.byteLength;){size=toUnsigned$2(data[i]<<24|data[i+1]<<16|data[i+2]<<8|data[i+3]);type3=parseType_1(data.subarray(i+4,i+8));end=size>1?i+size:data.byteLength;if(type3===path[0]){if(path.length===1){results.push(data.subarray(i+8,end));}else{subresults=findBox4(data.subarray(i+8,end),path.slice(1));if(subresults.length){results=results.concat(subresults);}}}i=end;}return results;};var findBox_1=findBox3;var toUnsigned$1=bin.toUnsigned;var getUint64$1=numbers.getUint64;var tfdt=function tfdt2(data){var result={version:data[0],flags:new Uint8Array(data.subarray(1,4))};if(result.version===1){result.baseMediaDecodeTime=getUint64$1(data.subarray(4));}else{result.baseMediaDecodeTime=toUnsigned$1(data[4]<<24|data[5]<<16|data[6]<<8|data[7]);}return result;};var parseTfdt=tfdt;var parseSampleFlags=function parseSampleFlags2(flags){return{isLeading:(flags[0]&12)>>>2,dependsOn:flags[0]&3,isDependedOn:(flags[1]&192)>>>6,hasRedundancy:(flags[1]&48)>>>4,paddingValue:(flags[1]&14)>>>1,isNonSyncSample:flags[1]&1,degradationPriority:flags[2]<<8|flags[3]};};var parseSampleFlags_1=parseSampleFlags;var trun=function trun2(data){var result={version:data[0],flags:new Uint8Array(data.subarray(1,4)),samples:[]},view=new DataView(data.buffer,data.byteOffset,data.byteLength),dataOffsetPresent=result.flags[2]&1,firstSampleFlagsPresent=result.flags[2]&4,sampleDurationPresent=result.flags[1]&1,sampleSizePresent=result.flags[1]&2,sampleFlagsPresent=result.flags[1]&4,sampleCompositionTimeOffsetPresent=result.flags[1]&8,sampleCount=view.getUint32(4),offset=8,sample;if(dataOffsetPresent){result.dataOffset=view.getInt32(offset);offset+=4;}if(firstSampleFlagsPresent&&sampleCount){sample={flags:parseSampleFlags_1(data.subarray(offset,offset+4))};offset+=4;if(sampleDurationPresent){sample.duration=view.getUint32(offset);offset+=4;}if(sampleSizePresent){sample.size=view.getUint32(offset);offset+=4;}if(sampleCompositionTimeOffsetPresent){if(result.version===1){sample.compositionTimeOffset=view.getInt32(offset);}else{sample.compositionTimeOffset=view.getUint32(offset);}offset+=4;}result.samples.push(sample);sampleCount--;}while(sampleCount--){sample={};if(sampleDurationPresent){sample.duration=view.getUint32(offset);offset+=4;}if(sampleSizePresent){sample.size=view.getUint32(offset);offset+=4;}if(sampleFlagsPresent){sample.flags=parseSampleFlags_1(data.subarray(offset,offset+4));offset+=4;}if(sampleCompositionTimeOffsetPresent){if(result.version===1){sample.compositionTimeOffset=view.getInt32(offset);}else{sample.compositionTimeOffset=view.getUint32(offset);}offset+=4;}result.samples.push(sample);}return result;};var parseTrun=trun;var tfhd=function tfhd2(data){var view=new DataView(data.buffer,data.byteOffset,data.byteLength),result={version:data[0],flags:new Uint8Array(data.subarray(1,4)),trackId:view.getUint32(4)},baseDataOffsetPresent=result.flags[2]&1,sampleDescriptionIndexPresent=result.flags[2]&2,defaultSampleDurationPresent=result.flags[2]&8,defaultSampleSizePresent=result.flags[2]&16,defaultSampleFlagsPresent=result.flags[2]&32,durationIsEmpty=result.flags[0]&65536,defaultBaseIsMoof=result.flags[0]&131072,i;i=8;if(baseDataOffsetPresent){i+=4;result.baseDataOffset=view.getUint32(12);i+=4;}if(sampleDescriptionIndexPresent){result.sampleDescriptionIndex=view.getUint32(i);i+=4;}if(defaultSampleDurationPresent){result.defaultSampleDuration=view.getUint32(i);i+=4;}if(defaultSampleSizePresent){result.defaultSampleSize=view.getUint32(i);i+=4;}if(defaultSampleFlagsPresent){result.defaultSampleFlags=view.getUint32(i);}if(durationIsEmpty){result.durationIsEmpty=true;}if(!baseDataOffsetPresent&&defaultBaseIsMoof){result.baseDataOffsetIsMoof=true;}return result;};var parseTfhd=tfhd;var commonjsGlobal=typeof globalThis!=="undefined"?globalThis:typeof window!=="undefined"?window:typeof global!=="undefined"?global:typeof self!=="undefined"?self:{};var win;if(typeof window!=="undefined"){win=window;}else if(typeof commonjsGlobal!=="undefined"){win=commonjsGlobal;}else if(typeof self!=="undefined"){win=self;}else{win={};}var window_1=win;var discardEmulationPreventionBytes3=captionPacketParser.discardEmulationPreventionBytes;var CaptionStream=captionStream.CaptionStream;var mapToSample=function mapToSample2(offset,samples){var approximateOffset=offset;for(var i=0;i<samples.length;i++){var sample=samples[i];if(approximateOffset<sample.size){return sample;}approximateOffset-=sample.size;}return null;};var findSeiNals=function findSeiNals2(avcStream,samples,trackId){var avcView=new DataView(avcStream.buffer,avcStream.byteOffset,avcStream.byteLength),result={logs:[],seiNals:[]},seiNal,i,length,lastMatchedSample;for(i=0;i+4<avcStream.length;i+=length){length=avcView.getUint32(i);i+=4;if(length<=0){continue;}switch(avcStream[i]&31){case 6:var data=avcStream.subarray(i+1,i+1+length);var matchingSample=mapToSample(i,samples);seiNal={nalUnitType:"sei_rbsp",size:length,data:data,escapedRBSP:discardEmulationPreventionBytes3(data),trackId:trackId};if(matchingSample){seiNal.pts=matchingSample.pts;seiNal.dts=matchingSample.dts;lastMatchedSample=matchingSample;}else if(lastMatchedSample){seiNal.pts=lastMatchedSample.pts;seiNal.dts=lastMatchedSample.dts;}else{result.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+i+" for trackId "+trackId+". See mux.js#223."});break;}result.seiNals.push(seiNal);break;}}return result;};var parseSamples=function parseSamples2(truns,baseMediaDecodeTime,tfhd2){var currentDts=baseMediaDecodeTime;var defaultSampleDuration=tfhd2.defaultSampleDuration||0;var defaultSampleSize=tfhd2.defaultSampleSize||0;var trackId=tfhd2.trackId;var allSamples=[];truns.forEach(function(trun2){var trackRun=parseTrun(trun2);var samples=trackRun.samples;samples.forEach(function(sample){if(sample.duration===void 0){sample.duration=defaultSampleDuration;}if(sample.size===void 0){sample.size=defaultSampleSize;}sample.trackId=trackId;sample.dts=currentDts;if(sample.compositionTimeOffset===void 0){sample.compositionTimeOffset=0;}if(typeof currentDts==="bigint"){sample.pts=currentDts+window_1.BigInt(sample.compositionTimeOffset);currentDts+=window_1.BigInt(sample.duration);}else{sample.pts=currentDts+sample.compositionTimeOffset;currentDts+=sample.duration;}});allSamples=allSamples.concat(samples);});return allSamples;};var parseCaptionNals=function parseCaptionNals2(segment,videoTrackId){var trafs=findBox_1(segment,["moof","traf"]);var mdats=findBox_1(segment,["mdat"]);var captionNals={};var mdatTrafPairs=[];mdats.forEach(function(mdat2,index){var matchingTraf=trafs[index];mdatTrafPairs.push({mdat:mdat2,traf:matchingTraf});});mdatTrafPairs.forEach(function(pair){var mdat2=pair.mdat;var traf2=pair.traf;var tfhd2=findBox_1(traf2,["tfhd"]);var headerInfo=parseTfhd(tfhd2[0]);var trackId=headerInfo.trackId;var tfdt2=findBox_1(traf2,["tfdt"]);var baseMediaDecodeTime=tfdt2.length>0?parseTfdt(tfdt2[0]).baseMediaDecodeTime:0;var truns=findBox_1(traf2,["trun"]);var samples;var result;if(videoTrackId===trackId&&truns.length>0){samples=parseSamples(truns,baseMediaDecodeTime,headerInfo);result=findSeiNals(mdat2,samples,trackId);if(!captionNals[trackId]){captionNals[trackId]={seiNals:[],logs:[]};}captionNals[trackId].seiNals=captionNals[trackId].seiNals.concat(result.seiNals);captionNals[trackId].logs=captionNals[trackId].logs.concat(result.logs);}});return captionNals;};var parseEmbeddedCaptions=function parseEmbeddedCaptions2(segment,trackId,timescale3){var captionNals;if(trackId===null){return null;}captionNals=parseCaptionNals(segment,trackId);var trackNals=captionNals[trackId]||{};return{seiNals:trackNals.seiNals,logs:trackNals.logs,timescale:timescale3};};var CaptionParser=function CaptionParser2(){var isInitialized=false;var captionStream2;var segmentCache;var trackId;var timescale3;var parsedCaptions;var parsingPartial;this.isInitialized=function(){return isInitialized;};this.init=function(options){captionStream2=new CaptionStream();isInitialized=true;parsingPartial=options?options.isPartial:false;captionStream2.on("data",function(event){event.startTime=event.startPts/timescale3;event.endTime=event.endPts/timescale3;parsedCaptions.captions.push(event);parsedCaptions.captionStreams[event.stream]=true;});captionStream2.on("log",function(log2){parsedCaptions.logs.push(log2);});};this.isNewInit=function(videoTrackIds,timescales){if(videoTrackIds&&videoTrackIds.length===0||timescales&&_typeof(timescales)==="object"&&Object.keys(timescales).length===0){return false;}return trackId!==videoTrackIds[0]||timescale3!==timescales[trackId];};this.parse=function(segment,videoTrackIds,timescales){var parsedData;if(!this.isInitialized()){return null;}else if(!videoTrackIds||!timescales){return null;}else if(this.isNewInit(videoTrackIds,timescales)){trackId=videoTrackIds[0];timescale3=timescales[trackId];}else if(trackId===null||!timescale3){segmentCache.push(segment);return null;}while(segmentCache.length>0){var cachedSegment=segmentCache.shift();this.parse(cachedSegment,videoTrackIds,timescales);}parsedData=parseEmbeddedCaptions(segment,trackId,timescale3);if(parsedData&&parsedData.logs){parsedCaptions.logs=parsedCaptions.logs.concat(parsedData.logs);}if(parsedData===null||!parsedData.seiNals){if(parsedCaptions.logs.length){return{logs:parsedCaptions.logs,captions:[],captionStreams:[]};}return null;}this.pushNals(parsedData.seiNals);this.flushStream();return parsedCaptions;};this.pushNals=function(nals){if(!this.isInitialized()||!nals||nals.length===0){return null;}nals.forEach(function(nal){captionStream2.push(nal);});};this.flushStream=function(){if(!this.isInitialized()){return null;}if(!parsingPartial){captionStream2.flush();}else{captionStream2.partialFlush();}};this.clearParsedCaptions=function(){parsedCaptions.captions=[];parsedCaptions.captionStreams={};parsedCaptions.logs=[];};this.resetCaptionStream=function(){if(!this.isInitialized()){return null;}captionStream2.reset();};this.clearAllCaptions=function(){this.clearParsedCaptions();this.resetCaptionStream();};this.reset=function(){segmentCache=[];trackId=null;timescale3=null;if(!parsedCaptions){parsedCaptions={captions:[],captionStreams:{},logs:[]};}else{this.clearParsedCaptions();}this.resetCaptionStream();};this.reset();};var captionParser=CaptionParser;var toUnsigned=bin.toUnsigned;var toHexString2=bin.toHexString;var getUint64=numbers.getUint64;var timescale2,startTime,compositionStartTime,getVideoTrackIds,getTracks,getTimescaleFromMediaHeader;timescale2=function timescale3(init5){var result={},traks=findBox_1(init5,["moov","trak"]);return traks.reduce(function(result2,trak2){var tkhd2,version2,index,id,mdhd2;tkhd2=findBox_1(trak2,["tkhd"])[0];if(!tkhd2){return null;}version2=tkhd2[0];index=version2===0?12:20;id=toUnsigned(tkhd2[index]<<24|tkhd2[index+1]<<16|tkhd2[index+2]<<8|tkhd2[index+3]);mdhd2=findBox_1(trak2,["mdia","mdhd"])[0];if(!mdhd2){return null;}version2=mdhd2[0];index=version2===0?12:20;result2[id]=toUnsigned(mdhd2[index]<<24|mdhd2[index+1]<<16|mdhd2[index+2]<<8|mdhd2[index+3]);return result2;},result);};startTime=function startTime2(timescale3,fragment){var trafs;trafs=findBox_1(fragment,["moof","traf"]);var lowestTime=trafs.reduce(function(acc,traf2){var tfhd2=findBox_1(traf2,["tfhd"])[0];var id=toUnsigned(tfhd2[4]<<24|tfhd2[5]<<16|tfhd2[6]<<8|tfhd2[7]);var scale=timescale3[id]||9e4;var tfdt2=findBox_1(traf2,["tfdt"])[0];var dv=new DataView(tfdt2.buffer,tfdt2.byteOffset,tfdt2.byteLength);var baseTime;if(tfdt2[0]===1){baseTime=getUint64(tfdt2.subarray(4,12));}else{baseTime=dv.getUint32(4);}var seconds;if(typeof baseTime==="bigint"){seconds=baseTime/window_1.BigInt(scale);}else if(typeof baseTime==="number"&&!isNaN(baseTime)){seconds=baseTime/scale;}if(seconds<Number.MAX_SAFE_INTEGER){seconds=Number(seconds);}if(seconds<acc){acc=seconds;}return acc;},Infinity);return typeof lowestTime==="bigint"||isFinite(lowestTime)?lowestTime:0;};compositionStartTime=function compositionStartTime2(timescales,fragment){var trafBoxes=findBox_1(fragment,["moof","traf"]);var baseMediaDecodeTime=0;var compositionTimeOffset=0;var trackId;if(trafBoxes&&trafBoxes.length){var tfhd2=findBox_1(trafBoxes[0],["tfhd"])[0];var trun2=findBox_1(trafBoxes[0],["trun"])[0];var tfdt2=findBox_1(trafBoxes[0],["tfdt"])[0];if(tfhd2){var parsedTfhd=parseTfhd(tfhd2);trackId=parsedTfhd.trackId;}if(tfdt2){var parsedTfdt=parseTfdt(tfdt2);baseMediaDecodeTime=parsedTfdt.baseMediaDecodeTime;}if(trun2){var parsedTrun=parseTrun(trun2);if(parsedTrun.samples&&parsedTrun.samples.length){compositionTimeOffset=parsedTrun.samples[0].compositionTimeOffset||0;}}}var timescale3=timescales[trackId]||9e4;if(typeof baseMediaDecodeTime==="bigint"){compositionTimeOffset=window_1.BigInt(compositionTimeOffset);timescale3=window_1.BigInt(timescale3);}var result=(baseMediaDecodeTime+compositionTimeOffset)/timescale3;if(typeof result==="bigint"&&result<Number.MAX_SAFE_INTEGER){result=Number(result);}return result;};getVideoTrackIds=function getVideoTrackIds2(init5){var traks=findBox_1(init5,["moov","trak"]);var videoTrackIds=[];traks.forEach(function(trak2){var hdlrs=findBox_1(trak2,["mdia","hdlr"]);var tkhds=findBox_1(trak2,["tkhd"]);hdlrs.forEach(function(hdlr2,index){var handlerType=parseType_1(hdlr2.subarray(8,12));var tkhd2=tkhds[index];var view;var version2;var trackId;if(handlerType==="vide"){view=new DataView(tkhd2.buffer,tkhd2.byteOffset,tkhd2.byteLength);version2=view.getUint8(0);trackId=version2===0?view.getUint32(12):view.getUint32(20);videoTrackIds.push(trackId);}});});return videoTrackIds;};getTimescaleFromMediaHeader=function getTimescaleFromMediaHeader2(mdhd2){var version2=mdhd2[0];var index=version2===0?12:20;return toUnsigned(mdhd2[index]<<24|mdhd2[index+1]<<16|mdhd2[index+2]<<8|mdhd2[index+3]);};getTracks=function getTracks2(init5){var traks=findBox_1(init5,["moov","trak"]);var tracks=[];traks.forEach(function(trak2){var track={};var tkhd2=findBox_1(trak2,["tkhd"])[0];var view,tkhdVersion;if(tkhd2){view=new DataView(tkhd2.buffer,tkhd2.byteOffset,tkhd2.byteLength);tkhdVersion=view.getUint8(0);track.id=tkhdVersion===0?view.getUint32(12):view.getUint32(20);}var hdlr2=findBox_1(trak2,["mdia","hdlr"])[0];if(hdlr2){var type3=parseType_1(hdlr2.subarray(8,12));if(type3==="vide"){track.type="video";}else if(type3==="soun"){track.type="audio";}else{track.type=type3;}}var stsd2=findBox_1(trak2,["mdia","minf","stbl","stsd"])[0];if(stsd2){var sampleDescriptions=stsd2.subarray(8);track.codec=parseType_1(sampleDescriptions.subarray(4,8));var codecBox=findBox_1(sampleDescriptions,[track.codec])[0];var codecConfig,codecConfigType;if(codecBox){if(/^[asm]vc[1-9]$/i.test(track.codec)){codecConfig=codecBox.subarray(78);codecConfigType=parseType_1(codecConfig.subarray(4,8));if(codecConfigType==="avcC"&&codecConfig.length>11){track.codec+=".";track.codec+=toHexString2(codecConfig[9]);track.codec+=toHexString2(codecConfig[10]);track.codec+=toHexString2(codecConfig[11]);}else{track.codec="avc1.4d400d";}}else if(/^mp4[a,v]$/i.test(track.codec)){codecConfig=codecBox.subarray(28);codecConfigType=parseType_1(codecConfig.subarray(4,8));if(codecConfigType==="esds"&&codecConfig.length>20&&codecConfig[19]!==0){track.codec+="."+toHexString2(codecConfig[19]);track.codec+="."+toHexString2(codecConfig[20]>>>2&63).replace(/^0/,"");}else{track.codec="mp4a.40.2";}}else{track.codec=track.codec.toLowerCase();}}}var mdhd2=findBox_1(trak2,["mdia","mdhd"])[0];if(mdhd2){track.timescale=getTimescaleFromMediaHeader(mdhd2);}tracks.push(track);});return tracks;};var probe$2={findBox:findBox_1,parseType:parseType_1,timescale:timescale2,startTime:startTime,compositionStartTime:compositionStartTime,videoTrackIds:getVideoTrackIds,tracks:getTracks,getTimescaleFromMediaHeader:getTimescaleFromMediaHeader};var parsePid=function parsePid2(packet){var pid=packet[1]&31;pid<<=8;pid|=packet[2];return pid;};var parsePayloadUnitStartIndicator=function parsePayloadUnitStartIndicator2(packet){return!!(packet[1]&64);};var parseAdaptionField=function parseAdaptionField2(packet){var offset=0;if((packet[3]&48)>>>4>1){offset+=packet[4]+1;}return offset;};var parseType=function parseType2(packet,pmtPid){var pid=parsePid(packet);if(pid===0){return"pat";}else if(pid===pmtPid){return"pmt";}else if(pmtPid){return"pes";}return null;};var parsePat=function parsePat2(packet){var pusi=parsePayloadUnitStartIndicator(packet);var offset=4+parseAdaptionField(packet);if(pusi){offset+=packet[offset]+1;}return(packet[offset+10]&31)<<8|packet[offset+11];};var parsePmt=function parsePmt2(packet){var programMapTable={};var pusi=parsePayloadUnitStartIndicator(packet);var payloadOffset=4+parseAdaptionField(packet);if(pusi){payloadOffset+=packet[payloadOffset]+1;}if(!(packet[payloadOffset+5]&1)){return;}var sectionLength,tableEnd,programInfoLength;sectionLength=(packet[payloadOffset+1]&15)<<8|packet[payloadOffset+2];tableEnd=3+sectionLength-4;programInfoLength=(packet[payloadOffset+10]&15)<<8|packet[payloadOffset+11];var offset=12+programInfoLength;while(offset<tableEnd){var i=payloadOffset+offset;programMapTable[(packet[i+1]&31)<<8|packet[i+2]]=packet[i];offset+=((packet[i+3]&15)<<8|packet[i+4])+5;}return programMapTable;};var parsePesType=function parsePesType2(packet,programMapTable){var pid=parsePid(packet);var type3=programMapTable[pid];switch(type3){case streamTypes.H264_STREAM_TYPE:return"video";case streamTypes.ADTS_STREAM_TYPE:return"audio";case streamTypes.METADATA_STREAM_TYPE:return"timed-metadata";default:return null;}};var parsePesTime=function parsePesTime2(packet){var pusi=parsePayloadUnitStartIndicator(packet);if(!pusi){return null;}var offset=4+parseAdaptionField(packet);if(offset>=packet.byteLength){return null;}var pes=null;var ptsDtsFlags;ptsDtsFlags=packet[offset+7];if(ptsDtsFlags&192){pes={};pes.pts=(packet[offset+9]&14)<<27|(packet[offset+10]&255)<<20|(packet[offset+11]&254)<<12|(packet[offset+12]&255)<<5|(packet[offset+13]&254)>>>3;pes.pts*=4;pes.pts+=(packet[offset+13]&6)>>>1;pes.dts=pes.pts;if(ptsDtsFlags&64){pes.dts=(packet[offset+14]&14)<<27|(packet[offset+15]&255)<<20|(packet[offset+16]&254)<<12|(packet[offset+17]&255)<<5|(packet[offset+18]&254)>>>3;pes.dts*=4;pes.dts+=(packet[offset+18]&6)>>>1;}}return pes;};var parseNalUnitType=function parseNalUnitType2(type3){switch(type3){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null;}};var videoPacketContainsKeyFrame=function videoPacketContainsKeyFrame2(packet){var offset=4+parseAdaptionField(packet);var frameBuffer=packet.subarray(offset);var frameI=0;var frameSyncPoint=0;var foundKeyFrame=false;var nalType;for(;frameSyncPoint<frameBuffer.byteLength-3;frameSyncPoint++){if(frameBuffer[frameSyncPoint+2]===1){frameI=frameSyncPoint+5;break;}}while(frameI<frameBuffer.byteLength){switch(frameBuffer[frameI]){case 0:if(frameBuffer[frameI-1]!==0){frameI+=2;break;}else if(frameBuffer[frameI-2]!==0){frameI++;break;}if(frameSyncPoint+3!==frameI-2){nalType=parseNalUnitType(frameBuffer[frameSyncPoint+3]&31);if(nalType==="slice_layer_without_partitioning_rbsp_idr"){foundKeyFrame=true;}}do{frameI++;}while(frameBuffer[frameI]!==1&&frameI<frameBuffer.length);frameSyncPoint=frameI-2;frameI+=3;break;case 1:if(frameBuffer[frameI-1]!==0||frameBuffer[frameI-2]!==0){frameI+=3;break;}nalType=parseNalUnitType(frameBuffer[frameSyncPoint+3]&31);if(nalType==="slice_layer_without_partitioning_rbsp_idr"){foundKeyFrame=true;}frameSyncPoint=frameI-2;frameI+=3;break;default:frameI+=3;break;}}frameBuffer=frameBuffer.subarray(frameSyncPoint);frameI-=frameSyncPoint;frameSyncPoint=0;if(frameBuffer&&frameBuffer.byteLength>3){nalType=parseNalUnitType(frameBuffer[frameSyncPoint+3]&31);if(nalType==="slice_layer_without_partitioning_rbsp_idr"){foundKeyFrame=true;}}return foundKeyFrame;};var probe$1={parseType:parseType,parsePat:parsePat,parsePmt:parsePmt,parsePayloadUnitStartIndicator:parsePayloadUnitStartIndicator,parsePesType:parsePesType,parsePesTime:parsePesTime,videoPacketContainsKeyFrame:videoPacketContainsKeyFrame};var handleRollover=timestampRolloverStream.handleRollover;var probe={};probe.ts=probe$1;probe.aac=utils2;var ONE_SECOND_IN_TS2=clock.ONE_SECOND_IN_TS;var MP2T_PACKET_LENGTH=188,SYNC_BYTE=71;var parsePsi_=function parsePsi_2(bytes,pmt){var startIndex=0,endIndex=MP2T_PACKET_LENGTH,packet,type3;while(endIndex<bytes.byteLength){if(bytes[startIndex]===SYNC_BYTE&&bytes[endIndex]===SYNC_BYTE){packet=bytes.subarray(startIndex,endIndex);type3=probe.ts.parseType(packet,pmt.pid);switch(type3){case"pat":pmt.pid=probe.ts.parsePat(packet);break;case"pmt":var table=probe.ts.parsePmt(packet);pmt.table=pmt.table||{};Object.keys(table).forEach(function(key){pmt.table[key]=table[key];});break;}startIndex+=MP2T_PACKET_LENGTH;endIndex+=MP2T_PACKET_LENGTH;continue;}startIndex++;endIndex++;}};var parseAudioPes_=function parseAudioPes_2(bytes,pmt,result){var startIndex=0,endIndex=MP2T_PACKET_LENGTH,packet,type3,pesType,pusi,parsed;var endLoop=false;while(endIndex<=bytes.byteLength){if(bytes[startIndex]===SYNC_BYTE&&(bytes[endIndex]===SYNC_BYTE||endIndex===bytes.byteLength)){packet=bytes.subarray(startIndex,endIndex);type3=probe.ts.parseType(packet,pmt.pid);switch(type3){case"pes":pesType=probe.ts.parsePesType(packet,pmt.table);pusi=probe.ts.parsePayloadUnitStartIndicator(packet);if(pesType==="audio"&&pusi){parsed=probe.ts.parsePesTime(packet);if(parsed){parsed.type="audio";result.audio.push(parsed);endLoop=true;}}break;}if(endLoop){break;}startIndex+=MP2T_PACKET_LENGTH;endIndex+=MP2T_PACKET_LENGTH;continue;}startIndex++;endIndex++;}endIndex=bytes.byteLength;startIndex=endIndex-MP2T_PACKET_LENGTH;endLoop=false;while(startIndex>=0){if(bytes[startIndex]===SYNC_BYTE&&(bytes[endIndex]===SYNC_BYTE||endIndex===bytes.byteLength)){packet=bytes.subarray(startIndex,endIndex);type3=probe.ts.parseType(packet,pmt.pid);switch(type3){case"pes":pesType=probe.ts.parsePesType(packet,pmt.table);pusi=probe.ts.parsePayloadUnitStartIndicator(packet);if(pesType==="audio"&&pusi){parsed=probe.ts.parsePesTime(packet);if(parsed){parsed.type="audio";result.audio.push(parsed);endLoop=true;}}break;}if(endLoop){break;}startIndex-=MP2T_PACKET_LENGTH;endIndex-=MP2T_PACKET_LENGTH;continue;}startIndex--;endIndex--;}};var parseVideoPes_=function parseVideoPes_2(bytes,pmt,result){var startIndex=0,endIndex=MP2T_PACKET_LENGTH,packet,type3,pesType,pusi,parsed,frame,i,pes;var endLoop=false;var currentFrame={data:[],size:0};while(endIndex<bytes.byteLength){if(bytes[startIndex]===SYNC_BYTE&&bytes[endIndex]===SYNC_BYTE){packet=bytes.subarray(startIndex,endIndex);type3=probe.ts.parseType(packet,pmt.pid);switch(type3){case"pes":pesType=probe.ts.parsePesType(packet,pmt.table);pusi=probe.ts.parsePayloadUnitStartIndicator(packet);if(pesType==="video"){if(pusi&&!endLoop){parsed=probe.ts.parsePesTime(packet);if(parsed){parsed.type="video";result.video.push(parsed);endLoop=true;}}if(!result.firstKeyFrame){if(pusi){if(currentFrame.size!==0){frame=new Uint8Array(currentFrame.size);i=0;while(currentFrame.data.length){pes=currentFrame.data.shift();frame.set(pes,i);i+=pes.byteLength;}if(probe.ts.videoPacketContainsKeyFrame(frame)){var firstKeyFrame=probe.ts.parsePesTime(frame);if(firstKeyFrame){result.firstKeyFrame=firstKeyFrame;result.firstKeyFrame.type="video";}else{console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.");}}currentFrame.size=0;}}currentFrame.data.push(packet);currentFrame.size+=packet.byteLength;}}break;}if(endLoop&&result.firstKeyFrame){break;}startIndex+=MP2T_PACKET_LENGTH;endIndex+=MP2T_PACKET_LENGTH;continue;}startIndex++;endIndex++;}endIndex=bytes.byteLength;startIndex=endIndex-MP2T_PACKET_LENGTH;endLoop=false;while(startIndex>=0){if(bytes[startIndex]===SYNC_BYTE&&bytes[endIndex]===SYNC_BYTE){packet=bytes.subarray(startIndex,endIndex);type3=probe.ts.parseType(packet,pmt.pid);switch(type3){case"pes":pesType=probe.ts.parsePesType(packet,pmt.table);pusi=probe.ts.parsePayloadUnitStartIndicator(packet);if(pesType==="video"&&pusi){parsed=probe.ts.parsePesTime(packet);if(parsed){parsed.type="video";result.video.push(parsed);endLoop=true;}}break;}if(endLoop){break;}startIndex-=MP2T_PACKET_LENGTH;endIndex-=MP2T_PACKET_LENGTH;continue;}startIndex--;endIndex--;}};var adjustTimestamp_=function adjustTimestamp_2(segmentInfo,baseTimestamp){if(segmentInfo.audio&&segmentInfo.audio.length){var audioBaseTimestamp=baseTimestamp;if(typeof audioBaseTimestamp==="undefined"||isNaN(audioBaseTimestamp)){audioBaseTimestamp=segmentInfo.audio[0].dts;}segmentInfo.audio.forEach(function(info){info.dts=handleRollover(info.dts,audioBaseTimestamp);info.pts=handleRollover(info.pts,audioBaseTimestamp);info.dtsTime=info.dts/ONE_SECOND_IN_TS2;info.ptsTime=info.pts/ONE_SECOND_IN_TS2;});}if(segmentInfo.video&&segmentInfo.video.length){var videoBaseTimestamp=baseTimestamp;if(typeof videoBaseTimestamp==="undefined"||isNaN(videoBaseTimestamp)){videoBaseTimestamp=segmentInfo.video[0].dts;}segmentInfo.video.forEach(function(info){info.dts=handleRollover(info.dts,videoBaseTimestamp);info.pts=handleRollover(info.pts,videoBaseTimestamp);info.dtsTime=info.dts/ONE_SECOND_IN_TS2;info.ptsTime=info.pts/ONE_SECOND_IN_TS2;});if(segmentInfo.firstKeyFrame){var frame=segmentInfo.firstKeyFrame;frame.dts=handleRollover(frame.dts,videoBaseTimestamp);frame.pts=handleRollover(frame.pts,videoBaseTimestamp);frame.dtsTime=frame.dts/ONE_SECOND_IN_TS2;frame.ptsTime=frame.pts/ONE_SECOND_IN_TS2;}}};var inspectAac_=function inspectAac_2(bytes){var endLoop=false,audioCount=0,sampleRate=null,timestamp=null,frameSize=0,byteIndex=0,packet;while(bytes.length-byteIndex>=3){var type3=probe.aac.parseType(bytes,byteIndex);switch(type3){case"timed-metadata":if(bytes.length-byteIndex<10){endLoop=true;break;}frameSize=probe.aac.parseId3TagSize(bytes,byteIndex);if(frameSize>bytes.length){endLoop=true;break;}if(timestamp===null){packet=bytes.subarray(byteIndex,byteIndex+frameSize);timestamp=probe.aac.parseAacTimestamp(packet);}byteIndex+=frameSize;break;case"audio":if(bytes.length-byteIndex<7){endLoop=true;break;}frameSize=probe.aac.parseAdtsSize(bytes,byteIndex);if(frameSize>bytes.length){endLoop=true;break;}if(sampleRate===null){packet=bytes.subarray(byteIndex,byteIndex+frameSize);sampleRate=probe.aac.parseSampleRate(packet);}audioCount++;byteIndex+=frameSize;break;default:byteIndex++;break;}if(endLoop){return null;}}if(sampleRate===null||timestamp===null){return null;}var audioTimescale=ONE_SECOND_IN_TS2/sampleRate;var result={audio:[{type:"audio",dts:timestamp,pts:timestamp},{type:"audio",dts:timestamp+audioCount*1024*audioTimescale,pts:timestamp+audioCount*1024*audioTimescale}]};return result;};var inspectTs_=function inspectTs_2(bytes){var pmt={pid:null,table:null};var result={};parsePsi_(bytes,pmt);for(var pid in pmt.table){if(pmt.table.hasOwnProperty(pid)){var type3=pmt.table[pid];switch(type3){case streamTypes.H264_STREAM_TYPE:result.video=[];parseVideoPes_(bytes,pmt,result);if(result.video.length===0){delete result.video;}break;case streamTypes.ADTS_STREAM_TYPE:result.audio=[];parseAudioPes_(bytes,pmt,result);if(result.audio.length===0){delete result.audio;}break;}}}return result;};var inspect=function inspect2(bytes,baseTimestamp){var isAacData=probe.aac.isLikelyAacData(bytes);var result;if(isAacData){result=inspectAac_(bytes);}else{result=inspectTs_(bytes);}if(!result||!result.audio&&!result.video){return null;}adjustTimestamp_(result,baseTimestamp);return result;};var tsInspector={inspect:inspect,parseAudioPes_:parseAudioPes_};var wireTransmuxerEvents=function wireTransmuxerEvents2(self2,transmuxer2){transmuxer2.on("data",function(segment){var initArray=segment.initSegment;segment.initSegment={data:initArray.buffer,byteOffset:initArray.byteOffset,byteLength:initArray.byteLength};var typedArray=segment.data;segment.data=typedArray.buffer;self2.postMessage({action:"data",segment:segment,byteOffset:typedArray.byteOffset,byteLength:typedArray.byteLength},[segment.data]);});transmuxer2.on("done",function(data){self2.postMessage({action:"done"});});transmuxer2.on("gopInfo",function(gopInfo){self2.postMessage({action:"gopInfo",gopInfo:gopInfo});});transmuxer2.on("videoSegmentTimingInfo",function(timingInfo){var videoSegmentTimingInfo={start:{decode:clock.videoTsToSeconds(timingInfo.start.dts),presentation:clock.videoTsToSeconds(timingInfo.start.pts)},end:{decode:clock.videoTsToSeconds(timingInfo.end.dts),presentation:clock.videoTsToSeconds(timingInfo.end.pts)},baseMediaDecodeTime:clock.videoTsToSeconds(timingInfo.baseMediaDecodeTime)};if(timingInfo.prependedContentDuration){videoSegmentTimingInfo.prependedContentDuration=clock.videoTsToSeconds(timingInfo.prependedContentDuration);}self2.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:videoSegmentTimingInfo});});transmuxer2.on("audioSegmentTimingInfo",function(timingInfo){var audioSegmentTimingInfo={start:{decode:clock.videoTsToSeconds(timingInfo.start.dts),presentation:clock.videoTsToSeconds(timingInfo.start.pts)},end:{decode:clock.videoTsToSeconds(timingInfo.end.dts),presentation:clock.videoTsToSeconds(timingInfo.end.pts)},baseMediaDecodeTime:clock.videoTsToSeconds(timingInfo.baseMediaDecodeTime)};if(timingInfo.prependedContentDuration){audioSegmentTimingInfo.prependedContentDuration=clock.videoTsToSeconds(timingInfo.prependedContentDuration);}self2.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:audioSegmentTimingInfo});});transmuxer2.on("id3Frame",function(id3Frame){self2.postMessage({action:"id3Frame",id3Frame:id3Frame});});transmuxer2.on("caption",function(caption){self2.postMessage({action:"caption",caption:caption});});transmuxer2.on("trackinfo",function(trackInfo){self2.postMessage({action:"trackinfo",trackInfo:trackInfo});});transmuxer2.on("audioTimingInfo",function(audioTimingInfo){self2.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:clock.videoTsToSeconds(audioTimingInfo.start),end:clock.videoTsToSeconds(audioTimingInfo.end)}});});transmuxer2.on("videoTimingInfo",function(videoTimingInfo){self2.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:clock.videoTsToSeconds(videoTimingInfo.start),end:clock.videoTsToSeconds(videoTimingInfo.end)}});});transmuxer2.on("log",function(log2){self2.postMessage({action:"log",log:log2});});};var MessageHandlers=/* @__PURE__ */function(){function MessageHandlers2(self2,options){this.options=options||{};this.self=self2;this.init();}var _proto=MessageHandlers2.prototype;_proto.init=function init5(){if(this.transmuxer){this.transmuxer.dispose();}this.transmuxer=new transmuxer.Transmuxer(this.options);wireTransmuxerEvents(this.self,this.transmuxer);};_proto.pushMp4Captions=function pushMp4Captions(data){if(!this.captionParser){this.captionParser=new captionParser();this.captionParser.init();}var segment=new Uint8Array(data.data,data.byteOffset,data.byteLength);var parsed=this.captionParser.parse(segment,data.trackIds,data.timescales);this.self.postMessage({action:"mp4Captions",captions:parsed&&parsed.captions||[],logs:parsed&&parsed.logs||[],data:segment.buffer},[segment.buffer]);};_proto.probeMp4StartTime=function probeMp4StartTime(_ref){var timescales=_ref.timescales,data=_ref.data;var startTime2=probe$2.startTime(timescales,data);this.self.postMessage({action:"probeMp4StartTime",startTime:startTime2,data:data},[data.buffer]);};_proto.probeMp4Tracks=function probeMp4Tracks(_ref2){var data=_ref2.data;var tracks=probe$2.tracks(data);this.self.postMessage({action:"probeMp4Tracks",tracks:tracks,data:data},[data.buffer]);};_proto.probeTs=function probeTs(_ref3){var data=_ref3.data,baseStartTime=_ref3.baseStartTime;var tsStartTime=typeof baseStartTime==="number"&&!isNaN(baseStartTime)?baseStartTime*clock.ONE_SECOND_IN_TS:void 0;var timeInfo=tsInspector.inspect(data,tsStartTime);var result=null;if(timeInfo){result={hasVideo:timeInfo.video&&timeInfo.video.length===2||false,hasAudio:timeInfo.audio&&timeInfo.audio.length===2||false};if(result.hasVideo){result.videoStart=timeInfo.video[0].ptsTime;}if(result.hasAudio){result.audioStart=timeInfo.audio[0].ptsTime;}}this.self.postMessage({action:"probeTs",result:result,data:data},[data.buffer]);};_proto.clearAllMp4Captions=function clearAllMp4Captions(){if(this.captionParser){this.captionParser.clearAllCaptions();}};_proto.clearParsedMp4Captions=function clearParsedMp4Captions(){if(this.captionParser){this.captionParser.clearParsedCaptions();}};_proto.push=function push(data){var segment=new Uint8Array(data.data,data.byteOffset,data.byteLength);this.transmuxer.push(segment);};_proto.reset=function reset3(){this.transmuxer.reset();};_proto.setTimestampOffset=function setTimestampOffset(data){var timestampOffset2=data.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(clock.secondsToVideoTs(timestampOffset2)));};_proto.setAudioAppendStart=function setAudioAppendStart(data){this.transmuxer.setAudioAppendStart(Math.ceil(clock.secondsToVideoTs(data.appendStart)));};_proto.setRemux=function setRemux(data){this.transmuxer.setRemux(data.remux);};_proto.flush=function flush(data){this.transmuxer.flush();self.postMessage({action:"done",type:"transmuxed"});};_proto.endTimeline=function endTimeline3(){this.transmuxer.endTimeline();self.postMessage({action:"endedtimeline",type:"transmuxed"});};_proto.alignGopsWith=function alignGopsWith(data){this.transmuxer.alignGopsWith(data.gopsToAlignWith.slice());};return MessageHandlers2;}();self.onmessage=function(event){if(event.data.action==="init"&&event.data.options){this.messageHandlers=new MessageHandlers(self,event.data.options);return;}if(!this.messageHandlers){this.messageHandlers=new MessageHandlers(self);}if(event.data&&event.data.action&&event.data.action!=="init"){if(this.messageHandlers[event.data.action]){this.messageHandlers[event.data.action](event.data);}}};}));var TransmuxWorker=factory(workerCode$1);var handleData_=function handleData_2(event,transmuxedData,callback2){var _event$data$segment=event.data.segment,type2=_event$data$segment.type,initSegment=_event$data$segment.initSegment,captions=_event$data$segment.captions,captionStreams=_event$data$segment.captionStreams,metadata=_event$data$segment.metadata,videoFrameDtsTime=_event$data$segment.videoFrameDtsTime,videoFramePtsTime=_event$data$segment.videoFramePtsTime;transmuxedData.buffer.push({captions:captions,captionStreams:captionStreams,metadata:metadata});var boxes=event.data.segment.boxes||{data:event.data.segment.data};var result={type:type2,data:new Uint8Array(boxes.data,boxes.data.byteOffset,boxes.data.byteLength),initSegment:new Uint8Array(initSegment.data,initSegment.byteOffset,initSegment.byteLength)};if(typeof videoFrameDtsTime!=="undefined"){result.videoFrameDtsTime=videoFrameDtsTime;}if(typeof videoFramePtsTime!=="undefined"){result.videoFramePtsTime=videoFramePtsTime;}callback2(result);};var handleDone_=function handleDone_2(_ref){var transmuxedData=_ref.transmuxedData,callback2=_ref.callback;transmuxedData.buffer=[];callback2(transmuxedData);};var handleGopInfo_=function handleGopInfo_2(event,transmuxedData){transmuxedData.gopInfo=event.data.gopInfo;};var processTransmux=function processTransmux2(options){var transmuxer=options.transmuxer,bytes=options.bytes,audioAppendStart=options.audioAppendStart,gopsToAlignWith=options.gopsToAlignWith,remux=options.remux,onData=options.onData,onTrackInfo=options.onTrackInfo,onAudioTimingInfo=options.onAudioTimingInfo,onVideoTimingInfo=options.onVideoTimingInfo,onVideoSegmentTimingInfo=options.onVideoSegmentTimingInfo,onAudioSegmentTimingInfo=options.onAudioSegmentTimingInfo,onId3=options.onId3,onCaptions=options.onCaptions,onDone=options.onDone,onEndedTimeline=options.onEndedTimeline,onTransmuxerLog=options.onTransmuxerLog,isEndOfTimeline=options.isEndOfTimeline;var transmuxedData={buffer:[]};var waitForEndedTimelineEvent=isEndOfTimeline;var handleMessage=function handleMessage2(event){if(transmuxer.currentTransmux!==options){return;}if(event.data.action==="data"){handleData_(event,transmuxedData,onData);}if(event.data.action==="trackinfo"){onTrackInfo(event.data.trackInfo);}if(event.data.action==="gopInfo"){handleGopInfo_(event,transmuxedData);}if(event.data.action==="audioTimingInfo"){onAudioTimingInfo(event.data.audioTimingInfo);}if(event.data.action==="videoTimingInfo"){onVideoTimingInfo(event.data.videoTimingInfo);}if(event.data.action==="videoSegmentTimingInfo"){onVideoSegmentTimingInfo(event.data.videoSegmentTimingInfo);}if(event.data.action==="audioSegmentTimingInfo"){onAudioSegmentTimingInfo(event.data.audioSegmentTimingInfo);}if(event.data.action==="id3Frame"){onId3([event.data.id3Frame],event.data.id3Frame.dispatchType);}if(event.data.action==="caption"){onCaptions(event.data.caption);}if(event.data.action==="endedtimeline"){waitForEndedTimelineEvent=false;onEndedTimeline();}if(event.data.action==="log"){onTransmuxerLog(event.data.log);}if(event.data.type!=="transmuxed"){return;}if(waitForEndedTimelineEvent){return;}transmuxer.onmessage=null;handleDone_({transmuxedData:transmuxedData,callback:onDone});dequeue(transmuxer);};transmuxer.onmessage=handleMessage;if(audioAppendStart){transmuxer.postMessage({action:"setAudioAppendStart",appendStart:audioAppendStart});}if(Array.isArray(gopsToAlignWith)){transmuxer.postMessage({action:"alignGopsWith",gopsToAlignWith:gopsToAlignWith});}if(typeof remux!=="undefined"){transmuxer.postMessage({action:"setRemux",remux:remux});}if(bytes.byteLength){var buffer=bytes instanceof ArrayBuffer?bytes:bytes.buffer;var byteOffset=bytes instanceof ArrayBuffer?0:bytes.byteOffset;transmuxer.postMessage({action:"push",data:buffer,byteOffset:byteOffset,byteLength:bytes.byteLength},[buffer]);}if(isEndOfTimeline){transmuxer.postMessage({action:"endTimeline"});}transmuxer.postMessage({action:"flush"});};var dequeue=function dequeue2(transmuxer){transmuxer.currentTransmux=null;if(transmuxer.transmuxQueue.length){transmuxer.currentTransmux=transmuxer.transmuxQueue.shift();if(typeof transmuxer.currentTransmux==="function"){transmuxer.currentTransmux();}else{processTransmux(transmuxer.currentTransmux);}}};var processAction=function processAction2(transmuxer,action){transmuxer.postMessage({action:action});dequeue(transmuxer);};var enqueueAction=function enqueueAction2(action,transmuxer){if(!transmuxer.currentTransmux){transmuxer.currentTransmux=action;processAction(transmuxer,action);return;}transmuxer.transmuxQueue.push(processAction.bind(null,transmuxer,action));};var reset=function reset2(transmuxer){enqueueAction("reset",transmuxer);};var endTimeline=function endTimeline2(transmuxer){enqueueAction("endTimeline",transmuxer);};var transmux=function transmux2(options){if(!options.transmuxer.currentTransmux){options.transmuxer.currentTransmux=options;processTransmux(options);return;}options.transmuxer.transmuxQueue.push(options);};var createTransmuxer=function createTransmuxer2(options){var transmuxer=new TransmuxWorker();transmuxer.currentTransmux=null;transmuxer.transmuxQueue=[];var term=transmuxer.terminate;transmuxer.terminate=function(){transmuxer.currentTransmux=null;transmuxer.transmuxQueue.length=0;return term.call(transmuxer);};transmuxer.postMessage({action:"init",options:options});return transmuxer;};var segmentTransmuxer={reset:reset,endTimeline:endTimeline,transmux:transmux,createTransmuxer:createTransmuxer};var workerCallback=function workerCallback2(options){var transmuxer=options.transmuxer;var endAction=options.endAction||options.action;var callback2=options.callback;var message=_extends({},options,{endAction:null,transmuxer:null,callback:null});var listenForEndEvent=function listenForEndEvent2(event){if(event.data.action!==endAction){return;}transmuxer.removeEventListener("message",listenForEndEvent2);if(event.data.data){event.data.data=new Uint8Array(event.data.data,options.byteOffset||0,options.byteLength||event.data.data.byteLength);if(options.data){options.data=event.data.data;}}callback2(event.data);};transmuxer.addEventListener("message",listenForEndEvent);if(options.data){var isArrayBuffer=options.data instanceof ArrayBuffer;message.byteOffset=isArrayBuffer?0:options.data.byteOffset;message.byteLength=options.data.byteLength;var transfers=[isArrayBuffer?options.data:options.data.buffer];transmuxer.postMessage(message,transfers);}else{transmuxer.postMessage(message);}};var REQUEST_ERRORS={FAILURE:2,TIMEOUT:-101,ABORTED:-102};var abortAll=function abortAll2(activeXhrs){activeXhrs.forEach(function(xhr){xhr.abort();});};var getRequestStats=function getRequestStats2(request){return{bandwidth:request.bandwidth,bytesReceived:request.bytesReceived||0,roundTripTime:request.roundTripTime||0};};var getProgressStats=function getProgressStats2(progressEvent){var request=progressEvent.target;var roundTripTime=Date.now()-request.requestTime;var stats={bandwidth:Infinity,bytesReceived:0,roundTripTime:roundTripTime||0};stats.bytesReceived=progressEvent.loaded;stats.bandwidth=Math.floor(stats.bytesReceived/stats.roundTripTime*8*1e3);return stats;};var handleErrors=function handleErrors2(error,request){if(request.timedout){return{status:request.status,message:"HLS request timed-out at URL: "+request.uri,code:REQUEST_ERRORS.TIMEOUT,xhr:request};}if(request.aborted){return{status:request.status,message:"HLS request aborted at URL: "+request.uri,code:REQUEST_ERRORS.ABORTED,xhr:request};}if(error){return{status:request.status,message:"HLS request errored at URL: "+request.uri,code:REQUEST_ERRORS.FAILURE,xhr:request};}if(request.responseType==="arraybuffer"&&request.response.byteLength===0){return{status:request.status,message:"Empty HLS response at URL: "+request.uri,code:REQUEST_ERRORS.FAILURE,xhr:request};}return null;};var handleKeyResponse=function handleKeyResponse2(segment,objects,finishProcessingFn){return function(error,request){var response=request.response;var errorObj=handleErrors(error,request);if(errorObj){return finishProcessingFn(errorObj,segment);}if(response.byteLength!==16){return finishProcessingFn({status:request.status,message:"Invalid HLS key at URL: "+request.uri,code:REQUEST_ERRORS.FAILURE,xhr:request},segment);}var view=new DataView(response);var bytes=new Uint32Array([view.getUint32(0),view.getUint32(4),view.getUint32(8),view.getUint32(12)]);for(var i=0;i<objects.length;i++){objects[i].bytes=bytes;}return finishProcessingFn(null,segment);};};var parseInitSegment=function parseInitSegment2(segment,_callback5){var type2=detectContainerForBytes(segment.map.bytes);if(type2!=="mp4"){var uri=segment.map.resolvedUri||segment.map.uri;return _callback5({internal:true,message:"Found unsupported "+(type2||"unknown")+" container for initialization segment at URL: "+uri,code:REQUEST_ERRORS.FAILURE});}workerCallback({action:"probeMp4Tracks",data:segment.map.bytes,transmuxer:segment.transmuxer,callback:function callback2(_ref){var tracks=_ref.tracks,data=_ref.data;segment.map.bytes=data;tracks.forEach(function(track){segment.map.tracks=segment.map.tracks||{};if(segment.map.tracks[track.type]){return;}segment.map.tracks[track.type]=track;if(typeof track.id==="number"&&track.timescale){segment.map.timescales=segment.map.timescales||{};segment.map.timescales[track.id]=track.timescale;}});return _callback5(null);}});};var handleInitSegmentResponse=function handleInitSegmentResponse2(_ref2){var segment=_ref2.segment,finishProcessingFn=_ref2.finishProcessingFn;return function(error,request){var errorObj=handleErrors(error,request);if(errorObj){return finishProcessingFn(errorObj,segment);}var bytes=new Uint8Array(request.response);if(segment.map.key){segment.map.encryptedBytes=bytes;return finishProcessingFn(null,segment);}segment.map.bytes=bytes;parseInitSegment(segment,function(parseError){if(parseError){parseError.xhr=request;parseError.status=request.status;return finishProcessingFn(parseError,segment);}finishProcessingFn(null,segment);});};};var handleSegmentResponse=function handleSegmentResponse2(_ref3){var segment=_ref3.segment,finishProcessingFn=_ref3.finishProcessingFn,responseType=_ref3.responseType;return function(error,request){var errorObj=handleErrors(error,request);if(errorObj){return finishProcessingFn(errorObj,segment);}var newBytes=responseType==="arraybuffer"||!request.responseText?request.response:stringToArrayBuffer(request.responseText.substring(segment.lastReachedChar||0));segment.stats=getRequestStats(request);if(segment.key){segment.encryptedBytes=new Uint8Array(newBytes);}else{segment.bytes=new Uint8Array(newBytes);}return finishProcessingFn(null,segment);};};var transmuxAndNotify=function transmuxAndNotify2(_ref4){var segment=_ref4.segment,bytes=_ref4.bytes,trackInfoFn=_ref4.trackInfoFn,timingInfoFn=_ref4.timingInfoFn,videoSegmentTimingInfoFn=_ref4.videoSegmentTimingInfoFn,audioSegmentTimingInfoFn=_ref4.audioSegmentTimingInfoFn,id3Fn=_ref4.id3Fn,captionsFn=_ref4.captionsFn,isEndOfTimeline=_ref4.isEndOfTimeline,endedTimelineFn=_ref4.endedTimelineFn,dataFn=_ref4.dataFn,doneFn=_ref4.doneFn,onTransmuxerLog=_ref4.onTransmuxerLog;var fmp4Tracks=segment.map&&segment.map.tracks||{};var isMuxed3=Boolean(fmp4Tracks.audio&&fmp4Tracks.video);var audioStartFn=timingInfoFn.bind(null,segment,"audio","start");var audioEndFn=timingInfoFn.bind(null,segment,"audio","end");var videoStartFn=timingInfoFn.bind(null,segment,"video","start");var videoEndFn=timingInfoFn.bind(null,segment,"video","end");var finish=function finish2(){return transmux({bytes:bytes,transmuxer:segment.transmuxer,audioAppendStart:segment.audioAppendStart,gopsToAlignWith:segment.gopsToAlignWith,remux:isMuxed3,onData:function onData(result){result.type=result.type==="combined"?"video":result.type;dataFn(segment,result);},onTrackInfo:function onTrackInfo(trackInfo){if(trackInfoFn){if(isMuxed3){trackInfo.isMuxed=true;}trackInfoFn(segment,trackInfo);}},onAudioTimingInfo:function onAudioTimingInfo(audioTimingInfo){if(audioStartFn&&typeof audioTimingInfo.start!=="undefined"){audioStartFn(audioTimingInfo.start);audioStartFn=null;}if(audioEndFn&&typeof audioTimingInfo.end!=="undefined"){audioEndFn(audioTimingInfo.end);}},onVideoTimingInfo:function onVideoTimingInfo(videoTimingInfo){if(videoStartFn&&typeof videoTimingInfo.start!=="undefined"){videoStartFn(videoTimingInfo.start);videoStartFn=null;}if(videoEndFn&&typeof videoTimingInfo.end!=="undefined"){videoEndFn(videoTimingInfo.end);}},onVideoSegmentTimingInfo:function onVideoSegmentTimingInfo(videoSegmentTimingInfo){videoSegmentTimingInfoFn(videoSegmentTimingInfo);},onAudioSegmentTimingInfo:function onAudioSegmentTimingInfo(audioSegmentTimingInfo){audioSegmentTimingInfoFn(audioSegmentTimingInfo);},onId3:function onId3(id3Frames,dispatchType){id3Fn(segment,id3Frames,dispatchType);},onCaptions:function onCaptions(captions){captionsFn(segment,[captions]);},isEndOfTimeline:isEndOfTimeline,onEndedTimeline:function onEndedTimeline(){endedTimelineFn();},onTransmuxerLog:onTransmuxerLog,onDone:function onDone(result){if(!doneFn){return;}result.type=result.type==="combined"?"video":result.type;doneFn(null,segment,result);}});};workerCallback({action:"probeTs",transmuxer:segment.transmuxer,data:bytes,baseStartTime:segment.baseStartTime,callback:function callback2(data){segment.bytes=bytes=data.data;var probeResult=data.result;if(probeResult){trackInfoFn(segment,{hasAudio:probeResult.hasAudio,hasVideo:probeResult.hasVideo,isMuxed:isMuxed3});trackInfoFn=null;if(probeResult.hasAudio&&!isMuxed3){audioStartFn(probeResult.audioStart);}if(probeResult.hasVideo){videoStartFn(probeResult.videoStart);}audioStartFn=null;videoStartFn=null;}finish();}});};var handleSegmentBytes=function handleSegmentBytes2(_ref5){var segment=_ref5.segment,bytes=_ref5.bytes,trackInfoFn=_ref5.trackInfoFn,timingInfoFn=_ref5.timingInfoFn,videoSegmentTimingInfoFn=_ref5.videoSegmentTimingInfoFn,audioSegmentTimingInfoFn=_ref5.audioSegmentTimingInfoFn,id3Fn=_ref5.id3Fn,captionsFn=_ref5.captionsFn,isEndOfTimeline=_ref5.isEndOfTimeline,endedTimelineFn=_ref5.endedTimelineFn,dataFn=_ref5.dataFn,doneFn=_ref5.doneFn,onTransmuxerLog=_ref5.onTransmuxerLog;var bytesAsUint8Array=new Uint8Array(bytes);if(isLikelyFmp4MediaSegment(bytesAsUint8Array)){segment.isFmp4=true;var tracks=segment.map.tracks;var trackInfo={isFmp4:true,hasVideo:!!tracks.video,hasAudio:!!tracks.audio};if(tracks.audio&&tracks.audio.codec&&tracks.audio.codec!=="enca"){trackInfo.audioCodec=tracks.audio.codec;}if(tracks.video&&tracks.video.codec&&tracks.video.codec!=="encv"){trackInfo.videoCodec=tracks.video.codec;}if(tracks.video&&tracks.audio){trackInfo.isMuxed=true;}trackInfoFn(segment,trackInfo);var finishLoading=function finishLoading2(captions){dataFn(segment,{data:bytesAsUint8Array,type:trackInfo.hasAudio&&!trackInfo.isMuxed?"audio":"video"});if(captions&&captions.length){captionsFn(segment,captions);}doneFn(null,segment,{});};workerCallback({action:"probeMp4StartTime",timescales:segment.map.timescales,data:bytesAsUint8Array,transmuxer:segment.transmuxer,callback:function callback2(_ref6){var data=_ref6.data,startTime=_ref6.startTime;bytes=data.buffer;segment.bytes=bytesAsUint8Array=data;if(trackInfo.hasAudio&&!trackInfo.isMuxed){timingInfoFn(segment,"audio","start",startTime);}if(trackInfo.hasVideo){timingInfoFn(segment,"video","start",startTime);}if(!tracks.video||!data.byteLength||!segment.transmuxer){finishLoading();return;}workerCallback({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:segment.transmuxer,data:bytesAsUint8Array,timescales:segment.map.timescales,trackIds:[tracks.video.id],callback:function callback3(message){bytes=message.data.buffer;segment.bytes=bytesAsUint8Array=message.data;message.logs.forEach(function(log2){onTransmuxerLog(videojs.mergeOptions(log2,{stream:"mp4CaptionParser"}));});finishLoading(message.captions);}});}});return;}if(!segment.transmuxer){doneFn(null,segment,{});return;}if(typeof segment.container==="undefined"){segment.container=detectContainerForBytes(bytesAsUint8Array);}if(segment.container!=="ts"&&segment.container!=="aac"){trackInfoFn(segment,{hasAudio:false,hasVideo:false});doneFn(null,segment,{});return;}transmuxAndNotify({segment:segment,bytes:bytes,trackInfoFn:trackInfoFn,timingInfoFn:timingInfoFn,videoSegmentTimingInfoFn:videoSegmentTimingInfoFn,audioSegmentTimingInfoFn:audioSegmentTimingInfoFn,id3Fn:id3Fn,captionsFn:captionsFn,isEndOfTimeline:isEndOfTimeline,endedTimelineFn:endedTimelineFn,dataFn:dataFn,doneFn:doneFn,onTransmuxerLog:onTransmuxerLog});};var decrypt=function decrypt2(_ref7,callback2){var id=_ref7.id,key=_ref7.key,encryptedBytes=_ref7.encryptedBytes,decryptionWorker=_ref7.decryptionWorker;var decryptionHandler=function decryptionHandler2(event){if(event.data.source===id){decryptionWorker.removeEventListener("message",decryptionHandler2);var decrypted=event.data.decrypted;callback2(new Uint8Array(decrypted.bytes,decrypted.byteOffset,decrypted.byteLength));}};decryptionWorker.addEventListener("message",decryptionHandler);var keyBytes;if(key.bytes.slice){keyBytes=key.bytes.slice();}else{keyBytes=new Uint32Array(Array.prototype.slice.call(key.bytes));}decryptionWorker.postMessage(createTransferableMessage({source:id,encrypted:encryptedBytes,key:keyBytes,iv:key.iv}),[encryptedBytes.buffer,keyBytes.buffer]);};var decryptSegment=function decryptSegment2(_ref8){var decryptionWorker=_ref8.decryptionWorker,segment=_ref8.segment,trackInfoFn=_ref8.trackInfoFn,timingInfoFn=_ref8.timingInfoFn,videoSegmentTimingInfoFn=_ref8.videoSegmentTimingInfoFn,audioSegmentTimingInfoFn=_ref8.audioSegmentTimingInfoFn,id3Fn=_ref8.id3Fn,captionsFn=_ref8.captionsFn,isEndOfTimeline=_ref8.isEndOfTimeline,endedTimelineFn=_ref8.endedTimelineFn,dataFn=_ref8.dataFn,doneFn=_ref8.doneFn,onTransmuxerLog=_ref8.onTransmuxerLog;decrypt({id:segment.requestId,key:segment.key,encryptedBytes:segment.encryptedBytes,decryptionWorker:decryptionWorker},function(decryptedBytes){segment.bytes=decryptedBytes;handleSegmentBytes({segment:segment,bytes:segment.bytes,trackInfoFn:trackInfoFn,timingInfoFn:timingInfoFn,videoSegmentTimingInfoFn:videoSegmentTimingInfoFn,audioSegmentTimingInfoFn:audioSegmentTimingInfoFn,id3Fn:id3Fn,captionsFn:captionsFn,isEndOfTimeline:isEndOfTimeline,endedTimelineFn:endedTimelineFn,dataFn:dataFn,doneFn:doneFn,onTransmuxerLog:onTransmuxerLog});});};var waitForCompletion=function waitForCompletion2(_ref9){var activeXhrs=_ref9.activeXhrs,decryptionWorker=_ref9.decryptionWorker,trackInfoFn=_ref9.trackInfoFn,timingInfoFn=_ref9.timingInfoFn,videoSegmentTimingInfoFn=_ref9.videoSegmentTimingInfoFn,audioSegmentTimingInfoFn=_ref9.audioSegmentTimingInfoFn,id3Fn=_ref9.id3Fn,captionsFn=_ref9.captionsFn,isEndOfTimeline=_ref9.isEndOfTimeline,endedTimelineFn=_ref9.endedTimelineFn,dataFn=_ref9.dataFn,doneFn=_ref9.doneFn,onTransmuxerLog=_ref9.onTransmuxerLog;var count=0;var didError=false;return function(error,segment){if(didError){return;}if(error){didError=true;abortAll(activeXhrs);return doneFn(error,segment);}count+=1;if(count===activeXhrs.length){var segmentFinish=function segmentFinish2(){if(segment.encryptedBytes){return decryptSegment({decryptionWorker:decryptionWorker,segment:segment,trackInfoFn:trackInfoFn,timingInfoFn:timingInfoFn,videoSegmentTimingInfoFn:videoSegmentTimingInfoFn,audioSegmentTimingInfoFn:audioSegmentTimingInfoFn,id3Fn:id3Fn,captionsFn:captionsFn,isEndOfTimeline:isEndOfTimeline,endedTimelineFn:endedTimelineFn,dataFn:dataFn,doneFn:doneFn,onTransmuxerLog:onTransmuxerLog});}handleSegmentBytes({segment:segment,bytes:segment.bytes,trackInfoFn:trackInfoFn,timingInfoFn:timingInfoFn,videoSegmentTimingInfoFn:videoSegmentTimingInfoFn,audioSegmentTimingInfoFn:audioSegmentTimingInfoFn,id3Fn:id3Fn,captionsFn:captionsFn,isEndOfTimeline:isEndOfTimeline,endedTimelineFn:endedTimelineFn,dataFn:dataFn,doneFn:doneFn,onTransmuxerLog:onTransmuxerLog});};segment.endOfAllRequests=Date.now();if(segment.map&&segment.map.encryptedBytes&&!segment.map.bytes){return decrypt({decryptionWorker:decryptionWorker,id:segment.requestId+"-init",encryptedBytes:segment.map.encryptedBytes,key:segment.map.key},function(decryptedBytes){segment.map.bytes=decryptedBytes;parseInitSegment(segment,function(parseError){if(parseError){abortAll(activeXhrs);return doneFn(parseError,segment);}segmentFinish();});});}segmentFinish();}};};var handleLoadEnd=function handleLoadEnd2(_ref10){var loadendState=_ref10.loadendState,abortFn=_ref10.abortFn;return function(event){var request=event.target;if(request.aborted&&abortFn&&!loadendState.calledAbortFn){abortFn();loadendState.calledAbortFn=true;}};};var handleProgress=function handleProgress2(_ref11){var segment=_ref11.segment,progressFn=_ref11.progressFn;_ref11.trackInfoFn;_ref11.timingInfoFn;_ref11.videoSegmentTimingInfoFn;_ref11.audioSegmentTimingInfoFn;_ref11.id3Fn;_ref11.captionsFn;_ref11.isEndOfTimeline;_ref11.endedTimelineFn;_ref11.dataFn;return function(event){var request=event.target;if(request.aborted){return;}segment.stats=videojs.mergeOptions(segment.stats,getProgressStats(event));if(!segment.stats.firstBytesReceivedAt&&segment.stats.bytesReceived){segment.stats.firstBytesReceivedAt=Date.now();}return progressFn(event,segment);};};var mediaSegmentRequest=function mediaSegmentRequest2(_ref12){var xhr=_ref12.xhr,xhrOptions=_ref12.xhrOptions,decryptionWorker=_ref12.decryptionWorker,segment=_ref12.segment,abortFn=_ref12.abortFn,progressFn=_ref12.progressFn,trackInfoFn=_ref12.trackInfoFn,timingInfoFn=_ref12.timingInfoFn,videoSegmentTimingInfoFn=_ref12.videoSegmentTimingInfoFn,audioSegmentTimingInfoFn=_ref12.audioSegmentTimingInfoFn,id3Fn=_ref12.id3Fn,captionsFn=_ref12.captionsFn,isEndOfTimeline=_ref12.isEndOfTimeline,endedTimelineFn=_ref12.endedTimelineFn,dataFn=_ref12.dataFn,doneFn=_ref12.doneFn,onTransmuxerLog=_ref12.onTransmuxerLog;var activeXhrs=[];var finishProcessingFn=waitForCompletion({activeXhrs:activeXhrs,decryptionWorker:decryptionWorker,trackInfoFn:trackInfoFn,timingInfoFn:timingInfoFn,videoSegmentTimingInfoFn:videoSegmentTimingInfoFn,audioSegmentTimingInfoFn:audioSegmentTimingInfoFn,id3Fn:id3Fn,captionsFn:captionsFn,isEndOfTimeline:isEndOfTimeline,endedTimelineFn:endedTimelineFn,dataFn:dataFn,doneFn:doneFn,onTransmuxerLog:onTransmuxerLog});if(segment.key&&!segment.key.bytes){var objects=[segment.key];if(segment.map&&!segment.map.bytes&&segment.map.key&&segment.map.key.resolvedUri===segment.key.resolvedUri){objects.push(segment.map.key);}var keyRequestOptions=videojs.mergeOptions(xhrOptions,{uri:segment.key.resolvedUri,responseType:"arraybuffer"});var keyRequestCallback=handleKeyResponse(segment,objects,finishProcessingFn);var keyXhr=xhr(keyRequestOptions,keyRequestCallback);activeXhrs.push(keyXhr);}if(segment.map&&!segment.map.bytes){var differentMapKey=segment.map.key&&(!segment.key||segment.key.resolvedUri!==segment.map.key.resolvedUri);if(differentMapKey){var mapKeyRequestOptions=videojs.mergeOptions(xhrOptions,{uri:segment.map.key.resolvedUri,responseType:"arraybuffer"});var mapKeyRequestCallback=handleKeyResponse(segment,[segment.map.key],finishProcessingFn);var mapKeyXhr=xhr(mapKeyRequestOptions,mapKeyRequestCallback);activeXhrs.push(mapKeyXhr);}var initSegmentOptions=videojs.mergeOptions(xhrOptions,{uri:segment.map.resolvedUri,responseType:"arraybuffer",headers:segmentXhrHeaders(segment.map)});var initSegmentRequestCallback=handleInitSegmentResponse({segment:segment,finishProcessingFn:finishProcessingFn});var initSegmentXhr=xhr(initSegmentOptions,initSegmentRequestCallback);activeXhrs.push(initSegmentXhr);}var segmentRequestOptions=videojs.mergeOptions(xhrOptions,{uri:segment.part&&segment.part.resolvedUri||segment.resolvedUri,responseType:"arraybuffer",headers:segmentXhrHeaders(segment)});var segmentRequestCallback=handleSegmentResponse({segment:segment,finishProcessingFn:finishProcessingFn,responseType:segmentRequestOptions.responseType});var segmentXhr=xhr(segmentRequestOptions,segmentRequestCallback);segmentXhr.addEventListener("progress",handleProgress({segment:segment,progressFn:progressFn,trackInfoFn:trackInfoFn,timingInfoFn:timingInfoFn,videoSegmentTimingInfoFn:videoSegmentTimingInfoFn,audioSegmentTimingInfoFn:audioSegmentTimingInfoFn,id3Fn:id3Fn,captionsFn:captionsFn,isEndOfTimeline:isEndOfTimeline,endedTimelineFn:endedTimelineFn,dataFn:dataFn}));activeXhrs.push(segmentXhr);var loadendState={};activeXhrs.forEach(function(activeXhr){activeXhr.addEventListener("loadend",handleLoadEnd({loadendState:loadendState,abortFn:abortFn}));});return function(){return abortAll(activeXhrs);};};var logFn$1=logger("CodecUtils");var getCodecs=function getCodecs2(media){var mediaAttributes=media.attributes||{};if(mediaAttributes.CODECS){return parseCodecs(mediaAttributes.CODECS);}};var isMaat=function isMaat2(master,media){var mediaAttributes=media.attributes||{};return master&&master.mediaGroups&&master.mediaGroups.AUDIO&&mediaAttributes.AUDIO&&master.mediaGroups.AUDIO[mediaAttributes.AUDIO];};var isMuxed=function isMuxed2(master,media){if(!isMaat(master,media)){return true;}var mediaAttributes=media.attributes||{};var audioGroup=master.mediaGroups.AUDIO[mediaAttributes.AUDIO];for(var groupId in audioGroup){if(!audioGroup[groupId].uri&&!audioGroup[groupId].playlists){return true;}}return false;};var unwrapCodecList=function unwrapCodecList2(codecList){var codecs={};codecList.forEach(function(_ref){var mediaType=_ref.mediaType,type2=_ref.type,details=_ref.details;codecs[mediaType]=codecs[mediaType]||[];codecs[mediaType].push(translateLegacyCodec(""+type2+details));});Object.keys(codecs).forEach(function(mediaType){if(codecs[mediaType].length>1){logFn$1("multiple "+mediaType+" codecs found as attributes: "+codecs[mediaType].join(", ")+". Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs.");codecs[mediaType]=null;return;}codecs[mediaType]=codecs[mediaType][0];});return codecs;};var codecCount=function codecCount2(codecObj){var count=0;if(codecObj.audio){count++;}if(codecObj.video){count++;}return count;};var codecsForPlaylist=function codecsForPlaylist2(master,media){var mediaAttributes=media.attributes||{};var codecInfo=unwrapCodecList(getCodecs(media)||[]);if(isMaat(master,media)&&!codecInfo.audio){if(!isMuxed(master,media)){var defaultCodecs=unwrapCodecList(codecsFromDefault(master,mediaAttributes.AUDIO)||[]);if(defaultCodecs.audio){codecInfo.audio=defaultCodecs.audio;}}}return codecInfo;};var logFn=logger("PlaylistSelector");var representationToString=function representationToString2(representation){if(!representation||!representation.playlist){return;}var playlist=representation.playlist;return JSON.stringify({id:playlist.id,bandwidth:representation.bandwidth,width:representation.width,height:representation.height,codecs:playlist.attributes&&playlist.attributes.CODECS||""});};var safeGetComputedStyle=function safeGetComputedStyle2(el,property){if(!el){return"";}var result=import_window6["default"].getComputedStyle(el);if(!result){return"";}return result[property];};var stableSort=function stableSort2(array,sortFn){var newArray=array.slice();array.sort(function(left,right){var cmp=sortFn(left,right);if(cmp===0){return newArray.indexOf(left)-newArray.indexOf(right);}return cmp;});};var comparePlaylistBandwidth=function comparePlaylistBandwidth2(left,right){var leftBandwidth;var rightBandwidth;if(left.attributes.BANDWIDTH){leftBandwidth=left.attributes.BANDWIDTH;}leftBandwidth=leftBandwidth||import_window6["default"].Number.MAX_VALUE;if(right.attributes.BANDWIDTH){rightBandwidth=right.attributes.BANDWIDTH;}rightBandwidth=rightBandwidth||import_window6["default"].Number.MAX_VALUE;return leftBandwidth-rightBandwidth;};var comparePlaylistResolution=function comparePlaylistResolution2(left,right){var leftWidth;var rightWidth;if(left.attributes.RESOLUTION&&left.attributes.RESOLUTION.width){leftWidth=left.attributes.RESOLUTION.width;}leftWidth=leftWidth||import_window6["default"].Number.MAX_VALUE;if(right.attributes.RESOLUTION&&right.attributes.RESOLUTION.width){rightWidth=right.attributes.RESOLUTION.width;}rightWidth=rightWidth||import_window6["default"].Number.MAX_VALUE;if(leftWidth===rightWidth&&left.attributes.BANDWIDTH&&right.attributes.BANDWIDTH){return left.attributes.BANDWIDTH-right.attributes.BANDWIDTH;}return leftWidth-rightWidth;};var simpleSelector=function simpleSelector2(master,playerBandwidth,playerWidth,playerHeight,limitRenditionByPlayerDimensions,masterPlaylistController){if(!master){return;}var options={bandwidth:playerBandwidth,width:playerWidth,height:playerHeight,limitRenditionByPlayerDimensions:limitRenditionByPlayerDimensions};var playlists=master.playlists;if(Playlist.isAudioOnly(master)){playlists=masterPlaylistController.getAudioTrackPlaylists_();options.audioOnly=true;}var sortedPlaylistReps=playlists.map(function(playlist){var bandwidth2;var width2=playlist.attributes&&playlist.attributes.RESOLUTION&&playlist.attributes.RESOLUTION.width;var height2=playlist.attributes&&playlist.attributes.RESOLUTION&&playlist.attributes.RESOLUTION.height;bandwidth2=playlist.attributes&&playlist.attributes.BANDWIDTH;bandwidth2=bandwidth2||import_window6["default"].Number.MAX_VALUE;return{bandwidth:bandwidth2,width:width2,height:height2,playlist:playlist};});stableSort(sortedPlaylistReps,function(left,right){return left.bandwidth-right.bandwidth;});sortedPlaylistReps=sortedPlaylistReps.filter(function(rep){return!Playlist.isIncompatible(rep.playlist);});var enabledPlaylistReps=sortedPlaylistReps.filter(function(rep){return Playlist.isEnabled(rep.playlist);});if(!enabledPlaylistReps.length){enabledPlaylistReps=sortedPlaylistReps.filter(function(rep){return!Playlist.isDisabled(rep.playlist);});}var bandwidthPlaylistReps=enabledPlaylistReps.filter(function(rep){return rep.bandwidth*Config.BANDWIDTH_VARIANCE<playerBandwidth;});var highestRemainingBandwidthRep=bandwidthPlaylistReps[bandwidthPlaylistReps.length-1];var bandwidthBestRep=bandwidthPlaylistReps.filter(function(rep){return rep.bandwidth===highestRemainingBandwidthRep.bandwidth;})[0];if(limitRenditionByPlayerDimensions===false){var _chosenRep=bandwidthBestRep||enabledPlaylistReps[0]||sortedPlaylistReps[0];if(_chosenRep&&_chosenRep.playlist){var type2="sortedPlaylistReps";if(bandwidthBestRep){type2="bandwidthBestRep";}if(enabledPlaylistReps[0]){type2="enabledPlaylistReps";}logFn("choosing "+representationToString(_chosenRep)+" using "+type2+" with options",options);return _chosenRep.playlist;}logFn("could not choose a playlist with options",options);return null;}var haveResolution=bandwidthPlaylistReps.filter(function(rep){return rep.width&&rep.height;});stableSort(haveResolution,function(left,right){return left.width-right.width;});var resolutionBestRepList=haveResolution.filter(function(rep){return rep.width===playerWidth&&rep.height===playerHeight;});highestRemainingBandwidthRep=resolutionBestRepList[resolutionBestRepList.length-1];var resolutionBestRep=resolutionBestRepList.filter(function(rep){return rep.bandwidth===highestRemainingBandwidthRep.bandwidth;})[0];var resolutionPlusOneList;var resolutionPlusOneSmallest;var resolutionPlusOneRep;if(!resolutionBestRep){resolutionPlusOneList=haveResolution.filter(function(rep){return rep.width>playerWidth||rep.height>playerHeight;});resolutionPlusOneSmallest=resolutionPlusOneList.filter(function(rep){return rep.width===resolutionPlusOneList[0].width&&rep.height===resolutionPlusOneList[0].height;});highestRemainingBandwidthRep=resolutionPlusOneSmallest[resolutionPlusOneSmallest.length-1];resolutionPlusOneRep=resolutionPlusOneSmallest.filter(function(rep){return rep.bandwidth===highestRemainingBandwidthRep.bandwidth;})[0];}var leastPixelDiffRep;if(masterPlaylistController.experimentalLeastPixelDiffSelector){var leastPixelDiffList=haveResolution.map(function(rep){rep.pixelDiff=Math.abs(rep.width-playerWidth)+Math.abs(rep.height-playerHeight);return rep;});stableSort(leastPixelDiffList,function(left,right){if(left.pixelDiff===right.pixelDiff){return right.bandwidth-left.bandwidth;}return left.pixelDiff-right.pixelDiff;});leastPixelDiffRep=leastPixelDiffList[0];}var chosenRep=leastPixelDiffRep||resolutionPlusOneRep||resolutionBestRep||bandwidthBestRep||enabledPlaylistReps[0]||sortedPlaylistReps[0];if(chosenRep&&chosenRep.playlist){var _type="sortedPlaylistReps";if(leastPixelDiffRep){_type="leastPixelDiffRep";}else if(resolutionPlusOneRep){_type="resolutionPlusOneRep";}else if(resolutionBestRep){_type="resolutionBestRep";}else if(bandwidthBestRep){_type="bandwidthBestRep";}else if(enabledPlaylistReps[0]){_type="enabledPlaylistReps";}logFn("choosing "+representationToString(chosenRep)+" using "+_type+" with options",options);return chosenRep.playlist;}logFn("could not choose a playlist with options",options);return null;};var lastBandwidthSelector=function lastBandwidthSelector2(){var pixelRatio=this.useDevicePixelRatio?import_window6["default"].devicePixelRatio||1:1;return simpleSelector(this.playlists.master,this.systemBandwidth,parseInt(safeGetComputedStyle(this.tech_.el(),"width"),10)*pixelRatio,parseInt(safeGetComputedStyle(this.tech_.el(),"height"),10)*pixelRatio,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_);};var movingAverageBandwidthSelector=function movingAverageBandwidthSelector2(decay){var average=-1;var lastSystemBandwidth=-1;if(decay<0||decay>1){throw new Error("Moving average bandwidth decay must be between 0 and 1.");}return function(){var pixelRatio=this.useDevicePixelRatio?import_window6["default"].devicePixelRatio||1:1;if(average<0){average=this.systemBandwidth;lastSystemBandwidth=this.systemBandwidth;}if(this.systemBandwidth>0&&this.systemBandwidth!==lastSystemBandwidth){average=decay*this.systemBandwidth+(1-decay)*average;lastSystemBandwidth=this.systemBandwidth;}return simpleSelector(this.playlists.master,average,parseInt(safeGetComputedStyle(this.tech_.el(),"width"),10)*pixelRatio,parseInt(safeGetComputedStyle(this.tech_.el(),"height"),10)*pixelRatio,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_);};};var minRebufferMaxBandwidthSelector=function minRebufferMaxBandwidthSelector2(settings){var master=settings.master,currentTime=settings.currentTime,bandwidth2=settings.bandwidth,duration5=settings.duration,segmentDuration=settings.segmentDuration,timeUntilRebuffer3=settings.timeUntilRebuffer,currentTimeline=settings.currentTimeline,syncController=settings.syncController;var compatiblePlaylists=master.playlists.filter(function(playlist){return!Playlist.isIncompatible(playlist);});var enabledPlaylists=compatiblePlaylists.filter(Playlist.isEnabled);if(!enabledPlaylists.length){enabledPlaylists=compatiblePlaylists.filter(function(playlist){return!Playlist.isDisabled(playlist);});}var bandwidthPlaylists=enabledPlaylists.filter(Playlist.hasAttribute.bind(null,"BANDWIDTH"));var rebufferingEstimates=bandwidthPlaylists.map(function(playlist){var syncPoint=syncController.getSyncPoint(playlist,duration5,currentTimeline,currentTime);var numRequests=syncPoint?1:2;var requestTimeEstimate=Playlist.estimateSegmentRequestTime(segmentDuration,bandwidth2,playlist);var rebufferingImpact=requestTimeEstimate*numRequests-timeUntilRebuffer3;return{playlist:playlist,rebufferingImpact:rebufferingImpact};});var noRebufferingPlaylists=rebufferingEstimates.filter(function(estimate){return estimate.rebufferingImpact<=0;});stableSort(noRebufferingPlaylists,function(a,b){return comparePlaylistBandwidth(b.playlist,a.playlist);});if(noRebufferingPlaylists.length){return noRebufferingPlaylists[0];}stableSort(rebufferingEstimates,function(a,b){return a.rebufferingImpact-b.rebufferingImpact;});return rebufferingEstimates[0]||null;};var lowestBitrateCompatibleVariantSelector=function lowestBitrateCompatibleVariantSelector2(){var _this=this;var playlists=this.playlists.master.playlists.filter(Playlist.isEnabled);stableSort(playlists,function(a,b){return comparePlaylistBandwidth(a,b);});var playlistsWithVideo=playlists.filter(function(playlist){return!!codecsForPlaylist(_this.playlists.master,playlist).video;});return playlistsWithVideo[0]||null;};var concatSegments=function concatSegments2(segmentObj){var offset=0;var tempBuffer;if(segmentObj.bytes){tempBuffer=new Uint8Array(segmentObj.bytes);segmentObj.segments.forEach(function(segment){tempBuffer.set(segment,offset);offset+=segment.byteLength;});}return tempBuffer;};var createCaptionsTrackIfNotExists=function createCaptionsTrackIfNotExists2(inbandTextTracks,tech,captionStream){if(!inbandTextTracks[captionStream]){tech.trigger({type:"usage",name:"vhs-608"});tech.trigger({type:"usage",name:"hls-608"});var instreamId=captionStream;if(/^cc708_/.test(captionStream)){instreamId="SERVICE"+captionStream.split("_")[1];}var track=tech.textTracks().getTrackById(instreamId);if(track){inbandTextTracks[captionStream]=track;}else{var captionServices=tech.options_.vhs&&tech.options_.vhs.captionServices||{};var label=captionStream;var language=captionStream;var def=false;var captionService=captionServices[instreamId];if(captionService){label=captionService.label;language=captionService.language;def=captionService["default"];}inbandTextTracks[captionStream]=tech.addRemoteTextTrack({kind:"captions",id:instreamId,"default":def,label:label,language:language},false).track;}}};var addCaptionData=function addCaptionData2(_ref){var inbandTextTracks=_ref.inbandTextTracks,captionArray=_ref.captionArray,timestampOffset2=_ref.timestampOffset;if(!captionArray){return;}var Cue=import_window6["default"].WebKitDataCue||import_window6["default"].VTTCue;captionArray.forEach(function(caption){var track=caption.stream;inbandTextTracks[track].addCue(new Cue(caption.startTime+timestampOffset2,caption.endTime+timestampOffset2,caption.text));});};var deprecateOldCue=function deprecateOldCue2(cue){Object.defineProperties(cue.frame,{id:{get:function get7(){videojs.log.warn("cue.frame.id is deprecated. Use cue.value.key instead.");return cue.value.key;}},value:{get:function get7(){videojs.log.warn("cue.frame.value is deprecated. Use cue.value.data instead.");return cue.value.data;}},privateData:{get:function get7(){videojs.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead.");return cue.value.data;}}});};var addMetadata=function addMetadata2(_ref2){var inbandTextTracks=_ref2.inbandTextTracks,metadataArray=_ref2.metadataArray,timestampOffset2=_ref2.timestampOffset,videoDuration=_ref2.videoDuration;if(!metadataArray){return;}var Cue=import_window6["default"].WebKitDataCue||import_window6["default"].VTTCue;var metadataTrack=inbandTextTracks.metadataTrack_;if(!metadataTrack){return;}metadataArray.forEach(function(metadata){var time=metadata.cueTime+timestampOffset2;if(typeof time!=="number"||import_window6["default"].isNaN(time)||time<0||!(time<Infinity)){return;}metadata.frames.forEach(function(frame){var cue=new Cue(time,time,frame.value||frame.url||frame.data||"");cue.frame=frame;cue.value=frame;deprecateOldCue(cue);metadataTrack.addCue(cue);});});if(!metadataTrack.cues||!metadataTrack.cues.length){return;}var cues=metadataTrack.cues;var cuesArray=[];for(var i=0;i<cues.length;i++){if(cues[i]){cuesArray.push(cues[i]);}}var cuesGroupedByStartTime=cuesArray.reduce(function(obj,cue){var timeSlot=obj[cue.startTime]||[];timeSlot.push(cue);obj[cue.startTime]=timeSlot;return obj;},{});var sortedStartTimes=Object.keys(cuesGroupedByStartTime).sort(function(a,b){return Number(a)-Number(b);});sortedStartTimes.forEach(function(startTime,idx){var cueGroup=cuesGroupedByStartTime[startTime];var nextTime=Number(sortedStartTimes[idx+1])||videoDuration;cueGroup.forEach(function(cue){cue.endTime=nextTime;});});};var createMetadataTrackIfNotExists=function createMetadataTrackIfNotExists2(inbandTextTracks,dispatchType,tech){if(inbandTextTracks.metadataTrack_){return;}inbandTextTracks.metadataTrack_=tech.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},false).track;inbandTextTracks.metadataTrack_.inBandMetadataTrackDispatchType=dispatchType;};var removeCuesFromTrack=function removeCuesFromTrack2(start2,end,track){var i;var cue;if(!track){return;}if(!track.cues){return;}i=track.cues.length;while(i--){cue=track.cues[i];if(cue.startTime>=start2&&cue.endTime<=end){track.removeCue(cue);}}};var removeDuplicateCuesFromTrack=function removeDuplicateCuesFromTrack2(track){var cues=track.cues;if(!cues){return;}for(var i=0;i<cues.length;i++){var duplicates=[];var occurrences=0;for(var j=0;j<cues.length;j++){if(cues[i].startTime===cues[j].startTime&&cues[i].endTime===cues[j].endTime&&cues[i].text===cues[j].text){occurrences++;if(occurrences>1){duplicates.push(cues[j]);}}}if(duplicates.length){duplicates.forEach(function(dupe){return track.removeCue(dupe);});}}};var gopsSafeToAlignWith=function gopsSafeToAlignWith2(buffer,currentTime,mapping){if(typeof currentTime==="undefined"||currentTime===null||!buffer.length){return[];}var currentTimePts=Math.ceil((currentTime-mapping+3)*import_clock.ONE_SECOND_IN_TS);var i;for(i=0;i<buffer.length;i++){if(buffer[i].pts>currentTimePts){break;}}return buffer.slice(i);};var updateGopBuffer=function updateGopBuffer2(buffer,gops,replace){if(!gops.length){return buffer;}if(replace){return gops.slice();}var start2=gops[0].pts;var i=0;for(i;i<buffer.length;i++){if(buffer[i].pts>=start2){break;}}return buffer.slice(0,i).concat(gops);};var removeGopBuffer=function removeGopBuffer2(buffer,start2,end,mapping){var startPts=Math.ceil((start2-mapping)*import_clock.ONE_SECOND_IN_TS);var endPts=Math.ceil((end-mapping)*import_clock.ONE_SECOND_IN_TS);var updatedBuffer=buffer.slice();var i=buffer.length;while(i--){if(buffer[i].pts<=endPts){break;}}if(i===-1){return updatedBuffer;}var j=i+1;while(j--){if(buffer[j].pts<=startPts){break;}}j=Math.max(j,0);updatedBuffer.splice(j,i-j+1);return updatedBuffer;};var shallowEqual=function shallowEqual2(a,b){if(!a&&!b||!a&&b||a&&!b){return false;}if(a===b){return true;}var akeys=Object.keys(a).sort();var bkeys=Object.keys(b).sort();if(akeys.length!==bkeys.length){return false;}for(var i=0;i<akeys.length;i++){var key=akeys[i];if(key!==bkeys[i]){return false;}if(a[key]!==b[key]){return false;}}return true;};var QUOTA_EXCEEDED_ERR=22;var getSyncSegmentCandidate=function getSyncSegmentCandidate2(currentTimeline,segments,targetTime){segments=segments||[];var timelineSegments=[];var time=0;for(var i=0;i<segments.length;i++){var segment=segments[i];if(currentTimeline===segment.timeline){timelineSegments.push(i);time+=segment.duration;if(time>targetTime){return i;}}}if(timelineSegments.length===0){return 0;}return timelineSegments[timelineSegments.length-1];};var MIN_BACK_BUFFER=1;var CHECK_BUFFER_DELAY=500;var finite=function finite2(num){return typeof num==="number"&&isFinite(num);};var MIN_SEGMENT_DURATION_TO_SAVE_STATS=1/60;var illegalMediaSwitch=function illegalMediaSwitch2(loaderType,startingMedia,trackInfo){if(loaderType!=="main"||!startingMedia||!trackInfo){return null;}if(!trackInfo.hasAudio&&!trackInfo.hasVideo){return"Neither audio nor video found in segment.";}if(startingMedia.hasVideo&&!trackInfo.hasVideo){return"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.";}if(!startingMedia.hasVideo&&trackInfo.hasVideo){return"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.";}return null;};var safeBackBufferTrimTime=function safeBackBufferTrimTime2(seekable3,currentTime,targetDuration){var trimTime=currentTime-Config.BACK_BUFFER_LENGTH;if(seekable3.length){trimTime=Math.max(trimTime,seekable3.start(0));}var maxTrimTime=currentTime-targetDuration;return Math.min(maxTrimTime,trimTime);};var segmentInfoString=function segmentInfoString2(segmentInfo){var startOfSegment=segmentInfo.startOfSegment,duration5=segmentInfo.duration,segment=segmentInfo.segment,part=segmentInfo.part,_segmentInfo$playlist=segmentInfo.playlist,seq=_segmentInfo$playlist.mediaSequence,id=_segmentInfo$playlist.id,_segmentInfo$playlist2=_segmentInfo$playlist.segments,segments=_segmentInfo$playlist2===void 0?[]:_segmentInfo$playlist2,index=segmentInfo.mediaIndex,partIndex=segmentInfo.partIndex,timeline2=segmentInfo.timeline;var segmentLen=segments.length-1;var selection="mediaIndex/partIndex increment";if(segmentInfo.getMediaInfoForTime){selection="getMediaInfoForTime ("+segmentInfo.getMediaInfoForTime+")";}else if(segmentInfo.isSyncRequest){selection="getSyncSegmentCandidate (isSyncRequest)";}if(segmentInfo.independent){selection+=" with independent "+segmentInfo.independent;}var hasPartIndex=typeof partIndex==="number";var name=segmentInfo.segment.uri?"segment":"pre-segment";var zeroBasedPartCount=hasPartIndex?getKnownPartCount({preloadSegment:segment})-1:0;return name+" ["+(seq+index)+"/"+(seq+segmentLen)+"]"+(hasPartIndex?" part ["+partIndex+"/"+zeroBasedPartCount+"]":"")+(" segment start/end ["+segment.start+" => "+segment.end+"]")+(hasPartIndex?" part start/end ["+part.start+" => "+part.end+"]":"")+(" startOfSegment ["+startOfSegment+"]")+(" duration ["+duration5+"]")+(" timeline ["+timeline2+"]")+(" selected by ["+selection+"]")+(" playlist ["+id+"]");};var timingInfoPropertyForMedia=function timingInfoPropertyForMedia2(mediaType){return mediaType+"TimingInfo";};var timestampOffsetForSegment=function timestampOffsetForSegment2(_ref){var segmentTimeline=_ref.segmentTimeline,currentTimeline=_ref.currentTimeline,startOfSegment=_ref.startOfSegment,buffered=_ref.buffered,overrideCheck=_ref.overrideCheck;if(!overrideCheck&&segmentTimeline===currentTimeline){return null;}if(segmentTimeline<currentTimeline){return startOfSegment;}return buffered.length?buffered.end(buffered.length-1):startOfSegment;};var shouldWaitForTimelineChange=function shouldWaitForTimelineChange2(_ref2){var timelineChangeController=_ref2.timelineChangeController,currentTimeline=_ref2.currentTimeline,segmentTimeline=_ref2.segmentTimeline,loaderType=_ref2.loaderType,audioDisabled=_ref2.audioDisabled;if(currentTimeline===segmentTimeline){return false;}if(loaderType==="audio"){var lastMainTimelineChange=timelineChangeController.lastTimelineChange({type:"main"});return!lastMainTimelineChange||lastMainTimelineChange.to!==segmentTimeline;}if(loaderType==="main"&&audioDisabled){var pendingAudioTimelineChange=timelineChangeController.pendingTimelineChange({type:"audio"});if(pendingAudioTimelineChange&&pendingAudioTimelineChange.to===segmentTimeline){return false;}return true;}return false;};var mediaDuration=function mediaDuration2(timingInfos){var maxDuration=0;["video","audio"].forEach(function(type2){var typeTimingInfo=timingInfos[type2+"TimingInfo"];if(!typeTimingInfo){return;}var start2=typeTimingInfo.start,end=typeTimingInfo.end;var duration5;if(typeof start2==="bigint"||typeof end==="bigint"){duration5=import_window6["default"].BigInt(end)-import_window6["default"].BigInt(start2);}else if(typeof start2==="number"&&typeof end==="number"){duration5=end-start2;}if(typeof duration5!=="undefined"&&duration5>maxDuration){maxDuration=duration5;}});if(typeof maxDuration==="bigint"&&maxDuration<Number.MAX_SAFE_INTEGER){maxDuration=Number(maxDuration);}return maxDuration;};var segmentTooLong=function segmentTooLong2(_ref3){var segmentDuration=_ref3.segmentDuration,maxDuration=_ref3.maxDuration;if(!segmentDuration){return false;}return Math.round(segmentDuration)>maxDuration+TIME_FUDGE_FACTOR;};var getTroublesomeSegmentDurationMessage=function getTroublesomeSegmentDurationMessage2(segmentInfo,sourceType){if(sourceType!=="hls"){return null;}var segmentDuration=mediaDuration({audioTimingInfo:segmentInfo.audioTimingInfo,videoTimingInfo:segmentInfo.videoTimingInfo});if(!segmentDuration){return null;}var targetDuration=segmentInfo.playlist.targetDuration;var isSegmentWayTooLong=segmentTooLong({segmentDuration:segmentDuration,maxDuration:targetDuration*2});var isSegmentSlightlyTooLong=segmentTooLong({segmentDuration:segmentDuration,maxDuration:targetDuration});var segmentTooLongMessage="Segment with index "+segmentInfo.mediaIndex+" "+("from playlist "+segmentInfo.playlist.id+" ")+("has a duration of "+segmentDuration+" ")+("when the reported duration is "+segmentInfo.duration+" ")+("and the target duration is "+targetDuration+". ")+"For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1";if(isSegmentWayTooLong||isSegmentSlightlyTooLong){return{severity:isSegmentWayTooLong?"warn":"info",message:segmentTooLongMessage};}return null;};var SegmentLoader=/* @__PURE__ */function(_videojs$EventTarget){_inheritsLoose3(SegmentLoader2,_videojs$EventTarget);function SegmentLoader2(settings,options){var _this;_this=_videojs$EventTarget.call(this)||this;if(!settings){throw new TypeError("Initialization settings are required");}if(typeof settings.currentTime!=="function"){throw new TypeError("No currentTime getter specified");}if(!settings.mediaSource){throw new TypeError("No MediaSource specified");}_this.bandwidth=settings.bandwidth;_this.throughput={rate:0,count:0};_this.roundTrip=NaN;_this.resetStats_();_this.mediaIndex=null;_this.partIndex=null;_this.hasPlayed_=settings.hasPlayed;_this.currentTime_=settings.currentTime;_this.seekable_=settings.seekable;_this.seeking_=settings.seeking;_this.duration_=settings.duration;_this.mediaSource_=settings.mediaSource;_this.vhs_=settings.vhs;_this.loaderType_=settings.loaderType;_this.currentMediaInfo_=void 0;_this.startingMediaInfo_=void 0;_this.segmentMetadataTrack_=settings.segmentMetadataTrack;_this.goalBufferLength_=settings.goalBufferLength;_this.sourceType_=settings.sourceType;_this.sourceUpdater_=settings.sourceUpdater;_this.inbandTextTracks_=settings.inbandTextTracks;_this.state_="INIT";_this.timelineChangeController_=settings.timelineChangeController;_this.shouldSaveSegmentTimingInfo_=true;_this.parse708captions_=settings.parse708captions;_this.useDtsForTimestampOffset_=settings.useDtsForTimestampOffset;_this.captionServices_=settings.captionServices;_this.experimentalExactManifestTimings=settings.experimentalExactManifestTimings;_this.checkBufferTimeout_=null;_this.error_=void 0;_this.currentTimeline_=-1;_this.pendingSegment_=null;_this.xhrOptions_=null;_this.pendingSegments_=[];_this.audioDisabled_=false;_this.isPendingTimestampOffset_=false;_this.gopBuffer_=[];_this.timeMapping_=0;_this.safeAppend_=videojs.browser.IE_VERSION>=11;_this.appendInitSegment_={audio:true,video:true};_this.playlistOfLastInitSegment_={audio:null,video:null};_this.callQueue_=[];_this.loadQueue_=[];_this.metadataQueue_={id3:[],caption:[]};_this.waitingOnRemove_=false;_this.quotaExceededErrorRetryTimeout_=null;_this.activeInitSegmentId_=null;_this.initSegments_={};_this.cacheEncryptionKeys_=settings.cacheEncryptionKeys;_this.keyCache_={};_this.decrypter_=settings.decrypter;_this.syncController_=settings.syncController;_this.syncPoint_={segmentIndex:0,time:0};_this.transmuxer_=_this.createTransmuxer_();_this.triggerSyncInfoUpdate_=function(){return _this.trigger("syncinfoupdate");};_this.syncController_.on("syncinfoupdate",_this.triggerSyncInfoUpdate_);_this.mediaSource_.addEventListener("sourceopen",function(){if(!_this.isEndOfStream_()){_this.ended_=false;}});_this.fetchAtBuffer_=false;_this.logger_=logger("SegmentLoader["+_this.loaderType_+"]");Object.defineProperty(_assertThisInitialized3(_this),"state",{get:function get7(){return this.state_;},set:function set4(newState){if(newState!==this.state_){this.logger_(this.state_+" -> "+newState);this.state_=newState;this.trigger("statechange");}}});_this.sourceUpdater_.on("ready",function(){if(_this.hasEnoughInfoToAppend_()){_this.processCallQueue_();}});if(_this.loaderType_==="main"){_this.timelineChangeController_.on("pendingtimelinechange",function(){if(_this.hasEnoughInfoToAppend_()){_this.processCallQueue_();}});}if(_this.loaderType_==="audio"){_this.timelineChangeController_.on("timelinechange",function(){if(_this.hasEnoughInfoToLoad_()){_this.processLoadQueue_();}if(_this.hasEnoughInfoToAppend_()){_this.processCallQueue_();}});}return _this;}var _proto=SegmentLoader2.prototype;_proto.createTransmuxer_=function createTransmuxer_(){return segmentTransmuxer.createTransmuxer({remux:false,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:true,parse708captions:this.parse708captions_,captionServices:this.captionServices_});};_proto.resetStats_=function resetStats_(){this.mediaBytesTransferred=0;this.mediaRequests=0;this.mediaRequestsAborted=0;this.mediaRequestsTimedout=0;this.mediaRequestsErrored=0;this.mediaTransferDuration=0;this.mediaSecondsLoaded=0;this.mediaAppends=0;};_proto.dispose=function dispose(){this.trigger("dispose");this.state="DISPOSED";this.pause();this.abort_();if(this.transmuxer_){this.transmuxer_.terminate();}this.resetStats_();if(this.checkBufferTimeout_){import_window6["default"].clearTimeout(this.checkBufferTimeout_);}if(this.syncController_&&this.triggerSyncInfoUpdate_){this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_);}this.off();};_proto.setAudio=function setAudio(enable){this.audioDisabled_=!enable;if(enable){this.appendInitSegment_.audio=true;}else{this.sourceUpdater_.removeAudio(0,this.duration_());}};_proto.abort=function abort2(){if(this.state!=="WAITING"){if(this.pendingSegment_){this.pendingSegment_=null;}return;}this.abort_();this.state="READY";if(!this.paused()){this.monitorBuffer_();}};_proto.abort_=function abort_(){if(this.pendingSegment_&&this.pendingSegment_.abortRequests){this.pendingSegment_.abortRequests();}this.pendingSegment_=null;this.callQueue_=[];this.loadQueue_=[];this.metadataQueue_.id3=[];this.metadataQueue_.caption=[];this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_);this.waitingOnRemove_=false;import_window6["default"].clearTimeout(this.quotaExceededErrorRetryTimeout_);this.quotaExceededErrorRetryTimeout_=null;};_proto.checkForAbort_=function checkForAbort_(requestId){if(this.state==="APPENDING"&&!this.pendingSegment_){this.state="READY";return true;}if(!this.pendingSegment_||this.pendingSegment_.requestId!==requestId){return true;}return false;};_proto.error=function error(_error){if(typeof _error!=="undefined"){this.logger_("error occurred:",_error);this.error_=_error;}this.pendingSegment_=null;return this.error_;};_proto.endOfStream=function endOfStream2(){this.ended_=true;if(this.transmuxer_){segmentTransmuxer.reset(this.transmuxer_);}this.gopBuffer_.length=0;this.pause();this.trigger("ended");};_proto.buffered_=function buffered_(){var trackInfo=this.getMediaInfo_();if(!this.sourceUpdater_||!trackInfo){return videojs.createTimeRanges();}if(this.loaderType_==="main"){var hasAudio=trackInfo.hasAudio,hasVideo=trackInfo.hasVideo,isMuxed3=trackInfo.isMuxed;if(hasVideo&&hasAudio&&!this.audioDisabled_&&!isMuxed3){return this.sourceUpdater_.buffered();}if(hasVideo){return this.sourceUpdater_.videoBuffered();}}return this.sourceUpdater_.audioBuffered();};_proto.initSegmentForMap=function initSegmentForMap(map,set4){if(set4===void 0){set4=false;}if(!map){return null;}var id=initSegmentId(map);var storedMap=this.initSegments_[id];if(set4&&!storedMap&&map.bytes){this.initSegments_[id]=storedMap={resolvedUri:map.resolvedUri,byterange:map.byterange,bytes:map.bytes,tracks:map.tracks,timescales:map.timescales};}return storedMap||map;};_proto.segmentKey=function segmentKey(key,set4){if(set4===void 0){set4=false;}if(!key){return null;}var id=segmentKeyId(key);var storedKey=this.keyCache_[id];if(this.cacheEncryptionKeys_&&set4&&!storedKey&&key.bytes){this.keyCache_[id]=storedKey={resolvedUri:key.resolvedUri,bytes:key.bytes};}var result={resolvedUri:(storedKey||key).resolvedUri};if(storedKey){result.bytes=storedKey.bytes;}return result;};_proto.couldBeginLoading_=function couldBeginLoading_(){return this.playlist_&&!this.paused();};_proto.load=function load(){this.monitorBuffer_();if(!this.playlist_){return;}if(this.state==="INIT"&&this.couldBeginLoading_()){return this.init_();}if(!this.couldBeginLoading_()||this.state!=="READY"&&this.state!=="INIT"){return;}this.state="READY";};_proto.init_=function init_(){this.state="READY";this.resetEverything();return this.monitorBuffer_();};_proto.playlist=function playlist(newPlaylist,options){if(options===void 0){options={};}if(!newPlaylist){return;}var oldPlaylist=this.playlist_;var segmentInfo=this.pendingSegment_;this.playlist_=newPlaylist;this.xhrOptions_=options;if(this.state==="INIT"){newPlaylist.syncInfo={mediaSequence:newPlaylist.mediaSequence,time:0};if(this.loaderType_==="main"){this.syncController_.setDateTimeMappingForStart(newPlaylist);}}var oldId=null;if(oldPlaylist){if(oldPlaylist.id){oldId=oldPlaylist.id;}else if(oldPlaylist.uri){oldId=oldPlaylist.uri;}}this.logger_("playlist update ["+oldId+" => "+(newPlaylist.id||newPlaylist.uri)+"]");this.trigger("syncinfoupdate");if(this.state==="INIT"&&this.couldBeginLoading_()){return this.init_();}if(!oldPlaylist||oldPlaylist.uri!==newPlaylist.uri){if(this.mediaIndex!==null){if(!newPlaylist.endList){this.resetLoader();}else{this.resyncLoader();}}this.currentMediaInfo_=void 0;this.trigger("playlistupdate");return;}var mediaSequenceDiff=newPlaylist.mediaSequence-oldPlaylist.mediaSequence;this.logger_("live window shift ["+mediaSequenceDiff+"]");if(this.mediaIndex!==null){this.mediaIndex-=mediaSequenceDiff;if(this.mediaIndex<0){this.mediaIndex=null;this.partIndex=null;}else{var segment=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!segment.parts||!segment.parts.length||!segment.parts[this.partIndex])){var mediaIndex=this.mediaIndex;this.logger_("currently processing part (index "+this.partIndex+") no longer exists.");this.resetLoader();this.mediaIndex=mediaIndex;}}}if(segmentInfo){segmentInfo.mediaIndex-=mediaSequenceDiff;if(segmentInfo.mediaIndex<0){segmentInfo.mediaIndex=null;segmentInfo.partIndex=null;}else{if(segmentInfo.mediaIndex>=0){segmentInfo.segment=newPlaylist.segments[segmentInfo.mediaIndex];}if(segmentInfo.partIndex>=0&&segmentInfo.segment.parts){segmentInfo.part=segmentInfo.segment.parts[segmentInfo.partIndex];}}}this.syncController_.saveExpiredSegmentInfo(oldPlaylist,newPlaylist);};_proto.pause=function pause(){if(this.checkBufferTimeout_){import_window6["default"].clearTimeout(this.checkBufferTimeout_);this.checkBufferTimeout_=null;}};_proto.paused=function paused(){return this.checkBufferTimeout_===null;};_proto.resetEverything=function resetEverything(done){this.ended_=false;this.appendInitSegment_={audio:true,video:true};this.resetLoader();this.remove(0,Infinity,done);if(this.transmuxer_){this.transmuxer_.postMessage({action:"clearAllMp4Captions"});this.transmuxer_.postMessage({action:"reset"});}};_proto.resetLoader=function resetLoader(){this.fetchAtBuffer_=false;this.resyncLoader();};_proto.resyncLoader=function resyncLoader(){if(this.transmuxer_){segmentTransmuxer.reset(this.transmuxer_);}this.mediaIndex=null;this.partIndex=null;this.syncPoint_=null;this.isPendingTimestampOffset_=false;this.callQueue_=[];this.loadQueue_=[];this.metadataQueue_.id3=[];this.metadataQueue_.caption=[];this.abort();if(this.transmuxer_){this.transmuxer_.postMessage({action:"clearParsedMp4Captions"});}};_proto.remove=function remove2(start2,end,done,force){if(done===void 0){done=function done2(){};}if(force===void 0){force=false;}if(end===Infinity){end=this.duration_();}if(end<=start2){this.logger_("skipping remove because end ${end} is <= start ${start}");return;}if(!this.sourceUpdater_||!this.getMediaInfo_()){this.logger_("skipping remove because no source updater or starting media info");return;}var removesRemaining=1;var removeFinished=function removeFinished2(){removesRemaining--;if(removesRemaining===0){done();}};if(force||!this.audioDisabled_){removesRemaining++;this.sourceUpdater_.removeAudio(start2,end,removeFinished);}if(force||this.loaderType_==="main"){this.gopBuffer_=removeGopBuffer(this.gopBuffer_,start2,end,this.timeMapping_);removesRemaining++;this.sourceUpdater_.removeVideo(start2,end,removeFinished);}for(var track in this.inbandTextTracks_){removeCuesFromTrack(start2,end,this.inbandTextTracks_[track]);}removeCuesFromTrack(start2,end,this.segmentMetadataTrack_);removeFinished();};_proto.monitorBuffer_=function monitorBuffer_(){if(this.checkBufferTimeout_){import_window6["default"].clearTimeout(this.checkBufferTimeout_);}this.checkBufferTimeout_=import_window6["default"].setTimeout(this.monitorBufferTick_.bind(this),1);};_proto.monitorBufferTick_=function monitorBufferTick_(){if(this.state==="READY"){this.fillBuffer_();}if(this.checkBufferTimeout_){import_window6["default"].clearTimeout(this.checkBufferTimeout_);}this.checkBufferTimeout_=import_window6["default"].setTimeout(this.monitorBufferTick_.bind(this),CHECK_BUFFER_DELAY);};_proto.fillBuffer_=function fillBuffer_(){if(this.sourceUpdater_.updating()){return;}var segmentInfo=this.chooseNextRequest_();if(!segmentInfo){return;}if(typeof segmentInfo.timestampOffset==="number"){this.isPendingTimestampOffset_=false;this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:segmentInfo.timeline});}this.loadSegment_(segmentInfo);};_proto.isEndOfStream_=function isEndOfStream_(mediaIndex,playlist,partIndex){if(mediaIndex===void 0){mediaIndex=this.mediaIndex;}if(playlist===void 0){playlist=this.playlist_;}if(partIndex===void 0){partIndex=this.partIndex;}if(!playlist||!this.mediaSource_){return false;}var segment=typeof mediaIndex==="number"&&playlist.segments[mediaIndex];var appendedLastSegment=mediaIndex+1===playlist.segments.length;var appendedLastPart=!segment||!segment.parts||partIndex+1===segment.parts.length;return playlist.endList&&this.mediaSource_.readyState==="open"&&appendedLastSegment&&appendedLastPart;};_proto.chooseNextRequest_=function chooseNextRequest_(){var buffered=this.buffered_();var bufferedEnd=lastBufferedEnd(buffered)||0;var bufferedTime=timeAheadOf(buffered,this.currentTime_());var preloaded=!this.hasPlayed_()&&bufferedTime>=1;var haveEnoughBuffer=bufferedTime>=this.goalBufferLength_();var segments=this.playlist_.segments;if(!segments.length||preloaded||haveEnoughBuffer){return null;}this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_());var next={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:Boolean(!this.syncPoint_)};if(next.isSyncRequest){next.mediaIndex=getSyncSegmentCandidate(this.currentTimeline_,segments,bufferedEnd);}else if(this.mediaIndex!==null){var segment=segments[this.mediaIndex];var partIndex=typeof this.partIndex==="number"?this.partIndex:-1;next.startOfSegment=segment.end?segment.end:bufferedEnd;if(segment.parts&&segment.parts[partIndex+1]){next.mediaIndex=this.mediaIndex;next.partIndex=partIndex+1;}else{next.mediaIndex=this.mediaIndex+1;}}else{var _Playlist$getMediaInf=Playlist.getMediaInfoForTime({experimentalExactManifestTimings:this.experimentalExactManifestTimings,playlist:this.playlist_,currentTime:this.fetchAtBuffer_?bufferedEnd:this.currentTime_(),startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time}),segmentIndex=_Playlist$getMediaInf.segmentIndex,startTime=_Playlist$getMediaInf.startTime,_partIndex=_Playlist$getMediaInf.partIndex;next.getMediaInfoForTime=this.fetchAtBuffer_?"bufferedEnd "+bufferedEnd:"currentTime "+this.currentTime_();next.mediaIndex=segmentIndex;next.startOfSegment=startTime;next.partIndex=_partIndex;}var nextSegment=segments[next.mediaIndex];var nextPart=nextSegment&&typeof next.partIndex==="number"&&nextSegment.parts&&nextSegment.parts[next.partIndex];if(!nextSegment||typeof next.partIndex==="number"&&!nextPart){return null;}if(typeof next.partIndex!=="number"&&nextSegment.parts){next.partIndex=0;nextPart=nextSegment.parts[0];}if(!bufferedTime&&nextPart&&!nextPart.independent){if(next.partIndex===0){var lastSegment=segments[next.mediaIndex-1];var lastSegmentLastPart=lastSegment.parts&&lastSegment.parts.length&&lastSegment.parts[lastSegment.parts.length-1];if(lastSegmentLastPart&&lastSegmentLastPart.independent){next.mediaIndex-=1;next.partIndex=lastSegment.parts.length-1;next.independent="previous segment";}}else if(nextSegment.parts[next.partIndex-1].independent){next.partIndex-=1;next.independent="previous part";}}var ended=this.mediaSource_&&this.mediaSource_.readyState==="ended";if(next.mediaIndex>=segments.length-1&&ended&&!this.seeking_()){return null;}return this.generateSegmentInfo_(next);};_proto.generateSegmentInfo_=function generateSegmentInfo_(options){var independent=options.independent,playlist=options.playlist,mediaIndex=options.mediaIndex,startOfSegment=options.startOfSegment,isSyncRequest=options.isSyncRequest,partIndex=options.partIndex,forceTimestampOffset=options.forceTimestampOffset,getMediaInfoForTime3=options.getMediaInfoForTime;var segment=playlist.segments[mediaIndex];var part=typeof partIndex==="number"&&segment.parts[partIndex];var segmentInfo={requestId:"segment-loader-"+Math.random(),uri:part&&part.resolvedUri||segment.resolvedUri,mediaIndex:mediaIndex,partIndex:part?partIndex:null,isSyncRequest:isSyncRequest,startOfSegment:startOfSegment,playlist:playlist,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:segment.timeline,duration:part&&part.duration||segment.duration,segment:segment,part:part,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:getMediaInfoForTime3,independent:independent};var overrideCheck=typeof forceTimestampOffset!=="undefined"?forceTimestampOffset:this.isPendingTimestampOffset_;segmentInfo.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:segment.timeline,currentTimeline:this.currentTimeline_,startOfSegment:startOfSegment,buffered:this.buffered_(),overrideCheck:overrideCheck});var audioBufferedEnd=lastBufferedEnd(this.sourceUpdater_.audioBuffered());if(typeof audioBufferedEnd==="number"){segmentInfo.audioAppendStart=audioBufferedEnd-this.sourceUpdater_.audioTimestampOffset();}if(this.sourceUpdater_.videoBuffered().length){segmentInfo.gopsToAlignWith=gopsSafeToAlignWith(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_);}return segmentInfo;};_proto.timestampOffsetForSegment_=function timestampOffsetForSegment_(options){return timestampOffsetForSegment(options);};_proto.earlyAbortWhenNeeded_=function earlyAbortWhenNeeded_(stats){if(this.vhs_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH){return;}if(Date.now()-(stats.firstBytesReceivedAt||Date.now())<1e3){return;}var currentTime=this.currentTime_();var measuredBandwidth=stats.bandwidth;var segmentDuration=this.pendingSegment_.duration;var requestTimeRemaining=Playlist.estimateSegmentRequestTime(segmentDuration,measuredBandwidth,this.playlist_,stats.bytesReceived);var timeUntilRebuffer$1=timeUntilRebuffer(this.buffered_(),currentTime,this.vhs_.tech_.playbackRate())-1;if(requestTimeRemaining<=timeUntilRebuffer$1){return;}var switchCandidate=minRebufferMaxBandwidthSelector({master:this.vhs_.playlists.master,currentTime:currentTime,bandwidth:measuredBandwidth,duration:this.duration_(),segmentDuration:segmentDuration,timeUntilRebuffer:timeUntilRebuffer$1,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(!switchCandidate){return;}var rebufferingImpact=requestTimeRemaining-timeUntilRebuffer$1;var timeSavedBySwitching=rebufferingImpact-switchCandidate.rebufferingImpact;var minimumTimeSaving=0.5;if(timeUntilRebuffer$1<=TIME_FUDGE_FACTOR){minimumTimeSaving=1;}if(!switchCandidate.playlist||switchCandidate.playlist.uri===this.playlist_.uri||timeSavedBySwitching<minimumTimeSaving){return;}this.bandwidth=switchCandidate.playlist.attributes.BANDWIDTH*Config.BANDWIDTH_VARIANCE+1;this.trigger("earlyabort");};_proto.handleAbort_=function handleAbort_(segmentInfo){this.logger_("Aborting "+segmentInfoString(segmentInfo));this.mediaRequestsAborted+=1;};_proto.handleProgress_=function handleProgress_(event,simpleSegment){this.earlyAbortWhenNeeded_(simpleSegment.stats);if(this.checkForAbort_(simpleSegment.requestId)){return;}this.trigger("progress");};_proto.handleTrackInfo_=function handleTrackInfo_(simpleSegment,trackInfo){this.earlyAbortWhenNeeded_(simpleSegment.stats);if(this.checkForAbort_(simpleSegment.requestId)){return;}if(this.checkForIllegalMediaSwitch(trackInfo)){return;}trackInfo=trackInfo||{};if(!shallowEqual(this.currentMediaInfo_,trackInfo)){this.appendInitSegment_={audio:true,video:true};this.startingMediaInfo_=trackInfo;this.currentMediaInfo_=trackInfo;this.logger_("trackinfo update",trackInfo);this.trigger("trackinfo");}if(this.checkForAbort_(simpleSegment.requestId)){return;}this.pendingSegment_.trackInfo=trackInfo;if(this.hasEnoughInfoToAppend_()){this.processCallQueue_();}};_proto.handleTimingInfo_=function handleTimingInfo_(simpleSegment,mediaType,timeType,time){this.earlyAbortWhenNeeded_(simpleSegment.stats);if(this.checkForAbort_(simpleSegment.requestId)){return;}var segmentInfo=this.pendingSegment_;var timingInfoProperty=timingInfoPropertyForMedia(mediaType);segmentInfo[timingInfoProperty]=segmentInfo[timingInfoProperty]||{};segmentInfo[timingInfoProperty][timeType]=time;this.logger_("timinginfo: "+mediaType+" - "+timeType+" - "+time);if(this.hasEnoughInfoToAppend_()){this.processCallQueue_();}};_proto.handleCaptions_=function handleCaptions_(simpleSegment,captionData){var _this2=this;this.earlyAbortWhenNeeded_(simpleSegment.stats);if(this.checkForAbort_(simpleSegment.requestId)){return;}if(captionData.length===0){this.logger_("SegmentLoader received no captions from a caption event");return;}var segmentInfo=this.pendingSegment_;if(!segmentInfo.hasAppendedData_){this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,simpleSegment,captionData));return;}var timestampOffset2=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();var captionTracks={};captionData.forEach(function(caption){captionTracks[caption.stream]=captionTracks[caption.stream]||{startTime:Infinity,captions:[],endTime:0};var captionTrack=captionTracks[caption.stream];captionTrack.startTime=Math.min(captionTrack.startTime,caption.startTime+timestampOffset2);captionTrack.endTime=Math.max(captionTrack.endTime,caption.endTime+timestampOffset2);captionTrack.captions.push(caption);});Object.keys(captionTracks).forEach(function(trackName){var _captionTracks$trackN=captionTracks[trackName],startTime=_captionTracks$trackN.startTime,endTime=_captionTracks$trackN.endTime,captions=_captionTracks$trackN.captions;var inbandTextTracks=_this2.inbandTextTracks_;_this2.logger_("adding cues from "+startTime+" -> "+endTime+" for "+trackName);createCaptionsTrackIfNotExists(inbandTextTracks,_this2.vhs_.tech_,trackName);removeCuesFromTrack(startTime,endTime,inbandTextTracks[trackName]);addCaptionData({captionArray:captions,inbandTextTracks:inbandTextTracks,timestampOffset:timestampOffset2});});if(this.transmuxer_){this.transmuxer_.postMessage({action:"clearParsedMp4Captions"});}};_proto.handleId3_=function handleId3_(simpleSegment,id3Frames,dispatchType){this.earlyAbortWhenNeeded_(simpleSegment.stats);if(this.checkForAbort_(simpleSegment.requestId)){return;}var segmentInfo=this.pendingSegment_;if(!segmentInfo.hasAppendedData_){this.metadataQueue_.id3.push(this.handleId3_.bind(this,simpleSegment,id3Frames,dispatchType));return;}var timestampOffset2=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();createMetadataTrackIfNotExists(this.inbandTextTracks_,dispatchType,this.vhs_.tech_);addMetadata({inbandTextTracks:this.inbandTextTracks_,metadataArray:id3Frames,timestampOffset:timestampOffset2,videoDuration:this.duration_()});};_proto.processMetadataQueue_=function processMetadataQueue_(){this.metadataQueue_.id3.forEach(function(fn){return fn();});this.metadataQueue_.caption.forEach(function(fn){return fn();});this.metadataQueue_.id3=[];this.metadataQueue_.caption=[];};_proto.processCallQueue_=function processCallQueue_(){var callQueue=this.callQueue_;this.callQueue_=[];callQueue.forEach(function(fun){return fun();});};_proto.processLoadQueue_=function processLoadQueue_(){var loadQueue=this.loadQueue_;this.loadQueue_=[];loadQueue.forEach(function(fun){return fun();});};_proto.hasEnoughInfoToLoad_=function hasEnoughInfoToLoad_(){if(this.loaderType_!=="audio"){return true;}var segmentInfo=this.pendingSegment_;if(!segmentInfo){return false;}if(!this.getCurrentMediaInfo_()){return true;}if(shouldWaitForTimelineChange({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:segmentInfo.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_})){return false;}return true;};_proto.getCurrentMediaInfo_=function getCurrentMediaInfo_(segmentInfo){if(segmentInfo===void 0){segmentInfo=this.pendingSegment_;}return segmentInfo&&segmentInfo.trackInfo||this.currentMediaInfo_;};_proto.getMediaInfo_=function getMediaInfo_(segmentInfo){if(segmentInfo===void 0){segmentInfo=this.pendingSegment_;}return this.getCurrentMediaInfo_(segmentInfo)||this.startingMediaInfo_;};_proto.hasEnoughInfoToAppend_=function hasEnoughInfoToAppend_(){if(!this.sourceUpdater_.ready()){return false;}if(this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_){return false;}var segmentInfo=this.pendingSegment_;var trackInfo=this.getCurrentMediaInfo_();if(!segmentInfo||!trackInfo){return false;}var hasAudio=trackInfo.hasAudio,hasVideo=trackInfo.hasVideo,isMuxed3=trackInfo.isMuxed;if(hasVideo&&!segmentInfo.videoTimingInfo){return false;}if(hasAudio&&!this.audioDisabled_&&!isMuxed3&&!segmentInfo.audioTimingInfo){return false;}if(shouldWaitForTimelineChange({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:segmentInfo.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_})){return false;}return true;};_proto.handleData_=function handleData_3(simpleSegment,result){this.earlyAbortWhenNeeded_(simpleSegment.stats);if(this.checkForAbort_(simpleSegment.requestId)){return;}if(this.callQueue_.length||!this.hasEnoughInfoToAppend_()){this.callQueue_.push(this.handleData_.bind(this,simpleSegment,result));return;}var segmentInfo=this.pendingSegment_;this.setTimeMapping_(segmentInfo.timeline);this.updateMediaSecondsLoaded_(segmentInfo.part||segmentInfo.segment);if(this.mediaSource_.readyState==="closed"){return;}if(simpleSegment.map){simpleSegment.map=this.initSegmentForMap(simpleSegment.map,true);segmentInfo.segment.map=simpleSegment.map;}if(simpleSegment.key){this.segmentKey(simpleSegment.key,true);}segmentInfo.isFmp4=simpleSegment.isFmp4;segmentInfo.timingInfo=segmentInfo.timingInfo||{};if(segmentInfo.isFmp4){this.trigger("fmp4");segmentInfo.timingInfo.start=segmentInfo[timingInfoPropertyForMedia(result.type)].start;}else{var trackInfo=this.getCurrentMediaInfo_();var useVideoTimingInfo=this.loaderType_==="main"&&trackInfo&&trackInfo.hasVideo;var firstVideoFrameTimeForData;if(useVideoTimingInfo){firstVideoFrameTimeForData=segmentInfo.videoTimingInfo.start;}segmentInfo.timingInfo.start=this.trueSegmentStart_({currentStart:segmentInfo.timingInfo.start,playlist:segmentInfo.playlist,mediaIndex:segmentInfo.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:useVideoTimingInfo,firstVideoFrameTimeForData:firstVideoFrameTimeForData,videoTimingInfo:segmentInfo.videoTimingInfo,audioTimingInfo:segmentInfo.audioTimingInfo});}this.updateAppendInitSegmentStatus(segmentInfo,result.type);this.updateSourceBufferTimestampOffset_(segmentInfo);if(segmentInfo.isSyncRequest){this.updateTimingInfoEnd_(segmentInfo);this.syncController_.saveSegmentTimingInfo({segmentInfo:segmentInfo,shouldSaveTimelineMapping:this.loaderType_==="main"});var next=this.chooseNextRequest_();if(next.mediaIndex!==segmentInfo.mediaIndex||next.partIndex!==segmentInfo.partIndex){this.logger_("sync segment was incorrect, not appending");return;}this.logger_("sync segment was correct, appending");}segmentInfo.hasAppendedData_=true;this.processMetadataQueue_();this.appendData_(segmentInfo,result);};_proto.updateAppendInitSegmentStatus=function updateAppendInitSegmentStatus(segmentInfo,type2){if(this.loaderType_==="main"&&typeof segmentInfo.timestampOffset==="number"&&!segmentInfo.changedTimestampOffset){this.appendInitSegment_={audio:true,video:true};}if(this.playlistOfLastInitSegment_[type2]!==segmentInfo.playlist){this.appendInitSegment_[type2]=true;}};_proto.getInitSegmentAndUpdateState_=function getInitSegmentAndUpdateState_(_ref4){var type2=_ref4.type,initSegment=_ref4.initSegment,map=_ref4.map,playlist=_ref4.playlist;if(map){var id=initSegmentId(map);if(this.activeInitSegmentId_===id){return null;}initSegment=this.initSegmentForMap(map,true).bytes;this.activeInitSegmentId_=id;}if(initSegment&&this.appendInitSegment_[type2]){this.playlistOfLastInitSegment_[type2]=playlist;this.appendInitSegment_[type2]=false;this.activeInitSegmentId_=null;return initSegment;}return null;};_proto.handleQuotaExceededError_=function handleQuotaExceededError_(_ref5,error){var _this3=this;var segmentInfo=_ref5.segmentInfo,type2=_ref5.type,bytes=_ref5.bytes;var audioBuffered=this.sourceUpdater_.audioBuffered();var videoBuffered=this.sourceUpdater_.videoBuffered();if(audioBuffered.length>1){this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+timeRangesToArray(audioBuffered).join(", "));}if(videoBuffered.length>1){this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+timeRangesToArray(videoBuffered).join(", "));}var audioBufferStart=audioBuffered.length?audioBuffered.start(0):0;var audioBufferEnd=audioBuffered.length?audioBuffered.end(audioBuffered.length-1):0;var videoBufferStart=videoBuffered.length?videoBuffered.start(0):0;var videoBufferEnd=videoBuffered.length?videoBuffered.end(videoBuffered.length-1):0;if(audioBufferEnd-audioBufferStart<=MIN_BACK_BUFFER&&videoBufferEnd-videoBufferStart<=MIN_BACK_BUFFER){this.logger_("On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. "+("Appended byte length: "+bytes.byteLength+", ")+("audio buffer: "+timeRangesToArray(audioBuffered).join(", ")+", ")+("video buffer: "+timeRangesToArray(videoBuffered).join(", ")+", "));this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:Infinity});this.trigger("error");return;}this.waitingOnRemove_=true;this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:segmentInfo,type:type2,bytes:bytes}));var currentTime=this.currentTime_();var timeToRemoveUntil=currentTime-MIN_BACK_BUFFER;this.logger_("On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to "+timeToRemoveUntil);this.remove(0,timeToRemoveUntil,function(){_this3.logger_("On QUOTA_EXCEEDED_ERR, retrying append in "+MIN_BACK_BUFFER+"s");_this3.waitingOnRemove_=false;_this3.quotaExceededErrorRetryTimeout_=import_window6["default"].setTimeout(function(){_this3.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue");_this3.quotaExceededErrorRetryTimeout_=null;_this3.processCallQueue_();},MIN_BACK_BUFFER*1e3);},true);};_proto.handleAppendError_=function handleAppendError_(_ref6,error){var segmentInfo=_ref6.segmentInfo,type2=_ref6.type,bytes=_ref6.bytes;if(!error){return;}if(error.code===QUOTA_EXCEEDED_ERR){this.handleQuotaExceededError_({segmentInfo:segmentInfo,type:type2,bytes:bytes});return;}this.logger_("Received non QUOTA_EXCEEDED_ERR on append",error);this.error(type2+" append of "+bytes.length+"b failed for segment "+("#"+segmentInfo.mediaIndex+" in playlist "+segmentInfo.playlist.id));this.trigger("appenderror");};_proto.appendToSourceBuffer_=function appendToSourceBuffer_(_ref7){var segmentInfo=_ref7.segmentInfo,type2=_ref7.type,initSegment=_ref7.initSegment,data=_ref7.data,bytes=_ref7.bytes;if(!bytes){var segments=[data];var byteLength=data.byteLength;if(initSegment){segments.unshift(initSegment);byteLength+=initSegment.byteLength;}bytes=concatSegments({bytes:byteLength,segments:segments});}this.sourceUpdater_.appendBuffer({segmentInfo:segmentInfo,type:type2,bytes:bytes},this.handleAppendError_.bind(this,{segmentInfo:segmentInfo,type:type2,bytes:bytes}));};_proto.handleSegmentTimingInfo_=function handleSegmentTimingInfo_(type2,requestId,segmentTimingInfo){if(!this.pendingSegment_||requestId!==this.pendingSegment_.requestId){return;}var segment=this.pendingSegment_.segment;var timingInfoProperty=type2+"TimingInfo";if(!segment[timingInfoProperty]){segment[timingInfoProperty]={};}segment[timingInfoProperty].transmuxerPrependedSeconds=segmentTimingInfo.prependedContentDuration||0;segment[timingInfoProperty].transmuxedPresentationStart=segmentTimingInfo.start.presentation;segment[timingInfoProperty].transmuxedDecodeStart=segmentTimingInfo.start.decode;segment[timingInfoProperty].transmuxedPresentationEnd=segmentTimingInfo.end.presentation;segment[timingInfoProperty].transmuxedDecodeEnd=segmentTimingInfo.end.decode;segment[timingInfoProperty].baseMediaDecodeTime=segmentTimingInfo.baseMediaDecodeTime;};_proto.appendData_=function appendData_(segmentInfo,result){var type2=result.type,data=result.data;if(!data||!data.byteLength){return;}if(type2==="audio"&&this.audioDisabled_){return;}var initSegment=this.getInitSegmentAndUpdateState_({type:type2,initSegment:result.initSegment,playlist:segmentInfo.playlist,map:segmentInfo.isFmp4?segmentInfo.segment.map:null});this.appendToSourceBuffer_({segmentInfo:segmentInfo,type:type2,initSegment:initSegment,data:data});};_proto.loadSegment_=function loadSegment_(segmentInfo){var _this4=this;this.state="WAITING";this.pendingSegment_=segmentInfo;this.trimBackBuffer_(segmentInfo);if(typeof segmentInfo.timestampOffset==="number"){if(this.transmuxer_){this.transmuxer_.postMessage({action:"clearAllMp4Captions"});}}if(!this.hasEnoughInfoToLoad_()){this.loadQueue_.push(function(){var options=_extends({},segmentInfo,{forceTimestampOffset:true});_extends(segmentInfo,_this4.generateSegmentInfo_(options));_this4.isPendingTimestampOffset_=false;_this4.updateTransmuxerAndRequestSegment_(segmentInfo);});return;}this.updateTransmuxerAndRequestSegment_(segmentInfo);};_proto.updateTransmuxerAndRequestSegment_=function updateTransmuxerAndRequestSegment_(segmentInfo){var _this5=this;if(this.shouldUpdateTransmuxerTimestampOffset_(segmentInfo.timestampOffset)){this.gopBuffer_.length=0;segmentInfo.gopsToAlignWith=[];this.timeMapping_=0;this.transmuxer_.postMessage({action:"reset"});this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:segmentInfo.timestampOffset});}var simpleSegment=this.createSimplifiedSegmentObj_(segmentInfo);var isEndOfStream=this.isEndOfStream_(segmentInfo.mediaIndex,segmentInfo.playlist,segmentInfo.partIndex);var isWalkingForward=this.mediaIndex!==null;var isDiscontinuity=segmentInfo.timeline!==this.currentTimeline_&&segmentInfo.timeline>0;var isEndOfTimeline=isEndOfStream||isWalkingForward&&isDiscontinuity;this.logger_("Requesting "+segmentInfoString(segmentInfo));if(simpleSegment.map&&!simpleSegment.map.bytes){this.logger_("going to request init segment.");this.appendInitSegment_={video:true,audio:true};}segmentInfo.abortRequests=mediaSegmentRequest({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:simpleSegment,abortFn:this.handleAbort_.bind(this,segmentInfo),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",segmentInfo.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",segmentInfo.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:isEndOfTimeline,endedTimelineFn:function endedTimelineFn(){_this5.logger_("received endedtimeline callback");},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:function onTransmuxerLog(_ref8){var message=_ref8.message,level=_ref8.level,stream=_ref8.stream;_this5.logger_(segmentInfoString(segmentInfo)+" logged from transmuxer stream "+stream+" as a "+level+": "+message);}});};_proto.trimBackBuffer_=function trimBackBuffer_(segmentInfo){var removeToTime=safeBackBufferTrimTime(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);if(removeToTime>0){this.remove(0,removeToTime);}};_proto.createSimplifiedSegmentObj_=function createSimplifiedSegmentObj_(segmentInfo){var segment=segmentInfo.segment;var part=segmentInfo.part;var simpleSegment={resolvedUri:part?part.resolvedUri:segment.resolvedUri,byterange:part?part.byterange:segment.byterange,requestId:segmentInfo.requestId,transmuxer:segmentInfo.transmuxer,audioAppendStart:segmentInfo.audioAppendStart,gopsToAlignWith:segmentInfo.gopsToAlignWith,part:segmentInfo.part};var previousSegment=segmentInfo.playlist.segments[segmentInfo.mediaIndex-1];if(previousSegment&&previousSegment.timeline===segment.timeline){if(previousSegment.videoTimingInfo){simpleSegment.baseStartTime=previousSegment.videoTimingInfo.transmuxedDecodeEnd;}else if(previousSegment.audioTimingInfo){simpleSegment.baseStartTime=previousSegment.audioTimingInfo.transmuxedDecodeEnd;}}if(segment.key){var iv=segment.key.iv||new Uint32Array([0,0,0,segmentInfo.mediaIndex+segmentInfo.playlist.mediaSequence]);simpleSegment.key=this.segmentKey(segment.key);simpleSegment.key.iv=iv;}if(segment.map){simpleSegment.map=this.initSegmentForMap(segment.map);}return simpleSegment;};_proto.saveTransferStats_=function saveTransferStats_(stats){this.mediaRequests+=1;if(stats){this.mediaBytesTransferred+=stats.bytesReceived;this.mediaTransferDuration+=stats.roundTripTime;}};_proto.saveBandwidthRelatedStats_=function saveBandwidthRelatedStats_(duration5,stats){this.pendingSegment_.byteLength=stats.bytesReceived;if(duration5<MIN_SEGMENT_DURATION_TO_SAVE_STATS){this.logger_("Ignoring segment's bandwidth because its duration of "+duration5+(" is less than the min to record "+MIN_SEGMENT_DURATION_TO_SAVE_STATS));return;}this.bandwidth=stats.bandwidth;this.roundTrip=stats.roundTripTime;};_proto.handleTimeout_=function handleTimeout_(){this.mediaRequestsTimedout+=1;this.bandwidth=1;this.roundTrip=NaN;this.trigger("bandwidthupdate");};_proto.segmentRequestFinished_=function segmentRequestFinished_(error,simpleSegment,result){if(this.callQueue_.length){this.callQueue_.push(this.segmentRequestFinished_.bind(this,error,simpleSegment,result));return;}this.saveTransferStats_(simpleSegment.stats);if(!this.pendingSegment_){return;}if(simpleSegment.requestId!==this.pendingSegment_.requestId){return;}if(error){this.pendingSegment_=null;this.state="READY";if(error.code===REQUEST_ERRORS.ABORTED){return;}this.pause();if(error.code===REQUEST_ERRORS.TIMEOUT){this.handleTimeout_();return;}this.mediaRequestsErrored+=1;this.error(error);this.trigger("error");return;}var segmentInfo=this.pendingSegment_;this.saveBandwidthRelatedStats_(segmentInfo.duration,simpleSegment.stats);segmentInfo.endOfAllRequests=simpleSegment.endOfAllRequests;if(result.gopInfo){this.gopBuffer_=updateGopBuffer(this.gopBuffer_,result.gopInfo,this.safeAppend_);}this.state="APPENDING";this.trigger("appending");this.waitForAppendsToComplete_(segmentInfo);};_proto.setTimeMapping_=function setTimeMapping_(timeline2){var timelineMapping=this.syncController_.mappingForTimeline(timeline2);if(timelineMapping!==null){this.timeMapping_=timelineMapping;}};_proto.updateMediaSecondsLoaded_=function updateMediaSecondsLoaded_(segment){if(typeof segment.start==="number"&&typeof segment.end==="number"){this.mediaSecondsLoaded+=segment.end-segment.start;}else{this.mediaSecondsLoaded+=segment.duration;}};_proto.shouldUpdateTransmuxerTimestampOffset_=function shouldUpdateTransmuxerTimestampOffset_(timestampOffset2){if(timestampOffset2===null){return false;}if(this.loaderType_==="main"&&timestampOffset2!==this.sourceUpdater_.videoTimestampOffset()){return true;}if(!this.audioDisabled_&&timestampOffset2!==this.sourceUpdater_.audioTimestampOffset()){return true;}return false;};_proto.trueSegmentStart_=function trueSegmentStart_(_ref9){var currentStart=_ref9.currentStart,playlist=_ref9.playlist,mediaIndex=_ref9.mediaIndex,firstVideoFrameTimeForData=_ref9.firstVideoFrameTimeForData,currentVideoTimestampOffset=_ref9.currentVideoTimestampOffset,useVideoTimingInfo=_ref9.useVideoTimingInfo,videoTimingInfo=_ref9.videoTimingInfo,audioTimingInfo=_ref9.audioTimingInfo;if(typeof currentStart!=="undefined"){return currentStart;}if(!useVideoTimingInfo){return audioTimingInfo.start;}var previousSegment=playlist.segments[mediaIndex-1];if(mediaIndex===0||!previousSegment||typeof previousSegment.start==="undefined"||previousSegment.end!==firstVideoFrameTimeForData+currentVideoTimestampOffset){return firstVideoFrameTimeForData;}return videoTimingInfo.start;};_proto.waitForAppendsToComplete_=function waitForAppendsToComplete_(segmentInfo){var trackInfo=this.getCurrentMediaInfo_(segmentInfo);if(!trackInfo){this.error({message:"No starting media returned, likely due to an unsupported media format.",blacklistDuration:Infinity});this.trigger("error");return;}var hasAudio=trackInfo.hasAudio,hasVideo=trackInfo.hasVideo,isMuxed3=trackInfo.isMuxed;var waitForVideo=this.loaderType_==="main"&&hasVideo;var waitForAudio=!this.audioDisabled_&&hasAudio&&!isMuxed3;segmentInfo.waitingOnAppends=0;if(!segmentInfo.hasAppendedData_){if(!segmentInfo.timingInfo&&typeof segmentInfo.timestampOffset==="number"){this.isPendingTimestampOffset_=true;}segmentInfo.timingInfo={start:0};segmentInfo.waitingOnAppends++;if(!this.isPendingTimestampOffset_){this.updateSourceBufferTimestampOffset_(segmentInfo);this.processMetadataQueue_();}this.checkAppendsDone_(segmentInfo);return;}if(waitForVideo){segmentInfo.waitingOnAppends++;}if(waitForAudio){segmentInfo.waitingOnAppends++;}if(waitForVideo){this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,segmentInfo));}if(waitForAudio){this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,segmentInfo));}};_proto.checkAppendsDone_=function checkAppendsDone_(segmentInfo){if(this.checkForAbort_(segmentInfo.requestId)){return;}segmentInfo.waitingOnAppends--;if(segmentInfo.waitingOnAppends===0){this.handleAppendsDone_();}};_proto.checkForIllegalMediaSwitch=function checkForIllegalMediaSwitch(trackInfo){var illegalMediaSwitchError=illegalMediaSwitch(this.loaderType_,this.getCurrentMediaInfo_(),trackInfo);if(illegalMediaSwitchError){this.error({message:illegalMediaSwitchError,blacklistDuration:Infinity});this.trigger("error");return true;}return false;};_proto.updateSourceBufferTimestampOffset_=function updateSourceBufferTimestampOffset_(segmentInfo){if(segmentInfo.timestampOffset===null||typeof segmentInfo.timingInfo.start!=="number"||segmentInfo.changedTimestampOffset||this.loaderType_!=="main"){return;}var didChange=false;segmentInfo.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:segmentInfo.segment.videoTimingInfo,audioTimingInfo:segmentInfo.segment.audioTimingInfo,timingInfo:segmentInfo.timingInfo});segmentInfo.changedTimestampOffset=true;if(segmentInfo.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()){this.sourceUpdater_.videoTimestampOffset(segmentInfo.timestampOffset);didChange=true;}if(segmentInfo.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()){this.sourceUpdater_.audioTimestampOffset(segmentInfo.timestampOffset);didChange=true;}if(didChange){this.trigger("timestampoffset");}};_proto.getSegmentStartTimeForTimestampOffsetCalculation_=function getSegmentStartTimeForTimestampOffsetCalculation_(_ref10){var videoTimingInfo=_ref10.videoTimingInfo,audioTimingInfo=_ref10.audioTimingInfo,timingInfo=_ref10.timingInfo;if(!this.useDtsForTimestampOffset_){return timingInfo.start;}if(videoTimingInfo&&typeof videoTimingInfo.transmuxedDecodeStart==="number"){return videoTimingInfo.transmuxedDecodeStart;}if(audioTimingInfo&&typeof audioTimingInfo.transmuxedDecodeStart==="number"){return audioTimingInfo.transmuxedDecodeStart;}return timingInfo.start;};_proto.updateTimingInfoEnd_=function updateTimingInfoEnd_(segmentInfo){segmentInfo.timingInfo=segmentInfo.timingInfo||{};var trackInfo=this.getMediaInfo_();var useVideoTimingInfo=this.loaderType_==="main"&&trackInfo&&trackInfo.hasVideo;var prioritizedTimingInfo=useVideoTimingInfo&&segmentInfo.videoTimingInfo?segmentInfo.videoTimingInfo:segmentInfo.audioTimingInfo;if(!prioritizedTimingInfo){return;}segmentInfo.timingInfo.end=typeof prioritizedTimingInfo.end==="number"?prioritizedTimingInfo.end:prioritizedTimingInfo.start+segmentInfo.duration;};_proto.handleAppendsDone_=function handleAppendsDone_(){if(this.pendingSegment_){this.trigger("appendsdone");}if(!this.pendingSegment_){this.state="READY";if(!this.paused()){this.monitorBuffer_();}return;}var segmentInfo=this.pendingSegment_;this.updateTimingInfoEnd_(segmentInfo);if(this.shouldSaveSegmentTimingInfo_){this.syncController_.saveSegmentTimingInfo({segmentInfo:segmentInfo,shouldSaveTimelineMapping:this.loaderType_==="main"});}var segmentDurationMessage=getTroublesomeSegmentDurationMessage(segmentInfo,this.sourceType_);if(segmentDurationMessage){if(segmentDurationMessage.severity==="warn"){videojs.log.warn(segmentDurationMessage.message);}else{this.logger_(segmentDurationMessage.message);}}this.recordThroughput_(segmentInfo);this.pendingSegment_=null;this.state="READY";if(segmentInfo.isSyncRequest){this.trigger("syncinfoupdate");if(!segmentInfo.hasAppendedData_){this.logger_("Throwing away un-appended sync request "+segmentInfoString(segmentInfo));return;}}this.logger_("Appended "+segmentInfoString(segmentInfo));this.addSegmentMetadataCue_(segmentInfo);this.fetchAtBuffer_=true;if(this.currentTimeline_!==segmentInfo.timeline){this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:segmentInfo.timeline});if(this.loaderType_==="main"&&!this.audioDisabled_){this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:segmentInfo.timeline});}}this.currentTimeline_=segmentInfo.timeline;this.trigger("syncinfoupdate");var segment=segmentInfo.segment;var part=segmentInfo.part;var badSegmentGuess=segment.end&&this.currentTime_()-segment.end>segmentInfo.playlist.targetDuration*3;var badPartGuess=part&&part.end&&this.currentTime_()-part.end>segmentInfo.playlist.partTargetDuration*3;if(badSegmentGuess||badPartGuess){this.logger_("bad "+(badSegmentGuess?"segment":"part")+" "+segmentInfoString(segmentInfo));this.resetEverything();return;}var isWalkingForward=this.mediaIndex!==null;if(isWalkingForward){this.trigger("bandwidthupdate");}this.trigger("progress");this.mediaIndex=segmentInfo.mediaIndex;this.partIndex=segmentInfo.partIndex;if(this.isEndOfStream_(segmentInfo.mediaIndex,segmentInfo.playlist,segmentInfo.partIndex)){this.endOfStream();}this.trigger("appended");if(segmentInfo.hasAppendedData_){this.mediaAppends++;}if(!this.paused()){this.monitorBuffer_();}};_proto.recordThroughput_=function recordThroughput_(segmentInfo){if(segmentInfo.duration<MIN_SEGMENT_DURATION_TO_SAVE_STATS){this.logger_("Ignoring segment's throughput because its duration of "+segmentInfo.duration+(" is less than the min to record "+MIN_SEGMENT_DURATION_TO_SAVE_STATS));return;}var rate=this.throughput.rate;var segmentProcessingTime=Date.now()-segmentInfo.endOfAllRequests+1;var segmentProcessingThroughput=Math.floor(segmentInfo.byteLength/segmentProcessingTime*8*1e3);this.throughput.rate+=(segmentProcessingThroughput-rate)/++this.throughput.count;};_proto.addSegmentMetadataCue_=function addSegmentMetadataCue_(segmentInfo){if(!this.segmentMetadataTrack_){return;}var segment=segmentInfo.segment;var start2=segment.start;var end=segment.end;if(!finite(start2)||!finite(end)){return;}removeCuesFromTrack(start2,end,this.segmentMetadataTrack_);var Cue=import_window6["default"].WebKitDataCue||import_window6["default"].VTTCue;var value={custom:segment.custom,dateTimeObject:segment.dateTimeObject,dateTimeString:segment.dateTimeString,bandwidth:segmentInfo.playlist.attributes.BANDWIDTH,resolution:segmentInfo.playlist.attributes.RESOLUTION,codecs:segmentInfo.playlist.attributes.CODECS,byteLength:segmentInfo.byteLength,uri:segmentInfo.uri,timeline:segmentInfo.timeline,playlist:segmentInfo.playlist.id,start:start2,end:end};var data=JSON.stringify(value);var cue=new Cue(start2,end,data);cue.value=value;this.segmentMetadataTrack_.addCue(cue);};return SegmentLoader2;}(videojs.EventTarget);function noop(){}var toTitleCase2=function toTitleCase3(string){if(typeof string!=="string"){return string;}return string.replace(/./,function(w){return w.toUpperCase();});};var bufferTypes=["video","audio"];var _updating=function updating(type2,sourceUpdater){var sourceBuffer=sourceUpdater[type2+"Buffer"];return sourceBuffer&&sourceBuffer.updating||sourceUpdater.queuePending[type2];};var nextQueueIndexOfType=function nextQueueIndexOfType2(type2,queue){for(var i=0;i<queue.length;i++){var queueEntry=queue[i];if(queueEntry.type==="mediaSource"){return null;}if(queueEntry.type===type2){return i;}}return null;};var shiftQueue=function shiftQueue2(type2,sourceUpdater){if(sourceUpdater.queue.length===0){return;}var queueIndex=0;var queueEntry=sourceUpdater.queue[queueIndex];if(queueEntry.type==="mediaSource"){if(!sourceUpdater.updating()&&sourceUpdater.mediaSource.readyState!=="closed"){sourceUpdater.queue.shift();queueEntry.action(sourceUpdater);if(queueEntry.doneFn){queueEntry.doneFn();}shiftQueue2("audio",sourceUpdater);shiftQueue2("video",sourceUpdater);}return;}if(type2==="mediaSource"){return;}if(!sourceUpdater.ready()||sourceUpdater.mediaSource.readyState==="closed"||_updating(type2,sourceUpdater)){return;}if(queueEntry.type!==type2){queueIndex=nextQueueIndexOfType(type2,sourceUpdater.queue);if(queueIndex===null){return;}queueEntry=sourceUpdater.queue[queueIndex];}sourceUpdater.queue.splice(queueIndex,1);sourceUpdater.queuePending[type2]=queueEntry;queueEntry.action(type2,sourceUpdater);if(!queueEntry.doneFn){sourceUpdater.queuePending[type2]=null;shiftQueue2(type2,sourceUpdater);return;}};var cleanupBuffer=function cleanupBuffer2(type2,sourceUpdater){var buffer=sourceUpdater[type2+"Buffer"];var titleType=toTitleCase2(type2);if(!buffer){return;}buffer.removeEventListener("updateend",sourceUpdater["on"+titleType+"UpdateEnd_"]);buffer.removeEventListener("error",sourceUpdater["on"+titleType+"Error_"]);sourceUpdater.codecs[type2]=null;sourceUpdater[type2+"Buffer"]=null;};var inSourceBuffers=function inSourceBuffers2(mediaSource,sourceBuffer){return mediaSource&&sourceBuffer&&Array.prototype.indexOf.call(mediaSource.sourceBuffers,sourceBuffer)!==-1;};var actions={appendBuffer:function appendBuffer(bytes,segmentInfo,onError2){return function(type2,sourceUpdater){var sourceBuffer=sourceUpdater[type2+"Buffer"];if(!inSourceBuffers(sourceUpdater.mediaSource,sourceBuffer)){return;}sourceUpdater.logger_("Appending segment "+segmentInfo.mediaIndex+"'s "+bytes.length+" bytes to "+type2+"Buffer");try{sourceBuffer.appendBuffer(bytes);}catch(e){sourceUpdater.logger_("Error with code "+e.code+" "+(e.code===QUOTA_EXCEEDED_ERR?"(QUOTA_EXCEEDED_ERR) ":"")+("when appending segment "+segmentInfo.mediaIndex+" to "+type2+"Buffer"));sourceUpdater.queuePending[type2]=null;onError2(e);}};},remove:function remove(start2,end){return function(type2,sourceUpdater){var sourceBuffer=sourceUpdater[type2+"Buffer"];if(!inSourceBuffers(sourceUpdater.mediaSource,sourceBuffer)){return;}sourceUpdater.logger_("Removing "+start2+" to "+end+" from "+type2+"Buffer");try{sourceBuffer.remove(start2,end);}catch(e){sourceUpdater.logger_("Remove "+start2+" to "+end+" from "+type2+"Buffer failed");}};},timestampOffset:function timestampOffset(offset){return function(type2,sourceUpdater){var sourceBuffer=sourceUpdater[type2+"Buffer"];if(!inSourceBuffers(sourceUpdater.mediaSource,sourceBuffer)){return;}sourceUpdater.logger_("Setting "+type2+"timestampOffset to "+offset);sourceBuffer.timestampOffset=offset;};},callback:function callback(_callback5){return function(type2,sourceUpdater){_callback5();};},endOfStream:function endOfStream(error){return function(sourceUpdater){if(sourceUpdater.mediaSource.readyState!=="open"){return;}sourceUpdater.logger_("Calling mediaSource endOfStream("+(error||"")+")");try{sourceUpdater.mediaSource.endOfStream(error);}catch(e){videojs.log.warn("Failed to call media source endOfStream",e);}};},duration:function duration4(_duration){return function(sourceUpdater){sourceUpdater.logger_("Setting mediaSource duration to "+_duration);try{sourceUpdater.mediaSource.duration=_duration;}catch(e){videojs.log.warn("Failed to set media source duration",e);}};},abort:function abort(){return function(type2,sourceUpdater){if(sourceUpdater.mediaSource.readyState!=="open"){return;}var sourceBuffer=sourceUpdater[type2+"Buffer"];if(!inSourceBuffers(sourceUpdater.mediaSource,sourceBuffer)){return;}sourceUpdater.logger_("calling abort on "+type2+"Buffer");try{sourceBuffer.abort();}catch(e){videojs.log.warn("Failed to abort on "+type2+"Buffer",e);}};},addSourceBuffer:function addSourceBuffer(type2,codec){return function(sourceUpdater){var titleType=toTitleCase2(type2);var mime=getMimeForCodec(codec);sourceUpdater.logger_("Adding "+type2+"Buffer with codec "+codec+" to mediaSource");var sourceBuffer=sourceUpdater.mediaSource.addSourceBuffer(mime);sourceBuffer.addEventListener("updateend",sourceUpdater["on"+titleType+"UpdateEnd_"]);sourceBuffer.addEventListener("error",sourceUpdater["on"+titleType+"Error_"]);sourceUpdater.codecs[type2]=codec;sourceUpdater[type2+"Buffer"]=sourceBuffer;};},removeSourceBuffer:function removeSourceBuffer(type2){return function(sourceUpdater){var sourceBuffer=sourceUpdater[type2+"Buffer"];cleanupBuffer(type2,sourceUpdater);if(!inSourceBuffers(sourceUpdater.mediaSource,sourceBuffer)){return;}sourceUpdater.logger_("Removing "+type2+"Buffer with codec "+sourceUpdater.codecs[type2]+" from mediaSource");try{sourceUpdater.mediaSource.removeSourceBuffer(sourceBuffer);}catch(e){videojs.log.warn("Failed to removeSourceBuffer "+type2+"Buffer",e);}};},changeType:function changeType(codec){return function(type2,sourceUpdater){var sourceBuffer=sourceUpdater[type2+"Buffer"];var mime=getMimeForCodec(codec);if(!inSourceBuffers(sourceUpdater.mediaSource,sourceBuffer)){return;}if(sourceUpdater.codecs[type2]===codec){return;}sourceUpdater.logger_("changing "+type2+"Buffer codec from "+sourceUpdater.codecs[type2]+" to "+codec);sourceBuffer.changeType(mime);sourceUpdater.codecs[type2]=codec;};}};var pushQueue=function pushQueue2(_ref){var type2=_ref.type,sourceUpdater=_ref.sourceUpdater,action=_ref.action,doneFn=_ref.doneFn,name=_ref.name;sourceUpdater.queue.push({type:type2,action:action,doneFn:doneFn,name:name});shiftQueue(type2,sourceUpdater);};var onUpdateend=function onUpdateend2(type2,sourceUpdater){return function(e){if(sourceUpdater.queuePending[type2]){var doneFn=sourceUpdater.queuePending[type2].doneFn;sourceUpdater.queuePending[type2]=null;if(doneFn){doneFn(sourceUpdater[type2+"Error_"]);}}shiftQueue(type2,sourceUpdater);};};var SourceUpdater=/* @__PURE__ */function(_videojs$EventTarget){_inheritsLoose3(SourceUpdater2,_videojs$EventTarget);function SourceUpdater2(mediaSource){var _this;_this=_videojs$EventTarget.call(this)||this;_this.mediaSource=mediaSource;_this.sourceopenListener_=function(){return shiftQueue("mediaSource",_assertThisInitialized3(_this));};_this.mediaSource.addEventListener("sourceopen",_this.sourceopenListener_);_this.logger_=logger("SourceUpdater");_this.audioTimestampOffset_=0;_this.videoTimestampOffset_=0;_this.queue=[];_this.queuePending={audio:null,video:null};_this.delayedAudioAppendQueue_=[];_this.videoAppendQueued_=false;_this.codecs={};_this.onVideoUpdateEnd_=onUpdateend("video",_assertThisInitialized3(_this));_this.onAudioUpdateEnd_=onUpdateend("audio",_assertThisInitialized3(_this));_this.onVideoError_=function(e){_this.videoError_=e;};_this.onAudioError_=function(e){_this.audioError_=e;};_this.createdSourceBuffers_=false;_this.initializedEme_=false;_this.triggeredReady_=false;return _this;}var _proto=SourceUpdater2.prototype;_proto.initializedEme=function initializedEme(){this.initializedEme_=true;this.triggerReady();};_proto.hasCreatedSourceBuffers=function hasCreatedSourceBuffers(){return this.createdSourceBuffers_;};_proto.hasInitializedAnyEme=function hasInitializedAnyEme(){return this.initializedEme_;};_proto.ready=function ready(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme();};_proto.createSourceBuffers=function createSourceBuffers(codecs){if(this.hasCreatedSourceBuffers()){return;}this.addOrChangeSourceBuffers(codecs);this.createdSourceBuffers_=true;this.trigger("createdsourcebuffers");this.triggerReady();};_proto.triggerReady=function triggerReady(){if(this.ready()&&!this.triggeredReady_){this.triggeredReady_=true;this.trigger("ready");}};_proto.addSourceBuffer=function addSourceBuffer2(type2,codec){pushQueue({type:"mediaSource",sourceUpdater:this,action:actions.addSourceBuffer(type2,codec),name:"addSourceBuffer"});};_proto.abort=function abort2(type2){pushQueue({type:type2,sourceUpdater:this,action:actions.abort(type2),name:"abort"});};_proto.removeSourceBuffer=function removeSourceBuffer2(type2){if(!this.canRemoveSourceBuffer()){videojs.log.error("removeSourceBuffer is not supported!");return;}pushQueue({type:"mediaSource",sourceUpdater:this,action:actions.removeSourceBuffer(type2),name:"removeSourceBuffer"});};_proto.canRemoveSourceBuffer=function canRemoveSourceBuffer(){return!videojs.browser.IE_VERSION&&!videojs.browser.IS_FIREFOX&&import_window6["default"].MediaSource&&import_window6["default"].MediaSource.prototype&&typeof import_window6["default"].MediaSource.prototype.removeSourceBuffer==="function";};SourceUpdater2.canChangeType=function canChangeType(){return import_window6["default"].SourceBuffer&&import_window6["default"].SourceBuffer.prototype&&typeof import_window6["default"].SourceBuffer.prototype.changeType==="function";};_proto.canChangeType=function canChangeType(){return this.constructor.canChangeType();};_proto.changeType=function changeType2(type2,codec){if(!this.canChangeType()){videojs.log.error("changeType is not supported!");return;}pushQueue({type:type2,sourceUpdater:this,action:actions.changeType(codec),name:"changeType"});};_proto.addOrChangeSourceBuffers=function addOrChangeSourceBuffers(codecs){var _this2=this;if(!codecs||_typeof(codecs)!=="object"||Object.keys(codecs).length===0){throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");}Object.keys(codecs).forEach(function(type2){var codec=codecs[type2];if(!_this2.hasCreatedSourceBuffers()){return _this2.addSourceBuffer(type2,codec);}if(_this2.canChangeType()){_this2.changeType(type2,codec);}});};_proto.appendBuffer=function appendBuffer2(options,doneFn){var _this3=this;var segmentInfo=options.segmentInfo,type2=options.type,bytes=options.bytes;this.processedAppend_=true;if(type2==="audio"&&this.videoBuffer&&!this.videoAppendQueued_){this.delayedAudioAppendQueue_.push([options,doneFn]);this.logger_("delayed audio append of "+bytes.length+" until video append");return;}var onError2=doneFn;pushQueue({type:type2,sourceUpdater:this,action:actions.appendBuffer(bytes,segmentInfo||{mediaIndex:-1},onError2),doneFn:doneFn,name:"appendBuffer"});if(type2==="video"){this.videoAppendQueued_=true;if(!this.delayedAudioAppendQueue_.length){return;}var queue=this.delayedAudioAppendQueue_.slice();this.logger_("queuing delayed audio "+queue.length+" appendBuffers");this.delayedAudioAppendQueue_.length=0;queue.forEach(function(que){_this3.appendBuffer.apply(_this3,que);});}};_proto.audioBuffered=function audioBuffered(){if(!inSourceBuffers(this.mediaSource,this.audioBuffer)){return videojs.createTimeRange();}return this.audioBuffer.buffered?this.audioBuffer.buffered:videojs.createTimeRange();};_proto.videoBuffered=function videoBuffered(){if(!inSourceBuffers(this.mediaSource,this.videoBuffer)){return videojs.createTimeRange();}return this.videoBuffer.buffered?this.videoBuffer.buffered:videojs.createTimeRange();};_proto.buffered=function buffered(){var video=inSourceBuffers(this.mediaSource,this.videoBuffer)?this.videoBuffer:null;var audio=inSourceBuffers(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;if(audio&&!video){return this.audioBuffered();}if(video&&!audio){return this.videoBuffered();}return bufferIntersection(this.audioBuffered(),this.videoBuffered());};_proto.setDuration=function setDuration(duration5,doneFn){if(doneFn===void 0){doneFn=noop;}pushQueue({type:"mediaSource",sourceUpdater:this,action:actions.duration(duration5),name:"duration",doneFn:doneFn});};_proto.endOfStream=function endOfStream2(error,doneFn){if(error===void 0){error=null;}if(doneFn===void 0){doneFn=noop;}if(typeof error!=="string"){error=void 0;}pushQueue({type:"mediaSource",sourceUpdater:this,action:actions.endOfStream(error),name:"endOfStream",doneFn:doneFn});};_proto.removeAudio=function removeAudio(start2,end,done){if(done===void 0){done=noop;}if(!this.audioBuffered().length||this.audioBuffered().end(0)===0){done();return;}pushQueue({type:"audio",sourceUpdater:this,action:actions.remove(start2,end),doneFn:done,name:"remove"});};_proto.removeVideo=function removeVideo(start2,end,done){if(done===void 0){done=noop;}if(!this.videoBuffered().length||this.videoBuffered().end(0)===0){done();return;}pushQueue({type:"video",sourceUpdater:this,action:actions.remove(start2,end),doneFn:done,name:"remove"});};_proto.updating=function updating2(){if(_updating("audio",this)||_updating("video",this)){return true;}return false;};_proto.audioTimestampOffset=function audioTimestampOffset(offset){if(typeof offset!=="undefined"&&this.audioBuffer&&this.audioTimestampOffset_!==offset){pushQueue({type:"audio",sourceUpdater:this,action:actions.timestampOffset(offset),name:"timestampOffset"});this.audioTimestampOffset_=offset;}return this.audioTimestampOffset_;};_proto.videoTimestampOffset=function videoTimestampOffset(offset){if(typeof offset!=="undefined"&&this.videoBuffer&&this.videoTimestampOffset!==offset){pushQueue({type:"video",sourceUpdater:this,action:actions.timestampOffset(offset),name:"timestampOffset"});this.videoTimestampOffset_=offset;}return this.videoTimestampOffset_;};_proto.audioQueueCallback=function audioQueueCallback(callback2){if(!this.audioBuffer){return;}pushQueue({type:"audio",sourceUpdater:this,action:actions.callback(callback2),name:"callback"});};_proto.videoQueueCallback=function videoQueueCallback(callback2){if(!this.videoBuffer){return;}pushQueue({type:"video",sourceUpdater:this,action:actions.callback(callback2),name:"callback"});};_proto.dispose=function dispose(){var _this4=this;this.trigger("dispose");bufferTypes.forEach(function(type2){_this4.abort(type2);if(_this4.canRemoveSourceBuffer()){_this4.removeSourceBuffer(type2);}else{_this4[type2+"QueueCallback"](function(){return cleanupBuffer(type2,_this4);});}});this.videoAppendQueued_=false;this.delayedAudioAppendQueue_.length=0;if(this.sourceopenListener_){this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_);}this.off();};return SourceUpdater2;}(videojs.EventTarget);var uint8ToUtf8=function uint8ToUtf82(uintArray){return decodeURIComponent(escape(String.fromCharCode.apply(null,uintArray)));};var VTT_LINE_TERMINATORS=new Uint8Array("\n\n".split("").map(function(_char3){return _char3.charCodeAt(0);}));var VTTSegmentLoader=/* @__PURE__ */function(_SegmentLoader){_inheritsLoose3(VTTSegmentLoader2,_SegmentLoader);function VTTSegmentLoader2(settings,options){var _this;if(options===void 0){options={};}_this=_SegmentLoader.call(this,settings,options)||this;_this.mediaSource_=null;_this.subtitlesTrack_=null;_this.loaderType_="subtitle";_this.featuresNativeTextTracks_=settings.featuresNativeTextTracks;_this.shouldSaveSegmentTimingInfo_=false;return _this;}var _proto=VTTSegmentLoader2.prototype;_proto.createTransmuxer_=function createTransmuxer_(){return null;};_proto.buffered_=function buffered_(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length){return videojs.createTimeRanges();}var cues=this.subtitlesTrack_.cues;var start2=cues[0].startTime;var end=cues[cues.length-1].startTime;return videojs.createTimeRanges([[start2,end]]);};_proto.initSegmentForMap=function initSegmentForMap(map,set4){if(set4===void 0){set4=false;}if(!map){return null;}var id=initSegmentId(map);var storedMap=this.initSegments_[id];if(set4&&!storedMap&&map.bytes){var combinedByteLength=VTT_LINE_TERMINATORS.byteLength+map.bytes.byteLength;var combinedSegment=new Uint8Array(combinedByteLength);combinedSegment.set(map.bytes);combinedSegment.set(VTT_LINE_TERMINATORS,map.bytes.byteLength);this.initSegments_[id]=storedMap={resolvedUri:map.resolvedUri,byterange:map.byterange,bytes:combinedSegment};}return storedMap||map;};_proto.couldBeginLoading_=function couldBeginLoading_(){return this.playlist_&&this.subtitlesTrack_&&!this.paused();};_proto.init_=function init_(){this.state="READY";this.resetEverything();return this.monitorBuffer_();};_proto.track=function track(_track){if(typeof _track==="undefined"){return this.subtitlesTrack_;}this.subtitlesTrack_=_track;if(this.state==="INIT"&&this.couldBeginLoading_()){this.init_();}return this.subtitlesTrack_;};_proto.remove=function remove2(start2,end){removeCuesFromTrack(start2,end,this.subtitlesTrack_);};_proto.fillBuffer_=function fillBuffer_(){var _this2=this;var segmentInfo=this.chooseNextRequest_();if(!segmentInfo){return;}if(this.syncController_.timestampOffsetForTimeline(segmentInfo.timeline)===null){var checkTimestampOffset=function checkTimestampOffset2(){_this2.state="READY";if(!_this2.paused()){_this2.monitorBuffer_();}};this.syncController_.one("timestampoffset",checkTimestampOffset);this.state="WAITING_ON_TIMELINE";return;}this.loadSegment_(segmentInfo);};_proto.timestampOffsetForSegment_=function timestampOffsetForSegment_(){return null;};_proto.chooseNextRequest_=function chooseNextRequest_(){return this.skipEmptySegments_(_SegmentLoader.prototype.chooseNextRequest_.call(this));};_proto.skipEmptySegments_=function skipEmptySegments_(segmentInfo){while(segmentInfo&&segmentInfo.segment.empty){if(segmentInfo.mediaIndex+1>=segmentInfo.playlist.segments.length){segmentInfo=null;break;}segmentInfo=this.generateSegmentInfo_({playlist:segmentInfo.playlist,mediaIndex:segmentInfo.mediaIndex+1,startOfSegment:segmentInfo.startOfSegment+segmentInfo.duration,isSyncRequest:segmentInfo.isSyncRequest});}return segmentInfo;};_proto.stopForError=function stopForError(error){this.error(error);this.state="READY";this.pause();this.trigger("error");};_proto.segmentRequestFinished_=function segmentRequestFinished_(error,simpleSegment,result){var _this3=this;if(!this.subtitlesTrack_){this.state="READY";return;}this.saveTransferStats_(simpleSegment.stats);if(!this.pendingSegment_){this.state="READY";this.mediaRequestsAborted+=1;return;}if(error){if(error.code===REQUEST_ERRORS.TIMEOUT){this.handleTimeout_();}if(error.code===REQUEST_ERRORS.ABORTED){this.mediaRequestsAborted+=1;}else{this.mediaRequestsErrored+=1;}this.stopForError(error);return;}var segmentInfo=this.pendingSegment_;this.saveBandwidthRelatedStats_(segmentInfo.duration,simpleSegment.stats);this.state="APPENDING";this.trigger("appending");var segment=segmentInfo.segment;if(segment.map){segment.map.bytes=simpleSegment.map.bytes;}segmentInfo.bytes=simpleSegment.bytes;if(typeof import_window6["default"].WebVTT!=="function"&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var loadHandler;var errorHandler=function errorHandler2(){_this3.subtitlesTrack_.tech_.off("vttjsloaded",loadHandler);_this3.stopForError({message:"Error loading vtt.js"});return;};loadHandler=function loadHandler2(){_this3.subtitlesTrack_.tech_.off("vttjserror",errorHandler);_this3.segmentRequestFinished_(error,simpleSegment,result);};this.state="WAITING_ON_VTTJS";this.subtitlesTrack_.tech_.one("vttjsloaded",loadHandler);this.subtitlesTrack_.tech_.one("vttjserror",errorHandler);return;}segment.requested=true;try{this.parseVTTCues_(segmentInfo);}catch(e){this.stopForError({message:e.message});return;}this.updateTimeMapping_(segmentInfo,this.syncController_.timelines[segmentInfo.timeline],this.playlist_);if(segmentInfo.cues.length){segmentInfo.timingInfo={start:segmentInfo.cues[0].startTime,end:segmentInfo.cues[segmentInfo.cues.length-1].endTime};}else{segmentInfo.timingInfo={start:segmentInfo.startOfSegment,end:segmentInfo.startOfSegment+segmentInfo.duration};}if(segmentInfo.isSyncRequest){this.trigger("syncinfoupdate");this.pendingSegment_=null;this.state="READY";return;}segmentInfo.byteLength=segmentInfo.bytes.byteLength;this.mediaSecondsLoaded+=segment.duration;segmentInfo.cues.forEach(function(cue){_this3.subtitlesTrack_.addCue(_this3.featuresNativeTextTracks_?new import_window6["default"].VTTCue(cue.startTime,cue.endTime,cue.text):cue);});removeDuplicateCuesFromTrack(this.subtitlesTrack_);this.handleAppendsDone_();};_proto.handleData_=function handleData_3(){};_proto.updateTimingInfoEnd_=function updateTimingInfoEnd_(){};_proto.parseVTTCues_=function parseVTTCues_(segmentInfo){var decoder;var decodeBytesToString=false;if(typeof import_window6["default"].TextDecoder==="function"){decoder=new import_window6["default"].TextDecoder("utf8");}else{decoder=import_window6["default"].WebVTT.StringDecoder();decodeBytesToString=true;}var parser6=new import_window6["default"].WebVTT.Parser(import_window6["default"],import_window6["default"].vttjs,decoder);segmentInfo.cues=[];segmentInfo.timestampmap={MPEGTS:0,LOCAL:0};parser6.oncue=segmentInfo.cues.push.bind(segmentInfo.cues);parser6.ontimestampmap=function(map){segmentInfo.timestampmap=map;};parser6.onparsingerror=function(error){videojs.log.warn("Error encountered when parsing cues: "+error.message);};if(segmentInfo.segment.map){var mapData=segmentInfo.segment.map.bytes;if(decodeBytesToString){mapData=uint8ToUtf8(mapData);}parser6.parse(mapData);}var segmentData=segmentInfo.bytes;if(decodeBytesToString){segmentData=uint8ToUtf8(segmentData);}parser6.parse(segmentData);parser6.flush();};_proto.updateTimeMapping_=function updateTimeMapping_(segmentInfo,mappingObj,playlist){var segment=segmentInfo.segment;if(!mappingObj){return;}if(!segmentInfo.cues.length){segment.empty=true;return;}var timestampmap=segmentInfo.timestampmap;var diff=timestampmap.MPEGTS/import_clock.ONE_SECOND_IN_TS-timestampmap.LOCAL+mappingObj.mapping;segmentInfo.cues.forEach(function(cue){cue.startTime+=diff;cue.endTime+=diff;});if(!playlist.syncInfo){var firstStart=segmentInfo.cues[0].startTime;var lastStart=segmentInfo.cues[segmentInfo.cues.length-1].startTime;playlist.syncInfo={mediaSequence:playlist.mediaSequence+segmentInfo.mediaIndex,time:Math.min(firstStart,lastStart-segment.duration)};}};return VTTSegmentLoader2;}(SegmentLoader);var findAdCue=function findAdCue2(track,mediaTime){var cues=track.cues;for(var i=0;i<cues.length;i++){var cue=cues[i];if(mediaTime>=cue.adStartTime&&mediaTime<=cue.adEndTime){return cue;}}return null;};var updateAdCues=function updateAdCues2(media,track,offset){if(offset===void 0){offset=0;}if(!media.segments){return;}var mediaTime=offset;var cue;for(var i=0;i<media.segments.length;i++){var segment=media.segments[i];if(!cue){cue=findAdCue(track,mediaTime+segment.duration/2);}if(cue){if("cueIn"in segment){cue.endTime=mediaTime;cue.adEndTime=mediaTime;mediaTime+=segment.duration;cue=null;continue;}if(mediaTime<cue.endTime){mediaTime+=segment.duration;continue;}cue.endTime+=segment.duration;}else{if("cueOut"in segment){cue=new import_window6["default"].VTTCue(mediaTime,mediaTime+segment.duration,segment.cueOut);cue.adStartTime=mediaTime;cue.adEndTime=mediaTime+parseFloat(segment.cueOut);track.addCue(cue);}if("cueOutCont"in segment){var _segment$cueOutCont$s=segment.cueOutCont.split("/").map(parseFloat),adOffset=_segment$cueOutCont$s[0],adTotal=_segment$cueOutCont$s[1];cue=new import_window6["default"].VTTCue(mediaTime,mediaTime+segment.duration,"");cue.adStartTime=mediaTime-adOffset;cue.adEndTime=cue.adStartTime+adTotal;track.addCue(cue);}}mediaTime+=segment.duration;}};var MAX_MEDIA_SEQUENCE_DIFF_FOR_SYNC=86400;var syncPointStrategies=[{name:"VOD",run:function run(syncController,playlist,duration5,currentTimeline,currentTime){if(duration5!==Infinity){var syncPoint={time:0,segmentIndex:0,partIndex:null};return syncPoint;}return null;}},{name:"ProgramDateTime",run:function run2(syncController,playlist,duration5,currentTimeline,currentTime){if(!Object.keys(syncController.timelineToDatetimeMappings).length){return null;}var syncPoint=null;var lastDistance=null;var partsAndSegments=getPartsAndSegments(playlist);currentTime=currentTime||0;for(var i=0;i<partsAndSegments.length;i++){var index=playlist.endList||currentTime===0?i:partsAndSegments.length-(i+1);var partAndSegment=partsAndSegments[index];var segment=partAndSegment.segment;var datetimeMapping=syncController.timelineToDatetimeMappings[segment.timeline];if(!datetimeMapping||!segment.dateTimeObject){continue;}var segmentTime=segment.dateTimeObject.getTime()/1e3;var start2=segmentTime+datetimeMapping;if(segment.parts&&typeof partAndSegment.partIndex==="number"){for(var z=0;z<partAndSegment.partIndex;z++){start2+=segment.parts[z].duration;}}var distance=Math.abs(currentTime-start2);if(lastDistance!==null&&(distance===0||lastDistance<distance)){break;}lastDistance=distance;syncPoint={time:start2,segmentIndex:partAndSegment.segmentIndex,partIndex:partAndSegment.partIndex};}return syncPoint;}},{name:"Segment",run:function run3(syncController,playlist,duration5,currentTimeline,currentTime){var syncPoint=null;var lastDistance=null;currentTime=currentTime||0;var partsAndSegments=getPartsAndSegments(playlist);for(var i=0;i<partsAndSegments.length;i++){var index=playlist.endList||currentTime===0?i:partsAndSegments.length-(i+1);var partAndSegment=partsAndSegments[index];var segment=partAndSegment.segment;var start2=partAndSegment.part&&partAndSegment.part.start||segment&&segment.start;if(segment.timeline===currentTimeline&&typeof start2!=="undefined"){var distance=Math.abs(currentTime-start2);if(lastDistance!==null&&lastDistance<distance){break;}if(!syncPoint||lastDistance===null||lastDistance>=distance){lastDistance=distance;syncPoint={time:start2,segmentIndex:partAndSegment.segmentIndex,partIndex:partAndSegment.partIndex};}}}return syncPoint;}},{name:"Discontinuity",run:function run4(syncController,playlist,duration5,currentTimeline,currentTime){var syncPoint=null;currentTime=currentTime||0;if(playlist.discontinuityStarts&&playlist.discontinuityStarts.length){var lastDistance=null;for(var i=0;i<playlist.discontinuityStarts.length;i++){var segmentIndex=playlist.discontinuityStarts[i];var discontinuity=playlist.discontinuitySequence+i+1;var discontinuitySync=syncController.discontinuities[discontinuity];if(discontinuitySync){var distance=Math.abs(currentTime-discontinuitySync.time);if(lastDistance!==null&&lastDistance<distance){break;}if(!syncPoint||lastDistance===null||lastDistance>=distance){lastDistance=distance;syncPoint={time:discontinuitySync.time,segmentIndex:segmentIndex,partIndex:null};}}}}return syncPoint;}},{name:"Playlist",run:function run5(syncController,playlist,duration5,currentTimeline,currentTime){if(playlist.syncInfo){var syncPoint={time:playlist.syncInfo.time,segmentIndex:playlist.syncInfo.mediaSequence-playlist.mediaSequence,partIndex:null};return syncPoint;}return null;}}];var SyncController=/* @__PURE__ */function(_videojs$EventTarget){_inheritsLoose3(SyncController2,_videojs$EventTarget);function SyncController2(options){var _this;_this=_videojs$EventTarget.call(this)||this;_this.timelines=[];_this.discontinuities=[];_this.timelineToDatetimeMappings={};_this.logger_=logger("SyncController");return _this;}var _proto=SyncController2.prototype;_proto.getSyncPoint=function getSyncPoint(playlist,duration5,currentTimeline,currentTime){var syncPoints=this.runStrategies_(playlist,duration5,currentTimeline,currentTime);if(!syncPoints.length){return null;}return this.selectSyncPoint_(syncPoints,{key:"time",value:currentTime});};_proto.getExpiredTime=function getExpiredTime(playlist,duration5){if(!playlist||!playlist.segments){return null;}var syncPoints=this.runStrategies_(playlist,duration5,playlist.discontinuitySequence,0);if(!syncPoints.length){return null;}var syncPoint=this.selectSyncPoint_(syncPoints,{key:"segmentIndex",value:0});if(syncPoint.segmentIndex>0){syncPoint.time*=-1;}return Math.abs(syncPoint.time+sumDurations({defaultDuration:playlist.targetDuration,durationList:playlist.segments,startIndex:syncPoint.segmentIndex,endIndex:0}));};_proto.runStrategies_=function runStrategies_(playlist,duration5,currentTimeline,currentTime){var syncPoints=[];for(var i=0;i<syncPointStrategies.length;i++){var strategy=syncPointStrategies[i];var syncPoint=strategy.run(this,playlist,duration5,currentTimeline,currentTime);if(syncPoint){syncPoint.strategy=strategy.name;syncPoints.push({strategy:strategy.name,syncPoint:syncPoint});}}return syncPoints;};_proto.selectSyncPoint_=function selectSyncPoint_(syncPoints,target){var bestSyncPoint=syncPoints[0].syncPoint;var bestDistance=Math.abs(syncPoints[0].syncPoint[target.key]-target.value);var bestStrategy=syncPoints[0].strategy;for(var i=1;i<syncPoints.length;i++){var newDistance=Math.abs(syncPoints[i].syncPoint[target.key]-target.value);if(newDistance<bestDistance){bestDistance=newDistance;bestSyncPoint=syncPoints[i].syncPoint;bestStrategy=syncPoints[i].strategy;}}this.logger_("syncPoint for ["+target.key+": "+target.value+"] chosen with strategy"+(" ["+bestStrategy+"]: [time:"+bestSyncPoint.time+",")+(" segmentIndex:"+bestSyncPoint.segmentIndex)+(typeof bestSyncPoint.partIndex==="number"?",partIndex:"+bestSyncPoint.partIndex:"")+"]");return bestSyncPoint;};_proto.saveExpiredSegmentInfo=function saveExpiredSegmentInfo(oldPlaylist,newPlaylist){var mediaSequenceDiff=newPlaylist.mediaSequence-oldPlaylist.mediaSequence;if(mediaSequenceDiff>MAX_MEDIA_SEQUENCE_DIFF_FOR_SYNC){videojs.log.warn("Not saving expired segment info. Media sequence gap "+mediaSequenceDiff+" is too large.");return;}for(var i=mediaSequenceDiff-1;i>=0;i--){var lastRemovedSegment=oldPlaylist.segments[i];if(lastRemovedSegment&&typeof lastRemovedSegment.start!=="undefined"){newPlaylist.syncInfo={mediaSequence:oldPlaylist.mediaSequence+i,time:lastRemovedSegment.start};this.logger_("playlist refresh sync: [time:"+newPlaylist.syncInfo.time+","+(" mediaSequence: "+newPlaylist.syncInfo.mediaSequence+"]"));this.trigger("syncinfoupdate");break;}}};_proto.setDateTimeMappingForStart=function setDateTimeMappingForStart(playlist){this.timelineToDatetimeMappings={};if(playlist.segments&&playlist.segments.length&&playlist.segments[0].dateTimeObject){var firstSegment=playlist.segments[0];var playlistTimestamp=firstSegment.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[firstSegment.timeline]=-playlistTimestamp;}};_proto.saveSegmentTimingInfo=function saveSegmentTimingInfo(_ref){var segmentInfo=_ref.segmentInfo,shouldSaveTimelineMapping=_ref.shouldSaveTimelineMapping;var didCalculateSegmentTimeMapping=this.calculateSegmentTimeMapping_(segmentInfo,segmentInfo.timingInfo,shouldSaveTimelineMapping);var segment=segmentInfo.segment;if(didCalculateSegmentTimeMapping){this.saveDiscontinuitySyncInfo_(segmentInfo);if(!segmentInfo.playlist.syncInfo){segmentInfo.playlist.syncInfo={mediaSequence:segmentInfo.playlist.mediaSequence+segmentInfo.mediaIndex,time:segment.start};}}var dateTime=segment.dateTimeObject;if(segment.discontinuity&&shouldSaveTimelineMapping&&dateTime){this.timelineToDatetimeMappings[segment.timeline]=-(dateTime.getTime()/1e3);}};_proto.timestampOffsetForTimeline=function timestampOffsetForTimeline(timeline2){if(typeof this.timelines[timeline2]==="undefined"){return null;}return this.timelines[timeline2].time;};_proto.mappingForTimeline=function mappingForTimeline(timeline2){if(typeof this.timelines[timeline2]==="undefined"){return null;}return this.timelines[timeline2].mapping;};_proto.calculateSegmentTimeMapping_=function calculateSegmentTimeMapping_(segmentInfo,timingInfo,shouldSaveTimelineMapping){var segment=segmentInfo.segment;var part=segmentInfo.part;var mappingObj=this.timelines[segmentInfo.timeline];var start2;var end;if(typeof segmentInfo.timestampOffset==="number"){mappingObj={time:segmentInfo.startOfSegment,mapping:segmentInfo.startOfSegment-timingInfo.start};if(shouldSaveTimelineMapping){this.timelines[segmentInfo.timeline]=mappingObj;this.trigger("timestampoffset");this.logger_("time mapping for timeline "+segmentInfo.timeline+": "+("[time: "+mappingObj.time+"] [mapping: "+mappingObj.mapping+"]"));}start2=segmentInfo.startOfSegment;end=timingInfo.end+mappingObj.mapping;}else if(mappingObj){start2=timingInfo.start+mappingObj.mapping;end=timingInfo.end+mappingObj.mapping;}else{return false;}if(part){part.start=start2;part.end=end;}if(!segment.start||start2<segment.start){segment.start=start2;}segment.end=end;return true;};_proto.saveDiscontinuitySyncInfo_=function saveDiscontinuitySyncInfo_(segmentInfo){var playlist=segmentInfo.playlist;var segment=segmentInfo.segment;if(segment.discontinuity){this.discontinuities[segment.timeline]={time:segment.start,accuracy:0};}else if(playlist.discontinuityStarts&&playlist.discontinuityStarts.length){for(var i=0;i<playlist.discontinuityStarts.length;i++){var segmentIndex=playlist.discontinuityStarts[i];var discontinuity=playlist.discontinuitySequence+i+1;var mediaIndexDiff=segmentIndex-segmentInfo.mediaIndex;var accuracy=Math.abs(mediaIndexDiff);if(!this.discontinuities[discontinuity]||this.discontinuities[discontinuity].accuracy>accuracy){var time=void 0;if(mediaIndexDiff<0){time=segment.start-sumDurations({defaultDuration:playlist.targetDuration,durationList:playlist.segments,startIndex:segmentInfo.mediaIndex,endIndex:segmentIndex});}else{time=segment.end+sumDurations({defaultDuration:playlist.targetDuration,durationList:playlist.segments,startIndex:segmentInfo.mediaIndex+1,endIndex:segmentIndex});}this.discontinuities[discontinuity]={time:time,accuracy:accuracy};}}}};_proto.dispose=function dispose(){this.trigger("dispose");this.off();};return SyncController2;}(videojs.EventTarget);var TimelineChangeController=/* @__PURE__ */function(_videojs$EventTarget){_inheritsLoose3(TimelineChangeController2,_videojs$EventTarget);function TimelineChangeController2(){var _this;_this=_videojs$EventTarget.call(this)||this;_this.pendingTimelineChanges_={};_this.lastTimelineChanges_={};return _this;}var _proto=TimelineChangeController2.prototype;_proto.clearPendingTimelineChange=function clearPendingTimelineChange(type2){this.pendingTimelineChanges_[type2]=null;this.trigger("pendingtimelinechange");};_proto.pendingTimelineChange=function pendingTimelineChange(_ref){var type2=_ref.type,from3=_ref.from,to=_ref.to;if(typeof from3==="number"&&typeof to==="number"){this.pendingTimelineChanges_[type2]={type:type2,from:from3,to:to};this.trigger("pendingtimelinechange");}return this.pendingTimelineChanges_[type2];};_proto.lastTimelineChange=function lastTimelineChange(_ref2){var type2=_ref2.type,from3=_ref2.from,to=_ref2.to;if(typeof from3==="number"&&typeof to==="number"){this.lastTimelineChanges_[type2]={type:type2,from:from3,to:to};delete this.pendingTimelineChanges_[type2];this.trigger("timelinechange");}return this.lastTimelineChanges_[type2];};_proto.dispose=function dispose(){this.trigger("dispose");this.pendingTimelineChanges_={};this.lastTimelineChanges_={};this.off();};return TimelineChangeController2;}(videojs.EventTarget);var workerCode=transform(getWorkerString(function(){var commonjsGlobal=typeof globalThis!=="undefined"?globalThis:typeof window!=="undefined"?window:typeof global!=="undefined"?global:typeof self!=="undefined"?self:{};function createCommonjsModule(fn,basedir,module){return module={path:basedir,exports:{},require:function require2(path,base){return commonjsRequire(path,base===void 0||base===null?module.path:base);}},fn(module,module.exports),module.exports;}function commonjsRequire(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs");}var createClass=createCommonjsModule(function(module){function _defineProperties2(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass2(Constructor,protoProps,staticProps){if(protoProps)_defineProperties2(Constructor.prototype,protoProps);if(staticProps)_defineProperties2(Constructor,staticProps);return Constructor;}module.exports=_createClass2;module.exports["default"]=module.exports,module.exports.__esModule=true;});var setPrototypeOf=createCommonjsModule(function(module){function _setPrototypeOf2(o,p){module.exports=_setPrototypeOf2=Object.setPrototypeOf||function _setPrototypeOf3(o2,p2){o2.__proto__=p2;return o2;};module.exports["default"]=module.exports,module.exports.__esModule=true;return _setPrototypeOf2(o,p);}module.exports=_setPrototypeOf2;module.exports["default"]=module.exports,module.exports.__esModule=true;});var inheritsLoose=createCommonjsModule(function(module){function _inheritsLoose4(subClass,superClass){subClass.prototype=Object.create(superClass.prototype);subClass.prototype.constructor=subClass;setPrototypeOf(subClass,superClass);}module.exports=_inheritsLoose4;module.exports["default"]=module.exports,module.exports.__esModule=true;});var Stream2=/* @__PURE__ */function(){function Stream3(){this.listeners={};}var _proto=Stream3.prototype;_proto.on=function on3(type2,listener){if(!this.listeners[type2]){this.listeners[type2]=[];}this.listeners[type2].push(listener);};_proto.off=function off2(type2,listener){if(!this.listeners[type2]){return false;}var index=this.listeners[type2].indexOf(listener);this.listeners[type2]=this.listeners[type2].slice(0);this.listeners[type2].splice(index,1);return index>-1;};_proto.trigger=function trigger2(type2){var callbacks=this.listeners[type2];if(!callbacks){return;}if(arguments.length===2){var length=callbacks.length;for(var i=0;i<length;++i){callbacks[i].call(this,arguments[1]);}}else{var args=Array.prototype.slice.call(arguments,1);var _length=callbacks.length;for(var _i2=0;_i2<_length;++_i2){callbacks[_i2].apply(this,args);}}};_proto.dispose=function dispose(){this.listeners={};};_proto.pipe=function pipe3(destination){this.on("data",function(data){destination.push(data);});};return Stream3;}();function unpad(padded){return padded.subarray(0,padded.byteLength-padded[padded.byteLength-1]);}var precompute=function precompute2(){var tables=[[[],[],[],[],[]],[[],[],[],[],[]]];var encTable=tables[0];var decTable=tables[1];var sbox=encTable[4];var sboxInv=decTable[4];var i;var x;var xInv;var d2=[];var th=[];var x2;var x4;var x8;var s;var tEnc;var tDec;for(i=0;i<256;i++){th[(d2[i]=i<<1^(i>>7)*283)^i]=i;}for(x=xInv=0;!sbox[x];x^=x2||1,xInv=th[xInv]||1){s=xInv^xInv<<1^xInv<<2^xInv<<3^xInv<<4;s=s>>8^s&255^99;sbox[x]=s;sboxInv[s]=x;x8=d2[x4=d2[x2=d2[x]]];tDec=x8*16843009^x4*65537^x2*257^x*16843008;tEnc=d2[s]*257^s*16843008;for(i=0;i<4;i++){encTable[i][x]=tEnc=tEnc<<24^tEnc>>>8;decTable[i][s]=tDec=tDec<<24^tDec>>>8;}}for(i=0;i<5;i++){encTable[i]=encTable[i].slice(0);decTable[i]=decTable[i].slice(0);}return tables;};var aesTables=null;var AES=/* @__PURE__ */function(){function AES2(key){if(!aesTables){aesTables=precompute();}this._tables=[[aesTables[0][0].slice(),aesTables[0][1].slice(),aesTables[0][2].slice(),aesTables[0][3].slice(),aesTables[0][4].slice()],[aesTables[1][0].slice(),aesTables[1][1].slice(),aesTables[1][2].slice(),aesTables[1][3].slice(),aesTables[1][4].slice()]];var i;var j;var tmp;var sbox=this._tables[0][4];var decTable=this._tables[1];var keyLen=key.length;var rcon=1;if(keyLen!==4&&keyLen!==6&&keyLen!==8){throw new Error("Invalid aes key size");}var encKey=key.slice(0);var decKey=[];this._key=[encKey,decKey];for(i=keyLen;i<4*keyLen+28;i++){tmp=encKey[i-1];if(i%keyLen===0||keyLen===8&&i%keyLen===4){tmp=sbox[tmp>>>24]<<24^sbox[tmp>>16&255]<<16^sbox[tmp>>8&255]<<8^sbox[tmp&255];if(i%keyLen===0){tmp=tmp<<8^tmp>>>24^rcon<<24;rcon=rcon<<1^(rcon>>7)*283;}}encKey[i]=encKey[i-keyLen]^tmp;}for(j=0;i;j++,i--){tmp=encKey[j&3?i:i-4];if(i<=4||j<4){decKey[j]=tmp;}else{decKey[j]=decTable[0][sbox[tmp>>>24]]^decTable[1][sbox[tmp>>16&255]]^decTable[2][sbox[tmp>>8&255]]^decTable[3][sbox[tmp&255]];}}}var _proto=AES2.prototype;_proto.decrypt=function decrypt4(encrypted0,encrypted1,encrypted2,encrypted3,out,offset){var key=this._key[1];var a=encrypted0^key[0];var b=encrypted3^key[1];var c=encrypted2^key[2];var d2=encrypted1^key[3];var a2;var b2;var c2;var nInnerRounds=key.length/4-2;var i;var kIndex=4;var table=this._tables[1];var table0=table[0];var table1=table[1];var table2=table[2];var table3=table[3];var sbox=table[4];for(i=0;i<nInnerRounds;i++){a2=table0[a>>>24]^table1[b>>16&255]^table2[c>>8&255]^table3[d2&255]^key[kIndex];b2=table0[b>>>24]^table1[c>>16&255]^table2[d2>>8&255]^table3[a&255]^key[kIndex+1];c2=table0[c>>>24]^table1[d2>>16&255]^table2[a>>8&255]^table3[b&255]^key[kIndex+2];d2=table0[d2>>>24]^table1[a>>16&255]^table2[b>>8&255]^table3[c&255]^key[kIndex+3];kIndex+=4;a=a2;b=b2;c=c2;}for(i=0;i<4;i++){out[(3&-i)+offset]=sbox[a>>>24]<<24^sbox[b>>16&255]<<16^sbox[c>>8&255]<<8^sbox[d2&255]^key[kIndex++];a2=a;a=b;b=c;c=d2;d2=a2;}};return AES2;}();var AsyncStream=/* @__PURE__ */function(_Stream){inheritsLoose(AsyncStream2,_Stream);function AsyncStream2(){var _this;_this=_Stream.call(this,Stream2)||this;_this.jobs=[];_this.delay=1;_this.timeout_=null;return _this;}var _proto=AsyncStream2.prototype;_proto.processJob_=function processJob_(){this.jobs.shift()();if(this.jobs.length){this.timeout_=setTimeout(this.processJob_.bind(this),this.delay);}else{this.timeout_=null;}};_proto.push=function push(job){this.jobs.push(job);if(!this.timeout_){this.timeout_=setTimeout(this.processJob_.bind(this),this.delay);}};return AsyncStream2;}(Stream2);var ntoh=function ntoh2(word){return word<<24|(word&65280)<<8|(word&16711680)>>8|word>>>24;};var decrypt3=function decrypt4(encrypted,key,initVector){var encrypted32=new Int32Array(encrypted.buffer,encrypted.byteOffset,encrypted.byteLength>>2);var decipher=new AES(Array.prototype.slice.call(key));var decrypted=new Uint8Array(encrypted.byteLength);var decrypted32=new Int32Array(decrypted.buffer);var init0;var init1;var init22;var init32;var encrypted0;var encrypted1;var encrypted2;var encrypted3;var wordIx;init0=initVector[0];init1=initVector[1];init22=initVector[2];init32=initVector[3];for(wordIx=0;wordIx<encrypted32.length;wordIx+=4){encrypted0=ntoh(encrypted32[wordIx]);encrypted1=ntoh(encrypted32[wordIx+1]);encrypted2=ntoh(encrypted32[wordIx+2]);encrypted3=ntoh(encrypted32[wordIx+3]);decipher.decrypt(encrypted0,encrypted1,encrypted2,encrypted3,decrypted32,wordIx);decrypted32[wordIx]=ntoh(decrypted32[wordIx]^init0);decrypted32[wordIx+1]=ntoh(decrypted32[wordIx+1]^init1);decrypted32[wordIx+2]=ntoh(decrypted32[wordIx+2]^init22);decrypted32[wordIx+3]=ntoh(decrypted32[wordIx+3]^init32);init0=encrypted0;init1=encrypted1;init22=encrypted2;init32=encrypted3;}return decrypted;};var Decrypter2=/* @__PURE__ */function(){function Decrypter3(encrypted,key,initVector,done){var step=Decrypter3.STEP;var encrypted32=new Int32Array(encrypted.buffer);var decrypted=new Uint8Array(encrypted.byteLength);var i=0;this.asyncStream_=new AsyncStream();this.asyncStream_.push(this.decryptChunk_(encrypted32.subarray(i,i+step),key,initVector,decrypted));for(i=step;i<encrypted32.length;i+=step){initVector=new Uint32Array([ntoh(encrypted32[i-4]),ntoh(encrypted32[i-3]),ntoh(encrypted32[i-2]),ntoh(encrypted32[i-1])]);this.asyncStream_.push(this.decryptChunk_(encrypted32.subarray(i,i+step),key,initVector,decrypted));}this.asyncStream_.push(function(){done(null,unpad(decrypted));});}var _proto=Decrypter3.prototype;_proto.decryptChunk_=function decryptChunk_(encrypted,key,initVector,decrypted){return function(){var bytes=decrypt3(encrypted,key,initVector);decrypted.set(bytes,encrypted.byteOffset);};};createClass(Decrypter3,null,[{key:"STEP",get:function get7(){return 32e3;}}]);return Decrypter3;}();var win;if(typeof window!=="undefined"){win=window;}else if(typeof commonjsGlobal!=="undefined"){win=commonjsGlobal;}else if(typeof self!=="undefined"){win=self;}else{win={};}var window_1=win;var isArrayBufferView3=function isArrayBufferView4(obj){if(ArrayBuffer.isView==="function"){return ArrayBuffer.isView(obj);}return obj&&obj.buffer instanceof ArrayBuffer;};var BigInt2=window_1.BigInt||Number;[BigInt2("0x1"),BigInt2("0x100"),BigInt2("0x10000"),BigInt2("0x1000000"),BigInt2("0x100000000"),BigInt2("0x10000000000"),BigInt2("0x1000000000000"),BigInt2("0x100000000000000"),BigInt2("0x10000000000000000")];var createTransferableMessage3=function createTransferableMessage4(message){var transferable={};Object.keys(message).forEach(function(key){var value=message[key];if(isArrayBufferView3(value)){transferable[key]={bytes:value.buffer,byteOffset:value.byteOffset,byteLength:value.byteLength};}else{transferable[key]=value;}});return transferable;};self.onmessage=function(event){var data=event.data;var encrypted=new Uint8Array(data.encrypted.bytes,data.encrypted.byteOffset,data.encrypted.byteLength);var key=new Uint32Array(data.key.bytes,data.key.byteOffset,data.key.byteLength/4);var iv=new Uint32Array(data.iv.bytes,data.iv.byteOffset,data.iv.byteLength/4);new Decrypter2(encrypted,key,iv,function(err,bytes){self.postMessage(createTransferableMessage3({source:data.source,decrypted:bytes}),[bytes.buffer]);});};}));var Decrypter=factory(workerCode);var audioTrackKind_=function audioTrackKind_2(properties){var kind=properties["default"]?"main":"alternative";if(properties.characteristics&&properties.characteristics.indexOf("public.accessibility.describes-video")>=0){kind="main-desc";}return kind;};var stopLoaders=function stopLoaders2(segmentLoader,mediaType){segmentLoader.abort();segmentLoader.pause();if(mediaType&&mediaType.activePlaylistLoader){mediaType.activePlaylistLoader.pause();mediaType.activePlaylistLoader=null;}};var startLoaders=function startLoaders2(playlistLoader,mediaType){mediaType.activePlaylistLoader=playlistLoader;playlistLoader.load();};var onGroupChanged=function onGroupChanged2(type2,settings){return function(){var _settings$segmentLoad=settings.segmentLoaders,segmentLoader=_settings$segmentLoad[type2],mainSegmentLoader=_settings$segmentLoad.main,mediaType=settings.mediaTypes[type2];var activeTrack2=mediaType.activeTrack();var activeGroup3=mediaType.getActiveGroup();var previousActiveLoader=mediaType.activePlaylistLoader;var lastGroup=mediaType.lastGroup_;if(activeGroup3&&lastGroup&&activeGroup3.id===lastGroup.id){return;}mediaType.lastGroup_=activeGroup3;mediaType.lastTrack_=activeTrack2;stopLoaders(segmentLoader,mediaType);if(!activeGroup3||activeGroup3.isMasterPlaylist){return;}if(!activeGroup3.playlistLoader){if(previousActiveLoader){mainSegmentLoader.resetEverything();}return;}segmentLoader.resyncLoader();startLoaders(activeGroup3.playlistLoader,mediaType);};};var onGroupChanging=function onGroupChanging2(type2,settings){return function(){var segmentLoader=settings.segmentLoaders[type2],mediaType=settings.mediaTypes[type2];mediaType.lastGroup_=null;segmentLoader.abort();segmentLoader.pause();};};var onTrackChanged=function onTrackChanged2(type2,settings){return function(){var masterPlaylistLoader=settings.masterPlaylistLoader,_settings$segmentLoad2=settings.segmentLoaders,segmentLoader=_settings$segmentLoad2[type2],mainSegmentLoader=_settings$segmentLoad2.main,mediaType=settings.mediaTypes[type2];var activeTrack2=mediaType.activeTrack();var activeGroup3=mediaType.getActiveGroup();var previousActiveLoader=mediaType.activePlaylistLoader;var lastTrack=mediaType.lastTrack_;if(lastTrack&&activeTrack2&&lastTrack.id===activeTrack2.id){return;}mediaType.lastGroup_=activeGroup3;mediaType.lastTrack_=activeTrack2;stopLoaders(segmentLoader,mediaType);if(!activeGroup3){return;}if(activeGroup3.isMasterPlaylist){if(!activeTrack2||!lastTrack||activeTrack2.id===lastTrack.id){return;}var mpc=settings.vhs.masterPlaylistController_;var newPlaylist=mpc.selectPlaylist();if(mpc.media()===newPlaylist){return;}mediaType.logger_("track change. Switching master audio from "+lastTrack.id+" to "+activeTrack2.id);masterPlaylistLoader.pause();mainSegmentLoader.resetEverything();mpc.fastQualityChange_(newPlaylist);return;}if(type2==="AUDIO"){if(!activeGroup3.playlistLoader){mainSegmentLoader.setAudio(true);mainSegmentLoader.resetEverything();return;}segmentLoader.setAudio(true);mainSegmentLoader.setAudio(false);}if(previousActiveLoader===activeGroup3.playlistLoader){startLoaders(activeGroup3.playlistLoader,mediaType);return;}if(segmentLoader.track){segmentLoader.track(activeTrack2);}segmentLoader.resetEverything();startLoaders(activeGroup3.playlistLoader,mediaType);};};var onError={AUDIO:function AUDIO(type2,settings){return function(){var segmentLoader=settings.segmentLoaders[type2],mediaType=settings.mediaTypes[type2],blacklistCurrentPlaylist=settings.blacklistCurrentPlaylist;stopLoaders(segmentLoader,mediaType);var activeTrack2=mediaType.activeTrack();var activeGroup3=mediaType.activeGroup();var id=(activeGroup3.filter(function(group){return group["default"];})[0]||activeGroup3[0]).id;var defaultTrack=mediaType.tracks[id];if(activeTrack2===defaultTrack){blacklistCurrentPlaylist({message:"Problem encountered loading the default audio track."});return;}videojs.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(var trackId in mediaType.tracks){mediaType.tracks[trackId].enabled=mediaType.tracks[trackId]===defaultTrack;}mediaType.onTrackChanged();};},SUBTITLES:function SUBTITLES(type2,settings){return function(){var segmentLoader=settings.segmentLoaders[type2],mediaType=settings.mediaTypes[type2];videojs.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track.");stopLoaders(segmentLoader,mediaType);var track=mediaType.activeTrack();if(track){track.mode="disabled";}mediaType.onTrackChanged();};}};var setupListeners={AUDIO:function AUDIO2(type2,playlistLoader,settings){if(!playlistLoader){return;}var tech=settings.tech,requestOptions=settings.requestOptions,segmentLoader=settings.segmentLoaders[type2];playlistLoader.on("loadedmetadata",function(){var media=playlistLoader.media();segmentLoader.playlist(media,requestOptions);if(!tech.paused()||media.endList&&tech.preload()!=="none"){segmentLoader.load();}});playlistLoader.on("loadedplaylist",function(){segmentLoader.playlist(playlistLoader.media(),requestOptions);if(!tech.paused()){segmentLoader.load();}});playlistLoader.on("error",onError[type2](type2,settings));},SUBTITLES:function SUBTITLES2(type2,playlistLoader,settings){var tech=settings.tech,requestOptions=settings.requestOptions,segmentLoader=settings.segmentLoaders[type2],mediaType=settings.mediaTypes[type2];playlistLoader.on("loadedmetadata",function(){var media=playlistLoader.media();segmentLoader.playlist(media,requestOptions);segmentLoader.track(mediaType.activeTrack());if(!tech.paused()||media.endList&&tech.preload()!=="none"){segmentLoader.load();}});playlistLoader.on("loadedplaylist",function(){segmentLoader.playlist(playlistLoader.media(),requestOptions);if(!tech.paused()){segmentLoader.load();}});playlistLoader.on("error",onError[type2](type2,settings));}};var initialize={"AUDIO":function AUDIO3(type2,settings){var vhs=settings.vhs,sourceType=settings.sourceType,segmentLoader=settings.segmentLoaders[type2],requestOptions=settings.requestOptions,mediaGroups=settings.master.mediaGroups,_settings$mediaTypes$=settings.mediaTypes[type2],groups=_settings$mediaTypes$.groups,tracks=_settings$mediaTypes$.tracks,logger_=_settings$mediaTypes$.logger_,masterPlaylistLoader=settings.masterPlaylistLoader;var audioOnlyMaster=isAudioOnly(masterPlaylistLoader.master);if(!mediaGroups[type2]||Object.keys(mediaGroups[type2]).length===0){mediaGroups[type2]={main:{"default":{"default":true}}};if(audioOnlyMaster){mediaGroups[type2].main["default"].playlists=masterPlaylistLoader.master.playlists;}}for(var groupId in mediaGroups[type2]){if(!groups[groupId]){groups[groupId]=[];}for(var variantLabel in mediaGroups[type2][groupId]){var properties=mediaGroups[type2][groupId][variantLabel];var playlistLoader=void 0;if(audioOnlyMaster){logger_("AUDIO group '"+groupId+"' label '"+variantLabel+"' is a master playlist");properties.isMasterPlaylist=true;playlistLoader=null;}else if(sourceType==="vhs-json"&&properties.playlists){playlistLoader=new PlaylistLoader(properties.playlists[0],vhs,requestOptions);}else if(properties.resolvedUri){playlistLoader=new PlaylistLoader(properties.resolvedUri,vhs,requestOptions);}else if(properties.playlists&&sourceType==="dash"){playlistLoader=new DashPlaylistLoader(properties.playlists[0],vhs,requestOptions,masterPlaylistLoader);}else{playlistLoader=null;}properties=videojs.mergeOptions({id:variantLabel,playlistLoader:playlistLoader},properties);setupListeners[type2](type2,properties.playlistLoader,settings);groups[groupId].push(properties);if(typeof tracks[variantLabel]==="undefined"){var track=new videojs.AudioTrack({id:variantLabel,kind:audioTrackKind_(properties),enabled:false,language:properties.language,"default":properties["default"],label:variantLabel});tracks[variantLabel]=track;}}}segmentLoader.on("error",onError[type2](type2,settings));},"SUBTITLES":function SUBTITLES3(type2,settings){var tech=settings.tech,vhs=settings.vhs,sourceType=settings.sourceType,segmentLoader=settings.segmentLoaders[type2],requestOptions=settings.requestOptions,mediaGroups=settings.master.mediaGroups,_settings$mediaTypes$2=settings.mediaTypes[type2],groups=_settings$mediaTypes$2.groups,tracks=_settings$mediaTypes$2.tracks,masterPlaylistLoader=settings.masterPlaylistLoader;for(var groupId in mediaGroups[type2]){if(!groups[groupId]){groups[groupId]=[];}for(var variantLabel in mediaGroups[type2][groupId]){if(mediaGroups[type2][groupId][variantLabel].forced){continue;}var properties=mediaGroups[type2][groupId][variantLabel];var playlistLoader=void 0;if(sourceType==="hls"){playlistLoader=new PlaylistLoader(properties.resolvedUri,vhs,requestOptions);}else if(sourceType==="dash"){var playlists=properties.playlists.filter(function(p){return p.excludeUntil!==Infinity;});if(!playlists.length){return;}playlistLoader=new DashPlaylistLoader(properties.playlists[0],vhs,requestOptions,masterPlaylistLoader);}else if(sourceType==="vhs-json"){playlistLoader=new PlaylistLoader(properties.playlists?properties.playlists[0]:properties.resolvedUri,vhs,requestOptions);}properties=videojs.mergeOptions({id:variantLabel,playlistLoader:playlistLoader},properties);setupListeners[type2](type2,properties.playlistLoader,settings);groups[groupId].push(properties);if(typeof tracks[variantLabel]==="undefined"){var track=tech.addRemoteTextTrack({id:variantLabel,kind:"subtitles","default":properties["default"]&&properties.autoselect,language:properties.language,label:variantLabel},false).track;tracks[variantLabel]=track;}}}segmentLoader.on("error",onError[type2](type2,settings));},"CLOSED-CAPTIONS":function CLOSEDCAPTIONS(type2,settings){var tech=settings.tech,mediaGroups=settings.master.mediaGroups,_settings$mediaTypes$3=settings.mediaTypes[type2],groups=_settings$mediaTypes$3.groups,tracks=_settings$mediaTypes$3.tracks;for(var groupId in mediaGroups[type2]){if(!groups[groupId]){groups[groupId]=[];}for(var variantLabel in mediaGroups[type2][groupId]){var properties=mediaGroups[type2][groupId][variantLabel];if(!/^(?:CC|SERVICE)/.test(properties.instreamId)){continue;}var captionServices=tech.options_.vhs&&tech.options_.vhs.captionServices||{};var newProps={label:variantLabel,language:properties.language,instreamId:properties.instreamId,"default":properties["default"]&&properties.autoselect};if(captionServices[newProps.instreamId]){newProps=videojs.mergeOptions(newProps,captionServices[newProps.instreamId]);}if(newProps["default"]===void 0){delete newProps["default"];}groups[groupId].push(videojs.mergeOptions({id:variantLabel},properties));if(typeof tracks[variantLabel]==="undefined"){var track=tech.addRemoteTextTrack({id:newProps.instreamId,kind:"captions","default":newProps["default"],language:newProps.language,label:newProps.label},false).track;tracks[variantLabel]=track;}}}}};var groupMatch=function groupMatch2(list,media){for(var i=0;i<list.length;i++){if(playlistMatch(media,list[i])){return true;}if(list[i].playlists&&groupMatch2(list[i].playlists,media)){return true;}}return false;};var activeGroup=function activeGroup2(type2,settings){return function(track){var masterPlaylistLoader=settings.masterPlaylistLoader,groups=settings.mediaTypes[type2].groups;var media=masterPlaylistLoader.media();if(!media){return null;}var variants=null;if(media.attributes[type2]){variants=groups[media.attributes[type2]];}var groupKeys=Object.keys(groups);if(!variants){if(type2==="AUDIO"&&groupKeys.length>1&&isAudioOnly(settings.master)){for(var i=0;i<groupKeys.length;i++){var groupPropertyList=groups[groupKeys[i]];if(groupMatch(groupPropertyList,media)){variants=groupPropertyList;break;}}}else if(groups.main){variants=groups.main;}else if(groupKeys.length===1){variants=groups[groupKeys[0]];}}if(typeof track==="undefined"){return variants;}if(track===null||!variants){return null;}return variants.filter(function(props){return props.id===track.id;})[0]||null;};};var activeTrack={AUDIO:function AUDIO4(type2,settings){return function(){var tracks=settings.mediaTypes[type2].tracks;for(var id in tracks){if(tracks[id].enabled){return tracks[id];}}return null;};},SUBTITLES:function SUBTITLES4(type2,settings){return function(){var tracks=settings.mediaTypes[type2].tracks;for(var id in tracks){if(tracks[id].mode==="showing"||tracks[id].mode==="hidden"){return tracks[id];}}return null;};}};var getActiveGroup=function getActiveGroup2(type2,_ref){var mediaTypes2=_ref.mediaTypes;return function(){var activeTrack_=mediaTypes2[type2].activeTrack();if(!activeTrack_){return null;}return mediaTypes2[type2].activeGroup(activeTrack_);};};var setupMediaGroups=function setupMediaGroups2(settings){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(type2){initialize[type2](type2,settings);});var mediaTypes2=settings.mediaTypes,masterPlaylistLoader=settings.masterPlaylistLoader,tech=settings.tech,vhs=settings.vhs,_settings$segmentLoad3=settings.segmentLoaders,audioSegmentLoader=_settings$segmentLoad3["AUDIO"],mainSegmentLoader=_settings$segmentLoad3.main;["AUDIO","SUBTITLES"].forEach(function(type2){mediaTypes2[type2].activeGroup=activeGroup(type2,settings);mediaTypes2[type2].activeTrack=activeTrack[type2](type2,settings);mediaTypes2[type2].onGroupChanged=onGroupChanged(type2,settings);mediaTypes2[type2].onGroupChanging=onGroupChanging(type2,settings);mediaTypes2[type2].onTrackChanged=onTrackChanged(type2,settings);mediaTypes2[type2].getActiveGroup=getActiveGroup(type2,settings);});var audioGroup=mediaTypes2.AUDIO.activeGroup();if(audioGroup){var groupId=(audioGroup.filter(function(group){return group["default"];})[0]||audioGroup[0]).id;mediaTypes2.AUDIO.tracks[groupId].enabled=true;mediaTypes2.AUDIO.onGroupChanged();mediaTypes2.AUDIO.onTrackChanged();var activeAudioGroup=mediaTypes2.AUDIO.getActiveGroup();if(!activeAudioGroup.playlistLoader){mainSegmentLoader.setAudio(true);}else{mainSegmentLoader.setAudio(false);audioSegmentLoader.setAudio(true);}}masterPlaylistLoader.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(type2){return mediaTypes2[type2].onGroupChanged();});});masterPlaylistLoader.on("mediachanging",function(){["AUDIO","SUBTITLES"].forEach(function(type2){return mediaTypes2[type2].onGroupChanging();});});var onAudioTrackChanged=function onAudioTrackChanged2(){mediaTypes2.AUDIO.onTrackChanged();tech.trigger({type:"usage",name:"vhs-audio-change"});tech.trigger({type:"usage",name:"hls-audio-change"});};tech.audioTracks().addEventListener("change",onAudioTrackChanged);tech.remoteTextTracks().addEventListener("change",mediaTypes2.SUBTITLES.onTrackChanged);vhs.on("dispose",function(){tech.audioTracks().removeEventListener("change",onAudioTrackChanged);tech.remoteTextTracks().removeEventListener("change",mediaTypes2.SUBTITLES.onTrackChanged);});tech.clearTracks("audio");for(var id in mediaTypes2.AUDIO.tracks){tech.audioTracks().addTrack(mediaTypes2.AUDIO.tracks[id]);}};var createMediaTypes=function createMediaTypes2(){var mediaTypes2={};["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(type2){mediaTypes2[type2]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:noop,activeTrack:noop,getActiveGroup:noop,onGroupChanged:noop,onTrackChanged:noop,lastTrack_:null,logger_:logger("MediaGroups["+type2+"]")};});return mediaTypes2;};var ABORT_EARLY_BLACKLIST_SECONDS=60*2;var Vhs$1;var loaderStats=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"];var sumLoaderStat=function sumLoaderStat2(stat){return this.audioSegmentLoader_[stat]+this.mainSegmentLoader_[stat];};var shouldSwitchToMedia=function shouldSwitchToMedia2(_ref){var currentPlaylist=_ref.currentPlaylist,buffered=_ref.buffered,currentTime=_ref.currentTime,nextPlaylist=_ref.nextPlaylist,bufferLowWaterLine=_ref.bufferLowWaterLine,bufferHighWaterLine=_ref.bufferHighWaterLine,duration5=_ref.duration,experimentalBufferBasedABR=_ref.experimentalBufferBasedABR,log2=_ref.log;if(!nextPlaylist){videojs.log.warn("We received no playlist to switch to. Please check your stream.");return false;}var sharedLogLine="allowing switch "+(currentPlaylist&&currentPlaylist.id||"null")+" -> "+nextPlaylist.id;if(!currentPlaylist){log2(sharedLogLine+" as current playlist is not set");return true;}if(nextPlaylist.id===currentPlaylist.id){return false;}var isBuffered=Boolean(findRange(buffered,currentTime).length);if(!currentPlaylist.endList){if(!isBuffered&&typeof currentPlaylist.partTargetDuration==="number"){log2("not "+sharedLogLine+" as current playlist is live llhls, but currentTime isn't in buffered.");return false;}log2(sharedLogLine+" as current playlist is live");return true;}var forwardBuffer=timeAheadOf(buffered,currentTime);var maxBufferLowWaterLine=experimentalBufferBasedABR?Config.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:Config.MAX_BUFFER_LOW_WATER_LINE;if(duration5<maxBufferLowWaterLine){log2(sharedLogLine+" as duration < max low water line ("+duration5+" < "+maxBufferLowWaterLine+")");return true;}var nextBandwidth=nextPlaylist.attributes.BANDWIDTH;var currBandwidth=currentPlaylist.attributes.BANDWIDTH;if(nextBandwidth<currBandwidth&&(!experimentalBufferBasedABR||forwardBuffer<bufferHighWaterLine)){var logLine=sharedLogLine+" as next bandwidth < current bandwidth ("+nextBandwidth+" < "+currBandwidth+")";if(experimentalBufferBasedABR){logLine+=" and forwardBuffer < bufferHighWaterLine ("+forwardBuffer+" < "+bufferHighWaterLine+")";}log2(logLine);return true;}if((!experimentalBufferBasedABR||nextBandwidth>currBandwidth)&&forwardBuffer>=bufferLowWaterLine){var _logLine=sharedLogLine+" as forwardBuffer >= bufferLowWaterLine ("+forwardBuffer+" >= "+bufferLowWaterLine+")";if(experimentalBufferBasedABR){_logLine+=" and next bandwidth > current bandwidth ("+nextBandwidth+" > "+currBandwidth+")";}log2(_logLine);return true;}log2("not "+sharedLogLine+" as no switching criteria met");return false;};var MasterPlaylistController=/* @__PURE__ */function(_videojs$EventTarget){_inheritsLoose3(MasterPlaylistController2,_videojs$EventTarget);function MasterPlaylistController2(options){var _this;_this=_videojs$EventTarget.call(this)||this;var src=options.src,handleManifestRedirects=options.handleManifestRedirects,withCredentials=options.withCredentials,tech=options.tech,bandwidth2=options.bandwidth,externVhs=options.externVhs,useCueTags=options.useCueTags,blacklistDuration=options.blacklistDuration,enableLowInitialPlaylist=options.enableLowInitialPlaylist,sourceType=options.sourceType,cacheEncryptionKeys=options.cacheEncryptionKeys,experimentalBufferBasedABR=options.experimentalBufferBasedABR,experimentalLeastPixelDiffSelector=options.experimentalLeastPixelDiffSelector,captionServices=options.captionServices;if(!src){throw new Error("A non-empty playlist URL or JSON manifest string is required");}var maxPlaylistRetries=options.maxPlaylistRetries;if(maxPlaylistRetries===null||typeof maxPlaylistRetries==="undefined"){maxPlaylistRetries=Infinity;}Vhs$1=externVhs;_this.experimentalBufferBasedABR=Boolean(experimentalBufferBasedABR);_this.experimentalLeastPixelDiffSelector=Boolean(experimentalLeastPixelDiffSelector);_this.withCredentials=withCredentials;_this.tech_=tech;_this.vhs_=tech.vhs;_this.sourceType_=sourceType;_this.useCueTags_=useCueTags;_this.blacklistDuration=blacklistDuration;_this.maxPlaylistRetries=maxPlaylistRetries;_this.enableLowInitialPlaylist=enableLowInitialPlaylist;if(_this.useCueTags_){_this.cueTagsTrack_=_this.tech_.addTextTrack("metadata","ad-cues");_this.cueTagsTrack_.inBandMetadataTrackDispatchType="";}_this.requestOptions_={withCredentials:withCredentials,handleManifestRedirects:handleManifestRedirects,maxPlaylistRetries:maxPlaylistRetries,timeout:null};_this.on("error",_this.pauseLoading);_this.mediaTypes_=createMediaTypes();_this.mediaSource=new import_window6["default"].MediaSource();_this.handleDurationChange_=_this.handleDurationChange_.bind(_assertThisInitialized3(_this));_this.handleSourceOpen_=_this.handleSourceOpen_.bind(_assertThisInitialized3(_this));_this.handleSourceEnded_=_this.handleSourceEnded_.bind(_assertThisInitialized3(_this));_this.mediaSource.addEventListener("durationchange",_this.handleDurationChange_);_this.mediaSource.addEventListener("sourceopen",_this.handleSourceOpen_);_this.mediaSource.addEventListener("sourceended",_this.handleSourceEnded_);_this.seekable_=videojs.createTimeRanges();_this.hasPlayed_=false;_this.syncController_=new SyncController(options);_this.segmentMetadataTrack_=tech.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},false).track;_this.decrypter_=new Decrypter();_this.sourceUpdater_=new SourceUpdater(_this.mediaSource);_this.inbandTextTracks_={};_this.timelineChangeController_=new TimelineChangeController();var segmentLoaderSettings={vhs:_this.vhs_,parse708captions:options.parse708captions,useDtsForTimestampOffset:options.useDtsForTimestampOffset,captionServices:captionServices,mediaSource:_this.mediaSource,currentTime:_this.tech_.currentTime.bind(_this.tech_),seekable:function seekable3(){return _this.seekable();},seeking:function seeking(){return _this.tech_.seeking();},duration:function duration5(){return _this.duration();},hasPlayed:function hasPlayed(){return _this.hasPlayed_;},goalBufferLength:function goalBufferLength(){return _this.goalBufferLength();},bandwidth:bandwidth2,syncController:_this.syncController_,decrypter:_this.decrypter_,sourceType:_this.sourceType_,inbandTextTracks:_this.inbandTextTracks_,cacheEncryptionKeys:cacheEncryptionKeys,sourceUpdater:_this.sourceUpdater_,timelineChangeController:_this.timelineChangeController_,experimentalExactManifestTimings:options.experimentalExactManifestTimings};_this.masterPlaylistLoader_=_this.sourceType_==="dash"?new DashPlaylistLoader(src,_this.vhs_,_this.requestOptions_):new PlaylistLoader(src,_this.vhs_,_this.requestOptions_);_this.setupMasterPlaylistLoaderListeners_();_this.mainSegmentLoader_=new SegmentLoader(videojs.mergeOptions(segmentLoaderSettings,{segmentMetadataTrack:_this.segmentMetadataTrack_,loaderType:"main"}),options);_this.audioSegmentLoader_=new SegmentLoader(videojs.mergeOptions(segmentLoaderSettings,{loaderType:"audio"}),options);_this.subtitleSegmentLoader_=new VTTSegmentLoader(videojs.mergeOptions(segmentLoaderSettings,{loaderType:"vtt",featuresNativeTextTracks:_this.tech_.featuresNativeTextTracks}),options);_this.setupSegmentLoaderListeners_();if(_this.experimentalBufferBasedABR){_this.masterPlaylistLoader_.one("loadedplaylist",function(){return _this.startABRTimer_();});_this.tech_.on("pause",function(){return _this.stopABRTimer_();});_this.tech_.on("play",function(){return _this.startABRTimer_();});}loaderStats.forEach(function(stat){_this[stat+"_"]=sumLoaderStat.bind(_assertThisInitialized3(_this),stat);});_this.logger_=logger("MPC");_this.triggeredFmp4Usage=false;if(_this.tech_.preload()==="none"){_this.loadOnPlay_=function(){_this.loadOnPlay_=null;_this.masterPlaylistLoader_.load();};_this.tech_.one("play",_this.loadOnPlay_);}else{_this.masterPlaylistLoader_.load();}_this.timeToLoadedData__=-1;_this.mainAppendsToLoadedData__=-1;_this.audioAppendsToLoadedData__=-1;var event=_this.tech_.preload()==="none"?"play":"loadstart";_this.tech_.one(event,function(){var timeToLoadedDataStart=Date.now();_this.tech_.one("loadeddata",function(){_this.timeToLoadedData__=Date.now()-timeToLoadedDataStart;_this.mainAppendsToLoadedData__=_this.mainSegmentLoader_.mediaAppends;_this.audioAppendsToLoadedData__=_this.audioSegmentLoader_.mediaAppends;});});return _this;}var _proto=MasterPlaylistController2.prototype;_proto.mainAppendsToLoadedData_=function mainAppendsToLoadedData_(){return this.mainAppendsToLoadedData__;};_proto.audioAppendsToLoadedData_=function audioAppendsToLoadedData_(){return this.audioAppendsToLoadedData__;};_proto.appendsToLoadedData_=function appendsToLoadedData_(){var main=this.mainAppendsToLoadedData_();var audio=this.audioAppendsToLoadedData_();if(main===-1||audio===-1){return-1;}return main+audio;};_proto.timeToLoadedData_=function timeToLoadedData_(){return this.timeToLoadedData__;};_proto.checkABR_=function checkABR_(){var nextPlaylist=this.selectPlaylist();if(nextPlaylist&&this.shouldSwitchToMedia_(nextPlaylist)){this.switchMedia_(nextPlaylist,"abr");}};_proto.switchMedia_=function switchMedia_(playlist,cause,delay){var oldMedia=this.media();var oldId=oldMedia&&(oldMedia.id||oldMedia.uri);var newId=playlist.id||playlist.uri;if(oldId&&oldId!==newId){this.logger_("switch media "+oldId+" -> "+newId+" from "+cause);this.tech_.trigger({type:"usage",name:"vhs-rendition-change-"+cause});}this.masterPlaylistLoader_.media(playlist,delay);};_proto.startABRTimer_=function startABRTimer_(){var _this2=this;this.stopABRTimer_();this.abrTimer_=import_window6["default"].setInterval(function(){return _this2.checkABR_();},250);};_proto.stopABRTimer_=function stopABRTimer_(){if(this.tech_.scrubbing&&this.tech_.scrubbing()){return;}import_window6["default"].clearInterval(this.abrTimer_);this.abrTimer_=null;};_proto.getAudioTrackPlaylists_=function getAudioTrackPlaylists_(){var master=this.master();var defaultPlaylists=master&&master.playlists||[];if(!master||!master.mediaGroups||!master.mediaGroups.AUDIO){return defaultPlaylists;}var AUDIO5=master.mediaGroups.AUDIO;var groupKeys=Object.keys(AUDIO5);var track;if(Object.keys(this.mediaTypes_.AUDIO.groups).length){track=this.mediaTypes_.AUDIO.activeTrack();}else{var defaultGroup=AUDIO5.main||groupKeys.length&&AUDIO5[groupKeys[0]];for(var label in defaultGroup){if(defaultGroup[label]["default"]){track={label:label};break;}}}if(!track){return defaultPlaylists;}var playlists=[];for(var group in AUDIO5){if(AUDIO5[group][track.label]){var properties=AUDIO5[group][track.label];if(properties.playlists&&properties.playlists.length){playlists.push.apply(playlists,properties.playlists);}else if(properties.uri){playlists.push(properties);}else if(master.playlists.length){for(var i=0;i<master.playlists.length;i++){var playlist=master.playlists[i];if(playlist.attributes&&playlist.attributes.AUDIO&&playlist.attributes.AUDIO===group){playlists.push(playlist);}}}}}if(!playlists.length){return defaultPlaylists;}return playlists;};_proto.setupMasterPlaylistLoaderListeners_=function setupMasterPlaylistLoaderListeners_(){var _this3=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var media=_this3.masterPlaylistLoader_.media();var requestTimeout=media.targetDuration*1.5*1e3;if(isLowestEnabledRendition(_this3.masterPlaylistLoader_.master,_this3.masterPlaylistLoader_.media())){_this3.requestOptions_.timeout=0;}else{_this3.requestOptions_.timeout=requestTimeout;}if(media.endList&&_this3.tech_.preload()!=="none"){_this3.mainSegmentLoader_.playlist(media,_this3.requestOptions_);_this3.mainSegmentLoader_.load();}setupMediaGroups({sourceType:_this3.sourceType_,segmentLoaders:{AUDIO:_this3.audioSegmentLoader_,SUBTITLES:_this3.subtitleSegmentLoader_,main:_this3.mainSegmentLoader_},tech:_this3.tech_,requestOptions:_this3.requestOptions_,masterPlaylistLoader:_this3.masterPlaylistLoader_,vhs:_this3.vhs_,master:_this3.master(),mediaTypes:_this3.mediaTypes_,blacklistCurrentPlaylist:_this3.blacklistCurrentPlaylist.bind(_this3)});_this3.triggerPresenceUsage_(_this3.master(),media);_this3.setupFirstPlay();if(!_this3.mediaTypes_.AUDIO.activePlaylistLoader||_this3.mediaTypes_.AUDIO.activePlaylistLoader.media()){_this3.trigger("selectedinitialmedia");}else{_this3.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",function(){_this3.trigger("selectedinitialmedia");});}});this.masterPlaylistLoader_.on("loadedplaylist",function(){if(_this3.loadOnPlay_){_this3.tech_.off("play",_this3.loadOnPlay_);}var updatedPlaylist=_this3.masterPlaylistLoader_.media();if(!updatedPlaylist){_this3.excludeUnsupportedVariants_();var selectedMedia;if(_this3.enableLowInitialPlaylist){selectedMedia=_this3.selectInitialPlaylist();}if(!selectedMedia){selectedMedia=_this3.selectPlaylist();}if(!selectedMedia||!_this3.shouldSwitchToMedia_(selectedMedia)){return;}_this3.initialMedia_=selectedMedia;_this3.switchMedia_(_this3.initialMedia_,"initial");var haveJsonSource=_this3.sourceType_==="vhs-json"&&_this3.initialMedia_.segments;if(!haveJsonSource){return;}updatedPlaylist=_this3.initialMedia_;}_this3.handleUpdatedMediaPlaylist(updatedPlaylist);});this.masterPlaylistLoader_.on("error",function(){_this3.blacklistCurrentPlaylist(_this3.masterPlaylistLoader_.error);});this.masterPlaylistLoader_.on("mediachanging",function(){_this3.mainSegmentLoader_.abort();_this3.mainSegmentLoader_.pause();});this.masterPlaylistLoader_.on("mediachange",function(){var media=_this3.masterPlaylistLoader_.media();var requestTimeout=media.targetDuration*1.5*1e3;if(isLowestEnabledRendition(_this3.masterPlaylistLoader_.master,_this3.masterPlaylistLoader_.media())){_this3.requestOptions_.timeout=0;}else{_this3.requestOptions_.timeout=requestTimeout;}_this3.mainSegmentLoader_.playlist(media,_this3.requestOptions_);_this3.mainSegmentLoader_.load();_this3.tech_.trigger({type:"mediachange",bubbles:true});});this.masterPlaylistLoader_.on("playlistunchanged",function(){var updatedPlaylist=_this3.masterPlaylistLoader_.media();if(updatedPlaylist.lastExcludeReason_==="playlist-unchanged"){return;}var playlistOutdated=_this3.stuckAtPlaylistEnd_(updatedPlaylist);if(playlistOutdated){_this3.blacklistCurrentPlaylist({message:"Playlist no longer updating.",reason:"playlist-unchanged"});_this3.tech_.trigger("playliststuck");}});this.masterPlaylistLoader_.on("renditiondisabled",function(){_this3.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"});_this3.tech_.trigger({type:"usage",name:"hls-rendition-disabled"});});this.masterPlaylistLoader_.on("renditionenabled",function(){_this3.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"});_this3.tech_.trigger({type:"usage",name:"hls-rendition-enabled"});});};_proto.handleUpdatedMediaPlaylist=function handleUpdatedMediaPlaylist(updatedPlaylist){if(this.useCueTags_){this.updateAdCues_(updatedPlaylist);}this.mainSegmentLoader_.playlist(updatedPlaylist,this.requestOptions_);this.updateDuration(!updatedPlaylist.endList);if(!this.tech_.paused()){this.mainSegmentLoader_.load();if(this.audioSegmentLoader_){this.audioSegmentLoader_.load();}}};_proto.triggerPresenceUsage_=function triggerPresenceUsage_(master,media){var mediaGroups=master.mediaGroups||{};var defaultDemuxed=true;var audioGroupKeys=Object.keys(mediaGroups.AUDIO);for(var mediaGroup in mediaGroups.AUDIO){for(var label in mediaGroups.AUDIO[mediaGroup]){var properties=mediaGroups.AUDIO[mediaGroup][label];if(!properties.uri){defaultDemuxed=false;}}}if(defaultDemuxed){this.tech_.trigger({type:"usage",name:"vhs-demuxed"});this.tech_.trigger({type:"usage",name:"hls-demuxed"});}if(Object.keys(mediaGroups.SUBTITLES).length){this.tech_.trigger({type:"usage",name:"vhs-webvtt"});this.tech_.trigger({type:"usage",name:"hls-webvtt"});}if(Vhs$1.Playlist.isAes(media)){this.tech_.trigger({type:"usage",name:"vhs-aes"});this.tech_.trigger({type:"usage",name:"hls-aes"});}if(audioGroupKeys.length&&Object.keys(mediaGroups.AUDIO[audioGroupKeys[0]]).length>1){this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"});this.tech_.trigger({type:"usage",name:"hls-alternate-audio"});}if(this.useCueTags_){this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"});this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"});}};_proto.shouldSwitchToMedia_=function shouldSwitchToMedia_(nextPlaylist){var currentPlaylist=this.masterPlaylistLoader_.media()||this.masterPlaylistLoader_.pendingMedia_;var currentTime=this.tech_.currentTime();var bufferLowWaterLine=this.bufferLowWaterLine();var bufferHighWaterLine=this.bufferHighWaterLine();var buffered=this.tech_.buffered();return shouldSwitchToMedia({buffered:buffered,currentTime:currentTime,currentPlaylist:currentPlaylist,nextPlaylist:nextPlaylist,bufferLowWaterLine:bufferLowWaterLine,bufferHighWaterLine:bufferHighWaterLine,duration:this.duration(),experimentalBufferBasedABR:this.experimentalBufferBasedABR,log:this.logger_});};_proto.setupSegmentLoaderListeners_=function setupSegmentLoaderListeners_(){var _this4=this;if(!this.experimentalBufferBasedABR){this.mainSegmentLoader_.on("bandwidthupdate",function(){var nextPlaylist=_this4.selectPlaylist();if(_this4.shouldSwitchToMedia_(nextPlaylist)){_this4.switchMedia_(nextPlaylist,"bandwidthupdate");}_this4.tech_.trigger("bandwidthupdate");});this.mainSegmentLoader_.on("progress",function(){_this4.trigger("progress");});}this.mainSegmentLoader_.on("error",function(){_this4.blacklistCurrentPlaylist(_this4.mainSegmentLoader_.error());});this.mainSegmentLoader_.on("appenderror",function(){_this4.error=_this4.mainSegmentLoader_.error_;_this4.trigger("error");});this.mainSegmentLoader_.on("syncinfoupdate",function(){_this4.onSyncInfoUpdate_();});this.mainSegmentLoader_.on("timestampoffset",function(){_this4.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"});_this4.tech_.trigger({type:"usage",name:"hls-timestamp-offset"});});this.audioSegmentLoader_.on("syncinfoupdate",function(){_this4.onSyncInfoUpdate_();});this.audioSegmentLoader_.on("appenderror",function(){_this4.error=_this4.audioSegmentLoader_.error_;_this4.trigger("error");});this.mainSegmentLoader_.on("ended",function(){_this4.logger_("main segment loader ended");_this4.onEndOfStream();});this.mainSegmentLoader_.on("earlyabort",function(event){if(_this4.experimentalBufferBasedABR){return;}_this4.delegateLoaders_("all",["abort"]);_this4.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},ABORT_EARLY_BLACKLIST_SECONDS);});var updateCodecs=function updateCodecs2(){if(!_this4.sourceUpdater_.hasCreatedSourceBuffers()){return _this4.tryToCreateSourceBuffers_();}var codecs=_this4.getCodecsOrExclude_();if(!codecs){return;}_this4.sourceUpdater_.addOrChangeSourceBuffers(codecs);};this.mainSegmentLoader_.on("trackinfo",updateCodecs);this.audioSegmentLoader_.on("trackinfo",updateCodecs);this.mainSegmentLoader_.on("fmp4",function(){if(!_this4.triggeredFmp4Usage){_this4.tech_.trigger({type:"usage",name:"vhs-fmp4"});_this4.tech_.trigger({type:"usage",name:"hls-fmp4"});_this4.triggeredFmp4Usage=true;}});this.audioSegmentLoader_.on("fmp4",function(){if(!_this4.triggeredFmp4Usage){_this4.tech_.trigger({type:"usage",name:"vhs-fmp4"});_this4.tech_.trigger({type:"usage",name:"hls-fmp4"});_this4.triggeredFmp4Usage=true;}});this.audioSegmentLoader_.on("ended",function(){_this4.logger_("audioSegmentLoader ended");_this4.onEndOfStream();});};_proto.mediaSecondsLoaded_=function mediaSecondsLoaded_(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded);};_proto.load=function load(){this.mainSegmentLoader_.load();if(this.mediaTypes_.AUDIO.activePlaylistLoader){this.audioSegmentLoader_.load();}if(this.mediaTypes_.SUBTITLES.activePlaylistLoader){this.subtitleSegmentLoader_.load();}};_proto.smoothQualityChange_=function smoothQualityChange_(media){if(media===void 0){media=this.selectPlaylist();}this.fastQualityChange_(media);};_proto.fastQualityChange_=function fastQualityChange_(media){var _this5=this;if(media===void 0){media=this.selectPlaylist();}if(media===this.masterPlaylistLoader_.media()){this.logger_("skipping fastQualityChange because new media is same as old");return;}this.switchMedia_(media,"fast-quality");this.mainSegmentLoader_.resetEverything(function(){if(videojs.browser.IE_VERSION||videojs.browser.IS_EDGE){_this5.tech_.setCurrentTime(_this5.tech_.currentTime()+0.04);}else{_this5.tech_.setCurrentTime(_this5.tech_.currentTime());}});};_proto.play=function play(){if(this.setupFirstPlay()){return;}if(this.tech_.ended()){this.tech_.setCurrentTime(0);}if(this.hasPlayed_){this.load();}var seekable3=this.tech_.seekable();if(this.tech_.duration()===Infinity){if(this.tech_.currentTime()<seekable3.start(0)){return this.tech_.setCurrentTime(seekable3.end(seekable3.length-1));}}};_proto.setupFirstPlay=function setupFirstPlay(){var _this6=this;var media=this.masterPlaylistLoader_.media();if(!media||this.tech_.paused()||this.hasPlayed_){return false;}if(!media.endList){var seekable3=this.seekable();if(!seekable3.length){return false;}if(videojs.browser.IE_VERSION&&this.tech_.readyState()===0){this.tech_.one("loadedmetadata",function(){_this6.trigger("firstplay");_this6.tech_.setCurrentTime(seekable3.end(0));_this6.hasPlayed_=true;});return false;}this.trigger("firstplay");this.tech_.setCurrentTime(seekable3.end(0));}this.hasPlayed_=true;this.load();return true;};_proto.handleSourceOpen_=function handleSourceOpen_(){this.tryToCreateSourceBuffers_();if(this.tech_.autoplay()){var playPromise=this.tech_.play();if(typeof playPromise!=="undefined"&&typeof playPromise.then==="function"){playPromise.then(null,function(e){});}}this.trigger("sourceopen");};_proto.handleSourceEnded_=function handleSourceEnded_(){if(!this.inbandTextTracks_.metadataTrack_){return;}var cues=this.inbandTextTracks_.metadataTrack_.cues;if(!cues||!cues.length){return;}var duration5=this.duration();cues[cues.length-1].endTime=isNaN(duration5)||Math.abs(duration5)===Infinity?Number.MAX_VALUE:duration5;};_proto.handleDurationChange_=function handleDurationChange_(){this.tech_.trigger("durationchange");};_proto.onEndOfStream=function onEndOfStream(){var isEndOfStream=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){var mainMediaInfo=this.mainSegmentLoader_.getCurrentMediaInfo_();if(!mainMediaInfo||mainMediaInfo.hasVideo){isEndOfStream=isEndOfStream&&this.audioSegmentLoader_.ended_;}else{isEndOfStream=this.audioSegmentLoader_.ended_;}}if(!isEndOfStream){return;}this.stopABRTimer_();this.sourceUpdater_.endOfStream();};_proto.stuckAtPlaylistEnd_=function stuckAtPlaylistEnd_(playlist){var seekable3=this.seekable();if(!seekable3.length){return false;}var expired=this.syncController_.getExpiredTime(playlist,this.duration());if(expired===null){return false;}var absolutePlaylistEnd=Vhs$1.Playlist.playlistEnd(playlist,expired);var currentTime=this.tech_.currentTime();var buffered=this.tech_.buffered();if(!buffered.length){return absolutePlaylistEnd-currentTime<=SAFE_TIME_DELTA;}var bufferedEnd=buffered.end(buffered.length-1);return bufferedEnd-currentTime<=SAFE_TIME_DELTA&&absolutePlaylistEnd-bufferedEnd<=SAFE_TIME_DELTA;};_proto.blacklistCurrentPlaylist=function blacklistCurrentPlaylist(error,blacklistDuration){if(error===void 0){error={};}var currentPlaylist=error.playlist||this.masterPlaylistLoader_.media();blacklistDuration=blacklistDuration||error.blacklistDuration||this.blacklistDuration;if(!currentPlaylist){this.error=error;if(this.mediaSource.readyState!=="open"){this.trigger("error");}else{this.sourceUpdater_.endOfStream("network");}return;}currentPlaylist.playlistErrors_++;var playlists=this.masterPlaylistLoader_.master.playlists;var enabledPlaylists=playlists.filter(isEnabled);var isFinalRendition=enabledPlaylists.length===1&&enabledPlaylists[0]===currentPlaylist;if(playlists.length===1&&blacklistDuration!==Infinity){videojs.log.warn("Problem encountered with playlist "+currentPlaylist.id+". Trying again since it is the only playlist.");this.tech_.trigger("retryplaylist");return this.masterPlaylistLoader_.load(isFinalRendition);}if(isFinalRendition){var reincluded=false;playlists.forEach(function(playlist){if(playlist===currentPlaylist){return;}var excludeUntil2=playlist.excludeUntil;if(typeof excludeUntil2!=="undefined"&&excludeUntil2!==Infinity){reincluded=true;delete playlist.excludeUntil;}});if(reincluded){videojs.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded.");this.tech_.trigger("retryplaylist");}}var excludeUntil;if(currentPlaylist.playlistErrors_>this.maxPlaylistRetries){excludeUntil=Infinity;}else{excludeUntil=Date.now()+blacklistDuration*1e3;}currentPlaylist.excludeUntil=excludeUntil;if(error.reason){currentPlaylist.lastExcludeReason_=error.reason;}this.tech_.trigger("blacklistplaylist");this.tech_.trigger({type:"usage",name:"vhs-rendition-blacklisted"});this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"});var nextPlaylist=this.selectPlaylist();if(!nextPlaylist){this.error="Playback cannot continue. No available working or supported playlists.";this.trigger("error");return;}var logFn2=error.internal?this.logger_:videojs.log.warn;var errorMessage=error.message?" "+error.message:"";logFn2((error.internal?"Internal problem":"Problem")+" encountered with playlist "+currentPlaylist.id+"."+(errorMessage+" Switching to playlist "+nextPlaylist.id+"."));if(nextPlaylist.attributes.AUDIO!==currentPlaylist.attributes.AUDIO){this.delegateLoaders_("audio",["abort","pause"]);}if(nextPlaylist.attributes.SUBTITLES!==currentPlaylist.attributes.SUBTITLES){this.delegateLoaders_("subtitle",["abort","pause"]);}this.delegateLoaders_("main",["abort","pause"]);var delayDuration=nextPlaylist.targetDuration/2*1e3||5*1e3;var shouldDelay=typeof nextPlaylist.lastRequest==="number"&&Date.now()-nextPlaylist.lastRequest<=delayDuration;return this.switchMedia_(nextPlaylist,"exclude",isFinalRendition||shouldDelay);};_proto.pauseLoading=function pauseLoading(){this.delegateLoaders_("all",["abort","pause"]);this.stopABRTimer_();};_proto.delegateLoaders_=function delegateLoaders_(filter,fnNames){var _this7=this;var loaders=[];var dontFilterPlaylist=filter==="all";if(dontFilterPlaylist||filter==="main"){loaders.push(this.masterPlaylistLoader_);}var mediaTypes2=[];if(dontFilterPlaylist||filter==="audio"){mediaTypes2.push("AUDIO");}if(dontFilterPlaylist||filter==="subtitle"){mediaTypes2.push("CLOSED-CAPTIONS");mediaTypes2.push("SUBTITLES");}mediaTypes2.forEach(function(mediaType){var loader=_this7.mediaTypes_[mediaType]&&_this7.mediaTypes_[mediaType].activePlaylistLoader;if(loader){loaders.push(loader);}});["main","audio","subtitle"].forEach(function(name){var loader=_this7[name+"SegmentLoader_"];if(loader&&(filter===name||filter==="all")){loaders.push(loader);}});loaders.forEach(function(loader){return fnNames.forEach(function(fnName){if(typeof loader[fnName]==="function"){loader[fnName]();}});});};_proto.setCurrentTime=function setCurrentTime(currentTime){var buffered=findRange(this.tech_.buffered(),currentTime);if(!(this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media())){return 0;}if(!this.masterPlaylistLoader_.media().segments){return 0;}if(buffered&&buffered.length){return currentTime;}this.mainSegmentLoader_.resetEverything();this.mainSegmentLoader_.abort();if(this.mediaTypes_.AUDIO.activePlaylistLoader){this.audioSegmentLoader_.resetEverything();this.audioSegmentLoader_.abort();}if(this.mediaTypes_.SUBTITLES.activePlaylistLoader){this.subtitleSegmentLoader_.resetEverything();this.subtitleSegmentLoader_.abort();}this.load();};_proto.duration=function duration5(){if(!this.masterPlaylistLoader_){return 0;}var media=this.masterPlaylistLoader_.media();if(!media){return 0;}if(!media.endList){return Infinity;}if(this.mediaSource){return this.mediaSource.duration;}return Vhs$1.Playlist.duration(media);};_proto.seekable=function seekable3(){return this.seekable_;};_proto.onSyncInfoUpdate_=function onSyncInfoUpdate_(){var audioSeekable;if(!this.masterPlaylistLoader_){return;}var media=this.masterPlaylistLoader_.media();if(!media){return;}var expired=this.syncController_.getExpiredTime(media,this.duration());if(expired===null){return;}var master=this.masterPlaylistLoader_.master;var mainSeekable=Vhs$1.Playlist.seekable(media,expired,Vhs$1.Playlist.liveEdgeDelay(master,media));if(mainSeekable.length===0){return;}if(this.mediaTypes_.AUDIO.activePlaylistLoader){media=this.mediaTypes_.AUDIO.activePlaylistLoader.media();expired=this.syncController_.getExpiredTime(media,this.duration());if(expired===null){return;}audioSeekable=Vhs$1.Playlist.seekable(media,expired,Vhs$1.Playlist.liveEdgeDelay(master,media));if(audioSeekable.length===0){return;}}var oldEnd;var oldStart;if(this.seekable_&&this.seekable_.length){oldEnd=this.seekable_.end(0);oldStart=this.seekable_.start(0);}if(!audioSeekable){this.seekable_=mainSeekable;}else if(audioSeekable.start(0)>mainSeekable.end(0)||mainSeekable.start(0)>audioSeekable.end(0)){this.seekable_=mainSeekable;}else{this.seekable_=videojs.createTimeRanges([[audioSeekable.start(0)>mainSeekable.start(0)?audioSeekable.start(0):mainSeekable.start(0),audioSeekable.end(0)<mainSeekable.end(0)?audioSeekable.end(0):mainSeekable.end(0)]]);}if(this.seekable_&&this.seekable_.length){if(this.seekable_.end(0)===oldEnd&&this.seekable_.start(0)===oldStart){return;}}this.logger_("seekable updated ["+printableRange(this.seekable_)+"]");this.tech_.trigger("seekablechanged");};_proto.updateDuration=function updateDuration(isLive){if(this.updateDuration_){this.mediaSource.removeEventListener("sourceopen",this.updateDuration_);this.updateDuration_=null;}if(this.mediaSource.readyState!=="open"){this.updateDuration_=this.updateDuration.bind(this,isLive);this.mediaSource.addEventListener("sourceopen",this.updateDuration_);return;}if(isLive){var seekable3=this.seekable();if(!seekable3.length){return;}if(isNaN(this.mediaSource.duration)||this.mediaSource.duration<seekable3.end(seekable3.length-1)){this.sourceUpdater_.setDuration(seekable3.end(seekable3.length-1));}return;}var buffered=this.tech_.buffered();var duration5=Vhs$1.Playlist.duration(this.masterPlaylistLoader_.media());if(buffered.length>0){duration5=Math.max(duration5,buffered.end(buffered.length-1));}if(this.mediaSource.duration!==duration5){this.sourceUpdater_.setDuration(duration5);}};_proto.dispose=function dispose(){var _this8=this;this.trigger("dispose");this.decrypter_.terminate();this.masterPlaylistLoader_.dispose();this.mainSegmentLoader_.dispose();if(this.loadOnPlay_){this.tech_.off("play",this.loadOnPlay_);}["AUDIO","SUBTITLES"].forEach(function(type2){var groups=_this8.mediaTypes_[type2].groups;for(var id in groups){groups[id].forEach(function(group){if(group.playlistLoader){group.playlistLoader.dispose();}});}});this.audioSegmentLoader_.dispose();this.subtitleSegmentLoader_.dispose();this.sourceUpdater_.dispose();this.timelineChangeController_.dispose();this.stopABRTimer_();if(this.updateDuration_){this.mediaSource.removeEventListener("sourceopen",this.updateDuration_);}this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_);this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_);this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_);this.off();};_proto.master=function master(){return this.masterPlaylistLoader_.master;};_proto.media=function media(){return this.masterPlaylistLoader_.media()||this.initialMedia_;};_proto.areMediaTypesKnown_=function areMediaTypesKnown_(){var usingAudioLoader=!!this.mediaTypes_.AUDIO.activePlaylistLoader;var hasMainMediaInfo=!!this.mainSegmentLoader_.getCurrentMediaInfo_();var hasAudioMediaInfo=!usingAudioLoader?true:!!this.audioSegmentLoader_.getCurrentMediaInfo_();if(!hasMainMediaInfo||!hasAudioMediaInfo){return false;}return true;};_proto.getCodecsOrExclude_=function getCodecsOrExclude_(){var _this9=this;var media={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}};media.video=media.main;var playlistCodecs=codecsForPlaylist(this.master(),this.media());var codecs={};var usingAudioLoader=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(media.main.hasVideo){codecs.video=playlistCodecs.video||media.main.videoCodec||DEFAULT_VIDEO_CODEC;}if(media.main.isMuxed){codecs.video+=","+(playlistCodecs.audio||media.main.audioCodec||DEFAULT_AUDIO_CODEC);}if(media.main.hasAudio&&!media.main.isMuxed||media.audio.hasAudio||usingAudioLoader){codecs.audio=playlistCodecs.audio||media.main.audioCodec||media.audio.audioCodec||DEFAULT_AUDIO_CODEC;media.audio.isFmp4=media.main.hasAudio&&!media.main.isMuxed?media.main.isFmp4:media.audio.isFmp4;}if(!codecs.audio&&!codecs.video){this.blacklistCurrentPlaylist({playlist:this.media(),message:"Could not determine codecs for playlist.",blacklistDuration:Infinity});return;}var supportFunction=function supportFunction2(isFmp4,codec){return isFmp4?browserSupportsCodec(codec):muxerSupportsCodec(codec);};var unsupportedCodecs={};var unsupportedAudio;["video","audio"].forEach(function(type2){if(codecs.hasOwnProperty(type2)&&!supportFunction(media[type2].isFmp4,codecs[type2])){var supporter=media[type2].isFmp4?"browser":"muxer";unsupportedCodecs[supporter]=unsupportedCodecs[supporter]||[];unsupportedCodecs[supporter].push(codecs[type2]);if(type2==="audio"){unsupportedAudio=supporter;}}});if(usingAudioLoader&&unsupportedAudio&&this.media().attributes.AUDIO){var audioGroup=this.media().attributes.AUDIO;this.master().playlists.forEach(function(variant){var variantAudioGroup=variant.attributes&&variant.attributes.AUDIO;if(variantAudioGroup===audioGroup&&variant!==_this9.media()){variant.excludeUntil=Infinity;}});this.logger_("excluding audio group "+audioGroup+" as "+unsupportedAudio+' does not support codec(s): "'+codecs.audio+'"');}if(Object.keys(unsupportedCodecs).length){var message=Object.keys(unsupportedCodecs).reduce(function(acc,supporter){if(acc){acc+=", ";}acc+=supporter+' does not support codec(s): "'+unsupportedCodecs[supporter].join(",")+'"';return acc;},"")+".";this.blacklistCurrentPlaylist({playlist:this.media(),internal:true,message:message,blacklistDuration:Infinity});return;}if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){var switchMessages=[];["video","audio"].forEach(function(type2){var newCodec=(parseCodecs(_this9.sourceUpdater_.codecs[type2]||"")[0]||{}).type;var oldCodec=(parseCodecs(codecs[type2]||"")[0]||{}).type;if(newCodec&&oldCodec&&newCodec.toLowerCase()!==oldCodec.toLowerCase()){switchMessages.push('"'+_this9.sourceUpdater_.codecs[type2]+'" -> "'+codecs[type2]+'"');}});if(switchMessages.length){this.blacklistCurrentPlaylist({playlist:this.media(),message:"Codec switching not supported: "+switchMessages.join(", ")+".",blacklistDuration:Infinity,internal:true});return;}}return codecs;};_proto.tryToCreateSourceBuffers_=function tryToCreateSourceBuffers_(){if(this.mediaSource.readyState!=="open"||this.sourceUpdater_.hasCreatedSourceBuffers()){return;}if(!this.areMediaTypesKnown_()){return;}var codecs=this.getCodecsOrExclude_();if(!codecs){return;}this.sourceUpdater_.createSourceBuffers(codecs);var codecString=[codecs.video,codecs.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(codecString);};_proto.excludeUnsupportedVariants_=function excludeUnsupportedVariants_(){var _this10=this;var playlists=this.master().playlists;var ids=[];Object.keys(playlists).forEach(function(key){var variant=playlists[key];if(ids.indexOf(variant.id)!==-1){return;}ids.push(variant.id);var codecs=codecsForPlaylist(_this10.master,variant);var unsupported=[];if(codecs.audio&&!muxerSupportsCodec(codecs.audio)&&!browserSupportsCodec(codecs.audio)){unsupported.push("audio codec "+codecs.audio);}if(codecs.video&&!muxerSupportsCodec(codecs.video)&&!browserSupportsCodec(codecs.video)){unsupported.push("video codec "+codecs.video);}if(codecs.text&&codecs.text==="stpp.ttml.im1t"){unsupported.push("text codec "+codecs.text);}if(unsupported.length){variant.excludeUntil=Infinity;_this10.logger_("excluding "+variant.id+" for unsupported: "+unsupported.join(", "));}});};_proto.excludeIncompatibleVariants_=function excludeIncompatibleVariants_(codecString){var _this11=this;var ids=[];var playlists=this.master().playlists;var codecs=unwrapCodecList(parseCodecs(codecString));var codecCount_=codecCount(codecs);var videoDetails=codecs.video&&parseCodecs(codecs.video)[0]||null;var audioDetails=codecs.audio&&parseCodecs(codecs.audio)[0]||null;Object.keys(playlists).forEach(function(key){var variant=playlists[key];if(ids.indexOf(variant.id)!==-1||variant.excludeUntil===Infinity){return;}ids.push(variant.id);var blacklistReasons=[];var variantCodecs=codecsForPlaylist(_this11.masterPlaylistLoader_.master,variant);var variantCodecCount=codecCount(variantCodecs);if(!variantCodecs.audio&&!variantCodecs.video){return;}if(variantCodecCount!==codecCount_){blacklistReasons.push('codec count "'+variantCodecCount+'" !== "'+codecCount_+'"');}if(!_this11.sourceUpdater_.canChangeType()){var variantVideoDetails=variantCodecs.video&&parseCodecs(variantCodecs.video)[0]||null;var variantAudioDetails=variantCodecs.audio&&parseCodecs(variantCodecs.audio)[0]||null;if(variantVideoDetails&&videoDetails&&variantVideoDetails.type.toLowerCase()!==videoDetails.type.toLowerCase()){blacklistReasons.push('video codec "'+variantVideoDetails.type+'" !== "'+videoDetails.type+'"');}if(variantAudioDetails&&audioDetails&&variantAudioDetails.type.toLowerCase()!==audioDetails.type.toLowerCase()){blacklistReasons.push('audio codec "'+variantAudioDetails.type+'" !== "'+audioDetails.type+'"');}}if(blacklistReasons.length){variant.excludeUntil=Infinity;_this11.logger_("blacklisting "+variant.id+": "+blacklistReasons.join(" && "));}});};_proto.updateAdCues_=function updateAdCues_(media){var offset=0;var seekable3=this.seekable();if(seekable3.length){offset=seekable3.start(0);}updateAdCues(media,this.cueTagsTrack_,offset);};_proto.goalBufferLength=function goalBufferLength(){var currentTime=this.tech_.currentTime();var initial=Config.GOAL_BUFFER_LENGTH;var rate=Config.GOAL_BUFFER_LENGTH_RATE;var max=Math.max(initial,Config.MAX_GOAL_BUFFER_LENGTH);return Math.min(initial+currentTime*rate,max);};_proto.bufferLowWaterLine=function bufferLowWaterLine(){var currentTime=this.tech_.currentTime();var initial=Config.BUFFER_LOW_WATER_LINE;var rate=Config.BUFFER_LOW_WATER_LINE_RATE;var max=Math.max(initial,Config.MAX_BUFFER_LOW_WATER_LINE);var newMax=Math.max(initial,Config.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(initial+currentTime*rate,this.experimentalBufferBasedABR?newMax:max);};_proto.bufferHighWaterLine=function bufferHighWaterLine(){return Config.BUFFER_HIGH_WATER_LINE;};return MasterPlaylistController2;}(videojs.EventTarget);var enableFunction=function enableFunction2(loader,playlistID,changePlaylistFn){return function(enable){var playlist=loader.master.playlists[playlistID];var incompatible=isIncompatible(playlist);var currentlyEnabled=isEnabled(playlist);if(typeof enable==="undefined"){return currentlyEnabled;}if(enable){delete playlist.disabled;}else{playlist.disabled=true;}if(enable!==currentlyEnabled&&!incompatible){changePlaylistFn();if(enable){loader.trigger("renditionenabled");}else{loader.trigger("renditiondisabled");}}return enable;};};var Representation=function Representation2(vhsHandler,playlist,id){var mpc=vhsHandler.masterPlaylistController_,smoothQualityChange=vhsHandler.options_.smoothQualityChange;var changeType2=smoothQualityChange?"smooth":"fast";var qualityChangeFunction=mpc[changeType2+"QualityChange_"].bind(mpc);if(playlist.attributes){var resolution=playlist.attributes.RESOLUTION;this.width=resolution&&resolution.width;this.height=resolution&&resolution.height;this.bandwidth=playlist.attributes.BANDWIDTH;}this.codecs=codecsForPlaylist(mpc.master(),playlist);this.playlist=playlist;this.id=id;this.enabled=enableFunction(vhsHandler.playlists,playlist.id,qualityChangeFunction);};var renditionSelectionMixin=function renditionSelectionMixin2(vhsHandler){vhsHandler.representations=function(){var master=vhsHandler.masterPlaylistController_.master();var playlists=isAudioOnly(master)?vhsHandler.masterPlaylistController_.getAudioTrackPlaylists_():master.playlists;if(!playlists){return[];}return playlists.filter(function(media){return!isIncompatible(media);}).map(function(e,i){return new Representation(vhsHandler,e,e.id);});};};var timerCancelEvents=["seeking","seeked","pause","playing","error"];var PlaybackWatcher=/* @__PURE__ */function(){function PlaybackWatcher2(options){var _this=this;this.masterPlaylistController_=options.masterPlaylistController;this.tech_=options.tech;this.seekable=options.seekable;this.allowSeeksWithinUnsafeLiveWindow=options.allowSeeksWithinUnsafeLiveWindow;this.liveRangeSafeTimeDelta=options.liveRangeSafeTimeDelta;this.media=options.media;this.consecutiveUpdates=0;this.lastRecordedTime=null;this.timer_=null;this.checkCurrentTimeTimeout_=null;this.logger_=logger("PlaybackWatcher");this.logger_("initialize");var playHandler=function playHandler2(){return _this.monitorCurrentTime_();};var canPlayHandler=function canPlayHandler2(){return _this.monitorCurrentTime_();};var waitingHandler=function waitingHandler2(){return _this.techWaiting_();};var cancelTimerHandler=function cancelTimerHandler2(){return _this.cancelTimer_();};var mpc=this.masterPlaylistController_;var loaderTypes=["main","subtitle","audio"];var loaderChecks={};loaderTypes.forEach(function(type2){loaderChecks[type2]={reset:function reset3(){return _this.resetSegmentDownloads_(type2);},updateend:function updateend(){return _this.checkSegmentDownloads_(type2);}};mpc[type2+"SegmentLoader_"].on("appendsdone",loaderChecks[type2].updateend);mpc[type2+"SegmentLoader_"].on("playlistupdate",loaderChecks[type2].reset);_this.tech_.on(["seeked","seeking"],loaderChecks[type2].reset);});var setSeekingHandlers=function setSeekingHandlers2(fn){["main","audio"].forEach(function(type2){mpc[type2+"SegmentLoader_"][fn]("appended",_this.seekingAppendCheck_);});};this.seekingAppendCheck_=function(){if(_this.fixesBadSeeks_()){_this.consecutiveUpdates=0;_this.lastRecordedTime=_this.tech_.currentTime();setSeekingHandlers("off");}};this.clearSeekingAppendCheck_=function(){return setSeekingHandlers("off");};this.watchForBadSeeking_=function(){_this.clearSeekingAppendCheck_();setSeekingHandlers("on");};this.tech_.on("seeked",this.clearSeekingAppendCheck_);this.tech_.on("seeking",this.watchForBadSeeking_);this.tech_.on("waiting",waitingHandler);this.tech_.on(timerCancelEvents,cancelTimerHandler);this.tech_.on("canplay",canPlayHandler);this.tech_.one("play",playHandler);this.dispose=function(){_this.clearSeekingAppendCheck_();_this.logger_("dispose");_this.tech_.off("waiting",waitingHandler);_this.tech_.off(timerCancelEvents,cancelTimerHandler);_this.tech_.off("canplay",canPlayHandler);_this.tech_.off("play",playHandler);_this.tech_.off("seeking",_this.watchForBadSeeking_);_this.tech_.off("seeked",_this.clearSeekingAppendCheck_);loaderTypes.forEach(function(type2){mpc[type2+"SegmentLoader_"].off("appendsdone",loaderChecks[type2].updateend);mpc[type2+"SegmentLoader_"].off("playlistupdate",loaderChecks[type2].reset);_this.tech_.off(["seeked","seeking"],loaderChecks[type2].reset);});if(_this.checkCurrentTimeTimeout_){import_window6["default"].clearTimeout(_this.checkCurrentTimeTimeout_);}_this.cancelTimer_();};}var _proto=PlaybackWatcher2.prototype;_proto.monitorCurrentTime_=function monitorCurrentTime_(){this.checkCurrentTime_();if(this.checkCurrentTimeTimeout_){import_window6["default"].clearTimeout(this.checkCurrentTimeTimeout_);}this.checkCurrentTimeTimeout_=import_window6["default"].setTimeout(this.monitorCurrentTime_.bind(this),250);};_proto.resetSegmentDownloads_=function resetSegmentDownloads_(type2){var loader=this.masterPlaylistController_[type2+"SegmentLoader_"];if(this[type2+"StalledDownloads_"]>0){this.logger_("resetting possible stalled download count for "+type2+" loader");}this[type2+"StalledDownloads_"]=0;this[type2+"Buffered_"]=loader.buffered_();};_proto.checkSegmentDownloads_=function checkSegmentDownloads_(type2){var mpc=this.masterPlaylistController_;var loader=mpc[type2+"SegmentLoader_"];var buffered=loader.buffered_();var isBufferedDifferent=isRangeDifferent(this[type2+"Buffered_"],buffered);this[type2+"Buffered_"]=buffered;if(isBufferedDifferent){this.resetSegmentDownloads_(type2);return;}this[type2+"StalledDownloads_"]++;this.logger_("found #"+this[type2+"StalledDownloads_"]+" "+type2+" appends that did not increase buffer (possible stalled download)",{playlistId:loader.playlist_&&loader.playlist_.id,buffered:timeRangesToArray(buffered)});if(this[type2+"StalledDownloads_"]<10){return;}this.logger_(type2+" loader stalled download exclusion");this.resetSegmentDownloads_(type2);this.tech_.trigger({type:"usage",name:"vhs-"+type2+"-download-exclusion"});if(type2==="subtitle"){return;}mpc.blacklistCurrentPlaylist({message:"Excessive "+type2+" segment downloading detected."},Infinity);};_proto.checkCurrentTime_=function checkCurrentTime_(){if(this.tech_.paused()||this.tech_.seeking()){return;}var currentTime=this.tech_.currentTime();var buffered=this.tech_.buffered();if(this.lastRecordedTime===currentTime&&(!buffered.length||currentTime+SAFE_TIME_DELTA>=buffered.end(buffered.length-1))){return this.techWaiting_();}if(this.consecutiveUpdates>=5&&currentTime===this.lastRecordedTime){this.consecutiveUpdates++;this.waiting_();}else if(currentTime===this.lastRecordedTime){this.consecutiveUpdates++;}else{this.consecutiveUpdates=0;this.lastRecordedTime=currentTime;}};_proto.cancelTimer_=function cancelTimer_(){this.consecutiveUpdates=0;if(this.timer_){this.logger_("cancelTimer_");clearTimeout(this.timer_);}this.timer_=null;};_proto.fixesBadSeeks_=function fixesBadSeeks_(){var seeking=this.tech_.seeking();if(!seeking){return false;}var seekable3=this.seekable();var currentTime=this.tech_.currentTime();var isAfterSeekableRange=this.afterSeekableWindow_(seekable3,currentTime,this.media(),this.allowSeeksWithinUnsafeLiveWindow);var seekTo;if(isAfterSeekableRange){var seekableEnd=seekable3.end(seekable3.length-1);seekTo=seekableEnd;}if(this.beforeSeekableWindow_(seekable3,currentTime)){var seekableStart=seekable3.start(0);seekTo=seekableStart+(seekableStart===seekable3.end(0)?0:SAFE_TIME_DELTA);}if(typeof seekTo!=="undefined"){this.logger_("Trying to seek outside of seekable at time "+currentTime+" with "+("seekable range "+printableRange(seekable3)+". Seeking to ")+(seekTo+"."));this.tech_.setCurrentTime(seekTo);return true;}var sourceUpdater=this.masterPlaylistController_.sourceUpdater_;var buffered=this.tech_.buffered();var audioBuffered=sourceUpdater.audioBuffer?sourceUpdater.audioBuffered():null;var videoBuffered=sourceUpdater.videoBuffer?sourceUpdater.videoBuffered():null;var media=this.media();var minAppendedDuration=media.partTargetDuration?media.partTargetDuration:(media.targetDuration-TIME_FUDGE_FACTOR)*2;var bufferedToCheck=[audioBuffered,videoBuffered];for(var i=0;i<bufferedToCheck.length;i++){if(!bufferedToCheck[i]){continue;}var timeAhead=timeAheadOf(bufferedToCheck[i],currentTime);if(timeAhead<minAppendedDuration){return false;}}var nextRange=findNextRange(buffered,currentTime);if(nextRange.length===0){return false;}seekTo=nextRange.start(0)+SAFE_TIME_DELTA;this.logger_("Buffered region starts ("+nextRange.start(0)+") "+(" just beyond seek point ("+currentTime+"). Seeking to "+seekTo+"."));this.tech_.setCurrentTime(seekTo);return true;};_proto.waiting_=function waiting_(){if(this.techWaiting_()){return;}var currentTime=this.tech_.currentTime();var buffered=this.tech_.buffered();var currentRange=findRange(buffered,currentTime);if(currentRange.length&&currentTime+3<=currentRange.end(0)){this.cancelTimer_();this.tech_.setCurrentTime(currentTime);this.logger_("Stopped at "+currentTime+" while inside a buffered region "+("["+currentRange.start(0)+" -> "+currentRange.end(0)+"]. Attempting to resume ")+"playback by seeking to the current time.");this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"});this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"});return;}};_proto.techWaiting_=function techWaiting_(){var seekable3=this.seekable();var currentTime=this.tech_.currentTime();if(this.tech_.seeking()||this.timer_!==null){return true;}if(this.beforeSeekableWindow_(seekable3,currentTime)){var livePoint=seekable3.end(seekable3.length-1);this.logger_("Fell out of live window at time "+currentTime+". Seeking to "+("live point (seekable end) "+livePoint));this.cancelTimer_();this.tech_.setCurrentTime(livePoint);this.tech_.trigger({type:"usage",name:"vhs-live-resync"});this.tech_.trigger({type:"usage",name:"hls-live-resync"});return true;}var sourceUpdater=this.tech_.vhs.masterPlaylistController_.sourceUpdater_;var buffered=this.tech_.buffered();var videoUnderflow=this.videoUnderflow_({audioBuffered:sourceUpdater.audioBuffered(),videoBuffered:sourceUpdater.videoBuffered(),currentTime:currentTime});if(videoUnderflow){this.cancelTimer_();this.tech_.setCurrentTime(currentTime);this.tech_.trigger({type:"usage",name:"vhs-video-underflow"});this.tech_.trigger({type:"usage",name:"hls-video-underflow"});return true;}var nextRange=findNextRange(buffered,currentTime);if(nextRange.length>0){var difference=nextRange.start(0)-currentTime;this.logger_("Stopped at "+currentTime+", setting timer for "+difference+", seeking "+("to "+nextRange.start(0)));this.cancelTimer_();this.timer_=setTimeout(this.skipTheGap_.bind(this),difference*1e3,currentTime);return true;}return false;};_proto.afterSeekableWindow_=function afterSeekableWindow_(seekable3,currentTime,playlist,allowSeeksWithinUnsafeLiveWindow){if(allowSeeksWithinUnsafeLiveWindow===void 0){allowSeeksWithinUnsafeLiveWindow=false;}if(!seekable3.length){return false;}var allowedEnd=seekable3.end(seekable3.length-1)+SAFE_TIME_DELTA;var isLive=!playlist.endList;if(isLive&&allowSeeksWithinUnsafeLiveWindow){allowedEnd=seekable3.end(seekable3.length-1)+playlist.targetDuration*3;}if(currentTime>allowedEnd){return true;}return false;};_proto.beforeSeekableWindow_=function beforeSeekableWindow_(seekable3,currentTime){if(seekable3.length&&seekable3.start(0)>0&&currentTime<seekable3.start(0)-this.liveRangeSafeTimeDelta){return true;}return false;};_proto.videoUnderflow_=function videoUnderflow_(_ref){var videoBuffered=_ref.videoBuffered,audioBuffered=_ref.audioBuffered,currentTime=_ref.currentTime;if(!videoBuffered){return;}var gap;if(videoBuffered.length&&audioBuffered.length){var lastVideoRange=findRange(videoBuffered,currentTime-3);var videoRange=findRange(videoBuffered,currentTime);var audioRange=findRange(audioBuffered,currentTime);if(audioRange.length&&!videoRange.length&&lastVideoRange.length){gap={start:lastVideoRange.end(0),end:audioRange.end(0)};}}else{var nextRange=findNextRange(videoBuffered,currentTime);if(!nextRange.length){gap=this.gapFromVideoUnderflow_(videoBuffered,currentTime);}}if(gap){this.logger_("Encountered a gap in video from "+gap.start+" to "+gap.end+". "+("Seeking to current time "+currentTime));return true;}return false;};_proto.skipTheGap_=function skipTheGap_(scheduledCurrentTime){var buffered=this.tech_.buffered();var currentTime=this.tech_.currentTime();var nextRange=findNextRange(buffered,currentTime);this.cancelTimer_();if(nextRange.length===0||currentTime!==scheduledCurrentTime){return;}this.logger_("skipTheGap_:","currentTime:",currentTime,"scheduled currentTime:",scheduledCurrentTime,"nextRange start:",nextRange.start(0));this.tech_.setCurrentTime(nextRange.start(0)+TIME_FUDGE_FACTOR);this.tech_.trigger({type:"usage",name:"vhs-gap-skip"});this.tech_.trigger({type:"usage",name:"hls-gap-skip"});};_proto.gapFromVideoUnderflow_=function gapFromVideoUnderflow_(buffered,currentTime){var gaps=findGaps(buffered);for(var i=0;i<gaps.length;i++){var start2=gaps.start(i);var end=gaps.end(i);if(currentTime-start2<4&&currentTime-start2>2){return{start:start2,end:end};}}return null;};return PlaybackWatcher2;}();var defaultOptions={errorInterval:30,getSource:function getSource(next){var tech=this.tech({IWillNotUseThisInPlugins:true});var sourceObj=tech.currentSource_||this.currentSource();return next(sourceObj);}};var initPlugin=function initPlugin2(player2,options){var lastCalled=0;var seekTo=0;var localOptions=videojs.mergeOptions(defaultOptions,options);player2.ready(function(){player2.trigger({type:"usage",name:"vhs-error-reload-initialized"});player2.trigger({type:"usage",name:"hls-error-reload-initialized"});});var loadedMetadataHandler=function loadedMetadataHandler2(){if(seekTo){player2.currentTime(seekTo);}};var setSource2=function setSource3(sourceObj){if(sourceObj===null||sourceObj===void 0){return;}seekTo=player2.duration()!==Infinity&&player2.currentTime()||0;player2.one("loadedmetadata",loadedMetadataHandler);player2.src(sourceObj);player2.trigger({type:"usage",name:"vhs-error-reload"});player2.trigger({type:"usage",name:"hls-error-reload"});player2.play();};var errorHandler=function errorHandler2(){if(Date.now()-lastCalled<localOptions.errorInterval*1e3){player2.trigger({type:"usage",name:"vhs-error-reload-canceled"});player2.trigger({type:"usage",name:"hls-error-reload-canceled"});return;}if(!localOptions.getSource||typeof localOptions.getSource!=="function"){videojs.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!");return;}lastCalled=Date.now();return localOptions.getSource.call(player2,setSource2);};var cleanupEvents=function cleanupEvents2(){player2.off("loadedmetadata",loadedMetadataHandler);player2.off("error",errorHandler);player2.off("dispose",cleanupEvents2);};var reinitPlugin=function reinitPlugin2(newOptions){cleanupEvents();initPlugin2(player2,newOptions);};player2.on("error",errorHandler);player2.on("dispose",cleanupEvents);player2.reloadSourceOnError=reinitPlugin;};var reloadSourceOnError=function reloadSourceOnError2(options){initPlugin(this,options);};var version$4="2.14.2";var version$3="6.0.1";var version$2="0.21.1";var version$1="4.7.1";var version="3.1.3";var Vhs={PlaylistLoader:PlaylistLoader,Playlist:Playlist,utils:utils,STANDARD_PLAYLIST_SELECTOR:lastBandwidthSelector,INITIAL_PLAYLIST_SELECTOR:lowestBitrateCompatibleVariantSelector,lastBandwidthSelector:lastBandwidthSelector,movingAverageBandwidthSelector:movingAverageBandwidthSelector,comparePlaylistBandwidth:comparePlaylistBandwidth,comparePlaylistResolution:comparePlaylistResolution,xhr:xhrFactory()};Object.keys(Config).forEach(function(prop){Object.defineProperty(Vhs,prop,{get:function get7(){videojs.log.warn("using Vhs."+prop+" is UNSAFE be sure you know what you are doing");return Config[prop];},set:function set4(value){videojs.log.warn("using Vhs."+prop+" is UNSAFE be sure you know what you are doing");if(typeof value!=="number"||value<0){videojs.log.warn("value of Vhs."+prop+" must be greater than or equal to 0");return;}Config[prop]=value;}});});var LOCAL_STORAGE_KEY="videojs-vhs";var handleVhsMediaChange=function handleVhsMediaChange2(qualityLevels,playlistLoader){var newPlaylist=playlistLoader.media();var selectedIndex=-1;for(var i=0;i<qualityLevels.length;i++){if(qualityLevels[i].id===newPlaylist.id){selectedIndex=i;break;}}qualityLevels.selectedIndex_=selectedIndex;qualityLevels.trigger({selectedIndex:selectedIndex,type:"change"});};var handleVhsLoadedMetadata=function handleVhsLoadedMetadata2(qualityLevels,vhs){vhs.representations().forEach(function(rep){qualityLevels.addQualityLevel(rep);});handleVhsMediaChange(qualityLevels,vhs.playlists);};Vhs.canPlaySource=function(){return videojs.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.");};var emeKeySystems=function emeKeySystems2(keySystemOptions,mainPlaylist,audioPlaylist){if(!keySystemOptions){return keySystemOptions;}var codecs={};if(mainPlaylist&&mainPlaylist.attributes&&mainPlaylist.attributes.CODECS){codecs=unwrapCodecList(parseCodecs(mainPlaylist.attributes.CODECS));}if(audioPlaylist&&audioPlaylist.attributes&&audioPlaylist.attributes.CODECS){codecs.audio=audioPlaylist.attributes.CODECS;}var videoContentType=getMimeForCodec(codecs.video);var audioContentType=getMimeForCodec(codecs.audio);var keySystemContentTypes={};for(var keySystem in keySystemOptions){keySystemContentTypes[keySystem]={};if(audioContentType){keySystemContentTypes[keySystem].audioContentType=audioContentType;}if(videoContentType){keySystemContentTypes[keySystem].videoContentType=videoContentType;}if(mainPlaylist.contentProtection&&mainPlaylist.contentProtection[keySystem]&&mainPlaylist.contentProtection[keySystem].pssh){keySystemContentTypes[keySystem].pssh=mainPlaylist.contentProtection[keySystem].pssh;}if(typeof keySystemOptions[keySystem]==="string"){keySystemContentTypes[keySystem].url=keySystemOptions[keySystem];}}return videojs.mergeOptions(keySystemOptions,keySystemContentTypes);};var getAllPsshKeySystemsOptions=function getAllPsshKeySystemsOptions2(playlists,keySystems){return playlists.reduce(function(keySystemsArr,playlist){if(!playlist.contentProtection){return keySystemsArr;}var keySystemsOptions=keySystems.reduce(function(keySystemsObj,keySystem){var keySystemOptions=playlist.contentProtection[keySystem];if(keySystemOptions&&keySystemOptions.pssh){keySystemsObj[keySystem]={pssh:keySystemOptions.pssh};}return keySystemsObj;},{});if(Object.keys(keySystemsOptions).length){keySystemsArr.push(keySystemsOptions);}return keySystemsArr;},[]);};var waitForKeySessionCreation=function waitForKeySessionCreation2(_ref){var player2=_ref.player,sourceKeySystems=_ref.sourceKeySystems,audioMedia=_ref.audioMedia,mainPlaylists=_ref.mainPlaylists;if(!player2.eme.initializeMediaKeys){return Promise.resolve();}var playlists=audioMedia?mainPlaylists.concat([audioMedia]):mainPlaylists;var keySystemsOptionsArr=getAllPsshKeySystemsOptions(playlists,Object.keys(sourceKeySystems));var initializationFinishedPromises=[];var keySessionCreatedPromises=[];keySystemsOptionsArr.forEach(function(keySystemsOptions){keySessionCreatedPromises.push(new Promise(function(resolve,reject){player2.tech_.one("keysessioncreated",resolve);}));initializationFinishedPromises.push(new Promise(function(resolve,reject){player2.eme.initializeMediaKeys({keySystems:keySystemsOptions},function(err){if(err){reject(err);return;}resolve();});}));});return Promise.race([Promise.all(initializationFinishedPromises),Promise.race(keySessionCreatedPromises)]);};var setupEmeOptions=function setupEmeOptions2(_ref2){var player2=_ref2.player,sourceKeySystems=_ref2.sourceKeySystems,media=_ref2.media,audioMedia=_ref2.audioMedia;var sourceOptions=emeKeySystems(sourceKeySystems,media,audioMedia);if(!sourceOptions){return false;}player2.currentSource().keySystems=sourceOptions;if(sourceOptions&&!player2.eme){videojs.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin");return false;}return true;};var getVhsLocalStorage=function getVhsLocalStorage2(){if(!import_window6["default"].localStorage){return null;}var storedObject=import_window6["default"].localStorage.getItem(LOCAL_STORAGE_KEY);if(!storedObject){return null;}try{return JSON.parse(storedObject);}catch(e){return null;}};var updateVhsLocalStorage=function updateVhsLocalStorage2(options){if(!import_window6["default"].localStorage){return false;}var objectToStore=getVhsLocalStorage();objectToStore=objectToStore?videojs.mergeOptions(objectToStore,options):options;try{import_window6["default"].localStorage.setItem(LOCAL_STORAGE_KEY,JSON.stringify(objectToStore));}catch(e){return false;}return objectToStore;};var expandDataUri=function expandDataUri2(dataUri){if(dataUri.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")===0){return JSON.parse(dataUri.substring(dataUri.indexOf(",")+1));}return dataUri;};Vhs.supportsNativeHls=function(){if(!import_document["default"]||!import_document["default"].createElement){return false;}var video=import_document["default"].createElement("video");if(!videojs.getTech("Html5").isSupported()){return false;}var canPlay=["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"];return canPlay.some(function(canItPlay){return /maybe|probably/i.test(video.canPlayType(canItPlay));});}();Vhs.supportsNativeDash=function(){if(!import_document["default"]||!import_document["default"].createElement||!videojs.getTech("Html5").isSupported()){return false;}return /maybe|probably/i.test(import_document["default"].createElement("video").canPlayType("application/dash+xml"));}();Vhs.supportsTypeNatively=function(type2){if(type2==="hls"){return Vhs.supportsNativeHls;}if(type2==="dash"){return Vhs.supportsNativeDash;}return false;};Vhs.isSupported=function(){return videojs.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.");};var Component=videojs.getComponent("Component");var VhsHandler=/* @__PURE__ */function(_Component){_inheritsLoose3(VhsHandler2,_Component);function VhsHandler2(source,tech,options){var _this;_this=_Component.call(this,tech,videojs.mergeOptions(options.hls,options.vhs))||this;if(options.hls&&Object.keys(options.hls).length){videojs.log.warn("Using hls options is deprecated. Please rename `hls` to `vhs` in your options object.");}if(typeof options.initialBandwidth==="number"){_this.options_.bandwidth=options.initialBandwidth;}_this.logger_=logger("VhsHandler");if(tech.options_&&tech.options_.playerId){var _player=videojs(tech.options_.playerId);if(!_player.hasOwnProperty("hls")){Object.defineProperty(_player,"hls",{get:function get7(){videojs.log.warn("player.hls is deprecated. Use player.tech().vhs instead.");tech.trigger({type:"usage",name:"hls-player-access"});return _assertThisInitialized3(_this);},configurable:true});}if(!_player.hasOwnProperty("vhs")){Object.defineProperty(_player,"vhs",{get:function get7(){videojs.log.warn("player.vhs is deprecated. Use player.tech().vhs instead.");tech.trigger({type:"usage",name:"vhs-player-access"});return _assertThisInitialized3(_this);},configurable:true});}if(!_player.hasOwnProperty("dash")){Object.defineProperty(_player,"dash",{get:function get7(){videojs.log.warn("player.dash is deprecated. Use player.tech().vhs instead.");return _assertThisInitialized3(_this);},configurable:true});}_this.player_=_player;}_this.tech_=tech;_this.source_=source;_this.stats={};_this.ignoreNextSeekingEvent_=false;_this.setOptions_();if(_this.options_.overrideNative&&tech.overrideNativeAudioTracks&&tech.overrideNativeVideoTracks){tech.overrideNativeAudioTracks(true);tech.overrideNativeVideoTracks(true);}else if(_this.options_.overrideNative&&(tech.featuresNativeVideoTracks||tech.featuresNativeAudioTracks)){throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");}_this.on(import_document["default"],["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(event){var fullscreenElement=import_document["default"].fullscreenElement||import_document["default"].webkitFullscreenElement||import_document["default"].mozFullScreenElement||import_document["default"].msFullscreenElement;if(fullscreenElement&&fullscreenElement.contains(_this.tech_.el())){_this.masterPlaylistController_.fastQualityChange_();}else{_this.masterPlaylistController_.checkABR_();}});_this.on(_this.tech_,"seeking",function(){if(this.ignoreNextSeekingEvent_){this.ignoreNextSeekingEvent_=false;return;}this.setCurrentTime(this.tech_.currentTime());});_this.on(_this.tech_,"error",function(){if(this.tech_.error()&&this.masterPlaylistController_){this.masterPlaylistController_.pauseLoading();}});_this.on(_this.tech_,"play",_this.play);return _this;}var _proto=VhsHandler2.prototype;_proto.setOptions_=function setOptions_(){var _this2=this;this.options_.withCredentials=this.options_.withCredentials||false;this.options_.handleManifestRedirects=this.options_.handleManifestRedirects===false?false:true;this.options_.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions===false?false:true;this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||false;this.options_.smoothQualityChange=this.options_.smoothQualityChange||false;this.options_.useBandwidthFromLocalStorage=typeof this.source_.useBandwidthFromLocalStorage!=="undefined"?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||false;this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||false;this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||false;this.options_.customTagParsers=this.options_.customTagParsers||[];this.options_.customTagMappers=this.options_.customTagMappers||[];this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||false;if(typeof this.options_.blacklistDuration!=="number"){this.options_.blacklistDuration=5*60;}if(typeof this.options_.bandwidth!=="number"){if(this.options_.useBandwidthFromLocalStorage){var storedObject=getVhsLocalStorage();if(storedObject&&storedObject.bandwidth){this.options_.bandwidth=storedObject.bandwidth;this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"});this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"});}if(storedObject&&storedObject.throughput){this.options_.throughput=storedObject.throughput;this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"});this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"});}}}if(typeof this.options_.bandwidth!=="number"){this.options_.bandwidth=Config.INITIAL_BANDWIDTH;}this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===Config.INITIAL_BANDWIDTH;["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange","customTagParsers","customTagMappers","handleManifestRedirects","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","experimentalBufferBasedABR","liveRangeSafeTimeDelta","experimentalLLHLS","useNetworkInformationApi","useDtsForTimestampOffset","experimentalExactManifestTimings","experimentalLeastPixelDiffSelector"].forEach(function(option){if(typeof _this2.source_[option]!=="undefined"){_this2.options_[option]=_this2.source_[option];}});this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions;this.useDevicePixelRatio=this.options_.useDevicePixelRatio;};_proto.src=function src(_src,type2){var _this3=this;if(!_src){return;}this.setOptions_();this.options_.src=expandDataUri(this.source_.src);this.options_.tech=this.tech_;this.options_.externVhs=Vhs;this.options_.sourceType=simpleTypeFromSourceType(type2);this.options_.seekTo=function(time){_this3.tech_.setCurrentTime(time);};if(this.options_.smoothQualityChange){videojs.log.warn("smoothQualityChange is deprecated and will be removed in the next major version");}this.masterPlaylistController_=new MasterPlaylistController(this.options_);var playbackWatcherOptions=videojs.mergeOptions({liveRangeSafeTimeDelta:SAFE_TIME_DELTA},this.options_,{seekable:function seekable3(){return _this3.seekable();},media:function media(){return _this3.masterPlaylistController_.media();},masterPlaylistController:this.masterPlaylistController_});this.playbackWatcher_=new PlaybackWatcher(playbackWatcherOptions);this.masterPlaylistController_.on("error",function(){var player2=videojs.players[_this3.tech_.options_.playerId];var error=_this3.masterPlaylistController_.error;if(_typeof(error)==="object"&&!error.code){error.code=3;}else if(typeof error==="string"){error={message:error,code:3};}player2.error(error);});var defaultSelector=this.options_.experimentalBufferBasedABR?Vhs.movingAverageBandwidthSelector(0.55):Vhs.STANDARD_PLAYLIST_SELECTOR;this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):defaultSelector.bind(this);this.masterPlaylistController_.selectInitialPlaylist=Vhs.INITIAL_PLAYLIST_SELECTOR.bind(this);this.playlists=this.masterPlaylistController_.masterPlaylistLoader_;this.mediaSource=this.masterPlaylistController_.mediaSource;Object.defineProperties(this,{selectPlaylist:{get:function get7(){return this.masterPlaylistController_.selectPlaylist;},set:function set4(selectPlaylist){this.masterPlaylistController_.selectPlaylist=selectPlaylist.bind(this);}},throughput:{get:function get7(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate;},set:function set4(throughput){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=throughput;this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1;}},bandwidth:{get:function get7(){var playerBandwidthEst=this.masterPlaylistController_.mainSegmentLoader_.bandwidth;var networkInformation=import_window6["default"].navigator.connection||import_window6["default"].navigator.mozConnection||import_window6["default"].navigator.webkitConnection;var tenMbpsAsBitsPerSecond=1e7;if(this.options_.useNetworkInformationApi&&networkInformation){var networkInfoBandwidthEstBitsPerSec=networkInformation.downlink*1e3*1e3;if(networkInfoBandwidthEstBitsPerSec>=tenMbpsAsBitsPerSecond&&playerBandwidthEst>=tenMbpsAsBitsPerSecond){playerBandwidthEst=Math.max(playerBandwidthEst,networkInfoBandwidthEstBitsPerSec);}else{playerBandwidthEst=networkInfoBandwidthEstBitsPerSec;}}return playerBandwidthEst;},set:function set4(bandwidth2){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=bandwidth2;this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0};}},systemBandwidth:{get:function get7(){var invBandwidth=1/(this.bandwidth||1);var invThroughput;if(this.throughput>0){invThroughput=1/this.throughput;}else{invThroughput=0;}var systemBitrate=Math.floor(1/(invBandwidth+invThroughput));return systemBitrate;},set:function set4(){videojs.log.error('The "systemBandwidth" property is read-only');}}});if(this.options_.bandwidth){this.bandwidth=this.options_.bandwidth;}if(this.options_.throughput){this.throughput=this.options_.throughput;}Object.defineProperties(this.stats,{bandwidth:{get:function get7(){return _this3.bandwidth||0;},enumerable:true},mediaRequests:{get:function get7(){return _this3.masterPlaylistController_.mediaRequests_()||0;},enumerable:true},mediaRequestsAborted:{get:function get7(){return _this3.masterPlaylistController_.mediaRequestsAborted_()||0;},enumerable:true},mediaRequestsTimedout:{get:function get7(){return _this3.masterPlaylistController_.mediaRequestsTimedout_()||0;},enumerable:true},mediaRequestsErrored:{get:function get7(){return _this3.masterPlaylistController_.mediaRequestsErrored_()||0;},enumerable:true},mediaTransferDuration:{get:function get7(){return _this3.masterPlaylistController_.mediaTransferDuration_()||0;},enumerable:true},mediaBytesTransferred:{get:function get7(){return _this3.masterPlaylistController_.mediaBytesTransferred_()||0;},enumerable:true},mediaSecondsLoaded:{get:function get7(){return _this3.masterPlaylistController_.mediaSecondsLoaded_()||0;},enumerable:true},mediaAppends:{get:function get7(){return _this3.masterPlaylistController_.mediaAppends_()||0;},enumerable:true},mainAppendsToLoadedData:{get:function get7(){return _this3.masterPlaylistController_.mainAppendsToLoadedData_()||0;},enumerable:true},audioAppendsToLoadedData:{get:function get7(){return _this3.masterPlaylistController_.audioAppendsToLoadedData_()||0;},enumerable:true},appendsToLoadedData:{get:function get7(){return _this3.masterPlaylistController_.appendsToLoadedData_()||0;},enumerable:true},timeToLoadedData:{get:function get7(){return _this3.masterPlaylistController_.timeToLoadedData_()||0;},enumerable:true},buffered:{get:function get7(){return timeRangesToArray(_this3.tech_.buffered());},enumerable:true},currentTime:{get:function get7(){return _this3.tech_.currentTime();},enumerable:true},currentSource:{get:function get7(){return _this3.tech_.currentSource_;},enumerable:true},currentTech:{get:function get7(){return _this3.tech_.name_;},enumerable:true},duration:{get:function get7(){return _this3.tech_.duration();},enumerable:true},master:{get:function get7(){return _this3.playlists.master;},enumerable:true},playerDimensions:{get:function get7(){return _this3.tech_.currentDimensions();},enumerable:true},seekable:{get:function get7(){return timeRangesToArray(_this3.tech_.seekable());},enumerable:true},timestamp:{get:function get7(){return Date.now();},enumerable:true},videoPlaybackQuality:{get:function get7(){return _this3.tech_.getVideoPlaybackQuality();},enumerable:true}});this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_));this.tech_.on("bandwidthupdate",function(){if(_this3.options_.useBandwidthFromLocalStorage){updateVhsLocalStorage({bandwidth:_this3.bandwidth,throughput:Math.round(_this3.throughput)});}});this.masterPlaylistController_.on("selectedinitialmedia",function(){renditionSelectionMixin(_this3);});this.masterPlaylistController_.sourceUpdater_.on("createdsourcebuffers",function(){_this3.setupEme_();});this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress");});this.on(this.masterPlaylistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=true;});this.setupQualityLevels_();if(!this.tech_.el()){return;}this.mediaSourceUrl_=import_window6["default"].URL.createObjectURL(this.masterPlaylistController_.mediaSource);this.tech_.src(this.mediaSourceUrl_);};_proto.createKeySessions_=function createKeySessions_(){var _this4=this;var audioPlaylistLoader=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation");waitForKeySessionCreation({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:audioPlaylistLoader&&audioPlaylistLoader.media(),mainPlaylists:this.playlists.master.playlists}).then(function(){_this4.logger_("created EME key session");_this4.masterPlaylistController_.sourceUpdater_.initializedEme();})["catch"](function(err){_this4.logger_("error while creating EME key session",err);_this4.player_.error({message:"Failed to initialize media keys for EME",code:3});});};_proto.handleWaitingForKey_=function handleWaitingForKey_(){this.logger_("waitingforkey fired, attempting to create any new key sessions");this.createKeySessions_();};_proto.setupEme_=function setupEme_(){var _this5=this;var audioPlaylistLoader=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader;var didSetupEmeOptions=setupEmeOptions({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:audioPlaylistLoader&&audioPlaylistLoader.media()});this.player_.tech_.on("keystatuschange",function(e){if(e.status==="output-restricted"){_this5.masterPlaylistController_.blacklistCurrentPlaylist({playlist:_this5.masterPlaylistController_.media(),message:"DRM keystatus changed to "+e.status+". Playlist will fail to play. Check for HDCP content.",blacklistDuration:Infinity});}});this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this);this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_);if(videojs.browser.IE_VERSION===11||!didSetupEmeOptions){this.masterPlaylistController_.sourceUpdater_.initializedEme();return;}this.createKeySessions_();};_proto.setupQualityLevels_=function setupQualityLevels_(){var _this6=this;var player2=videojs.players[this.tech_.options_.playerId];if(!player2||!player2.qualityLevels||this.qualityLevels_){return;}this.qualityLevels_=player2.qualityLevels();this.masterPlaylistController_.on("selectedinitialmedia",function(){handleVhsLoadedMetadata(_this6.qualityLevels_,_this6);});this.playlists.on("mediachange",function(){handleVhsMediaChange(_this6.qualityLevels_,_this6.playlists);});};VhsHandler2.version=function version$52(){return{"@videojs/http-streaming":version$4,"mux.js":version$3,"mpd-parser":version$2,"m3u8-parser":version$1,"aes-decrypter":version};};_proto.version=function version2(){return this.constructor.version();};_proto.canChangeType=function canChangeType(){return SourceUpdater.canChangeType();};_proto.play=function play(){this.masterPlaylistController_.play();};_proto.setCurrentTime=function setCurrentTime(currentTime){this.masterPlaylistController_.setCurrentTime(currentTime);};_proto.duration=function duration5(){return this.masterPlaylistController_.duration();};_proto.seekable=function seekable3(){return this.masterPlaylistController_.seekable();};_proto.dispose=function dispose(){if(this.playbackWatcher_){this.playbackWatcher_.dispose();}if(this.masterPlaylistController_){this.masterPlaylistController_.dispose();}if(this.qualityLevels_){this.qualityLevels_.dispose();}if(this.player_){delete this.player_.vhs;delete this.player_.dash;delete this.player_.hls;}if(this.tech_&&this.tech_.vhs){delete this.tech_.vhs;}if(this.tech_){delete this.tech_.hls;}if(this.mediaSourceUrl_&&import_window6["default"].URL.revokeObjectURL){import_window6["default"].URL.revokeObjectURL(this.mediaSourceUrl_);this.mediaSourceUrl_=null;}if(this.tech_){this.tech_.off("waitingforkey",this.handleWaitingForKey_);}_Component.prototype.dispose.call(this);};_proto.convertToProgramTime=function convertToProgramTime(time,callback2){return getProgramTime({playlist:this.masterPlaylistController_.media(),time:time,callback:callback2});};_proto.seekToProgramTime=function seekToProgramTime$1(programTime,callback2,pauseAfterSeek,retryCount){if(pauseAfterSeek===void 0){pauseAfterSeek=true;}if(retryCount===void 0){retryCount=2;}return seekToProgramTime({programTime:programTime,playlist:this.masterPlaylistController_.media(),retryCount:retryCount,pauseAfterSeek:pauseAfterSeek,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:callback2});};return VhsHandler2;}(Component);var VhsSourceHandler={name:"videojs-http-streaming",VERSION:version$4,canHandleSource:function canHandleSource(srcObj,options){if(options===void 0){options={};}var localOptions=videojs.mergeOptions(videojs.options,options);return VhsSourceHandler.canPlayType(srcObj.type,localOptions);},handleSource:function handleSource(source,tech,options){if(options===void 0){options={};}var localOptions=videojs.mergeOptions(videojs.options,options);tech.vhs=new VhsHandler(source,tech,localOptions);if(!videojs.hasOwnProperty("hls")){Object.defineProperty(tech,"hls",{get:function get7(){videojs.log.warn("player.tech().hls is deprecated. Use player.tech().vhs instead.");return tech.vhs;},configurable:true});}tech.vhs.xhr=xhrFactory();tech.vhs.src(source.src,source.type);return tech.vhs;},canPlayType:function canPlayType2(type2,options){if(options===void 0){options={};}var _videojs$mergeOptions=videojs.mergeOptions(videojs.options,options),_videojs$mergeOptions2=_videojs$mergeOptions.vhs;_videojs$mergeOptions2=_videojs$mergeOptions2===void 0?{}:_videojs$mergeOptions2;var _videojs$mergeOptions3=_videojs$mergeOptions2.overrideNative,overrideNative=_videojs$mergeOptions3===void 0?!videojs.browser.IS_ANY_SAFARI:_videojs$mergeOptions3,_videojs$mergeOptions4=_videojs$mergeOptions.hls;_videojs$mergeOptions4=_videojs$mergeOptions4===void 0?{}:_videojs$mergeOptions4;var _videojs$mergeOptions5=_videojs$mergeOptions4.overrideNative,legacyOverrideNative=_videojs$mergeOptions5===void 0?false:_videojs$mergeOptions5;var supportedType=simpleTypeFromSourceType(type2);var canUseMsePlayback=supportedType&&(!Vhs.supportsTypeNatively(supportedType)||legacyOverrideNative||overrideNative);return canUseMsePlayback?"maybe":"";}};var supportsNativeMediaSources=function supportsNativeMediaSources2(){return browserSupportsCodec("avc1.4d400d,mp4a.40.2");};if(supportsNativeMediaSources()){videojs.getTech("Html5").registerSourceHandler(VhsSourceHandler,0);}videojs.VhsHandler=VhsHandler;Object.defineProperty(videojs,"HlsHandler",{get:function get4(){videojs.log.warn("videojs.HlsHandler is deprecated. Use videojs.VhsHandler instead.");return VhsHandler;},configurable:true});videojs.VhsSourceHandler=VhsSourceHandler;Object.defineProperty(videojs,"HlsSourceHandler",{get:function get5(){videojs.log.warn("videojs.HlsSourceHandler is deprecated. Use videojs.VhsSourceHandler instead.");return VhsSourceHandler;},configurable:true});videojs.Vhs=Vhs;Object.defineProperty(videojs,"Hls",{get:function get6(){videojs.log.warn("videojs.Hls is deprecated. Use videojs.Vhs instead.");return Vhs;},configurable:true});if(!videojs.use){videojs.registerComponent("Hls",Vhs);videojs.registerComponent("Vhs",Vhs);}videojs.options.vhs=videojs.options.vhs||{};videojs.options.hls=videojs.options.hls||{};if(!videojs.getPlugin||!videojs.getPlugin("reloadSourceOnError")){registerPlugin2=videojs.registerPlugin||videojs.plugin;registerPlugin2("reloadSourceOnError",reloadSourceOnError);}var registerPlugin2;var video_es_default=videojs;// scripts/video.js
var player=video_es_default("#video-js",{},function onPlayerReady(){video_es_default.log("Your player is ready!");this.play();this.on("ended",function(){video_es_default.log("Awww...over so soon?!");});});// scripts/index.js
gsapWithCSS.registerPlugin(ScrollToPlugin,ScrollTrigger2);gsapWithCSS.registerPlugin(Draggable);var scrollBarInit=function scrollBarInit(){var scroller=document.querySelector(".scroller");var bodyScrollBar=smooth_scrollbar_default.init(scroller,{damping:0.05,delegateTo:document,thumbMinSize:0,alwaysShowTracks:false});ScrollTrigger2.scrollerProxy(".scroller",{scrollTop:function scrollTop(value){if(arguments.length){bodyScrollBar.scrollTop=value;}return bodyScrollBar.scrollTop;}});bodyScrollBar.addListener(ScrollTrigger2.update);ScrollTrigger2.defaults({scroller:scroller});};var smoothScrollTrigger=function smoothScrollTrigger(containerId,videoClass){var video=document.querySelector(videoClass);var src=video.currentSrc||video.src;function once(el,event,fn,opts){var onceFn=function onceFn(e){el.removeEventListener(event,onceFn);fn.apply(this,arguments);};el.addEventListener(event,onceFn,opts);return onceFn;}once(document.documentElement,"touchstart",function(e){video.play();video.pause();});var tl=gsapWithCSS.timeline({scrollTrigger:{trigger:containerId,start:"center center",scrub:1,end:"+="+window.innerHeight*6,pin:true}});once(video,"loadedmetadata",function(){tl.fromTo(video,{currentTime:0},{currentTime:video.duration||1});});setTimeout(function(){if(window["fetch"]){fetch(src).then(function(response){return response.blob();}).then(function(response){var blobURL=URL.createObjectURL(response);var t2=video.currentTime;once(document.documentElement,"touchstart",function(e){video.play();video.pause();});video.setAttribute("src",blobURL);video.currentTime=t2+1e-3;});}},1e3);};var pin=function pin(options){var container=options.container,toHideContaier=options.toHideContaier,fromHiddenContainer=options.fromHiddenContainer,pin2=options.pin,pinSpacing=options.pinSpacing;gsapWithCSS.to("".concat(container," ").concat(toHideContaier),{opacity:0,y:-200,scrollTrigger:{trigger:container,scrub:true,pin:pin2!==void 0?pin2:true,pinSpacing:pinSpacing!==void 0?pinSpacing:true,start:"center center",end:"+="+window.innerHeight*2}});};var headerHeight=document.querySelector(".header").offsetHeight;var pageWrapper=document.querySelector(".page-wrapper");var equipments=document.querySelector(".equipments");var greeting=document.querySelector(".greeting");if(window.matchMedia("(max-width: 1024px)").matches){var video1=document.querySelector(".videocard-first__video");var video2=document.querySelector(".videocard-second__video");var headerHeight2=document.querySelector(".header-mobile").offsetHeight;var hamburgerMenu=document.getElementById("hamburger-image");var navMain=document.getElementById("nav-main");var sectionContent=document.querySelector(".section-content");video1.autoPlay=true;video2.autoPlay=true;video1.loop=true;video2.loop=true;video1.play();video2.play();var menuAnimation=gsapWithCSS.timeline({paused:true});var menuAnimationBack=gsapWithCSS.timeline({paused:true,reversed:true});hamburgerMenu.addEventListener("click",function(){if(hamburgerMenu.classList.contains("hamburger--active")){hamburgerMenu.classList.remove("hamburger--active");sectionContent.style.display="none";menuAnimationBack.to(navMain,0.55,{width:0,className:"+=skewback",ease:"power4.easeIn",transform:"translate3d(0,0,0)"},0);menuAnimationBack.play(0);}else{hamburgerMenu.classList.add("hamburger--active");sectionContent.style.display="flex";menuAnimation.to(navMain,0.4,{width:"100%",className:"+=vertical",ease:"power2.easeInOut",transform:"translate3d(0,0,0)"},0);menuAnimation.play(0);}});pageWrapper.style.paddingTop=headerHeight2+30+"px";}else{var _pin;scrollBarInit();pageWrapper.style.paddingTop=headerHeight+30+"px";equipments.style.paddingTop=headerHeight+"px";greeting.style.paddingTop=headerHeight+"px";var orders=document.querySelectorAll(".orders");pin({container:".main-container",toHideContaier:"._scroll-fade-out"});smoothScrollTrigger("#videocard-first",".videocard-first__video");pin({container:".details--description",toHideContaier:".description--details"});smoothScrollTrigger("#videocard-second",".videocard-second__video");orders.forEach(function(order,i){return pin({container:"._orders--".concat(i+1),toHideContaier:"._scroll-fade-out",pinSpacing:i!==orders.length-1?false:true});});pin((_pin={container:".equipments",toHideContaier:"._scroll-fade-out"},_defineProperty(_pin,"toHideContaier",".greeting"),_defineProperty(_pin,"pin",false),_pin));var greetingAnimatedItems=document.querySelectorAll("body, .header");var tl=gsapWithCSS.timeline({scrollTrigger:{trigger:".equipments",scrub:1,start:"bottom bottom"}});greetingAnimatedItems.forEach(function(item){tl.add("start",1);tl.to("._header-gray",{borderBottomColor:"#DADADA",background:"#fff"},"start");tl.to("._header-wht",{background:"#fff",border:"1px solid #DADADA"},"start");tl.to(".header__links-item",{className:"header__links-item header__links-item--wht"},"start");tl.to("._svg-coloring",{fill:"#000",color:"#000"},"start");tl.to("._greeting-color-anim",{fill:"#000",color:"#000"},"start");tl.to(item,item.tagName==="BODY"?{background:"#fff"}:{color:"#000"});});pin({container:".details--questions",toHideContaier:".description"});gsapWithCSS.to(".swiper-container",{opacity:0,y:-200,scrollTrigger:{trigger:".swiper-container",scrub:true,start:"top top",pin:true,end:"+="+window.innerHeight*2}});}new Swiper(".mySwiper",{effect:"coverflow",grabCursor:true,autoPlay:true,loop:true,slidesPerView:3,coverflowEffect:{rotate:0,stretch:1,depth:100,modifier:1,slideShadows:true},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}});var detailsButtons=document.querySelectorAll(".description--details");var togglingAccordions=function togglingAccordions(plusIconClassNames,minusIconClassNames){detailsButtons.forEach(function(btn){var detailsContent=btn.getElementsByClassName("details__content")[1];var detailsIcon=btn.getElementsByClassName("details__toggle-icon--plus")[0];btn.addEventListener("click",function(e){var detailsTextContainer=detailsContent.querySelector(".details__text");var detailsTextParagraph=detailsTextContainer.querySelector("p");detailsContent.classList.toggle("details__content--active");detailsIcon&&detailsIcon.classList.toggle("details__toggle-icon--minus");if(detailsTextContainer.style.maxHeight){detailsContent.style.maxHeight=null;detailsTextContainer.style.maxHeight=null;}else{detailsContent.style.maxHeight="100%";detailsTextContainer.style.maxHeight=detailsTextParagraph.scrollHeight+"px";}});});};togglingAccordions("details__toggle-icon--plus","details__toggle-icon--minus");var videos=document.querySelectorAll(".embed-responsive-item");videos.forEach(function(video){video.addEventListener("click",function(e){console.log(e.currentTarget);});});})();/*!
 * CSSPlugin 3.10.4
 * https://greensock.com
 *
 * Copyright 2008-2022, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/ /*!
 * Draggable 3.10.4
 * https://greensock.com
 *
 * @license Copyright 2008-2022, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
 */ /*!
 * GSAP 3.10.4
 * https://greensock.com
 *
 * @license Copyright 2008-2022, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/ /*!
 * Observer 3.10.4
 * https://greensock.com
 *
 * @license Copyright 2008-2022, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/ /*!
 * Programatically add the following
 */ /*!
 * ScrollToPlugin 3.10.4
 * https://greensock.com
 *
 * @license Copyright 2008-2022, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/ /*!
 * ScrollTrigger 3.10.4
 * https://greensock.com
 *
 * @license Copyright 2008-2022, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/ /*!
 * matrix 3.10.4
 * https://greensock.com
 *
 * Copyright 2008-2022, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/ /*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */ /*! @name @videojs/http-streaming @version 2.14.2 @license Apache-2.0 */ /*! @name aes-decrypter @version 3.1.3 @license Apache-2.0 */ /*! @name m3u8-parser @version 4.7.1 @license Apache-2.0 */ /*! @name mpd-parser @version 0.21.1 @license Apache-2.0 */ /*! @name pkcs7 @version 1.0.4 @license Apache-2.0 */ /**
 * @license
 * Video.js 7.19.2 <http://videojs.com/>
 * Copyright Brightcove, Inc. <https://www.brightcove.com/>
 * Available under Apache License Version 2.0
 * <https://github.com/videojs/video.js/blob/main/LICENSE>
 *
 * Includes vtt.js <https://github.com/mozilla/vtt.js>
 * Available under Apache License Version 2.0
 * <https://github.com/mozilla/vtt.js/blob/main/LICENSE>
 */ /**
 * @license
 * slighly modified parse-headers 2.0.2 <https://github.com/kesla/parse-headers/>
 * Copyright (c) 2014 David Björklund
 * Available under the MIT license
 * <https://github.com/kesla/parse-headers/blob/master/LICENCE>
 */